# GENERAL
is_RICE_loaded = {
    always = yes
}
RICE_basic_is_available_adult_trigger = {
	basic_is_valid_for_yearly_events_trigger = yes
	is_adult = yes
}

RICE_basic_is_available_adult_courtier_even_if_sick_trigger = { # Basically the above, without the landed title requirement
	is_available_ai_adult = yes
}

RICE_is_available_adult_even_if_sick_trigger = { # Without smallpox/bubonic plague requirement
	is_available_healthy_adult = yes
}

RICE_is_greater_sinosphere_culture_trigger = {
    OR = {
        culture_has_east_asian_heritage_pillar_trigger = yes
        culture_has_central_asian_heritage_pillar_trigger = yes
        culture = culture:sogdian
        culture = culture:saka
        culture = culture:jurchen
        culture = {
            any_parent_culture_or_above = {
                OR = {
                    this = culture:sogdian
                    this = culture:saka
                    this = culture:jurchen
                }
            }
        }
    }
}

RICE_is_lesser_sinosphere_culture_trigger = {
	OR = {
        culture = { has_cultural_pillar = heritage_chinese }
        culture = { has_cultural_pillar = heritage_japonic }
        culture = { has_cultural_pillar = heritage_korean }
        culture = { has_cultural_pillar = heritage_buyeo }
        culture = { has_cultural_pillar = heritage_viet }
        culture = { has_cultural_pillar = heritage_tungusic }
        culture = { has_cultural_pillar = heritage_hmongic }
        culture = culture:khitan
        culture = {
            any_parent_culture_or_above = {
				this = culture:khitan
			}
        }
        culture = culture:jurchen
        culture = {
            any_parent_culture_or_above = {
				this = culture:jurchen
			}
        }
	}
}

RICE_is_even_lesser_sinosphere_culture_trigger = {
	OR = {
        culture = { has_cultural_pillar = heritage_chinese }
        culture = { has_cultural_pillar = heritage_japonic }
        culture = { has_cultural_pillar = heritage_korean }
        culture = { has_cultural_pillar = heritage_buyeo }
        culture = { has_cultural_pillar = heritage_viet }
	}
}

RICE_is_even_lesser_sinosphere_non_japanese_culture_trigger = {
	OR = {
        culture = { has_cultural_pillar = heritage_chinese }
        culture = { has_cultural_pillar = heritage_korean }
        culture = { has_cultural_pillar = heritage_buyeo }
        culture = { has_cultural_pillar = heritage_viet }
	}
}


RICE_is_near_eastern_culture_trigger = {
    OR = {
        culture_has_mena_heritage_pillar_trigger = yes
        culture = { has_cultural_pillar = heritage_byzantine }
        culture = { has_cultural_pillar = heritage_caucasian }
        culture = { has_cultural_pillar = heritage_iranian }
        culture = { has_cultural_pillar = heritage_elamite }
    }
}

RICE_is_greater_mena_culture_trigger = {
    OR = {
        culture_has_mena_heritage_pillar_trigger = yes
        culture_has_east_african_heritage_pillar_trigger = yes
        culture = { has_cultural_pillar = heritage_iranian }
        culture = { has_cultural_pillar = heritage_bantu }
        culture = { has_cultural_pillar = heritage_elamite }
        culture = culture:malagasy
        culture = {
            any_parent_culture_or_above = {
				this = culture:malagasy
			}
        }
    }
}

RICE_culture_has_sea_heritage_pillar_trigger = {
	OR = {
		RICE_culture_has_mainland_sea_heritage_pillar_trigger = yes
		RICE_culture_has_island_sea_heritage_pillar_trigger = yes
	}
}

RICE_culture_has_mainland_sea_heritage_pillar_trigger = {
	culture = {
		OR = {
			has_cultural_pillar = heritage_viet
			has_cultural_pillar = heritage_mon_khmer
			has_cultural_pillar = heritage_burman
			#has_cultural_pillar = heritage_austronesian
			has_cultural_pillar = heritage_tai
			has_cultural_pillar = heritage_hmongic
			has_cultural_pillar = heritage_chamic
		}
	}
}

RICE_culture_has_island_sea_heritage_pillar_trigger = {
	culture = {
		OR = {
			has_cultural_pillar = heritage_austronesian
			has_cultural_pillar = heritage_malayic
			has_cultural_pillar = heritage_chamic
		}
	}
}

RICE_is_filipino_culture_trigger = {
	OR = {
		culture = { has_cultural_pillar = heritage_filipino }
        culture = culture:bisayan
        culture = {
            any_parent_culture_or_above = {
				this = culture:bisayan
			}
        }		
        culture = culture:tagalog
        culture = {
            any_parent_culture_or_above = {
				this = culture:tagalog
			}
        }		
        culture = culture:iloko
        culture = {
            any_parent_culture_or_above = {
				this = culture:iloko
			}
        }		
	}
}

RICE_culture_has_american_heritage_pillar_trigger = {
	OR = {
		RICE_culture_has_arctic_heritage_pillar_trigger = yes
		RICE_culture_has_woodland_heritage_pillar_trigger = yes
	}
}

RICE_culture_has_arctic_heritage_pillar_trigger = {
	culture = {
		OR = {
			has_cultural_pillar = heritage_inuit
			has_cultural_pillar = heritage_paleo_inuit
		}
	}
}

RICE_culture_has_woodland_heritage_pillar_trigger = {
	culture = {
		OR = {
			has_cultural_pillar = heritage_algonquian
			has_cultural_pillar = heritage_iroquoian
		}
	}
}
RICE_silk_road_east_asian_culture = {
	OR = {
		culture_has_east_asian_heritage_pillar_trigger = yes
		culture = culture:khitan
	}
}

RICE_silk_road_steppe_culture = {
	culture_has_central_asian_heritage_pillar_trigger = yes
	NOT = { culture = culture:khitan }
}

RICE_silk_road_middle_eastern_culture = {
	OR = {
		culture = { has_cultural_pillar = heritage_iranian }
		culture = { has_cultural_pillar = heritage_tocharian }
		culture = { has_cultural_pillar = heritage_arabic }	
		culture = { has_cultural_pillar = heritage_syriac }	
	}
}

RICE_silk_road_himalayan_culture = {
	OR = {
		culture = { has_cultural_pillar = heritage_qiangic }
		culture = { has_cultural_pillar = heritage_tibetan }
	}
}

RICE_silk_road_indian_culture = {
	OR = {
		culture = { has_cultural_pillar = heritage_indo_aryan }
		culture = { has_cultural_pillar = heritage_dravidian }
	}
}

RICE_activity_participant_trigger = {
	is_ai = yes
	NOT = { this = root }
	is_alive = yes
	is_imprisoned = no
	is_incapable = no
}

# RICE_activity_potential_guest_trigger = {
# 	NOT = {	this = scope:activity.activity_owner }
# 	RICE_activity_participant_trigger = yes
# 	NOT = { is_in_list = potential_guests }
# }


RICE_hot_springs_baronies_trigger = {	
	OR = {
		barony = title:b_siwa			# Fountain of the Sun			Siwa Flavor Pack
		barony = title:b_aachen			# Aachen hot springs			Aachen Flavor Pack
		barony = title:b_wakhan			# Bibi Fatima hot springs		Pamir Flavor Pack
		barony = title:b_rajagrha		# Rajgir hot springs			Magadha Flavor Pack
		barony = title:b_air			# Tafadek hot springs			Tuareg Flavor Pack
		barony = title:b_napoli			# Thermal Baths of Baia			Sicily Flavor Pack
		barony = title:b_mytilene		# Hot springs of Thermi			Lesbos Flavor Pack
	}
}

RICE_local_pilgrimage_baronies_trigger = {	
	OR = {
		barony = title:b_kharga			# Temple of Hibis								Siwa Flavor Pack
		barony = title:b_samos			# Patmos pilgrimage								Chios Flavor Pack
		barony = title:b_quimper		# Tro Breizh									Breton Flavor Pack
		barony = title:b_aachen			# Aachen pilgrimage								Aachen Flavor Pack
		barony = title:b_jerm			# Nasir Khusraw pilgrimage						Pamir Flavor Pack
		barony = title:b_cottingham		# Beverley Pilgrimage							Yorkshire Flavor Pack
		barony = title:b_aswan			# Pray at Phliae/Elephantine/Kalabsha			Upper Egypt Flavor Pack
		barony = title:b_tustar			# Tomb of Daniel								Khuzestan Flavor Pack
		barony = title:b_avranches		# Mont-Saint-Michel								Normandy Flavor Pack
		barony = title:b_jenne-jeno		# Tomb of Djenepo								Bozo Flavor Pack
	}
}

# RICE_local_pilgrimage_available_trigger = {
# 	OR = {
# 		# Patmos Pilgrimage
# 		AND = {
# 			religion = religion:christianity_religion
# 			has_global_variable = RICE_chios_patmos_pilgrimage_available
# 			OR = {
# 				custom_description = {
# 					text = "RICE_chios_near_chios_req"
# 					OR = {
# 						title:c_chios = {
# 							squared_distance = {
# 								target = root.capital_province
# 								value <= squared_distance_small
# 							}
# 						}
# 						capital_county = title:c_rhodos
# 						capital_county = title:c_caria
# 						capital_county = title:c_chandax
# 						capital_county = title:c_chania			
# 					}
# 				}
# 				has_title = title:c_chios
# 			}
# 		}
# 		# Aachen Pilgrimage
# 		AND = {
# 			religion = religion:christianity_religion
# 			OR = {
# 				title:c_aachen = {
# 					squared_distance = {
# 						target = root.capital_province
# 						value <= squared_distance_small
# 					}
# 				}
# 				AND = {
# 					is_target_in_global_variable_list = {
# 						name = unavailable_unique_decisions
# 						target = flag:RICE_aachen_charlemagne_remains_transferred
# 					}
# 					capital_province = {
# 						OR = {
# 							geographical_region = world_europe_west_francia
# 							geographical_region = world_europe_west_germania
# 						}
# 					}			
# 				}
# 			}
# 		}
# 		# Tomb of Daniel
# 		AND = {
# 			OR = {
# 				religion = religion:islam_religion
# 				religion = religion:christianity_religion
# 				religion = religion:judaism_religion
# 				faith = {
# 					OR = {
# 						has_doctrine = tenet_islamic_syncretism
# 						has_doctrine = tenet_jewish_syncretism
# 						has_doctrine = tenet_christian_syncretism
# 					}
# 				}
# 			}
# 			OR = {
# 				custom_description = {
# 					text = RICE_tomb_of_daniel_pilgrimage_distance_req	
# 					is_target_in_global_variable_list = {
# 						name = unavailable_unique_decisions
# 						target = flag:RICE_khuzestan_daniel_reburied
# 					}
# 					title:c_tustar = {
# 						squared_distance = {
# 							target = root.capital_province
# 							value <= squared_distance_medium
# 						}
# 					}
# 				}
# 				custom_description = {
# 					text = RICE_khuzestan_geographical_req
# 					any_held_title = {
# 						tier = tier_county
# 						duchy = title:d_khuzestan
# 					}
# 				}
# 			}
# 		}
# 	}
# }

RICE_tribal_or_nomad_trigger = {
	OR = {
		government_has_flag = government_is_tribal
		government_has_flag = government_is_nomadic
	}
}

#the unlocalized part
RICE_geographical_req = {
	OR = {
		trigger_if = {
			limit = {
				highest_held_title_tier >= tier_empire
			}
			any_sub_realm_county = {
				title_province ?= { geographical_region = geographical_region:$REGION$ }
			}
		}
		any_held_title = { #any_directly_owned_province may have split baronies across regions?
			tier = tier_county
			is_landless_type_title = no
			trigger_if = {
				limit = {
					geographical_region:$REGION$ = geographical_region:RICE_red_sea_region
				}
				is_coastal_county = yes
			}
			any_county_province = {
				geographical_region = $REGION$
			}
		}
		domicile.domicile_location ?= {
			geographical_region = $REGION$
		}
	}
}
travel_option_req = {
	switch = {
		trigger = geographical_region:$REGION$
		geographical_region:RICE_maritime_silk_road_region = {
			custom_description = { # this option was left "along"
				text = RICE_maritime_silk_road_geographical_req
				RICE_geographical_req = { REGION = $REGION$ }
			}
		}
		geographical_region:world_india = {
			custom_description = { #this is just here so we don't have "the [India]" without [region|E] or subcontinent suffix
				text = RICE_india_geographical_req
				RICE_geographical_req = { REGION = $REGION$ }
			}
		}
		fallback = {
			custom_description = {
				text = RICE_geographical_travel_req
				subject = geographical_region:$REGION$
				object = root # try to invoke GetRealmOrDomicileConcept when landless
				RICE_geographical_req = { REGION = $REGION$ }
			}
		}
	}
}


RICE_uses_east_asian_government_trigger = {
	OR = {
		government_has_flag = government_is_celestial
		government_has_flag = government_is_meritocratic
		government_has_flag = government_is_steppe_admin
		government_has_flag = government_is_japan_administrative
		government_has_flag = government_is_japan_feudal
	}	
}

RICE_potential_east_asian_scholar_gentry_culture_or_faith_trigger = {
	OR = {
		faith = { has_doctrine = special_doctrine_immaterial_harmony }
		RICE_uses_east_asian_government_trigger = yes
		RICE_is_even_lesser_sinosphere_culture_trigger = yes
		culture = { has_cultural_tradition = tradition_scholar_officials }
		culture = { has_cultural_tradition = tradition_sinophilic }
		culture = { has_cultural_tradition = tradition_tgp_ephemeral_grace }
	}	
}

RICE_potential_literate_east_asian_scholar_gentry_trigger = {
	OR = {
		diplomacy >= medium_skill_rating
		learning >= medium_skill_rating
		has_trait = lifestyle_poet
	}
	NOT = { diplomacy <= low_skill_rating }
	NOT = { learning <= low_skill_rating }
	RICE_potential_east_asian_scholar_gentry_culture_or_faith_trigger = yes
}



