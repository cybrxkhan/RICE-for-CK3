# Prefixed with "zzz" so that these go below the vanilla options

RICE_dog_sleds_option = {
	is_shown = {
		is_playable_character = yes
	}

	is_valid = {
		# Putting these here so the player knows why this option is available to them
		culture = {
			has_innovation = innovation_RICE_dog_sleds
		}
	}

	cost = {
		gold = {
			add = {
				value = low_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_dog_sleds_option
			}
		}
		herd = { #are you feeding these to the dogs?
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = low_travel_option_cost
					desc = RICE_dog_sleds_option
				}
			}
		}
	}

	travel_modifier = {
		travel_speed = 10
	}

	owner_modifier = {
		forest_travel_danger = forest_low_danger_reduction
		taiga_travel_danger = taiga_low_danger_reduction
	}

	ai_will_do = {
		value = 50
	}
}

RICE_silk_road_merchants_option = {
	is_shown = {
		is_playable_character = yes
		# any_held_title = {
		# 	tier = tier_county
		# 	any_county_province = {
		# 		geographical_region = RICE_silk_road_region		
		# 	}
		# }
	}

	is_valid = {
		travel_option_req = { REGION = RICE_silk_road_region }
		# Putting these here so the player knows why this option is available to them
		#custom_description = {
		#	text = RICE_silk_road_geographical_req
		#	OR = {
		#		domicile.domicile_location ?= {
		#			geographical_region = RICE_silk_road_region
		#		}
		#		any_held_title = {
		#			tier = tier_county
		#			any_county_province = {
		#				geographical_region = RICE_silk_road_region		
		#			}
		#		}
		#	}
		#}
	}

	cost = {
		gold = {
			add = {
				value = high_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_silk_road_merchants_option
			}
		}
		herd = {
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = high_travel_option_cost
					desc = RICE_silk_road_merchants_option
				}
			}
		}
	}

	travel_modifier = {
		travel_speed = -10
		travel_safety = 10
	}

	
	on_applied_effect = {
		hidden_effect = {
			if = { # No reason to steal too many Mercenaries away for travels; players and AI kings+ only
				limit = {
					OR = {
						is_ai = no
						highest_held_title_tier >= tier_kingdom
					}
				}

				# Create a character from thin air
				# It's too much hassle to account for edge cases for merchants when they should or shouldn't be deleted
				create_character = {
					location = root.location
					template = RICE_merchant_template
					faith = root.location.faith
					culture = root.location.culture
					save_scope_as = RICE_merchant
				}
				# # Try to find a pool character who is already a Silk Road merchant
				# if = {
				# 	limit = {
				# 		exists = root.capital_province
				# 		any_pool_character = {
				# 			province = root.capital_province
				# 			is_available_ai_adult = yes
				# 			has_no_particular_noble_roots_trigger = yes
				# 			age >= 20
				# 			age <= 60
				# 			is_married = no
				# 			has_trait = RICE_silk_road_merchant
				# 		}
				# 	}
				# 	random_pool_character = {
				# 		province = root.capital_province
				# 		limit = {
				# 			is_available_ai_adult = yes
				# 			has_no_particular_noble_roots_trigger = yes
				# 			age >= 20
				# 			age <= 60
				# 			is_married = no
				# 			has_trait = RICE_silk_road_merchant
				# 		}
				# 		if = {
				# 			limit = {
				# 				NOT = { has_character_flag = RICE_protected_merchant }
				# 			}
				# 			add_character_flag = RICE_protected_merchant
				# 		}
				# 		save_scope_as = RICE_merchant
				# 	}
				# }
				# # Try to find a pool character with high enough stewardship
				# else_if = {
				# 	limit = {
				# 		exists = root.capital_province
				# 		any_pool_character = {
				# 			province = root.capital_province
				# 			is_available_ai_adult = yes
				# 			has_no_particular_noble_roots_trigger = yes
				# 			age >= 20
				# 			age <= 60
				# 			is_married = no
				# 			stewardship >= decent_skill_rating
				# 		}
				# 	}
				# 	random_pool_character = {
				# 		province = root.capital_province
				# 		limit = {
				# 			is_available_ai_adult = yes
				# 			has_no_particular_noble_roots_trigger = yes
				# 			age >= 20
				# 			age <= 60
				# 			is_married = no
				# 			stewardship >= decent_skill_rating
				# 		}
				# 		if = {
				# 			limit = {
				# 				NOT = { has_character_flag = RICE_protected_merchant }
				# 			}
				# 			add_character_flag = RICE_protected_merchant
				# 		}
				# 		save_scope_as = RICE_merchant
				# 	}
				# }
				# # else create a character
				# else = {
				# 	create_character = {
				# 		location = root.location
				# 		template = RICE_merchant_template
				# 		save_scope_as = RICE_merchant
				# 	}
				# }
				if = {
					limit = {
						exists = scope:RICE_merchant
					}
					scope:RICE_merchant = {
						add_gold = root.high_travel_option_cost
						set_variable = {
							name = RICE_merchant_temp
							value = current_date
							days = 1
						}
						set_variable = RICE_is_travel_option_merchant
						add_character_modifier = {
							modifier = RICE_misc_focused_on_work
							years = 10
						}
						move_to_pool = yes
					}
					if = {
						limit = {
							scope:RICE_merchant = {
								NOT = { has_trait = RICE_silk_road_merchant }
							}
						}
						scope:RICE_merchant = {
							add_trait = RICE_silk_road_merchant
							RICE_silk_road_merchant_assign_experience_effect = yes
						}
					}
					send_interface_toast = {
						title = RICE_silk_road_merchant_recruited_tt
						left_icon = scope:RICE_merchant
						root.current_travel_plan ?= {
							add_companion = scope:RICE_merchant
						}
					}
				}
			}
		}
		custom_tooltip = RICE_merchants_option_effect_1
		#custom_tooltip = RICE_silk_road_merchant_gain_effect
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}

RICE_volga_dnieper_merchants_option = {
	is_shown = {
		is_playable_character = yes
		# any_held_title = {
		# 	tier = tier_county
		# 	any_county_province = {
		# 		geographical_region = RICE_volga_dnieper_trade_region		
		# 	}
		# }
	}

	is_valid = {
		travel_option_req = {REGION = RICE_volga_dnieper_trade_region}
		# Putting these here so the player knows why this option is available to them
		#custom_description = {
		#	text = RICE_volga_dnieper_geographical_req
		#	OR = {
		#		domicile.domicile_location ?= {
		#			geographical_region = RICE_volga_dnieper_trade_region
		#		}
		#		any_held_title = {
		#			tier = tier_county
		#			any_county_province = {
		#				geographical_region = RICE_volga_dnieper_trade_region		
		#			}
		#		}
		#	}
		#}
	}

	cost = {
		gold = {
			add = {
				value = high_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_volga_dnieper_merchants_option
			}
		}
		herd = {
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = high_travel_option_cost
					desc = RICE_volga_dnieper_merchants_option
				}
			}
		}
	}

	travel_modifier = {
		travel_speed = -10
		travel_safety = 10
	}

	
	on_applied_effect = {
		hidden_effect = {
			if = { # No reason to steal too many Mercenaries away for travels; players and AI kings+ only
				limit = {
					OR = {
						is_ai = no
						highest_held_title_tier >= tier_kingdom
					}
				}
				# Create a character from thin air
				# It's too much hassle to account for edge cases for merchants when they should or shouldn't be deleted
				create_character = {
					location = root.location
					template = RICE_volga_dnieper_merchant_template
					faith = root.location.faith
					culture = root.location.culture
					save_scope_as = RICE_merchant
				}
				# # Try to find a pool character who is already a Silk Road merchant
				# if = {
				# 	limit = {
				# 		exists = root.capital_province
				# 		any_pool_character = {
				# 			province = root.capital_province
				# 			is_available_ai_adult = yes
				# 			has_no_particular_noble_roots_trigger = yes
				# 			age >= 20
				# 			age <= 60
				# 			is_married = no
				# 			has_trait = RICE_volga_dnieper_merchant
				# 		}
				# 	}
				# 	random_pool_character = {
				# 		province = root.capital_province
				# 		limit = {
				# 			is_available_ai_adult = yes
				# 			has_no_particular_noble_roots_trigger = yes
				# 			age >= 20
				# 			age <= 60
				# 			is_married = no
				# 			has_trait = RICE_volga_dnieper_merchant
				# 		}
				# 		if = {
				# 			limit = {
				# 				NOT = { has_character_flag = RICE_protected_merchant }
				# 			}
				# 			add_character_flag = RICE_protected_merchant
				# 		}
				# 		save_scope_as = RICE_merchant
				# 	}
				# }
				# # Try to find a pool character with high enough stewardship
				# else_if = {
				# 	limit = {
				# 		exists = root.capital_province
				# 		any_pool_character = {
				# 			province = root.capital_province
				# 			is_available_ai_adult = yes
				# 			has_no_particular_noble_roots_trigger = yes
				# 			age >= 20
				# 			age <= 60
				# 			is_married = no
				# 			stewardship >= decent_skill_rating
				# 		}
				# 	}
				# 	random_pool_character = {
				# 		province = root.capital_province
				# 		limit = {
				# 			is_available_ai_adult = yes
				# 			has_no_particular_noble_roots_trigger = yes
				# 			age >= 20
				# 			age <= 60
				# 			is_married = no
				# 			stewardship >= decent_skill_rating
				# 		}
				# 		if = {
				# 			limit = {
				# 				NOT = { has_character_flag = RICE_protected_merchant }
				# 			}
				# 			add_character_flag = RICE_protected_merchant
				# 		}
				# 		save_scope_as = RICE_merchant
				# 	}
				# }
				# # else create a character
				# else = {
				# 	create_character = {
				# 		location = root.location
				# 		template = RICE_volga_dnieper_merchant_template
				# 		save_scope_as = RICE_merchant
				# 	}
				# }
				if = {
					limit = {
						exists = scope:RICE_merchant
					}
					scope:RICE_merchant = {
						add_gold = root.high_travel_option_cost
						set_variable = {
							name = RICE_merchant_temp
							value = current_date
							days = 1
						}
						set_variable = RICE_is_travel_option_merchant
						add_character_modifier = {
							modifier = RICE_misc_focused_on_work
							years = 10
						}
						move_to_pool = yes
					}
					if = {
						limit = {
							scope:RICE_merchant = {
								NOT = { has_trait = RICE_volga_dnieper_merchant }
							}
						}
						scope:RICE_merchant = {
							add_trait = RICE_volga_dnieper_merchant
							RICE_volga_dnieper_merchant_assign_experience_effect = yes
						}
					}
					send_interface_toast = {
						title = RICE_volga_dnieper_merchant_recruited_tt
						left_icon = scope:RICE_merchant
						root.current_travel_plan ?= {
							add_companion = scope:RICE_merchant
						}
					}
				}
			}
		}
		custom_tooltip = RICE_volga_dnieper_merchants_option_effect_1
		#custom_tooltip = RICE_volga_dnieper_merchant_gain_effect
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}

# RICE_indian_ocean_merchants_option = {
# 	is_shown = {
# 		is_playable_character = yes
# 	}

# 	is_valid = {
# 		# Putting these here so the player knows why this option is available to them
# 		custom_description = {
# 			text = RICE_silk_road_coastal_geographical_req
# 			any_held_title = {
# 				tier = tier_county
# 				is_coastal_county = yes
# 				any_county_province = {
# 					geographical_region = RICE_silk_road_region		
# 				}
# 			}
# 		}
# 	}

# 	cost = {
# 		gold = {
# 			add = {
# 				value = high_travel_option_cost
# 				desc = RICE_indian_ocean_merchants_option
# 			}
# 		}
# 	}

# 	travel_modifier = {
# 		travel_speed = -10
# 		travel_safety = 10
# 	}

	
# 	on_applied_effect = {
# 		custom_tooltip = RICE_merchants_option_effect_1
# 	}

# 	ai_will_do = {
# 		value = 0
# 		if = {
# 			limit = {
# 				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
# 			}
# 			add = {
# 				value = 50
# 			}
# 		}
# 	}
# }


RICE_red_sea_rubbans_option = {
	is_shown = {
		is_playable_character = yes
	}

	is_valid = {
		travel_option_req = { REGION = RICE_red_sea_region }
		# Putting these here so the player knows why this option is available to them
		#custom_description = {
		#	text = RICE_red_sea_coastal_geographical_req
		#	OR = {
		#		any_held_title = {
		#			tier = tier_county
		#			is_coastal_county = yes
		#			any_county_province = {
		#				geographical_region = RICE_red_sea_region		
		#			}
		#		}				
		#		domicile.domicile_location ?= {
		#			geographical_region = RICE_red_sea_region
		#		}
		#	}
		#}
	}

	cost = {
		gold = {
			add = {
				value = low_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_red_sea_rubbans_option
			}
		}
		herd = {
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = low_travel_option_cost
					desc = RICE_red_sea_rubbans_option
				}
			}
		}
	}

	owner_modifier = {
		coastal_sea_travel_danger = medium_sea_danger_reduction
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}

RICE_tuyuhun_qinghaicong_horses_option = {
	is_shown = {
		is_playable_character = yes
	}

	is_valid = {
		OR = {
			# has_title = title:c_fuqi
			# has_title = title:c_gerqen
			any_directly_owned_province = {
				county ?= {
					# title_province = { RICE_qinghaicong_horse_region_trigger = yes }
					OR = {
						has_county_modifier = RICE_tuyuhun_qinghaicong_horses
						has_county_modifier = RICE_tuyuhun_qinghaicong_horses_expanded
					}
				}
			}
			has_character_modifier = RICE_tuyuhun_character_gifted_qinghaicong_horses
			culture = {
				has_cultural_tradition = tradition_RICE_xianbei_scions
			}
		}
	}

	cost = {
		gold = {
			add = {
				value = high_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_tuyuhun_qinghaicong_horses_option
			}
		}
		herd = { #if anything these horses should attract more herd
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = high_travel_option_cost
					desc = RICE_tuyuhun_qinghaicong_horses_option
				}
			}
		}
	}

	travel_modifier = {
		travel_speed = 15
	}

	
	on_applied_effect = {
		custom_tooltip = RICE_tuyuhun_qinghaicong_horses_option_effect_1
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}



RICE_muallim_option = {
	is_shown = {
		is_playable_character = yes
	}

	is_valid = {
		travel_option_req = { REGION = RICE_maritime_silk_road_region }
		# Putting these here so the player knows why this option is available to them
		#custom_description = {
		#	text = RICE_maritime_silk_road_geographical_req
		#	OR = {
		#		any_held_title = {
		#			tier = tier_county
		#			any_county_province = {
		#				geographical_region = RICE_maritime_silk_road_region		
		#			}
		#		}				
		#		domicile.domicile_location ?= {
		#			geographical_region = RICE_maritime_silk_road_region
		#		}
		#	}
		#}
	}

	cost = {
		gold = {
			add = {
				value = medium_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_muallim_option
			}
		}
		herd = {
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = medium_travel_option_cost
					desc = RICE_tuyuhun_qinghaicong_horses_option
				}
			}
		}
	}

	travel_modifier = {
		travel_speed = 5
	}

	owner_modifier = {
		coastal_sea_travel_danger = low_sea_danger_reduction
		sea_travel_danger = medium_sea_danger_reduction
	}


	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}


RICE_nakhudas_option = {
	is_shown = {
		is_playable_character = yes
	}

	is_valid = {
		travel_option_req = { REGION = world_india }
		# Putting these here so the player knows why this option is available to them
		# OR = {
		# 	custom_description = {
		# 		text = RICE_maritime_silk_road_geographical_req
		# 		any_held_title = {
		# 			tier = tier_county
		# 			any_county_province = {
		# 				geographical_region = RICE_maritime_silk_road_region		
		# 			}
		# 		}
		# 	}
		#	custom_description = {
		#		text = RICE_india_geographical_req
		#		OR = {
		#			any_held_title = {
		#				tier = tier_county
		#				any_county_province = {
		#					geographical_region = world_india		
		#				}
		#			}				
		#			domicile.domicile_location ?= {
		#				geographical_region = world_india
		#			}
		#		}
		#	}
		#}
	}

	cost = {
		gold = {
			add = {
				value = medium_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_nakhudas_option
			}
		}
		herd = {
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = medium_travel_option_cost
					desc = RICE_nakhudas_option
				}
			}
		}
	}

	travel_modifier = {
		travel_safety = 5
	}

	owner_modifier = {
		diplomacy = 1
		stewardship = 1
		coastal_sea_travel_danger = low_sea_danger_reduction
	}



	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}

RICE_local_veneration_option = {
	is_shown = {
		is_playable_character = yes
	}

	is_valid = {

	}

	cost = {
		gold = {
			add = {
				value = low_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_local_veneration_option
			}
		}
		herd = {
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = low_travel_option_cost
					desc = RICE_local_veneration_option
				}
			}
		}
	}

	travel_modifier = {
		travel_speed = -10
	}

	
	on_applied_effect = {
		custom_tooltip = RICE_local_veneration_option_effect_1
		#custom_tooltip = RICE_local_veneration_option_effect_2
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}

RICE_skiing_option = {
	is_shown = {
		is_playable_character = yes
	}

	is_valid = {
		# Putting these here so the player knows why this option is available to them
		culture = {
			has_innovation = innovation_RICE_skiing
		}
	}

	cost = {
		gold = {
			add = {
				value = low_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_skiing_option_option
			}
		}
		herd = {
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = low_travel_option_cost
					desc = RICE_skiing_option_option
				}
			}
		}
	}


	travel_modifier = {
		travel_speed = 5
	}

	owner_modifier = {
		taiga_travel_danger = taiga_low_danger_reduction
		mountains_travel_danger = mountains_low_danger_reduction
		desert_mountains_travel_danger = desert_mountains_low_danger_reduction
	}

	
	on_applied_effect = {
		
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}

RICE_mani_stones_option = {
	is_shown = {
		is_playable_character = yes
	}

	is_valid = {
		culture = { has_cultural_pillar = heritage_tibetan }
		OR = {
			religion = religion:bon_religion
			religion = religion:west_himalayan_religion
			religion = religion:buddhism_religion
		}
	}

	cost = {
		gold = {
			add = {
				value = low_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				desc = RICE_mani_stones_option
			}
		}
		herd = {
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = low_travel_option_cost
					desc = RICE_mani_stones_option
				}
			}
		}
	}


	# travel_modifier = {
	# 	travel_speed = 5
	# }

	owner_modifier = {
		monthly_piety_gain_mult = 0.3
	}

	on_applied_effect = {
		
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}


RICE_sea_nomads_option = {
	is_shown = {
		is_playable_character = yes
	}

	is_valid = {
		OR = {
			travel_option_req = { REGION = world_asia_southeast }
			culture = {
				has_cultural_tradition = tradition_RICE_sea_nomads
			}
		}
	}

	cost = {
		gold = {
			add = {
				value = low_travel_option_cost
				if = {
					limit = {
						government_has_flag = government_is_nomadic
					}
					multiply = 0.5
				}
				if = {
					limit = {
						culture = { has_cultural_tradition = tradition_RICE_sea_nomads }
					}
					multiply = 0
				}
				desc = RICE_sea_nomads_option
			}
		}
		herd = {
			if = {
				limit = {
					government_has_flag = government_is_nomadic
				}
				add = {
					value = low_travel_option_cost
					desc = RICE_sea_nomads_option
				}
			}
			if = {
				limit = {
					culture = { has_cultural_tradition = tradition_RICE_sea_nomads }
				}
				multiply = 0
			}
		}
	}

	travel_modifier = {
		travel_speed = 5
		travel_safety = 5
	}

	owner_modifier = {
		coastal_sea_travel_danger = low_sea_danger_reduction
	}

	ai_will_do = {
		value = 0
		if = {
			limit = {
				travel_plan_owner.gold >= travel_plan_owner.minor_gold_value
			}
			add = {
				value = 50
			}
		}
	}
}


