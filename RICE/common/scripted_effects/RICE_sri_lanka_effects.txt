

RICE_setup_sri_lanka_flavor_pack_effect = {



	#########################################################################
	#
	# CULTURE AND RELIGION STUFF
	#
	#########################################################################

	culture:han = { save_scope_as = han }
	culture:sinhala = { save_scope_as = sinhala }
	culture:somali = { save_scope_as = somali }
	culture:komi = { save_scope_as = komi }
	culture:qiang = { save_scope_as = qiang }

	culture:vedda = {
		get_all_innovations_from = scope:komi
		add_innovation = innovation_RICE_monsoon_trade_routes
		add_culture_tradition = tradition_RICE_cave_dwellers
		remove_variable = tradition_cooldown
	}

	culture:sinhala = {
		add_innovation = innovation_RICE_monsoon_trade_routes
		add_innovation = innovation_RICE_velakkara_guards
		remove_culture_tradition = tradition_ruling_caste
		remove_culture_tradition = tradition_fervent_temple_builders
		remove_culture_tradition = tradition_city_keepers
		add_culture_tradition = tradition_religious_patronage
		add_culture_tradition = tradition_stalwart_defenders
		add_culture_tradition = tradition_maritime_mercantilism
		add_culture_tradition = tradition_RICE_wewas
		remove_variable = tradition_cooldown
	}

	culture:tamil = {
		add_innovation = innovation_RICE_velakkara_guards
		add_innovation = innovation_RICE_monsoon_trade_routes
	}

	if = {
		limit = {
			culture:tamil = {
				NOT = { has_cultural_tradition = tradition_poetry }
				free_tradition_slot > 0
			}
		}		
		culture:tamil = {
			add_culture_tradition = tradition_poetry
			remove_variable = tradition_cooldown
		}
	}

	culture:gujarati = {
		add_innovation = innovation_RICE_monsoon_trade_routes
		add_culture_tradition = tradition_RICE_stepwells
		remove_variable = tradition_cooldown
	}

	culture:rajput = {
		add_culture_tradition = tradition_RICE_stepwells
		remove_variable = tradition_cooldown
	}

	culture:shona = {
		add_culture_tradition = tradition_RICE_zimbabwe
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:makua = {		
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:makonde = {
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:mijikenda = {
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:pokomo = {
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:seuta = {
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:sabaki = {
		get_all_innovations_from = scope:somali
		add_innovation = innovation_RICE_monsoon_trade_routes
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:ruvu = {
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:tsonga = {
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_cattle_kraals
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:nguni = {
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_cattle_kraals
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:sotho_tswana = {
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_cattle_kraals
		add_culture_tradition = tradition_RICE_zimbabwe
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:aweer = {
		get_all_innovations_from = scope:somali
		add_culture_tradition = tradition_RICE_forest_suppliers
		remove_variable = tradition_cooldown
	}

	# Renamed to Zanj
	culture:east_bantu = {
		add_innovation = innovation_RICE_monsoon_trade_routes
		remove_culture_tradition = tradition_maritime_mercantilism
		remove_culture_tradition = tradition_seafaring
		add_culture_tradition = tradition_RICE_swahili_contacts
		add_culture_tradition = tradition_RICE_bantu_migrators
		remove_variable = tradition_cooldown
	}

	culture:dahalo = {
		get_all_innovations_from = scope:somali
	}

	culture:oromo = {
		get_all_innovations_from = scope:somali
	}

	culture:tai = {
		get_all_innovations_from = scope:qiang
	}

	culture:malay = {
		get_all_innovations_from = scope:sinhala
	}

	culture:batak = {
		get_all_innovations_from = scope:sinhala
	}

	culture:java = {
		get_all_innovations_from = scope:sinhala
	}

	culture:sunda = {
		get_all_innovations_from = scope:sinhala
	}

	culture:khmer = {
		get_all_innovations_from = scope:sinhala
	}

	culture:cham = {
		get_all_innovations_from = scope:sinhala
	}

	culture:aceh = {
		get_all_innovations_from = scope:sinhala
	}

	culture:makassar = {
		get_all_innovations_from = scope:sinhala
	}

	culture:tawo = {
		get_all_innovations_from = scope:sinhala
	}

	culture:sinauna = {
		get_all_innovations_from = scope:sinhala
	}

	culture:tagalog = {
		get_all_innovations_from = scope:sinhala
	}

	culture:bugis = {
		get_all_innovations_from = scope:sinhala
	}

	culture:seletar = {
		get_all_innovations_from = scope:sinhala
	}

	culture:pyu = {
		get_all_innovations_from = scope:sinhala
	}

	culture:bai = {
		get_all_innovations_from = scope:qiang
	}

	culture:yi = {
		get_all_innovations_from = scope:qiang
	}

	culture:yamato = {
		get_all_innovations_from = scope:han
	}

	culture:samhan = {
		get_all_innovations_from = scope:han
	}

	culture:old_viet = {
		get_all_innovations_from = scope:han
	}

	culture:kinh = {
		get_all_innovations_from = scope:han
	}

	culture:swahili = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}

	culture:oriya = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}

	culture:telugu = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}

	culture:kannada = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}

	culture:persian = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}
	
	culture:somali = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}
	
	culture:himyarite = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}
	
	culture:yemeni = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}
	
	culture:south_arabian = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}
	
	culture:sindhi = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}
	
	culture:marathi = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}
	
	culture:bengali = {
		add_innovation = innovation_RICE_monsoon_trade_routes
	}

	every_culture_global = {
		limit = {
			OR = {
				has_cultural_pillar = heritage_indo_aryan
				has_cultural_pillar = heritage_dravidian
			}
			NOT = { has_innovation = innovation_RICE_irrigation_tanks }
		}
		add_innovation = innovation_RICE_irrigation_tanks
	}

	every_culture_global = {
		limit = {
			OR = {
				has_cultural_pillar = heritage_malayic
				has_cultural_pillar = heritage_chamic
				has_cultural_pillar = heritage_sulawesi
			}
			NOT = { has_innovation = innovation_RICE_monsoon_trade_routes }
		}
		add_innovation = innovation_RICE_monsoon_trade_routes
	}

	every_county = {
		limit = {
			culture = culture:welayta
		}
		set_county_faith = faith:welayta_pagan
		holder = {
			if = {
				limit = {
					culture = culture:welayta
				}
				set_character_faith = faith:welayta_pagan
			}
			every_courtier_or_guest = {
				limit = {
					culture = culture:welayta
				}
				set_character_faith = faith:welayta_pagan
			}
		}
	}	



	#########################################################################
	#
	# TITLE HISTORY
	#
	#########################################################################

	# For 867 bookmark
	if = {
		limit = {
			game_start_date = 867.1.1
		}
		# Give some territory to Udaya
		character:189014 = {
			get_title = title:c_kandy
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		# Give some territory to Kutthaka
		character:RICE_sri_lanka_001 = {
			get_title = title:c_trincomalee
			get_title = title:c_batticaloa
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		# Give some territory to Mahasattana
		character:RICE_sri_lanka_010 = {
			get_title = title:c_jaffna
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		# Give some territory to Utur Pandirad
		character:RICE_sri_lanka_011 = {
			get_title = title:c_kotte
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		# Give some territory to Senal Madabi
		character:RICE_sri_lanka_015 = {
			get_title = title:c_rohana
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		# Give some territory to Kitambava
		character:RICE_sri_lanka_021 = {
			get_title = title:c_dakhina_desa
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}

		character:RICE_sri_lanka_016 = {
			save_scope_as = sena_waifu
		}

		character:189015 = {
			set_mother = scope:sena_waifu
		}

		character:RICE_sri_lanka_018 = {
			save_scope_as = kassapa_waifu
		}

		character:189019 = {
			set_mother = scope:kassapa_waifu
		}

	}

	# For 1066 bookmark
	if = {
		limit = {
			game_start_date = 1066.9.15
		}
		# If Rajas of Asia is running...
		# Will remove whenever Rajas of Asia revamps the map of India
		if = {
			limit = {
				roa_is_active = yes
			}
			# Give Budal's land to Vijayabahu first to avoid weirdness
			character:189029 = {
				get_title = title:c_dakhina_desa
			}
			# Fix the dynasty/house of Vijayabahu's daughter
			character:RICE_sri_lanka_009 = {
				set_house = character:189029.house
			}
		}
		# Give some territory to Budal/Buddharaja
		character:RICE_sri_lanka_002 = {
			get_title = title:c_dakhina_desa
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		character:189029 = {
			add_character_modifier = {
				modifier = RICE_sri_lanka_aspiration_rule_sri_lanka
			}
			set_variable = {
				name = RICE_historical_aspiration
				value = flag:vijayabahu
			}
			spawn_army = {
				name = RICE_vijayabahu_velakkara_guards
				men_at_arms = {
					type = RICE_velakkara
					stacks = 4
				}
				men_at_arms = {
					type = paiks
					stacks = 2
				}
				men_at_arms = {
					type = light_footmen
					stacks = 2
				}
				men_at_arms = {
					type = pikemen_unit
					stacks = 1
				}
				# men_at_arms = {
				# 	type = war_elephant
				# 	stacks = 1
				# }
				location = province:3266
				origin = province:3267
			}
		}

		character:RICE_sri_lanka_008 = {
			save_scope_as = lilavati
		}
		# Not actually true, but he was born after 1066 most likely so the timeline doesn't make sense to begin with
		character:189030 = {
			set_mother = scope:lilavati
		}

	}
	if = {
		limit = {
			game_start_date >= 990.1.1
		}
		title:c_phiti = {
			add_county_modifier = {
				modifier = RICE_sri_lanka_decline_of_anuradhapura
				years = 150
			}
		}
		title:c_phiti.title_province = {
			remove_building = generic_university
			add_special_building = RICE_sri_lanka_ruins_of_anuradhapura
		}
	}


	#########################################################################
	#
	# CULTURE/RELIGION HISTORY
	#
	#########################################################################

	# Natkokwe Burmese "paganism"
	if = {
		limit = {
			roa_is_active = no
			is_dharmachakra_loaded = no
			NOT = { has_global_variable = MBP_is_loaded }
		}
		title:c_takon = {
			set_county_faith = faith:burmic
		}
		title:c_takon.holder = {
			set_character_faith_with_conversion = faith:burmic
			every_courtier = {
				limit = {
					OR = {
						faith = faith:ari
						culture = { has_cultural_pillar = heritage_burman }
					}
				}
				random = {
					chance = 50
					set_character_faith = faith:burmic
				}
			}
		}
		title:c_hanlan = {
			set_county_faith = faith:burmic
		}
		title:c_hanlan.holder = {
			set_character_faith_with_conversion = faith:burmic
			every_courtier = {
				limit = {
					OR = {
						faith = faith:ari
						culture = { has_cultural_pillar = heritage_burman }
					}
				}
				random = {
					chance = 50
					set_character_faith = faith:burmic
				}
			}
		}
		title:c_kale = {
			set_county_faith = faith:burmic
		}
		title:c_kale.holder = {
			set_character_faith_with_conversion = faith:burmic
			every_courtier = {
				limit = {
					OR = {
						faith = faith:ari
						culture = { has_cultural_pillar = heritage_burman }
					}
				}
				random = {
					chance = 50
					set_character_faith = faith:burmic
				}
			}
		}
		# if = {
		# 	limit = {
		# 		game_start_date < 1050.1.1
		# 	}
		# 	title:c_kyaukse = {
		# 		set_county_faith = faith:burmic
		# 	}
		# 	title:c_madaya = {
		# 		set_county_faith = faith:burmic
		# 	}
		# 	title:c_hanlan.holder = {
		# 		set_character_faith_with_conversion = faith:burmic
		# 		every_courtier = {
		# 			limit = {
		# 				OR = {
		# 					faith = faith:ari
		# 					culture = { has_cultural_pillar = heritage_burman }
		# 				}
		# 			}
		# 			set_character_faith = faith:burmic
		# 		}
		# 	}
		# }
		
	}


	# If there are no Pyu anywhere, meaning not using a mod that modifies Burma
	if = {
		limit = {
			NOT = {
				any_county_in_region = {
					region = world_burma
					culture = culture:pyu
				}
			}
		}
		if = {
			limit = {
				game_start_date = 867.1.1
				is_dharmachakra_loaded = no
			}
			# Put Pyu everywhere
			# For some reason every_county and every_county_in_region won't work for scoping to holders or it doesn't affect holders, so we have to do it manually
			every_county = {
				limit = {
					title_province = {	
						geographical_region = world_burma
						NOT = { geographical_region = RICE_arakan_region }		
					}
					NOT = { this = title:c_pagan }
					culture = culture:burmese
				}
				set_county_culture = culture:pyu
			}
			character:burman010 = {
				set_culture = culture:pyu
				every_courtier_or_guest = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:pyu
				}
				every_vassal = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:pyu
				}
			}
			character:burman012 = {
				set_culture = culture:pyu
				every_courtier_or_guest = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:pyu
				}
				every_vassal = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:pyu
				}
			}
			character:burman014 = {
				set_culture = culture:pyu
				every_courtier_or_guest = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:pyu
				}
				every_vassal = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:pyu
				}
			}
			character:earlyburman001 = {
				every_courtier_or_guest = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
						is_lowborn = yes
					}
					random = {
						chance = 50
						set_culture = culture:pyu
					}
				}
				every_vassal = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					random = {
						chance = 50
						set_culture = culture:pyu
					}
				}
			}
			# Change Rakhine/Arakan to Bengali (for now)
			character:arakan001 = {
				set_culture = culture:bengali
			}
			character:arakan002 = {
				set_culture = culture:bengali
			}
			character:arakan003 = {
				set_culture = culture:bengali
			}
			character:arakan004 = {
				set_culture = culture:bengali
				every_courtier_or_guest = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:bengali
				}
				every_vassal = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:bengali
				}
			}
			character:arakan005 = {
				set_culture = culture:bengali
			}
			character:arakan006 = {
				set_culture = culture:bengali
			}
		}		
		else_if = {
			limit = {
				game_start_date = 1066.9.15
				is_dharmachakra_loaded = no
			}
			title:c_takon = {
				set_county_culture = culture:pyu
			}
			title:c_takon.holder = {
				every_courtier_or_guest = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
						is_lowborn = yes
					}
					random = {
						chance = 33
						set_culture = culture:pyu
					}
				}			
			}
			title:c_sriksetra = {
				set_county_culture = culture:pyu
			}
			title:c_sriksetra.holder = {
				every_courtier_or_guest = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
						is_lowborn = yes
					}
					random = {
						chance = 33
						set_culture = culture:pyu
					}
				}			
			}
			character:arakan001 = {
				set_culture = culture:bengali
			}
			character:arakan002 = {
				set_culture = culture:bengali
			}
			character:arakan003 = {
				set_culture = culture:bengali
			}
			character:arakan004 = {
				set_culture = culture:bengali
			}
			character:arakan005 = {
				set_culture = culture:bengali
			}
			character:arakan006 = {
				set_culture = culture:bengali
			}
			character:arakan007 = {
				set_culture = culture:bengali
			}
			character:arakan008 = {
				set_culture = culture:bengali
			}
			character:arakan009 = {
				set_culture = culture:bengali
			}
			character:arakan010 = {
				set_culture = culture:bengali
			}
			character:arakan011 = {
				set_culture = culture:bengali
			}
			character:arakan012 = {
				set_culture = culture:bengali
			}
			character:arakan013 = {
				set_culture = culture:bengali
			}
			character:arakan014 = {
				set_culture = culture:bengali
			}
			character:arakan015 = {
				set_culture = culture:bengali
			}
			character:arakan016 = {
				set_culture = culture:bengali
			}
			character:arakan017 = {
				set_culture = culture:bengali
			}
			character:arakan018 = {
				set_culture = culture:bengali
			}
			character:arakan019 = {
				set_culture = culture:bengali
			}
			character:arakan021 = {
				set_culture = culture:bengali
			}
			character:arakan022 = {
				set_culture = culture:bengali
			}
			character:arakan023 = {
				set_culture = culture:bengali
			}
			character:arakan024 = {
				set_culture = culture:bengali
			}
			character:arakan025 = {
				set_culture = culture:bengali
			}
			character:arakan026 = {
				set_culture = culture:bengali							
				every_courtier_or_guest = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:bengali
				}
				every_vassal = {
					limit = {
						culture = { has_cultural_pillar = heritage_burman }
					}
					set_culture = culture:bengali
				}
			}
		}

	}


	# Add Bengali to Arakan
	# every_county_in_region = {
	# 	region = RICE_arakan_region
	# 	set_county_culture = culture:bengali
	# }
	if = {
		limit = {
			is_dharmachakra_loaded = no
		}
		every_county = {
			limit = {
				title_province = {	
					geographical_region = RICE_arakan_region
				}
			}
			set_county_culture = culture:bengali
		}
	}


	# Purge Theravadins from Bengal, since Vajrayana and Mahayana were more prominent here during the CK3 period
	if = {
		limit = {
			is_dharmachakra_loaded = no
		}
		every_county = {
			limit = {
				culture = culture:bengali
				faith = faith:theravada
				title_province = {	
					OR = {
						duchy = title:d_suhma
						duchy = title:d_nadia
						duchy = title:d_gauda
					}		
				}
			}
			set_county_faith = faith:mahayana
			holder = {
				every_courtier_or_guest = {
					limit = {
						culture = culture:bengali
						faith = faith:theravada
						is_lowborn = yes
					}
					random_list = {
						50 = {
							set_character_faith = faith:mahayana
						}
						50 = {
							set_character_faith = faith:vajrayana
						}
					}
				}
			}
		}
		every_county = {
			limit = {
				culture = culture:bengali
				faith = faith:theravada
				title_province = {	
					kingdom = title:k_bengal
					NOR = {
						duchy = title:d_suhma
						duchy = title:d_nadia
						duchy = title:d_gauda
					}		
				}
			}
			set_county_faith = faith:vajrayana
			holder = {
				every_courtier_or_guest = {
					limit = {
						culture = culture:bengali
						faith = faith:theravada
						is_lowborn = yes
					}
					random_list = {
						50 = {
							set_character_faith = faith:mahayana
						}
						50 = {
							set_character_faith = faith:vajrayana
						}
					}
				}
			}
		}
	}

	# every_county_in_region = {
	# 	region = world_india_bengal
	# 	limit = {
	# 		faith = faith:theravada
	# 	}
	# 	set_county_faith = faith:vajrayana
	# 	holder = {
	# 		every_courtier_or_guest = {
	# 			limit = {
	# 				faith = faith:theravada
	# 			}
	# 			set_character_faith = faith:vajrayana
	# 		}
	# 	}
	# }

	# There were more Tamil Buddhists historically, but it's not possible to split the Tamils on Sri Lanka
	title:c_jaffna = {
		set_county_faith = faith:srikula_shaktism
		holder = {
			every_courtier_or_guest = {
				limit = {
					culture = culture:tamil
					NOT = { religion = religion:hinduism_religion }
					is_lowborn = yes
				}
				random = {
					chance = 60
					set_character_faith = faith:srikula_shaktism
				}
			}
		}
	}

	#########################################################################
	#
	# MISC STUFF
	#
	#########################################################################

	
	# Start the Sri Lanka struggle
	# Won't start on any other phase but the predefined starting phase
	# start_struggle = {
	# 	struggle_type = RICE_sri_lanka_struggle
	# 	start_phase = struggle_RICE_sri_lanka_phase_degeneration
	# }

	random_ruler = {
		limit = {
			any_held_county = {
				any_county_province = {
					geographical_region = RICE_sri_lanka_struggle_region
				}
			}
		}
		trigger_event = sri_lanka.0018
	}

	random_ruler = {
		limit = {
			any_held_county = {
				any_county_province = {
					geographical_region = RICE_sri_lanka_struggle_region
				}
			}
		}
		trigger_event = sri_lanka.0018
	}

	random = {
		chance = 50
		random_ruler = {
			limit = {
				any_held_county = {
					any_county_province = {
						geographical_region = RICE_sri_lanka_struggle_region
					}
				}
			}
			trigger_event = sri_lanka.0018
		}
	}

	# Timer for the initial Sri Lanka struggle catalysts
	set_global_variable = {
		name = RICE_sri_lanka_initial_start_catalyst_timer
		value = yes
		days = 1
	}


}



RICE_setup_sri_lanka_after_game_start_effect = {

	
	if = {
		limit = { has_game_rule = RICE_struggle_sri_lanka_toggle_on }		
		# Starting Sri Lankan struggle phase based on game rule
		if = {
			limit = {
				has_game_rule = RICE_sri_lanka_starting_phase_accumulation
			}
			start_struggle = {
				struggle_type = RICE_sri_lanka_struggle
				start_phase = struggle_RICE_sri_lanka_phase_degeneration
			}
			# Won't start on any other phase but the predefined starting phase
			struggle:RICE_sri_lanka_struggle ?= {
				change_struggle_phase = struggle_RICE_sri_lanka_phase_accumulation
			}
		}
		else_if = {
			limit = {
				has_game_rule = RICE_sri_lanka_starting_phase_purification
			}
			start_struggle = {
				struggle_type = RICE_sri_lanka_struggle
				start_phase = struggle_RICE_sri_lanka_phase_degeneration
			}
			# Won't start on any other phase but the predefined starting phase
			struggle:RICE_sri_lanka_struggle ?= {
				change_struggle_phase = struggle_RICE_sri_lanka_phase_purification
			}
		}
		else_if = {
			limit = {
				has_game_rule = RICE_sri_lanka_starting_phase_degeneration
			}
			start_struggle = {
				struggle_type = RICE_sri_lanka_struggle
				start_phase = struggle_RICE_sri_lanka_phase_degeneration
			}
		}
		else_if = {
			limit = {
				has_game_rule = RICE_sri_lanka_starting_phase_random
			}
			start_struggle = {
				struggle_type = RICE_sri_lanka_struggle
				start_phase = struggle_RICE_sri_lanka_phase_degeneration
			}
			random_list = {
				10 = {
					# Stay in Degeneration, you degenerates
				}
				10 = {
					# Won't start on any other phase but the predefined starting phase
					struggle:RICE_sri_lanka_struggle ?= {
						change_struggle_phase = struggle_RICE_sri_lanka_phase_purification
					}
				}
				10 = {
					# Won't start on any other phase but the predefined starting phase
					struggle:RICE_sri_lanka_struggle ?= {
						change_struggle_phase = struggle_RICE_sri_lanka_phase_accumulation
					}
				}
			}
		}
		else = {
			# Although Parākramabāhu's reign is traditionally seen as the start of Mahavihara's triumph over the other Buddhist schools, recent scholarship has questioned this.
			# It appears the reality was Mahavihara became the predominant force in Sri Lanka, but sectarianism did not end yet
			if = {
				limit = {
					game_start_date >= 1150.1.1
				}
				start_struggle = {
					struggle_type = RICE_sri_lanka_struggle
					start_phase = struggle_RICE_sri_lanka_phase_degeneration
				}
				# Won't start on any other phase but the predefined starting phase
				struggle:RICE_sri_lanka_struggle ?= {
					change_struggle_phase = struggle_RICE_sri_lanka_phase_purification
				}
			}
			else_if = {
				limit = {
					game_start_date >= 990.1.1
				}
				start_struggle = {
					struggle_type = RICE_sri_lanka_struggle
					start_phase = struggle_RICE_sri_lanka_phase_degeneration
				}
			}
			else = {
				start_struggle = {
					struggle_type = RICE_sri_lanka_struggle
					start_phase = struggle_RICE_sri_lanka_phase_degeneration
				}
				# Won't start on any other phase but the predefined starting phase
				struggle:RICE_sri_lanka_struggle ?= {
					change_struggle_phase = struggle_RICE_sri_lanka_phase_accumulation
				}
			}
		}

		struggle:RICE_sri_lanka_struggle ?= {
			trigger_event = { on_action = RICE_sri_lanka_struggle_starting_events }
		}
	}



	# Starting Sri Lankan Monastery Prominence based on game rule
	if = {
		limit = {
			has_game_rule = RICE_sri_lanka_starting_prominence_balanced
		}
		set_global_variable = {
			name = RICE_mahavihara_prominence
			value = 100
		}
	
		set_global_variable = {
			name = RICE_abhayagiri_prominence
			value = 100
		}
	
		set_global_variable = {
			name = RICE_jetavana_prominence
			value = 100
		}
	}
	else_if = {
		limit = {
			has_game_rule = RICE_sri_lanka_starting_prominence_balanced_high
		}
		set_global_variable = {
			name = RICE_mahavihara_prominence
			value = 300
		}
	
		set_global_variable = {
			name = RICE_abhayagiri_prominence
			value = 300
		}
	
		set_global_variable = {
			name = RICE_jetavana_prominence
			value = 300
		}
	}
	else_if = {
		limit = {
			has_game_rule = RICE_sri_lanka_starting_prominence_high
		}
		set_global_variable = {
			name = RICE_mahavihara_prominence
			value = 100
		}
	
		set_global_variable = {
			name = RICE_abhayagiri_prominence
			value = 100
		}
	
		set_global_variable = {
			name = RICE_jetavana_prominence
			value = 100
		}
	}
	else_if = {
		limit = {
			has_game_rule = RICE_sri_lanka_starting_prominence_random
		}
		
		set_global_variable = {
			name = RICE_mahavihara_prominence
			value = {
				value = 0
				add = {
					integer_range = {
						min = 1
						max = 200
					}
				}
			}
		}
		
		set_global_variable = {
			name = RICE_abhayagiri_prominence
			value = {
				value = 0
				add = {
					integer_range = {
						min = 1
						max = 200
					}
				}
			}
		}
		
		set_global_variable = {
			name = RICE_jetavana_prominence
			value = {
				value = 0
				add = {
					integer_range = {
						min = 1
						max = 200
					}
				}
			}
		}

	}
	else_if = {
		limit = {
			has_game_rule = RICE_sri_lanka_starting_prominence_random_high
		}
		
		set_global_variable = {
			name = RICE_mahavihara_prominence
			value = {
				value = 0
				add = {
					integer_range = {
						min = 1
						max = 400
					}
				}
			}
		}
		
		set_global_variable = {
			name = RICE_abhayagiri_prominence
			value = {
				value = 0
				add = {
					integer_range = {
						min = 1
						max = 400
					}
				}
			}
		}
		
		set_global_variable = {
			name = RICE_jetavana_prominence
			value = {
				value = 0
				add = {
					integer_range = {
						min = 1
						max = 400
					}
				}
			}
		}

	}
	# Default
	else = {
		set_global_variable = {
			name = RICE_mahavihara_prominence
			value = 100
		}
	
		set_global_variable = {
			name = RICE_abhayagiri_prominence
			value = 150
		}
	
		set_global_variable = {
			name = RICE_jetavana_prominence
			value = 50
		}
	}


	# Assign monastery traits to AI rulers at game start
	# Parakramabahu was a supporter of the Mahavihara
	if = {
		limit = {
			game_start_date = 1178.10.1
		}
		character:217366 = {
			add_trait = RICE_mahavihara_trait
		}
	}
	struggle:RICE_sri_lanka_struggle ?= {
		random_involved_ruler = {
			limit = {
				is_ai = yes
				highest_held_title_tier > tier_barony
				is_landed = yes
				primary_title = { is_mercenary_company = no }
				any_held_title = {
					tier = tier_county
				}
				NOR = {
					has_trait = RICE_mahavihara_trait
					has_trait = RICE_abhayagiri_trait
					has_trait = RICE_jetavana_trait
				}
			}
			add_trait = RICE_mahavihara_trait
		}
		random_involved_ruler = {
			limit = {
				is_ai = yes
				highest_held_title_tier > tier_barony
				is_landed = yes
				primary_title = { is_mercenary_company = no }
				any_held_title = {
					tier = tier_county
				}
				NOR = {
					has_trait = RICE_mahavihara_trait
					has_trait = RICE_abhayagiri_trait
					has_trait = RICE_jetavana_trait
				}
			}
			add_trait = RICE_abhayagiri_trait
		}
		random_involved_ruler = {
			limit = {
				is_ai = yes
				highest_held_title_tier > tier_barony
				is_landed = yes
				primary_title = { is_mercenary_company = no }
				any_held_title = {
					tier = tier_county
				}
				NOR = {
					has_trait = RICE_mahavihara_trait
					has_trait = RICE_abhayagiri_trait
					has_trait = RICE_jetavana_trait
				}
			}
			add_trait = RICE_jetavana_trait
		}
		# 50% chance other rulers in Sri Lanka start off with monastery traits
		every_involved_ruler = {
			limit = {
				is_ai = yes
				NOR = {
					has_trait = RICE_mahavihara_trait
					has_trait = RICE_abhayagiri_trait
					has_trait = RICE_jetavana_trait
				}
				primary_title = { is_mercenary_company = no }
			}
			random_list = {
				30 = {
					# Non-Buddhists less likely to care
					modifier = {
						add = 15
						NOT = { religion = religion:buddhism_religion }
					}

				}
				10 = {
					add_trait = RICE_mahavihara_trait
					# create_character_memory = {
					# 	type = RICE_sri_lanka_start_patronizing_mahavihara_memory
					# }
				}
				10 = {
					add_trait = RICE_abhayagiri_trait
					# create_character_memory = {
					# 	type = RICE_sri_lanka_start_patronizing_abhayagiri_memory
					# }
				}
				10 = {
					add_trait = RICE_jetavana_trait
					# create_character_memory = {
					# 	type = RICE_sri_lanka_start_patronizing_jetavana_memory
					# }
				}
			}
		}
	}

	# Assign character flags to Vijayabahu and Budal in case they exist
	if = {
		limit = {
			game_start_date = 1066.9.15
		}
		character:189029 = {
			add_character_flag = RICE_is_vijayabahu
		}
	}

	
	# Polonnaruwa capital moved
	if = {
		limit = {
			game_start_date >= 1070.1.1
		}
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:RICE_sri_lanka_polonnaruwa_capital_moved
		}
		title:d_sinhala = { set_capital_county = title:c_trincomalee }
		title:k_lanka = { set_capital_county = title:c_trincomalee }
		if = {
			limit = {
				title:c_trincomalee = {
					title_province = { has_special_building = no }
				}
			}
			title:c_trincomalee.title_province = {
				add_special_building_slot = generic_university
				add_special_building = generic_university
			}
		}
	}


}


RICE_sri_lanka_display_values_effect = {

	# Notify rulers in general
	every_ruler = {
		limit = {
			RICE_sri_lanka_can_access_most_sangha_mechanics_trigger = yes
		}
		add_to_list = RICE_sri_lanka_struggle_rulers
	}
	every_in_list = {
		list = RICE_sri_lanka_struggle_rulers
		trigger_event = sri_lanka.0002
	}


}


RICE_sri_lanka_struggle_land_grant_buddhist_effect = {
	if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			OR = {
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_sri_lanka_struggle
				}
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = RICE_sri_lanka_struggle
				}
			}
		}
		struggle:RICE_sri_lanka_struggle ?= {
			activate_struggle_catalyst = {
				catalyst = catalyst_RICE_sri_lanka_land_grants_buddhist
				character = root
			}
		}
	}
}

RICE_sri_lanka_struggle_land_grant_non_buddhist_effect = {
	if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			OR = {
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_sri_lanka_struggle
				}
				any_character_struggle = {
					involvement = interloper
					is_struggle_type = RICE_sri_lanka_struggle
				}
			}
		}
		struggle:RICE_sri_lanka_struggle ?= {
			activate_struggle_catalyst = {
				catalyst = catalyst_RICE_sri_lanka_land_grants_non_buddhist
				character = root
			}
		}
	}
}

RICE_sri_lanka_struggle_ending_uniter_effect = {
	give_nickname = nick_the_great
	if = {
		limit = {
			religion = religion:buddhism_religion
		}
		add_piety = 1000
	}
	else = {
		add_prestige = 1000
	}
	dynasty = {
		add_dynasty_prestige = 1000
		add_dynasty_modifier = {
			modifier = RICE_sri_lanka_sangha_uniter_modifier
		}
	}
	set_global_variable = {
		name = RICE_sri_lanka_ending_united_sangha
		value = yes
	}
	RICE_sri_lanka_struggle_ending_doctrine_effect = yes
	RICE_sri_lanka_struggle_ending_phase_effect = yes
}

RICE_sri_lanka_struggle_ending_destroyer_effect = {
	give_nickname = nick_the_sangha_destroyer
	add_prestige = 500
	add_gold = 3000
	dynasty = {
		add_dynasty_modifier = {
			modifier = RICE_sri_lanka_sangha_destroyer_modifier
		}
	}
	set_global_variable = {
		name = RICE_sri_lanka_ending_destroyed_sangha
		value = yes
	}
	religion:buddhism_religion = {
		every_faith = {
			custom = RICE_every_theravada_faith
			limit = {
				has_doctrine = rice_theravada_canon_doctrine
			}
			add_doctrine = rice_theravada_destruction_of_sangha_doctrine
		}
	}
}

RICE_sri_lanka_struggle_ending_foreigner_effect = {
	give_nickname = nick_the_great
	add_piety = 500
	add_prestige = 500
	dynasty = {
		add_dynasty_prestige = 1000
		add_dynasty_modifier = {
			modifier = RICE_sri_lanka_sangha_reviver_modifier
		}
	}
	set_global_variable = {
		name = RICE_sri_lanka_ending_united_sangha
		value = yes
	}
	set_global_variable = {
		name = RICE_sri_lanka_ending_revived_sangha
		value = yes
	}
	RICE_sri_lanka_struggle_ending_doctrine_effect = yes
	religion:buddhism_religion = {
		every_faith = {
			custom = RICE_every_theravada_faith
			limit = {
				has_doctrine = rice_theravada_canon_doctrine
			}
			add_doctrine = rice_theravada_outsider_doctrine
		}
	}
	# RICE_sri_lanka_new_center_of_buddhism
}

RICE_sri_lanka_struggle_ending_doctrine_effect = {

	# Upgraded Pali Canon doctrines
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		religion:buddhism_religion = {
			every_faith = {
				custom = RICE_every_theravada_faith
				limit = {
					has_doctrine = rice_theravada_canon_doctrine
				}
				add_doctrine = rice_theravada_canon_mahavihara_doctrine
			}
		}
		set_global_variable = {
			name = RICE_sri_lanka_ending_united_sangha_mahavihara
			value = yes
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		religion:buddhism_religion = {
			every_faith = {
				custom = RICE_every_theravada_faith
				limit = {
					has_doctrine = rice_theravada_canon_doctrine
				}
				add_doctrine = rice_theravada_canon_abhayagiri_doctrine
			}
		}
		set_global_variable = {
			name = RICE_sri_lanka_ending_united_sangha_abhayagiri
			value = yes
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		religion:buddhism_religion = {
			every_faith = {
				custom = RICE_every_theravada_faith
				limit = {
					has_doctrine = rice_theravada_canon_doctrine
				}
				add_doctrine = rice_theravada_canon_jetavana_doctrine
			}
		}
		set_global_variable = {
			name = RICE_sri_lanka_ending_united_sangha_jetavana
			value = yes
		}
	}
}

RICE_sri_lanka_struggle_ending_phase_effect = {
	# Phase Doctrines
	if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			struggle:RICE_sri_lanka_struggle ?= {
				is_struggle_phase = struggle_RICE_sri_lanka_phase_degeneration
			}
		}
		religion:buddhism_religion = {
			every_faith = {
				custom = RICE_every_theravada_faith
				limit = {
					has_doctrine = rice_theravada_canon_doctrine
				}
				add_doctrine = rice_theravada_degeneration_doctrine
			}
		}
	}
	else_if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			struggle:RICE_sri_lanka_struggle ?= {
				is_struggle_phase = struggle_RICE_sri_lanka_phase_accumulation
			}
		}
		religion:buddhism_religion = {
			every_faith = {
				custom = RICE_every_theravada_faith
				limit = {
					has_doctrine = rice_theravada_canon_doctrine
				}
				add_doctrine = rice_theravada_accumulation_doctrine
			}
		}
	}
	else_if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			struggle:RICE_sri_lanka_struggle ?= {
				is_struggle_phase = struggle_RICE_sri_lanka_phase_purification
			}
		}
		religion:buddhism_religion = {
			every_faith = {
				custom = RICE_every_theravada_faith
				limit = {
					has_doctrine = rice_theravada_canon_doctrine
				}
				add_doctrine = rice_theravada_purification_doctrine
			}
		}
	}
}

RICE_sri_lanka_monastery_prominence_gain_minor_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_minor
		}
	}
}

RICE_sri_lanka_monastery_prominence_gain_medium_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_medium
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_medium
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_medium
		}
	}
}

RICE_sri_lanka_monastery_prominence_gain_major_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_major
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_major
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_major
		}
	}
}

RICE_sri_lanka_monastery_prominence_gain_massive_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_massive
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_massive
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_massive
		}
	}
}



RICE_sri_lanka_all_monasteries_prominence_loss_minor_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_loss_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_loss_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_loss_minor
		}
	}
	change_global_variable = {
		name = RICE_mahavihara_prominence
		add = RICE_sri_lanka_prominence_loss_minor
	}
	change_global_variable = {
		name = RICE_abhayagiri_prominence
		add = RICE_sri_lanka_prominence_loss_minor
	}
	change_global_variable = {
		name = RICE_jetavana_prominence
		add = RICE_sri_lanka_prominence_loss_minor
	}
}

RICE_sri_lanka_monastery_prominence_all_loss_medium_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_minor
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_loss_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_minor
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_loss_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_minor
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_loss_minor
		}
	}
	else = {
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
	}
}

RICE_sri_lanka_monastery_prominence_all_loss_major_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_loss_medium
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_loss_medium
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_loss_medium
		}
	}
	else = {
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
	}
}

RICE_sri_lanka_monastery_prominence_all_loss_massive_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_loss_major
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_loss_major
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_loss_major
		}
	}
	else = {
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
	}
}

RICE_sri_lanka_monastery_prominence_all_loss_monumental_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_loss_massive
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_loss_massive
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_loss_massive
		}
	}
	else = {
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
	}
}



RICE_sri_lanka_all_monasteries_prominence_all_loss_minor_effect_tooltip = {
	
	if = {
		limit = {
			NOT = { has_trait = RICE_mahavihara_trait }
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_minor_tooltip
	}

	if = {
		limit = {
			NOT = { has_trait = RICE_abhayagiri_trait }
		}
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_minor_tooltip
	}

	if = {
		limit = {
			NOT = { has_trait = RICE_jetavana_trait }
		}
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_minor_tooltip
	}
		
}

RICE_sri_lanka_all_monasteries_prominence_all_loss_medium_effect_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_minor_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_medium_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_medium_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_medium_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_minor_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_medium_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_medium_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_medium_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_minor_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_medium_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_medium_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_medium_tooltip
	}
}


RICE_sri_lanka_all_monasteries_prominence_all_loss_major_effect_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_medium_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_major_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_major_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_major_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_medium_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_major_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_major_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_major_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_medium_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_major_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_major_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_major_tooltip
	}
}


RICE_sri_lanka_all_monasteries_prominence_all_loss_massive_effect_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_major_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_massive_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_massive_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_massive_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_major_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_massive_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_massive_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_massive_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_major_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_massive_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_massive_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_massive_tooltip
	}
}

RICE_sri_lanka_all_monasteries_prominence_all_loss_monumental_effect_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_massive_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_monumental_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_monumental_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_monumental_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_massive_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_monumental_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_monumental_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_monumental_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_massive_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_monumental_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_monumental_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_monumental_tooltip
	}
}

RICE_sri_lanka_all_monasteries_prominence_all_loss_minor_effect_short_tooltip = {
	custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_minor_short_tooltip
	custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_minor_short_tooltip
	custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_minor_short_tooltip
}

RICE_sri_lanka_all_monasteries_prominence_all_loss_medium_effect_short_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_minor_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_medium_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_minor_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_medium_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_minor_short_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_medium_short_tooltip
	}
}


RICE_sri_lanka_all_monasteries_prominence_all_loss_major_effect_short_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_major_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_major_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_medium_short_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_major_short_tooltip
	}
}


RICE_sri_lanka_all_monasteries_prominence_all_loss_massive_effect_short_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_massive_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_massive_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_major_short_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_massive_short_tooltip
	}
}

RICE_sri_lanka_all_monasteries_prominence_all_loss_monumental_effect_short_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_monumental_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_monumental_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_monumental_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_monumental_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_monumental_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_monumental_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_massive_short_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_monumental_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_monumental_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_monumental_short_tooltip
	}
}


RICE_sri_lanka_all_monasteries_prominence_gain_minor_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_minor
		}
	}
	change_global_variable = {
		name = RICE_mahavihara_prominence
		add = RICE_sri_lanka_prominence_gain_minor
	}
	change_global_variable = {
		name = RICE_abhayagiri_prominence
		add = RICE_sri_lanka_prominence_gain_minor
	}
	change_global_variable = {
		name = RICE_jetavana_prominence
		add = RICE_sri_lanka_prominence_gain_minor
	}
}

RICE_sri_lanka_monastery_prominence_all_gain_medium_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_minor
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_minor
		}
	}
	else = {
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_minor
		}
	}
}

RICE_sri_lanka_monastery_prominence_all_gain_major_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_medium
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_medium
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_medium
		}
	}
	else = {
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_medium
		}
	}
}

RICE_sri_lanka_monastery_prominence_all_gain_massive_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_major
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_major
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_major
		}
	}
	else = {
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_major
		}
	}
}

RICE_sri_lanka_monastery_prominence_all_gain_monumental_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_monumental
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_massive
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_monumental
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_massive
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_monumental
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_massive
		}
	}
	else = {
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
	}
}





RICE_sri_lanka_all_monasteries_prominence_all_gain_minor_effect_tooltip = {
	custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_tooltip
	custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_tooltip
	custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_tooltip
}

RICE_sri_lanka_all_monasteries_prominence_all_gain_medium_effect_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_tooltip
	}
}


RICE_sri_lanka_all_monasteries_prominence_all_gain_major_effect_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_major_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_major_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_major_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_tooltip
	}
}


RICE_sri_lanka_all_monasteries_prominence_all_gain_massive_effect_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_massive_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_major_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_major_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_major_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_massive_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_major_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_major_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_major_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_massive_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_major_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_major_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_major_tooltip
	}
}

RICE_sri_lanka_all_monasteries_prominence_all_gain_monumental_effect_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_monumental_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_massive_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_massive_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_massive_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_monumental_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_massive_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_massive_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_massive_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_monumental_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_massive_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_massive_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_massive_tooltip
	}
}

RICE_sri_lanka_all_monasteries_prominence_all_gain_minor_effect_short_tooltip = {
	custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_short_tooltip
	custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_short_tooltip
	custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_short_tooltip
}

RICE_sri_lanka_all_monasteries_prominence_all_gain_medium_effect_short_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_short_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_short_tooltip
	}
}


RICE_sri_lanka_all_monasteries_prominence_all_gain_major_effect_short_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_major_short_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_short_tooltip
	}
}


RICE_sri_lanka_all_monasteries_prominence_all_gain_massive_effect_short_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_major_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_major_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_massive_short_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_major_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_major_short_tooltip
	}
}

RICE_sri_lanka_all_monasteries_prominence_all_gain_monumental_effect_short_tooltip = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_monumental_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_massive_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_monumental_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_massive_short_tooltip
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_monumental_short_tooltip
	}
	else = {
		custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_massive_short_tooltip
		custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_massive_short_tooltip
	}
}



RICE_sri_lanka_vijayabahu_reward_budal_effect = {
	scope:vijayabahu_equivalent = {
		add_prestige = 500
	}
	if = {
		limit = {
			character:RICE_sri_lanka_002 = {
				is_alive = yes
			}
		}
		character:RICE_sri_lanka_002 = {
			add_prestige = 500
			add_piety = 500
		}
		if = {
			limit = {
				character:RICE_sri_lanka_002 = {
					is_ruler = yes
					is_independent_ruler = no
				}	
			}
			character:RICE_sri_lanka_002 = {
				vassal_contract_set_obligation_level = {
					type = title_revocation_rights
					level = 1
				}
			}
		}
	}
	dynasty:RICE_sitnaru_bim = {
		add_dynasty_prestige = 1000
		add_dynasty_modifier = {
			modifier = RICE_sri_lanka_budal_dynasty_privileges
			years = 100
		}
	}
}





RICE_sri_lanka_struggle_irrigation_tank_small_effect = {
	if = {
		limit = {
			has_character_modifier = RICE_sri_lanka_aspiration_rule_sri_lanka
		}
		add_character_flag = RICE_sri_lanka_vijayabahu_built_irrigation_tank
	}
	if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_sri_lanka_struggle
			}
		}
		struggle:RICE_sri_lanka_struggle ?= {
			activate_struggle_catalyst = {
				catalyst = catalyst_RICE_irrigation_tank_small
				character = root
			}
		}
	}
	if = {
		limit = {
			RICE_sri_lanka_can_access_most_sangha_mechanics_trigger = yes

		}
		RICE_sri_lanka_monastery_prominence_gain_medium_effect = yes	
		if = {
			limit = {
				has_trait = RICE_mahavihara_trait
			}
			custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_short_tooltip
		}
		else_if = {
			limit = {
				has_trait = RICE_abhayagiri_trait
			}
			custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_short_tooltip
		}
		else_if = {
			limit = {
				has_trait = RICE_jetavana_trait
			}
			custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_short_tooltip
		}		
		#RICE_sri_lanka_monastery_prominence_all_gain_medium_effect = yes
		#RICE_sri_lanka_all_monasteries_prominence_all_gain_medium_effect_short_tooltip = yes
	}
}

RICE_sri_lanka_struggle_irrigation_tank_medium_effect = {
	if = {
		limit = {
			has_character_modifier = RICE_sri_lanka_aspiration_rule_sri_lanka
		}
		add_character_flag = RICE_sri_lanka_vijayabahu_built_irrigation_tank
	}
	if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_sri_lanka_struggle
			}
		}
		struggle:RICE_sri_lanka_struggle ?= {
			activate_struggle_catalyst = {
				catalyst = catalyst_RICE_irrigation_tank_medium
				character = root
			}
		}
	}
	if = {
		limit = {
			RICE_sri_lanka_can_access_most_sangha_mechanics_trigger = yes

		}	
		RICE_sri_lanka_monastery_prominence_gain_medium_effect = yes	
		if = {
			limit = {
				has_trait = RICE_mahavihara_trait
			}
			custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_short_tooltip
		}
		else_if = {
			limit = {
				has_trait = RICE_abhayagiri_trait
			}
			custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_short_tooltip
		}
		else_if = {
			limit = {
				has_trait = RICE_jetavana_trait
			}
			custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_short_tooltip
		}	
		#RICE_sri_lanka_monastery_prominence_all_gain_major_effect = yes
		#RICE_sri_lanka_all_monasteries_prominence_all_gain_major_effect_short_tooltip = yes
	}
}

RICE_sri_lanka_struggle_irrigation_tank_large_effect = {
	if = {
		limit = {
			has_character_modifier = RICE_sri_lanka_aspiration_rule_sri_lanka
		}
		add_character_flag = RICE_sri_lanka_vijayabahu_built_irrigation_tank
	}
	if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_sri_lanka_struggle
			}
		}
		struggle:RICE_sri_lanka_struggle ?= {
			activate_struggle_catalyst = {
				catalyst = catalyst_RICE_irrigation_tank_large
				character = root
			}
		}
	}
	if = {
		limit = {
			RICE_sri_lanka_can_access_most_sangha_mechanics_trigger = yes

		}	
		RICE_sri_lanka_monastery_prominence_gain_major_effect = yes	
		if = {
			limit = {
				has_trait = RICE_mahavihara_trait
			}
			custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_major_short_tooltip
		}
		else_if = {
			limit = {
				has_trait = RICE_abhayagiri_trait
			}
			custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_major_short_tooltip
		}
		else_if = {
			limit = {
				has_trait = RICE_jetavana_trait
			}
			custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_major_short_tooltip
		}	
		#RICE_sri_lanka_monastery_prominence_all_gain_massive_effect = yes
		#RICE_sri_lanka_all_monasteries_prominence_all_gain_massive_effect_short_tooltip = yes
	}
}

RICE_sri_lanka_struggle_irrigation_tank_huge_effect = {
	if = {
		limit = {
			has_character_modifier = RICE_sri_lanka_aspiration_rule_sri_lanka
		}
		add_character_flag = RICE_sri_lanka_vijayabahu_built_irrigation_tank
	}
	if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_sri_lanka_struggle
			}
		}
		struggle:RICE_sri_lanka_struggle ?= {
			activate_struggle_catalyst = {
				catalyst = catalyst_RICE_irrigation_tank_huge
				character = root
			}
		}
	}
	if = {
		limit = {
			RICE_sri_lanka_can_access_most_sangha_mechanics_trigger = yes
		}
		RICE_sri_lanka_monastery_prominence_gain_massive_effect = yes	
		if = {
			limit = {
				has_trait = RICE_mahavihara_trait
			}
			custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_massive_short_tooltip
		}
		else_if = {
			limit = {
				has_trait = RICE_abhayagiri_trait
			}
			custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_massive_short_tooltip
		}
		else_if = {
			limit = {
				has_trait = RICE_jetavana_trait
			}
			custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_massive_short_tooltip
		}
		#RICE_sri_lanka_monastery_prominence_all_gain_monumental_effect = yes
		#RICE_sri_lanka_all_monasteries_prominence_all_gain_monumental_effect_short_tooltip = yes
	}
}

RICE_sri_lanka_polonnaruwa_capital_effect = {
	if = {
		limit = {
			has_character_modifier = RICE_sri_lanka_aspiration_rule_sri_lanka
		}
		add_character_flag = RICE_sri_lanka_vijayabahu_polonnaruwa_capital_done
	}
	title:c_trincomalee = {
		change_development_level = 5
		change_county_control = medium_county_control_gain
		add_county_modifier = {
			modifier = RICE_sri_lanka_polonnaruwa_capital_modifier
			years = 100
		}
	}
	title:d_sinhala = { set_capital_county = title:c_trincomalee }
	title:k_lanka = { set_capital_county = title:c_trincomalee }
	if = {
		limit = {
			has_title = title:c_trincomalee
		}
		title:c_trincomalee.holder = {
			set_realm_capital = title:c_trincomalee
			give_nickname = nick_the_great
		}
	}
	if = {
		limit = {
			title:c_trincomalee = {
				title_province = { has_special_building = no }
			}
		}
		title:c_trincomalee.title_province = {
			add_special_building_slot = generic_university
			add_building = generic_university
		}
	}
}



RICE_sri_lanka_ramasetu_pilgrimage_completed_log_entry_effect = {
	scope:activity = {
		add_activity_log_entry = {
			key = RICE_sri_lanka_ramasetu_pilgrimage_completed_log
			tags = { completed }
			# this line below adds the entry to the Effects section of the conclusion UI
			show_in_conclusion = yes
			character = root
			scope:host = {
				RICE_local_pilgrimage_generic_host_effect = yes
				stress_impact = {
					base = minor_stress_impact_loss
				}
				if = {
					limit = {
						has_character_modifier = RICE_sri_lanka_ramasetu_inspiration_rama
					}
					show_as_tooltip = {
						add_character_modifier = {
							modifier = RICE_sri_lanka_ramasetu_inspiration_rama
						}
					}
				}
				else_if = {
					limit = {
						has_character_modifier = RICE_sri_lanka_ramasetu_inspiration_ravana_war
					}
					show_as_tooltip = {
						add_character_modifier = {
							modifier = RICE_sri_lanka_ramasetu_inspiration_ravana_war
						}
					}
				}
				else_if = {
					limit = {
						has_character_modifier = RICE_sri_lanka_ramasetu_inspiration_nala_nila
					}
					show_as_tooltip = {
						add_character_modifier = {
							modifier = RICE_sri_lanka_ramasetu_inspiration_nala_nila
						}
					}
				}
				else_if = {
					limit = {
						has_character_modifier = RICE_sri_lanka_ramasetu_inspiration_vibhishana
					}
					show_as_tooltip = {
						add_character_modifier = {
							modifier = RICE_sri_lanka_ramasetu_inspiration_vibhishana
						}
					}
				}
				else_if = {
					limit = {
						has_character_modifier = RICE_sri_lanka_ramasetu_inspiration_sita
					}
					show_as_tooltip = {
						add_character_modifier = {
							modifier = RICE_sri_lanka_ramasetu_inspiration_sita
						}
					}
				}
				else_if = {
					limit = {
						has_character_modifier = RICE_sri_lanka_ramasetu_inspiration_hanuman
					}
					show_as_tooltip = {
						add_character_modifier = {
							modifier = RICE_sri_lanka_ramasetu_inspiration_hanuman
						}
					}
				}
			}
			every_attending_character = {
				limit = { NOT = { this = scope:host } }
				custom = EVERY_ACTIVITY_PARTICIPANT_EFFECT
				RICE_local_pilgrimage_generic_guest_effect = yes
			}	
		}
	}
}




RICE_sri_lanka_relic_veneration_effect = {
	if = {
		limit = {			
			involved_activity = {
				has_activity_option = { category = special_type option = RICE_sri_lanka_relic_veneration_type_bodhi }
			}
		}
		if = {
			limit = {
				OR = {
					has_trait = RICE_mahavihara_trait
					has_global_variable = RICE_sri_lanka_ending_united_sangha_bodhi
				}
			}
			RICE_sri_lanka_monastery_prominence_gain_medium_effect = yes
			add_character_modifier = {
				modifier = RICE_sri_lanka_relic_bodhi_great_modifier
				years = 10
			}
		}
		else = {
			change_global_variable = {
				name = RICE_mahavihara_prominence
				add = RICE_sri_lanka_prominence_gain_minor
			}
			add_character_modifier = {
				modifier = RICE_sri_lanka_relic_bodhi_modifier
				years = 10
			}
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			subtract = RICE_sri_lanka_prominence_gain_minor
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			subtract = RICE_sri_lanka_prominence_gain_minor
		}
	}
	else_if = {
		limit = {
			involved_activity = {
				has_activity_option = { category = special_type option = RICE_sri_lanka_relic_veneration_type_tooth }
			}			
		}
		if = {
			limit = {
				OR = {
					has_trait = RICE_abhayagiri_trait
					has_global_variable = RICE_sri_lanka_ending_united_sangha_tooth
				}
			}
			RICE_sri_lanka_monastery_prominence_gain_medium_effect = yes
			add_character_modifier = {
				modifier = RICE_sri_lanka_relic_tooth_great_modifier
				years = 10
			}
		}
		else = {
			change_global_variable = {
				name = RICE_abhayagiri_prominence
				add = RICE_sri_lanka_prominence_gain_minor
			}
			add_character_modifier = {
				modifier = RICE_sri_lanka_relic_tooth_modifier
				years = 10
			}
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			subtract = RICE_sri_lanka_prominence_gain_minor
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			subtract = RICE_sri_lanka_prominence_gain_minor
		}
	}
	else_if = {
		limit = {
			involved_activity = {
				has_activity_option = { category = special_type option = RICE_sri_lanka_relic_veneration_type_dharmadhatu }
			}			
		}
		if = {
			limit = {
				OR = {
					has_trait = RICE_jetavana_trait
					has_global_variable = RICE_sri_lanka_ending_united_sangha_dharmadhatu
				}
			}
			RICE_sri_lanka_monastery_prominence_gain_medium_effect = yes
			add_character_modifier = {
				modifier = RICE_sri_lanka_relic_dharmadhatu_great_modifier
				years = 10
			}
		}
		else = {
			change_global_variable = {
				name = RICE_jetavana_prominence
				add = RICE_sri_lanka_prominence_gain_minor
			}
			add_character_modifier = {
				modifier = RICE_sri_lanka_relic_dharmadhatu_modifier
				years = 10
			}
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			subtract = RICE_sri_lanka_prominence_gain_minor
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			subtract = RICE_sri_lanka_prominence_gain_minor
		}
	}
	add_piety = 100
	add_prestige = 50
	stress_impact = {
		base = miniscule_stress_impact_loss
		zealous = minor_stress_impact_loss
	}
}




RICE_sri_lanka_relic_veneration_completed_log_entry_effect = {
	scope:activity = {
		add_activity_log_entry = {
			key = RICE_sri_lanka_relic_veneration_completed_log
			tags = { completed }
			# this line below adds the entry to the Effects section of the conclusion UI
			show_in_conclusion = yes
			character = root
			scope:host = {
				RICE_sri_lanka_relic_veneration_effect = yes
				if = {
					limit = {
						exists = struggle:RICE_sri_lanka_struggle
						any_character_struggle = {
							involvement = involved
							is_struggle_type = RICE_sri_lanka_struggle
						}
					}
					struggle:RICE_sri_lanka_struggle ?= {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_sri_lanka_relic_veneration
							character = scope:host
						}
					}
				}
			}
			
			every_attending_character = {
				limit = { NOT = { this = scope:host } }
				custom = EVERY_ACTIVITY_PARTICIPANT_EFFECT
				add_piety = 50
			}	
		}
	}
}

RICE_sri_lanka_relic_veneration_monastery_prominence_log_entry_effect = {
	scope:activity = {
		add_activity_log_entry = {
			key = RICE_sri_lanka_relic_veneration_monastery_prominence_log
			# this line below adds the entry to the Effects section of the conclusion UI
			show_in_conclusion = yes
			character = root
			scope:host = {
				show_as_tooltip = {
					if = {
						limit = {			
							involved_activity = {
								has_activity_option = { category = special_type option = RICE_sri_lanka_relic_veneration_type_bodhi }
							}
						}
						if = {
							limit = {
								OR = {
									has_trait = RICE_mahavihara_trait
									has_global_variable = RICE_sri_lanka_ending_united_sangha_bodhi
								}
							}
							custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_medium_tooltip
						}
						else = {
							custom_tooltip = RICE_sri_lanka_mahavihara_prominence_increase_minor_tooltip
						}
						custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_minor_tooltip
						custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_minor_tooltip
					}
					else_if = {
						limit = {
							involved_activity = {
								has_activity_option = { category = special_type option = RICE_sri_lanka_relic_veneration_type_tooth }
							}			
						}
						if = {
							limit = {
								OR = {
									has_trait = RICE_abhayagiri_trait
									has_global_variable = RICE_sri_lanka_ending_united_sangha_tooth
								}
							}
							custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_medium_tooltip
						}
						else = {
							custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_increase_minor_tooltip
						}
						custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_minor_tooltip
						custom_tooltip = RICE_sri_lanka_jetavana_prominence_decrease_minor_tooltip
					}
					else_if = {
						limit = {
							involved_activity = {
								has_activity_option = { category = special_type option = RICE_sri_lanka_relic_veneration_type_dharmadhatu }
							}			
						}
						if = {
							limit = {
								OR = {
									has_trait = RICE_jetavana_trait
									has_global_variable = RICE_sri_lanka_ending_united_sangha_dharmadhatu
								}
							}
							custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_medium_tooltip
						}
						else = {
							custom_tooltip = RICE_sri_lanka_jetavana_prominence_increase_minor_tooltip
						}
						custom_tooltip = RICE_sri_lanka_mahavihara_prominence_decrease_minor_tooltip
						custom_tooltip = RICE_sri_lanka_abhayagiri_prominence_decrease_minor_tooltip
					}					
				}
			}
		}
	}
}

RICE_sri_lanka_local_deities_misc_effect = {
	add_piety = 50
	if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_sri_lanka_struggle
			}
		}
		struggle:RICE_sri_lanka_struggle ?= {
			activate_struggle_catalyst = {
				catalyst = catalyst_RICE_sri_lanka_local_deity_worshipped
				character = root
			}
		}
	}
	# every_held_title = {
	# 	custom = RICE_every_sri_lanka_county
	# 	limit = {
	# 		tier = tier_county
	# 		any_county_province = {
	# 			geographical_region = RICE_sri_lanka_struggle_region
	# 		}
	# 	}
	# 	random = {
	# 		chance = RICE_sri_lanka_guardian_deity_county_chance
	# 		add_county_modifier = {
	# 			modifier = RICE_sri_lanka_guardian_deity_county_modifier
	# 			years = 10
	# 		}
	# 	}
	# }
}

RICE_sri_lanka_sri_pada_pilgrimage_completed_log_entry_effect = {
	scope:activity = {
		add_activity_log_entry = {
			key = RICE_sri_lanka_ramasetu_pilgrimage_completed_log
			tags = { completed }
			# this line below adds the entry to the Effects section of the conclusion UI
			show_in_conclusion = yes
			character = root
			scope:host = {
				RICE_local_pilgrimage_generic_host_effect = yes
				stress_impact = {
					base = minor_stress_impact_loss
				}
				if = {
					limit = {
						religion = { is_in_family = rf_abrahamic }
					}
					add_character_modifier = {
						modifier = RICE_sri_lanka_sri_pada_abrahamic_modifier
						years = 10
					}
				}
				else_if = {
					limit = {
						religion = religion:buddhism_religion
					}
					add_character_modifier = {
						modifier = RICE_sri_lanka_sri_pada_buddhist_modifier
						years = 10
					}
				}
				else_if = {
					limit = {
						religion = religion:hinduism_religion
					}
					add_character_modifier = {
						modifier = RICE_sri_lanka_sri_pada_hindu_modifier
						years = 10
					}
				}
				else_if = {
					limit = {
						religion = { is_in_family = rf_eastern }
					}
					add_character_modifier = {
						modifier = RICE_sri_lanka_sri_pada_other_eastern_modifier
						years = 10
					}
				}
				else = {
					add_character_modifier = {
						modifier = RICE_sri_lanka_sri_pada_pagan_modifier
						years = 10
					}
				}
				if = {
					limit = {
						exists = struggle:RICE_sri_lanka_struggle
						any_character_struggle = {
							involvement = involved
							is_struggle_type = RICE_sri_lanka_struggle
						}
					}
					struggle:RICE_sri_lanka_struggle ?= {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_sri_lanka_pilgrimage_sri_pada
							character = root
						}
					}
				}
			}
			every_attending_character = {
				limit = { NOT = { this = scope:host } }
				custom = EVERY_ACTIVITY_PARTICIPANT_EFFECT
				RICE_local_pilgrimage_generic_guest_effect = yes
				custom_tooltip = RICE_sri_pada_guest_modifier_tooltip
				hidden_effect = {
					if = {
						limit = {
							religion = { is_in_family = rf_abrahamic }
						}
						add_character_modifier = {
							modifier = RICE_sri_lanka_sri_pada_abrahamic_modifier
							years = 10
						}
					}
					else_if = {
						limit = {
							religion = religion:buddhism_religion
						}
						add_character_modifier = {
							modifier = RICE_sri_lanka_sri_pada_buddhist_modifier
							years = 10
						}
					}
					else_if = {
						limit = {
							religion = religion:hinduism_religion
						}
						add_character_modifier = {
							modifier = RICE_sri_lanka_sri_pada_hindu_modifier
							years = 10
						}
					}
					else_if = {
						limit = {
							religion = { is_in_family = rf_eastern }
						}
						add_character_modifier = {
							modifier = RICE_sri_lanka_sri_pada_other_eastern_modifier
							years = 10
						}
					}
					else = {
						add_character_modifier = {
							modifier = RICE_sri_lanka_sri_pada_pagan_modifier
							years = 10
						}
					}
				}
			}	
		}
	}
}


RICE_sri_lanka_monastery_prominence_all_loss_minor_effect = {

	if = {
		limit = {
			NOT = { has_trait = RICE_mahavihara_trait }
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_minor
		}
	}

	if = {
		limit = {
			NOT = { has_trait = RICE_abhayagiri_trait }
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_minor
		}
	}

	if = {
		limit = {
			NOT = { has_trait = RICE_jetavana_trait }
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_minor
		}
	}

}

RICE_sri_lanka_monastery_prominence_all_loss_medium_effect = {

	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_minor
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
	}

	if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_minor
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
	}

	if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_minor
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
	}

}


RICE_sri_lanka_monastery_prominence_all_loss_major_effect = {

	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
	}

	if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
	}

	if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_medium
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
	}

}

RICE_sri_lanka_monastery_prominence_all_loss_massive_effect = {

	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
	}

	if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
	}

	if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_major
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
	}

}


RICE_sri_lanka_monastery_prominence_all_loss_monumental_effect = {

	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
	}

	if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
	}

	if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_massive
		}
	}
	else = {		
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_loss_monumental
		}
	}

}

# In case prominence goes above 1000 or below 0
RICE_sri_lanka_prominence_reset_effect = {
	if = {
		limit = {
			global_var:RICE_mahavihara_prominence > 1000
		}
		set_global_variable = {
			name = RICE_mahavihara_prominence
			value = 1000
		}		
	}
	else_if = {
		limit = {
			global_var:RICE_mahavihara_prominence < 0
		}
		set_global_variable = {
			name = RICE_mahavihara_prominence
			value = 0
		}		
	}
	if = {
		limit = {
			global_var:RICE_abhayagiri_prominence > 1000
		}
		set_global_variable = {
			name = RICE_abhayagiri_prominence
			value = 1000
		}		
	}
	else_if = {
		limit = {
			global_var:RICE_abhayagiri_prominence < 0
		}
		set_global_variable = {
			name = RICE_abhayagiri_prominence
			value = 0
		}		
	}
	if = {
		limit = {
			global_var:RICE_jetavana_prominence > 1000
		}
		set_global_variable = {
			name = RICE_jetavana_prominence
			value = 1000
		}		
	}
	else_if = {
		limit = {
			global_var:RICE_jetavana_prominence < 0
		}
		set_global_variable = {
			name = RICE_jetavana_prominence
			value = 0
		}		
	}
}


# If the Prominence values don't exist for some reason, set it to a random number
RICE_sri_lanka_prominence_values_restart_calculator_effect = {
	if = {
		limit = {
			NOT = { exists = global_var:RICE_mahavihara_prominence }
		}
		if = {
			limit = {
				exists = struggle:RICE_sri_lanka_struggle
			}
			set_global_variable = {
				name = RICE_mahavihara_prominence
				value = {
					value = 0
					add = {
						integer_range = {
							min = 1
							max = 150
						}
					}
				}
			}
		}
		else = {
			set_global_variable = {
				name = RICE_mahavihara_prominence
				value = {
					value = 0
					add = {
						integer_range = {
							min = 1
							max = 50
						}
					}
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = global_var:RICE_abhayagiri_prominence }
		}
		if = {
			limit = {
				exists = struggle:RICE_sri_lanka_struggle
			}
			set_global_variable = {
				name = RICE_abhayagiri_prominence
				value = {
					value = 0
					add = {
						integer_range = {
							min = 1
							max = 150
						}
					}
				}
			}
		}
		else = {
			set_global_variable = {
				name = RICE_abhayagiri_prominence
				value = {
					value = 0
					add = {
						integer_range = {
							min = 1
							max = 50
						}
					}
				}
			}
		}
	}
	if = {
		limit = {
			NOT = { exists = global_var:RICE_jetavana_prominence }
		}
		if = {
			limit = {
				exists = struggle:RICE_sri_lanka_struggle
			}
			set_global_variable = {
				name = RICE_jetavana_prominence
				value = {
					value = 0
					add = {
						integer_range = {
							min = 1
							max = 150
						}
					}
				}
			}
		}
		else = {
			set_global_variable = {
				name = RICE_jetavana_prominence
				value = {
					value = 0
					add = {
						integer_range = {
							min = 1
							max = 50
						}
					}
				}
			}
		}
	}
}



RICE_sri_lanka_annual_prominence_values_change_effect = {

	if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			struggle:RICE_sri_lanka_struggle ?= {
				is_struggle_phase = struggle_RICE_sri_lanka_phase_purification
			}
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_purification_min
						max = RICE_sri_lanka_prominence_change_purification_max
					}
				}
			}
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_purification_min
						max = RICE_sri_lanka_prominence_change_purification_max
					}
				}
			}
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_purification_min
						max = RICE_sri_lanka_prominence_change_purification_max
					}
				}
			}
		}
	}
	else_if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			struggle:RICE_sri_lanka_struggle ?= {
				is_struggle_phase = struggle_RICE_sri_lanka_phase_accumulation
			}
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_accumulation_min
						max = RICE_sri_lanka_prominence_change_accumulation_max
					}
				}
			}
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_accumulation_min
						max = RICE_sri_lanka_prominence_change_accumulation_max
					}
				}
			}
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_accumulation_min
						max = RICE_sri_lanka_prominence_change_accumulation_max
					}
				}
			}
		}
	}
	else_if = {
		limit = {
			exists = struggle:RICE_sri_lanka_struggle
			struggle:RICE_sri_lanka_struggle ?= {
				is_struggle_phase = struggle_RICE_sri_lanka_phase_degeneration
			}
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_degeneration_min
						max = RICE_sri_lanka_prominence_change_degeneration_max
					}
				}
			}
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_degeneration_min
						max = RICE_sri_lanka_prominence_change_degeneration_max
					}
				}
			}
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_degeneration_min
						max = RICE_sri_lanka_prominence_change_degeneration_max
					}
				}
			}
		}
	}
	else_if = {
		limit = {
			has_global_variable = RICE_sri_lanka_ending_united_sangha_mahavihara
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_winner_min
						max = RICE_sri_lanka_prominence_change_winner_max
					}
				}
			}
		}
		# No need to make it worse if it's already low
		if = {
			limit = {
				global_var:RICE_abhayagiri_prominence > 100
			}
			change_global_variable = {
				name = RICE_abhayagiri_prominence
				add = {
					value = {
						integer_range = {
							min = RICE_sri_lanka_prominence_change_loser_min
							max = RICE_sri_lanka_prominence_change_loser_max
						}
					}
				}
			}
		}
		if = {
			limit = {
				global_var:RICE_jetavana_prominence > 100
			}
			change_global_variable = {
				name = RICE_jetavana_prominence
				add = {
					value = {
						integer_range = {
							min = RICE_sri_lanka_prominence_change_loser_min
							max = RICE_sri_lanka_prominence_change_loser_max
						}
					}
				}
			}
		}
	}
	else_if = {
		limit = {
			has_global_variable = RICE_sri_lanka_ending_united_sangha_abhayagiri
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_winner_min
						max = RICE_sri_lanka_prominence_change_winner_max
					}
				}
			}
		}
		# No need to make it worse if it's already low
		if = {
			limit = {
				global_var:RICE_mahavihara_prominence > 100
			}
			change_global_variable = {
				name = RICE_mahavihara_prominence
				add = {
					value = {
						integer_range = {
							min = RICE_sri_lanka_prominence_change_loser_min
							max = RICE_sri_lanka_prominence_change_loser_max
						}
					}
				}
			}
		}
		if = {
			limit = {
				global_var:RICE_jetavana_prominence > 100
			}
			change_global_variable = {
				name = RICE_jetavana_prominence
				add = {
					value = {
						integer_range = {
							min = RICE_sri_lanka_prominence_change_loser_min
							max = RICE_sri_lanka_prominence_change_loser_max
						}
					}
				}
			}
		}
	}
	else_if = {
		limit = {
			has_global_variable = RICE_sri_lanka_ending_united_sangha_jetavana
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = {
				value = {
					integer_range = {
						min = RICE_sri_lanka_prominence_change_winner_min
						max = RICE_sri_lanka_prominence_change_winner_max
					}
				}
			}
		}
		# No need to make it worse if it's already low
		if = {
			limit = {
				global_var:RICE_mahavihara_prominence > 100
			}
			change_global_variable = {
				name = RICE_mahavihara_prominence
				add = {
					value = {
						integer_range = {
							min = RICE_sri_lanka_prominence_change_loser_min
							max = RICE_sri_lanka_prominence_change_loser_max
						}
					}
				}
			}
		}
		if = {
			limit = {
				global_var:RICE_abhayagiri_prominence > 100
			}
			change_global_variable = {
				name = RICE_abhayagiri_prominence
				add = {
					value = {
						integer_range = {
							min = RICE_sri_lanka_prominence_change_loser_min
							max = RICE_sri_lanka_prominence_change_loser_max
						}
					}
				}
			}
		}
	}


}






RICE_sri_lanka_monastery_prominence_gain_all_minor_effect = {
	if = {
		limit = {
			has_trait = RICE_mahavihara_trait
		}
		change_global_variable = {
			name = RICE_mahavihara_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		add_trait_xp = {
			trait = RICE_mahavihara_trait
			value = RICE_sri_lanka_patron_trait_gain_massive
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_abhayagiri_trait
		}
		change_global_variable = {
			name = RICE_abhayagiri_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		add_trait_xp = {
			trait = RICE_abhayagiri_trait
			value = RICE_sri_lanka_patron_trait_gain_massive
		}
	}
	else_if = {
		limit = {
			has_trait = RICE_jetavana_trait
		}
		change_global_variable = {
			name = RICE_jetavana_prominence
			add = RICE_sri_lanka_prominence_gain_massive
		}
		add_trait_xp = {
			trait = RICE_jetavana_trait
			value = RICE_sri_lanka_patron_trait_gain_massive
		}
	}
}


RICE_sri_lanka_new_culture_or_faith_involvement_effect = {
	add_piety = 150
	add_prestige = 150
	if = {
		limit = {
			NOT = { struggle:RICE_sri_lanka_struggle ?= { is_culture_involved_in_struggle = root.culture } }
		}
		struggle:RICE_sri_lanka_struggle ?= { set_culture_as_involved = root.culture }
	}
	if = {
		limit = {
			NOT = { struggle:RICE_sri_lanka_struggle ?= { is_faith_involved_in_struggle = root.faith } }
		}
		struggle:RICE_sri_lanka_struggle ?= { set_faith_as_involved = root.faith }
	}
	if = {
		limit = {
			OR = {
				has_trait = RICE_mahavihara_trait
				has_trait = RICE_abhayagiri_trait
				has_trait = RICE_jetavana_trait
			}
		}
		RICE_sri_lanka_monastery_prominence_gain_massive_effect = yes
	}
}

RICE_sri_lanka_legend_seed_struggle_ending_effect = {
	if = {
		limit = {
			religion = religion:buddhism_religion
		}
		create_legend_seed = {
			type = holy
			quality = famed
			chronicle = RICE_sri_lanka_struggle_conclusion
			properties = {
				struggle_ender = $ENDER$
				struggle = flag:$STRUGGLE$
				religion = religion:buddhism_religion
			}
		}
	}
	else = {		
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_sri_lanka_struggle_conclusion
			properties = {
				struggle_ender = $ENDER$
				struggle = flag:$STRUGGLE$
				religion = religion:buddhism_religion
			}
		}
	}
}








