RICE_setup_zhangzhung_flavor_pack_effect = {

	############################################################
	#
	# PROTECT DEAD CHARACTERS
	#
	############################################################

	# Protect Guru Rinpoche / Padmasambhava
	character:RICE_buddhist_001 = { make_unprunable = yes }


	############################################################
	#
	# RELIGION CHANGES
	#
	############################################################

	faith:old_bon = {
		add_doctrine = rice_bon_deities_old_doctrine
		# Zhangzhung elites were entombed in tombs
		if = {
			limit = { has_doctrine = doctrine_funeral_sky_burial }
			remove_doctrine = doctrine_funeral_sky_burial
			add_doctrine = doctrine_funeral_stoic
		}
		# To represent the importance of mountains
		if = {
			limit = { has_doctrine = tenet_ritual_celebrations }
			remove_doctrine = tenet_ritual_celebrations
			add_doctrine = tenet_cthonic_redoubts
		}
		# To represent the stone megalithic sites prevalent in Zhangzhung and ancient Tibet in general
		# if = {
		# 	limit = { has_doctrine = tenet_ritual_celebrations }
		# 	remove_doctrine = tenet_ritual_celebrations
		# 	add_doctrine = tenet_megaliths
		# }
	}
	faith:bon = {
		add_doctrine = rice_bon_deities_new_doctrine
		# To represent the importance of mountains
		if = {
			limit = { has_doctrine = tenet_ritual_celebrations }
			remove_doctrine = tenet_ritual_celebrations
			add_doctrine = tenet_cthonic_redoubts
		}
	}

	faith:kinnaur_pagan = {
		add_doctrine = rice_bon_deities_old_doctrine
	}

	title:c_kamru = {
		set_county_faith = faith:kinnaur_pagan
	}

	title:c_kamru.holder = {
		set_character_faith_with_conversion = faith:kinnaur_pagan
		every_courtier = {
			limit = {
				is_lowborn = yes
				OR = {
					culture = { has_cultural_pillar = heritage_tibetan }
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
			random = {
				chance = 70
				set_character_faith_with_conversion = faith:kinnaur_pagan
			}
		}
	}

	############################################################ 
	#
	# CULTURE CHANGES
	#
	############################################################

	# Can't find any info on actual language of Sumpa, but it appears to be distinct from Tibetan and Zhangzhung
	# For now I've made it Qiangic, since in Chinese sources they are said to be Qiang, which is a vague term but will have to do for now
	culture:sumpa = {
		set_culture_pillar = ethos_stoic
		set_culture_pillar = language_qiangic 	
		add_culture_tradition = tradition_RICE_changthang_nomads
		remove_variable = tradition_cooldown
	}

	culture:kirati = {
		set_culture_pillar = language_kirati
		#add_innovation = innovation_RICE_netsang_relationships
	}

	culture:lhomon = {
		set_culture_pillar = language_monpa 
		#add_innovation = innovation_RICE_netsang_relationships	
	}

	culture:zhangzhung = {
		set_culture_pillar = language_west_himalayan
		add_culture_tradition = tradition_castle_keepers
		add_culture_tradition = tradition_RICE_changthang_nomads
		#add_culture_tradition = tradition_RICE_himalayan_traders
		add_culture_tradition = tradition_RICE_zhangzhung_stonework
		remove_variable = tradition_cooldown
	}

	culture:gandhari = {
		add_culture_tradition = tradition_RICE_gandharan_art
		remove_variable = tradition_cooldown
	}

	# if = {
	# 	limit = {
	# 		game_start_date >= 1250.1.1
	# 	}
	# 	culture:pamiri = {
	# 		add_innovation = innovation_RICE_glacier_grafting
	# 	}
	
	# 	culture:kashmiri = {
	# 		add_innovation = innovation_RICE_glacier_grafting
	# 	}
	
	# 	culture:burusho = {
	# 		add_innovation = innovation_RICE_glacier_grafting
	# 	}
	
	# 	culture:nuristani = {
	# 		add_innovation = innovation_RICE_glacier_grafting
	# 	}
	
	# }



	# culture:bodpa = {
	# 	add_innovation = innovation_RICE_netsang_relationships
	# }

	# culture:tsangpa = {
	# 	add_innovation = innovation_RICE_netsang_relationships
	# }

	# culture:nepali = {
	# 	add_innovation = innovation_RICE_netsang_relationships
	# }

	# culture:zhangzhung = {
	# 	add_innovation = innovation_RICE_netsang_relationships
	# }

	# culture:tuyuhun = {
	# 	add_culture_tradition = tradition_RICE_himalayan_traders
	# 	remove_variable = tradition_cooldown
	# }
	

	# gandhari
	if = {
		limit = {
			NOT = { has_global_variable = RICE_game_started_on_TFE_start_date }
			game_start_date < 1250.1.1
		}
		title:c_udabhanda = {
			set_county_culture = culture:gandhari
			holder = {
				every_courtier = {
					limit = {
						is_lowborn = yes
						culture = { has_cultural_pillar = heritage_indo_aryan }
						
					}
					random = {
						chance = 40
						set_culture = culture:gandhari
					}
				}
			}
		}
		title:c_purushapura = {
			set_county_culture = culture:gandhari
			holder = {
				every_courtier = {
					limit = {
						is_lowborn = yes
						culture = { has_cultural_pillar = heritage_indo_aryan }
						
					}
					random = {
						chance = 40
						set_culture = culture:gandhari
					}
				}
			}
		}
		title:c_nandana = {
			set_county_culture = culture:gandhari
			holder = {
				every_courtier = {
					limit = {
						is_lowborn = yes
						culture = { has_cultural_pillar = heritage_indo_aryan }
						
					}
					random = {
						chance = 40
						set_culture = culture:gandhari
					}
				}
			}
		}
		title:c_bannu = {
			set_county_culture = culture:gandhari
			holder = {
				every_courtier = {
					limit = {
						is_lowborn = yes
						culture = { has_cultural_pillar = heritage_indo_aryan }
						
					}
					random = {
						chance = 40
						set_culture = culture:gandhari
					}
				}
			}
		}
	}
	# if = {
	# 	limit = {
	# 		NOT = { has_global_variable = RICE_game_started_on_TFE_start_date }
	# 		game_start_date < 1000.1.1
	# 	}
	# 	title:c_urgun = {
	# 		set_county_culture = culture:gandhari
	# 		holder = {
	# 			every_courtier = {
	# 				limit = {
	# 					is_lowborn = yes
	# 					culture = { has_cultural_pillar = heritage_indo_aryan }
						
	# 				}
	# 				random = {
	# 					chance = 40
	# 					set_culture = culture:gandhari
	# 				}
	# 			}
	# 		}
	# 	}
	# }
	if = {
		limit = {
			game_start_date = 867.1.1
		}
		character:175060 = {
			set_culture = culture:gandhari
			every_courtier = {
				limit = {
					is_lowborn = yes
					OR = {
						culture = { has_cultural_pillar = heritage_indo_aryan }
						culture = { has_cultural_pillar = heritage_iranian }
					}					
				}
				random = {
					chance = 60
					set_culture = culture:gandhari
				}
			}
			#make_gandhari_culture_effect = yes
		}
	}


	# To represent some West Himalayist peoples and remnants of Bon/Zhangzhung
	if = {
		limit = {
			current_date <= 1200.1.1	
		}
		title:c_dhankar = {
			set_county_culture = culture:zhangzhung
			set_county_faith = faith:bon
		}
		title:c_darcha = {
			set_county_culture = culture:zhangzhung
		}
	}


	############################################################
	#
	# HISTORY/TITLE CHANGES
	#
	############################################################ 

	# 1066 stuff
	if = {
		limit = {
			game_start_date = 1066.9.15
		}
		# Milarepa
		character:RICE_buddhist_008 = {
			add_piety_level = 2
		}
		if = {
			limit = {
				character:RICE_buddhist_008 = {
					is_pool_character = no
				}
			}
			character:RICE_buddhist_008 = {		
				move_to_pool = yes	
			}
		}
		# Dpal Dus Sgra
		character:RICE_zhangzhung_001 = {
			get_title = title:c_padum
			get_title = title:c_dhankar
			get_title = title:c_purig # Vanilla's Purig family is fictitious placeholders
			get_title = title:d_zanskar
			save_scope_as = dpal_dus_sgra
			RICE_setup_new_granted_ruler_bonuses_effect = yes
			add_character_modifier = {
				modifier = RICE_zhangzhung_governor_of_brusha
			}
		}
		# Chakchang Lhadok
		character:RICE_hrugs_wer_001 = {
			get_title = title:c_purang
			get_title = title:c_zhongba
			get_title = title:d_purang
			save_scope_as = hrugs_wer_ruler
			RICE_setup_new_granted_ruler_bonuses_effect = yes
			dynasty ?= {
				add_dynasty_modifier = {
					modifier = RICE_zhangzhung_hrugs_wer_modifier
				}
			}
		}
		# Hrugs wer dmag pon lha blon
		character:RICE_hrugs_wer_004 = {
			get_title = title:c_zhongba
			#save_scope_as = hrugs_wer_ruler_2
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		# Mang Wer clan ruler
		character:RICE_mang_wer_3 = {
			get_title = title:c_kyunglung
			#save_scope_as = mang_wer_ruler
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		# Yudra family ruler (Hrugs Wer sub-family)
		character:RICE_yudra_11 = {
			get_title = title:c_dhankar
			save_scope_as = yudra_ruler
			RICE_setup_new_granted_ruler_bonuses_effect = yes
		}
		character:247145 = {
			save_scope_as = guge_liege
		}
		character:304754 = {
			save_scope_as = guge_other
		}
		character:304789 = {
			#get_title = title:c_diskit
			save_scope_as = purig_ruler
		}
		character:304966 = {
			save_scope_as = kamru_ruler
		}
		character:247333 = {
			save_scope_as = manthang_ruler
		}
	
		# Vassal Changes

		# Dpal Dus Sgra
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		scope:dpal_dus_sgra = {
			change_liege = {
				liege = scope:guge_liege
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

		# Dpal Dus Sgra's vassals
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		scope:guge_other = {
			change_liege = {
				liege = scope:dpal_dus_sgra
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		scope:kamru_ruler = {
			change_liege = {
				liege = scope:dpal_dus_sgra
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		scope:purig_ruler = {
			change_liege = {
				liege = scope:dpal_dus_sgra
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

		
		# Hrugs Wer Family Vassal
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		scope:hrugs_wer_ruler = {
			change_liege = {
				liege = scope:guge_liege
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		scope:manthang_ruler = {
			change_liege = {
				liege = scope:hrugs_wer_ruler
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

		# Mang Wer Family 
		create_title_and_vassal_change = {
			type = swear_fealty
			save_scope_as = change
		}
		scope:RICE_mang_wer_3 = {
			change_liege = {
				liege = scope:guge_liege
				change = scope:change
			}
		}
		resolve_title_and_vassal_change = scope:change

	}
	
	############################################################
	#
	# BUILDING
	#
	############################################################

	# Tsaparang Fortress
	if = {
		limit = {
			current_date > 950.1.1
			title:b_tsaparang = {
				title_province = { has_special_building = no }
			}
		}
		title:b_tsaparang.title_province = {
			add_special_building = RICE_zhangzhung_tsaparang_fortress
		}
	}
	else_if = {
		limit = {
			current_date <= 950.1.1
			title:b_tsaparang = {
				title_province = { has_special_building = no }
			}
		}
		title:b_tsaparang.title_province = {
			add_special_building_slot = RICE_zhangzhung_tsaparang_fortress
		}		
	}
	# Lake Dangra
	if = {
		limit = {
			title:b_nyima = {
				title_province = { has_special_building = no }
			}
		}
		title:b_nyima.title_province = {
			add_special_building = RICE_zhangzhung_lake_dangra
		}
	}
	# Tabo Monastery
	if = {
		limit = {
			current_date > 996.1.1
			title:b_tabo = {
				title_province = { has_special_building = no }
			}
		}
		title:b_tabo.title_province = {
			add_special_building = RICE_zhangzhung_tabo_monastery
		}
	}
	else_if = {
		limit = {
			current_date <= 996.1.1
			title:b_tabo = {
				title_province = { has_special_building = no }
			}
		}
		title:b_tabo.title_province = {
			add_special_building_slot = RICE_zhangzhung_tabo_monastery
		}		
	}
	# Kangra Fort
	if = {
		limit = {
			title:b_kangra = {
				title_province = { has_special_building = no }
			}
		}
		title:b_kangra.title_province = {
			add_special_building = RICE_zhangzhung_kangra_fort
		}
	}
	# Phuktal Monastery
	if = {
		limit = {
			title:b_padum = {
				title_province = { has_special_building = no }
			}
		}
		title:b_padum.title_province = {
			add_special_building = RICE_zhangzhung_phuktal_monastery
		}
	}
	# Alchi Monastery
	if = {
		limit = {
			current_date > 1080.1.1 # Although traditionally believed to be founded by Rinchen Zangpo, according to inscriptions discovered at Alchi, it was actually in the last two decades of the 11th century
			title:b_leh = {
				title_province = { has_special_building = no }
			}
		}
		title:b_leh.title_province = {
			add_special_building = RICE_zhangzhung_alchi_monastery
		}
	}
	else_if = {
		limit = {
			current_date <= 1080.1.1
			title:b_leh = {
				title_province = { has_special_building = no }
			}
		}
		title:b_leh.title_province = {
			add_special_building_slot = RICE_zhangzhung_alchi_monastery
		}		
	}
	# Sacred Rocks of Hunza
	if = {
		limit = {
			title:b_gilgit = {
				title_province = { has_special_building = no }
			}
		}
		title:b_gilgit.title_province = {
			add_special_building = RICE_sacred_rocks_of_hunza
		}
	}

	############################################################
	#
	# MISCELLANEOUS
	#
	############################################################

	# Create a couple fictional Tertons at game start in 1066 and 1178
	if = {
		limit = {
			game_start_date >= 1000.1.1
		}
		# At least one Buddhist terton
		random_ruler = {
			limit = {
				capital_province = {
					geographical_region = world_himalaya
				}
				OR = {
					religion = religion:buddhism_religion
					religion = religion:bon_religion
					religion = religion:west_himalayan_religion
				}
			}
			trigger_event = zhangzhung.0021
		}
		title:c_kamru.holder = {
			trigger_event = zhangzhung.0021
		}
		random_county_in_region = {
			region = world_tibet
			limit = {
				holder = {
					OR = {
						religion = religion:buddhism_religion
						religion = religion:bon_religion
						religion = religion:west_himalayan_religion
					}
				}
			}
			holder = {
				trigger_event = zhangzhung.0020
			}
		}
		# At least one Bon terton
		random_county_in_region = {
			region = world_tibet
			limit = {
				holder = {
					OR = {
						religion = religion:buddhism_religion
						religion = religion:bon_religion
						religion = religion:west_himalayan_religion
					}
				}
			}
			holder = {
				trigger_event = zhangzhung.0021
			}
		}
		random = {
			chance = 66
			random_county_in_region = {
				region = world_tibet
				limit = {
					holder = {
						OR = {
							religion = religion:buddhism_religion
							religion = religion:bon_religion
							religion = religion:west_himalayan_religion
						}
					}
				}
				holder = {
					random_list = {
						75 = {
							trigger_event = zhangzhung.0020
						}
						25 = {
							trigger_event = zhangzhung.0021
						}
					}
				}
			}
		}
		random = {
			chance = 33
			random_county_in_region = {
				region = world_tibet
				limit = {
					holder = {
						OR = {
							religion = religion:buddhism_religion
							religion = religion:bon_religion
							religion = religion:west_himalayan_religion
						}
					}
				}
				holder = {
					random_list = {
						75 = {
							trigger_event = zhangzhung.0020
						}
						25 = {
							trigger_event = zhangzhung.0021
						}
					}
				}
			}
		}
	}				
	if = {
		limit = {
			game_start_date >= 1150.1.1
		}
		# At least one Buddhist terton
		random_county_in_region = {
			region = world_tibet
			limit = {
				holder = {
					OR = {
						religion = religion:buddhism_religion
						religion = religion:bon_religion
						religion = religion:west_himalayan_religion
					}
				}
			}
			holder = {
				trigger_event = zhangzhung.0020
			}
		}
		# At least one Bon terton
		random_county_in_region = {
			region = world_tibet
			limit = {
				holder = {
					OR = {
						religion = religion:buddhism_religion
						religion = religion:bon_religion
						religion = religion:west_himalayan_religion
					}
				}
			}
			holder = {
				trigger_event = zhangzhung.0021
			}
		}
		random = {
			chance = 66
			random_county_in_region = {
				region = world_tibet
				limit = {
					holder = {
						OR = {
							religion = religion:buddhism_religion
							religion = religion:bon_religion
							religion = religion:west_himalayan_religion
						}
					}
				}
				holder = {
					random_list = {
						75 = {
							trigger_event = zhangzhung.0020
						}
						25 = {
							trigger_event = zhangzhung.0021
						}
					}
				}
			}
		}
		random = {
			chance = 33
			random_county_in_region = {
				region = world_tibet
				limit = {
					holder = {
						OR = {
							religion = religion:buddhism_religion
							religion = religion:bon_religion
							religion = religion:west_himalayan_religion
						}
					}
				}
				holder = {
					random_list = {
						75 = {
							trigger_event = zhangzhung.0020
						}
						25 = {
							trigger_event = zhangzhung.0021
						}
					}
				}
			}
		}
	}	

	# 1066 stuff
	if = {
		limit = {
			game_start_date = 1066.9.15
		}
		# Dpal Dus Sgra's inscription
		title:c_purig = {
			add_county_modifier = {
				modifier = RICE_zhangzhung_brusha_governor_inscription
				years = 25
			}
		}
	}
	
}


RICE_convert_from_bon_general_effect = {
	add_legitimacy = medium_legitimacy_gain
}


RICE_convert_from_bon_lamaism_effect = {
	if = {
		limit = {
			capital_county.faith = faith
		}
		capital_county = { set_county_faith = faith:lamaism }
	}
	show_as_tooltip = { set_character_faith = faith:lamaism }
	hidden_effect = {
		set_character_faith_with_conversion = faith:lamaism
	}
	faith:lamaism = {
		change_fervor = {
			value = 10
			desc = fervor_gain_bon_convert
		}
	}
}

RICE_convert_from_bon_new_bon_effect = {
	if = {
		limit = {
			capital_county.faith = faith
		}
		capital_county = { set_county_faith = faith:bon }
	}
	show_as_tooltip = { set_character_faith = faith:bon }
	hidden_effect = {
		set_character_faith_with_conversion = faith:bon
	}
	faith:bon = {
		change_fervor = {
			value = 10
			desc = fervor_gain_bon_convert
		}
	}
}

RICE_convert_from_bon_mahayana_effect = {
	if = {
		limit = {
			capital_county.faith = faith
		}
		capital_county = { set_county_faith = faith:mahayana }
	}
	show_as_tooltip = { set_character_faith = faith:mahayana }
	hidden_effect = {
		set_character_faith_with_conversion = faith:mahayana
	}
	faith:mahayana = {
		change_fervor = {
			value = 10
			desc = fervor_gain_bon_convert
		}
	}
}

RICE_convert_from_bon_vajrayana_effect = {
	if = {
		limit = {
			capital_county.faith = faith
		}
		capital_county = { set_county_faith = faith:vajrayana }
	}
	show_as_tooltip = { set_character_faith = faith:vajrayana }
	hidden_effect = {
		set_character_faith_with_conversion = faith:vajrayana
	}
	faith:vajrayana = {
		change_fervor = {
			value = 10
			desc = fervor_gain_bon_convert
		}
	}
}

RICE_convert_from_bon_manichean_effect = {
	if = {
		limit = {
			capital_county.faith = faith
		}
		capital_county = { set_county_faith = faith:manichean }
	}
	show_as_tooltip = { set_character_faith = faith:manichean }
	hidden_effect = {
		set_character_faith_with_conversion = faith:manichean
	}
	faith:manichean = {
		change_fervor = {
			value = 10
			desc = fervor_gain_bon_convert
		}
	}
}

RICE_convert_from_bon_shaivism_effect = {
	if = {
		limit = {
			capital_county.faith = faith
		}
		capital_county = { set_county_faith = faith:shaivism }
	}
	show_as_tooltip = { set_character_faith = faith:shaivism }
	hidden_effect = {
		set_character_faith_with_conversion = faith:shaivism
	}
	faith:shaivism = {
		change_fervor = {
			value = 10
			desc = fervor_gain_bon_convert
		}
	}
}

RICE_convert_from_bon_nestorian_effect = {
	if = {
		limit = {
			capital_county.faith = faith
		}
		capital_county = { set_county_faith = faith:nestorian }
	}
	show_as_tooltip = { set_character_faith = faith:nestorian }
	hidden_effect = {
		set_character_faith_with_conversion = faith:nestorian
	}
	faith:nestorian = {
		change_fervor = {
			value = 10
			desc = fervor_gain_bon_convert
		}
	}
}



RICE_terton_xp_boost = {
	add_trait_xp = { 
		trait = RICE_terton 
		value = 5
	}
}




make_gandhari_culture_effect = {
	#Convert your, and your whole family's, culture
	set_culture = culture:gandhari
	if = {
		limit = {
			any_spouse = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_iranian }
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
		}
		every_spouse = {
			limit = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_iranian }
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
			set_culture = culture:gandhari
		}
	}
	if = {
		limit = {
			any_close_family_member = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_iranian }
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
		}
		every_close_family_member = {
			custom = all_family_members
			limit = {
				is_landed = no				
				OR = {
					culture = { has_cultural_pillar = heritage_iranian }
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
			set_culture = culture:gandhari
		}
	}

	#Convert appropriate vassals, and their family
	if = {
		limit = {
			any_vassal = {			
				OR = {
					culture = { has_cultural_pillar = heritage_iranian }
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
		}
		every_vassal = {
			limit = {
				OR = {
					culture = { has_cultural_pillar = heritage_iranian }
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
			set_culture = culture:gandhari
			hidden_effect = {
				if = {
					limit = {
						any_spouse = {
							is_landed = no				
							OR = {
								culture = { has_cultural_pillar = heritage_iranian }
								culture = { has_cultural_pillar = heritage_indo_aryan }
							}
						}
					}
					every_spouse = {
						limit = {
							is_landed = no				
							OR = {
								culture = { has_cultural_pillar = heritage_iranian }
								culture = { has_cultural_pillar = heritage_indo_aryan }
							}
						}
						set_culture = culture:gandhari
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no				
							OR = {
								culture = { has_cultural_pillar = heritage_iranian }
								culture = { has_cultural_pillar = heritage_indo_aryan }
							}
						}
					}
					every_close_family_member = {
						custom = all_family_members
						limit = {
							is_landed = no				
							OR = {
								culture = { has_cultural_pillar = heritage_iranian }
								culture = { has_cultural_pillar = heritage_indo_aryan }
							}
						}
						set_culture = culture:gandhari
					}
				}
			}
		}
	}

	#Convert appropriate courtiers
	if = {
		limit = {
			any_courtier_or_guest = {			
				OR = {
					culture = { has_cultural_pillar = heritage_iranian }
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
		}
		every_courtier_or_guest = {
			limit = {
				OR = {
					culture = { has_cultural_pillar = heritage_iranian }
					culture = { has_cultural_pillar = heritage_indo_aryan }
				}
			}
			set_culture = culture:gandhari
			hidden_effect = {
				if = {
					limit = {
						any_spouse = {
							is_landed = no				
							OR = {
								culture = { has_cultural_pillar = heritage_iranian }
								culture = { has_cultural_pillar = heritage_indo_aryan }
							}
						}
					}
					every_spouse = {
						limit = {
							is_landed = no				
							OR = {
								culture = { has_cultural_pillar = heritage_iranian }
								culture = { has_cultural_pillar = heritage_indo_aryan }
							}
						}
						set_culture = culture:gandhari
					}
				}
				if = {
					limit = {
						any_close_family_member = {
							is_landed = no				
							OR = {
								culture = { has_cultural_pillar = heritage_iranian }
								culture = { has_cultural_pillar = heritage_indo_aryan }
							}
						}
					}
					every_close_family_member = {
						custom = all_family_members
						limit = {
							is_landed = no				
							OR = {
								culture = { has_cultural_pillar = heritage_iranian }
								culture = { has_cultural_pillar = heritage_indo_aryan }
							}
						}
						set_culture = culture:gandhari
					}
				}
			}
		}
	}
}

RICE_festival_losar_completed_log_entry_effect = {
	scope:activity = {
		add_activity_log_entry = {
			key = dharma_festival_losar_completed_log
			tags = { completed }
			# this line below adds the entry to the Effects section of the conclusion UI
			show_in_conclusion = yes
			character = root

			scope:host = {
				if = {
					limit = {
						captial_county = {
							has_county_modifier = RICE_losar_large_gift_modifier
						}
					}
					show_as_tooltip = {				
						capital_county = {
							add_county_modifier = {
								modifier = RICE_losar_large_gift_modifier
								years = 3
							}
						}
					}
				}
				if = {
					limit = {
						captial_county = {
							has_county_modifier = RICE_losar_medium_gift_modifier
						}
					}
					show_as_tooltip = {				
						capital_county = {
							add_county_modifier = {
								modifier = RICE_losar_medium_gift_modifier
								years = 3
							}
						}
					}
				}
				if = {
					limit = {
						captial_county = {
							has_county_modifier = RICE_losar_small_gift_modifier
						}
					}
					show_as_tooltip = {				
						capital_county = {
							add_county_modifier = {
								modifier = RICE_losar_small_gift_modifier
								years = 3
							}
						}
					}
				}
	
				custom_tooltip = RICE_activity_result_gained_piety
				custom_tooltip = RICE_activity_result_gained_prestige

			}

			every_attending_character = {
				limit = { NOT = { this = scope:host } }
				custom = EVERY_ACTIVITY_PARTICIPANT_EFFECT				
				custom_tooltip = RICE_activity_result_gained_piety
				custom_tooltip = RICE_activity_result_gained_prestige
				hidden_effect = {
					add_piety = 50
					add_prestige = 50
				}
			}	
		}
	}
}


RICE_zhangzhung_pillars_general_effect = {
	add_prestige = minor_prestige_gain
}


RICE_zhangzhung_pillars_diplomacy_effect = {
	random_list = {
		# Bad result
		40 = {
			modifier = {
				add = 3
				has_trait = greedy
			}
			modifier = {
				add = 3
				has_trait = arbitrary
			}
			modifier = {
				add = 3
				has_trait = arrogant
			}
			modifier = {
				add = 3
				has_trait = cynical
			}
			modifier = {
				add = 3
				has_trait = wrathful
			}
			modifier = {
				add = 3
				has_trait = impatient
			}
			modifier = {
				add = 2
				piety_level <= 2
			}
			modifier = {
				add = 3
				piety_level <= 1
			}
			send_interface_message = {
				type = event_toast_effect_bad
				left_icon = root
				title = RICE_zhangzhung_pillars_bad
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_diplomacy_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_diplomacy_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_diplomacy_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_diplomacy_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_diplomacy_5
							years = 10
						}
					}
				}
			}

		}
		# People like it
		60 = {
			modifier = {
				add = 3
				has_trait = generous
			}
			modifier = {
				add = 3
				has_trait = just
			}
			modifier = {
				add = 3
				has_trait = humble
			}
			modifier = {
				add = 3
				has_trait = compassionate
			}
			modifier = {
				add = 3
				has_trait = calm
			}
			modifier = {
				add = 3
				has_trait = patient
			}
			modifier = {
				add = 2
				piety_level >= 3
			}
			modifier = {
				add = 3
				piety_level >= 4
			}
			send_interface_message = {
				type = event_toast_effect_good
				left_icon = root
				title = RICE_zhangzhung_pillars_good
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_diplomacy_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_diplomacy_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_diplomacy_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_diplomacy_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_diplomacy_5
							years = 10
						}
					}
				}
			}
		}
		50 = {
			send_interface_message = {
				type = event_toast_effect_neutral
				left_icon = root
				title = RICE_zhangzhung_pillars_neutral
				custom_tooltip = RICE_zhangzhung_pillars_neutral_tooltip
			}
		}
	}
}



RICE_zhangzhung_pillars_martial_effect = {
	random_list = {
		# Bad result
		40 = {
			modifier = {
				add = 3
				has_trait = greedy
			}
			modifier = {
				add = 3
				has_trait = arbitrary
			}
			modifier = {
				add = 3
				has_trait = arrogant
			}
			modifier = {
				add = 3
				has_trait = cynical
			}
			modifier = {
				add = 3
				has_trait = wrathful
			}
			modifier = {
				add = 3
				has_trait = impatient
			}
			modifier = {
				add = 2
				piety_level <= 2
			}
			modifier = {
				add = 3
				piety_level <= 1
			}
			send_interface_message = {
				type = event_toast_effect_bad
				left_icon = root
				title = RICE_zhangzhung_pillars_bad
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_martial_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_martial_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_martial_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_martial_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_martial_5
							years = 10
						}
					}
				}
			}

		}
		# People like it
		60 = {
			modifier = {
				add = 3
				has_trait = generous
			}
			modifier = {
				add = 3
				has_trait = just
			}
			modifier = {
				add = 3
				has_trait = humble
			}
			modifier = {
				add = 3
				has_trait = compassionate
			}
			modifier = {
				add = 3
				has_trait = calm
			}
			modifier = {
				add = 3
				has_trait = patient
			}
			modifier = {
				add = 2
				piety_level >= 3
			}
			modifier = {
				add = 3
				piety_level >= 4
			}
			send_interface_message = {
				type = event_toast_effect_good
				left_icon = root
				title = RICE_zhangzhung_pillars_good
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_martial_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_martial_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_martial_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_martial_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_martial_5
							years = 10
						}
					}
				}
			}
		}
		50 = {
			send_interface_message = {
				type = event_toast_effect_neutral
				left_icon = root
				title = RICE_zhangzhung_pillars_neutral
				custom_tooltip = RICE_zhangzhung_pillars_neutral_tooltip
			}
		}
	}
}




RICE_zhangzhung_pillars_stewardship_effect = {
	random_list = {
		# Bad result
		40 = {
			modifier = {
				add = 3
				has_trait = greedy
			}
			modifier = {
				add = 3
				has_trait = arbitrary
			}
			modifier = {
				add = 3
				has_trait = arrogant
			}
			modifier = {
				add = 3
				has_trait = cynical
			}
			modifier = {
				add = 3
				has_trait = wrathful
			}
			modifier = {
				add = 3
				has_trait = impatient
			}
			modifier = {
				add = 2
				piety_level <= 2
			}
			modifier = {
				add = 3
				piety_level <= 1
			}
			send_interface_message = {
				type = event_toast_effect_bad
				left_icon = root
				title = RICE_zhangzhung_pillars_bad
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_stewardship_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_stewardship_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_stewardship_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_stewardship_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_stewardship_5
							years = 10
						}
					}
				}
			}

		}
		# People like it
		60 = {
			modifier = {
				add = 3
				has_trait = generous
			}
			modifier = {
				add = 3
				has_trait = just
			}
			modifier = {
				add = 3
				has_trait = humble
			}
			modifier = {
				add = 3
				has_trait = compassionate
			}
			modifier = {
				add = 3
				has_trait = calm
			}
			modifier = {
				add = 3
				has_trait = patient
			}
			modifier = {
				add = 2
				piety_level >= 3
			}
			modifier = {
				add = 3
				piety_level >= 4
			}
			send_interface_message = {
				type = event_toast_effect_good
				left_icon = root
				title = RICE_zhangzhung_pillars_good
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_stewardship_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_stewardship_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_stewardship_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_stewardship_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_stewardship_5
							years = 10
						}
					}
				}
			}
		}
		50 = {
			send_interface_message = {
				type = event_toast_effect_neutral
				left_icon = root
				title = RICE_zhangzhung_pillars_neutral
				custom_tooltip = RICE_zhangzhung_pillars_neutral_tooltip
			}
		}
	}
}


RICE_zhangzhung_pillars_intrigue_effect = {
	random_list = {
		# Bad result
		40 = {
			modifier = {
				add = 3
				has_trait = greedy
			}
			modifier = {
				add = 3
				has_trait = arbitrary
			}
			modifier = {
				add = 3
				has_trait = arrogant
			}
			modifier = {
				add = 3
				has_trait = cynical
			}
			modifier = {
				add = 3
				has_trait = wrathful
			}
			modifier = {
				add = 3
				has_trait = impatient
			}
			modifier = {
				add = 2
				piety_level <= 2
			}
			modifier = {
				add = 3
				piety_level <= 1
			}
			send_interface_message = {
				type = event_toast_effect_bad
				left_icon = root
				title = RICE_zhangzhung_pillars_bad
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_intrigue_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_intrigue_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_intrigue_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_intrigue_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_intrigue_5
							years = 10
						}
					}
				}
			}

		}
		# People like it
		60 = {
			modifier = {
				add = 3
				has_trait = generous
			}
			modifier = {
				add = 3
				has_trait = just
			}
			modifier = {
				add = 3
				has_trait = humble
			}
			modifier = {
				add = 3
				has_trait = compassionate
			}
			modifier = {
				add = 3
				has_trait = calm
			}
			modifier = {
				add = 3
				has_trait = patient
			}
			modifier = {
				add = 2
				piety_level >= 3
			}
			modifier = {
				add = 3
				piety_level >= 4
			}
			send_interface_message = {
				type = event_toast_effect_good
				left_icon = root
				title = RICE_zhangzhung_pillars_good
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_intrigue_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_intrigue_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_intrigue_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_intrigue_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_intrigue_5
							years = 10
						}
					}
				}
			}
		}
		50 = {
			send_interface_message = {
				type = event_toast_effect_neutral
				left_icon = root
				title = RICE_zhangzhung_pillars_neutral
				custom_tooltip = RICE_zhangzhung_pillars_neutral_tooltip
			}
		}
	}
}


RICE_zhangzhung_pillars_learning_effect = {
	random_list = {
		# Bad result
		40 = {
			modifier = {
				add = 3
				has_trait = greedy
			}
			modifier = {
				add = 3
				has_trait = arbitrary
			}
			modifier = {
				add = 3
				has_trait = arrogant
			}
			modifier = {
				add = 3
				has_trait = cynical
			}
			modifier = {
				add = 3
				has_trait = wrathful
			}
			modifier = {
				add = 3
				has_trait = impatient
			}
			modifier = {
				add = 2
				piety_level <= 2
			}
			modifier = {
				add = 3
				piety_level <= 1
			}
			send_interface_message = {
				type = event_toast_effect_bad
				left_icon = root
				title = RICE_zhangzhung_pillars_bad
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_learning_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_learning_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_learning_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_learning_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_bad_learning_5
							years = 10
						}
					}
				}
			}

		}
		# People like it
		60 = {
			modifier = {
				add = 3
				has_trait = generous
			}
			modifier = {
				add = 3
				has_trait = just
			}
			modifier = {
				add = 3
				has_trait = humble
			}
			modifier = {
				add = 3
				has_trait = compassionate
			}
			modifier = {
				add = 3
				has_trait = calm
			}
			modifier = {
				add = 3
				has_trait = patient
			}
			modifier = {
				add = 2
				piety_level >= 3
			}
			modifier = {
				add = 3
				piety_level >= 4
			}
			send_interface_message = {
				type = event_toast_effect_good
				left_icon = root
				title = RICE_zhangzhung_pillars_good
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_learning_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_learning_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_learning_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_learning_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_zhangzhung_pillars_good_learning_5
							years = 10
						}
					}
				}
			}
		}
		50 = {
			send_interface_message = {
				type = event_toast_effect_neutral
				left_icon = root
				title = RICE_zhangzhung_pillars_neutral
				custom_tooltip = RICE_zhangzhung_pillars_neutral_tooltip
			}
		}
	}
}



RICE_zhangzhung_dpal_dus_sgra_startup_general_effect = {
	add_prestige = 1000
	add_piety = 500
	show_as_tooltip = {
		add_character_modifier = {
			modifier = RICE_zhangzhung_governor_of_brusha
		}
		title:c_purig = {
			add_county_modifier = {
				modifier = RICE_zhangzhung_brusha_governor_inscription
				years = 25
			}
		}
	}
}


RICE_zhangzhung_title_decision_effect = {	

	add_prestige = 1000
	dynasty ?= { add_dynasty_prestige = massive_dynasty_prestige_gain }

	if = {
		limit = {
			OR = {
				religion = religion:bon_religion
				religion = religion:west_himalayan_religion
			}
		}
		add_piety = 1000
		if = {
			limit = {
				faith = {
					has_doctrine = rice_bon_deities_old_doctrine
				}
			}
			dynasty ?= {
				add_dynasty_modifier = {
					modifier = RICE_zhangzhung_avenger_of_ligmikya
				}
			}
		}
		if = {
			limit = {
				faith = {
					has_doctrine = rice_bon_deities_new_doctrine
				}
			}
			dynasty ?= {
				add_dynasty_modifier = {
					modifier = RICE_zhangzhung_restorer_of_bon
				}
			}
		}
	}

	every_county_in_region = {
		region = RICE_upper_tibet
		custom = RICE_every_county_in_upper_tibet
		limit = {
			NOT = {
				faith = root.faith
			}
		}
		random = {
			chance = 50
			set_county_faith = root.faith
		}
	}

	#Create the title and make it primary
	create_title_and_vassal_change = {
		type = created
		save_scope_as = title_change
		add_claim_on_loss = no
	}
	title:e_zhangzhung = {
		change_title_holder = {
			holder = root
			change = scope:title_change
		}
	}
	resolve_title_and_vassal_change = scope:title_change
	set_primary_title_to = title:e_zhangzhung

	hidden_effect = {
		title:k_guge = {
			if = {
				limit = {
					NOT = { is_in_list = new_de_jure_kingdoms }
				}
				add_to_list = new_de_jure_kingdoms
				save_scope_as = zhangzhung_guge
			}
		}
		title:k_kashmir = {
			if = {
				limit = {
					NOT = { is_in_list = new_de_jure_kingdoms }
				}
				add_to_list = new_de_jure_kingdoms
				save_scope_as = zhangzhung_kashmir
			}
		}
		title:k_maryul = {
			if = {
				limit = {
					NOT = { is_in_list = new_de_jure_kingdoms }
				}
				add_to_list = new_de_jure_kingdoms
				save_scope_as = zhangzhung_maryul
			}
		}
		every_in_list = {
			list = new_de_jure_kingdoms
			limit = {
				trigger_if = {
					limit = {
						exists = this
						root = { is_ai = yes }
						exists = holder
					}
					NOR = {
						holder.top_liege = { is_ai = no }
						holder = { is_ai = no }
					}
				}
			}
			set_de_jure_liege_title = title:e_zhangzhung
		}
	}


}



RICE_zhangzhung_silver_palace_decision_effect = {
	add_prestige = 1000	
	add_legitimacy = medium_legitimacy_gain
	capital_county = {
		add_county_modifier = {
			modifier = RICE_zhangzhung_new_silver_palace
		}
	}
}


RICE_zhangzhung_zuthulpuk_monastery_decision_effect = {

	if = {
		limit = {
			faith = {
				has_doctrine = rice_vajrayana_canon_doctrine
			}			
		}
		add_piety = 500
	}
	else = {
		add_piety = 250
	}

	if = {
		limit = {
			culture = {
				has_cultural_pillar = heritage_tibetan
			}			
		}
		add_prestige = 500
	}
	else = {
		add_prestige = 250
	}

	title:c_purang = {
		add_county_modifier = {
			modifier = RICE_zhangzhung_zuthulpuk_monastery_recently_built
			years = 30
		}
	}
	
	add_character_modifier = {
		modifier = RICE_zhangzhung_built_zuthulpuk_monastery
	}

	
}



RICE_start_terton_event_chain_effect = {
	random_courtier = {
		limit = {
			is_available_ai_adult = yes
			RICE_can_acess_terton_mechanics_trigger = yes
			RICE_is_or_can_become_terton_trigger = yes
		}
		trigger_event = zhangzhung.0030
	}
}


RICE_trigger_terton_final_event_ai_effect = {
	random_courtier = {
		limit = {
			RICE_is_or_can_become_terton_trigger = yes
		}
		trigger_event = zhangzhung.0032
	}
}

RICE_terton_experience_gain_tiny = {
	if = {
		limit = {
			has_trait = RICE_terton
		}
		add_trait_xp = {
			trait = RICE_terton
			value = 2
		}
	}
	else = {
		if = {
			limit = {
				has_character_modifier = RICE_terton_candidate
			}
			remove_character_modifier = RICE_terton_candidate
		}
		add_trait = RICE_terton		
		add_trait_xp = {
			trait = RICE_terton
			value = 2
		}
	}
}

RICE_terton_experience_gain_small = {
	if = {
		limit = {
			has_trait = RICE_terton
		}
		add_trait_xp = {
			trait = RICE_terton
			value = 10
		}
	}
	else = {
		if = {
			limit = {
				has_character_modifier = RICE_terton_candidate
			}
			remove_character_modifier = RICE_terton_candidate
		}
		add_trait = RICE_terton		
		add_trait_xp = {
			trait = RICE_terton
			value = 10
		}
	}
}

RICE_terton_experience_gain_medium = {
	if = {
		limit = {
			has_trait = RICE_terton
		}
		add_trait_xp = {
			trait = RICE_terton
			value = 20
		}
	}
	else = {
		if = {
			limit = {
				has_character_modifier = RICE_terton_candidate
			}
			remove_character_modifier = RICE_terton_candidate
		}
		add_trait = RICE_terton		
		add_trait_xp = {
			trait = RICE_terton
			value = 20
		}
	}
}

RICE_terton_experience_gain_large = {
	if = {
		limit = {
			has_trait = RICE_terton
		}
		add_trait_xp = {
			trait = RICE_terton
			value = 30
		}
	}
	else = {
		if = {
			limit = {
				has_character_modifier = RICE_terton_candidate
			}
			remove_character_modifier = RICE_terton_candidate
		}
		add_trait = RICE_terton		
		add_trait_xp = {
			trait = RICE_terton
			value = 30
		}
	}
}

RICE_terton_conclusion_general_effects = {
	if = {
		limit = {
			var:RICE_terma_type ?= flag:teachings
		}
		add_piety = medium_piety_gain
		RICE_terton_experience_gain_medium = yes
	}
	# else_if = {
	# 	limit = {
	# 		var:RICE_terma_type ?= flag:teachings_great
	# 	}
	# 	add_piety = major_piety_gain
	# 	RICE_terton_experience_gain_large = yes
	# }
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_sacred_image
		}
		add_piety = medium_piety_gain
		RICE_terton_experience_gain_medium = yes
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_statue
		}
		add_piety = medium_piety_gain
		RICE_terton_experience_gain_medium = yes
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_ritual_instrument
		}
		add_piety = minor_piety_gain
		RICE_terton_experience_gain_small = yes
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:religious_building
		}
		add_piety = medium_piety_gain
		RICE_terton_experience_gain_medium = yes
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:riches
		}
		add_piety = minor_piety_gain
		RICE_terton_experience_gain_small = yes
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_scholarly_texts
		}
		add_piety = minor_piety_gain
		RICE_terton_experience_gain_small = yes
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:failure
		}
	}
}

RICE_terton_conclusion_accept_effects = {
	if = {
		limit = {
			var:RICE_terma_type ?= flag:teachings
		}
		scope:terton_result_recipient = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}
		}
	}
	# else_if = {
	# 	limit = {
	# 		var:RICE_terma_type ?= flag:teachings_great
	# 	}
	# 	scope:terton_result_recipient = {
	# 		scope:terma_artifact = {
	# 			set_owner = {
	# 				target = root
	# 			}
	# 		}			
	# 	}
	# }
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_statue
		}
		scope:terton_result_recipient = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_sacred_image
		}
		scope:terton_result_recipient = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}				
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_ritual_instrument
		}
		scope:terton_result_recipient = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:religious_building
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:riches
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_scholarly_texts
		}
		scope:terton_result_recipient = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:failure
		}
		scope:terton_result_recipient = {
			
		}
	}
}

RICE_terton_conclusion_let_keep_effects = {
	if = {
		limit = {
			var:RICE_terma_type ?= flag:teachings
		}
		scope:terton = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}
		}
		scope:terton_result_recipient = {

		}
	}
	# else_if = {
	# 	limit = {
	# 		var:RICE_terma_type ?= flag:teachings_great
	# 	}
	# 	scope:terton = {
	# 		scope:terma_artifact = {
	# 			set_owner = {
	# 				target = root
	# 			}
	# 		}			
	# 	}
	# 	scope:terton_result_recipient = {
			
	# 	}
	# }
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_statue
		}
		scope:terton = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}			
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_sacred_image
		}
		scope:terton = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}			
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_ritual_instrument
		}
		scope:terton = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}			
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:religious_building
		}
		scope:terton = {
			
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:riches
		}
		scope:terton = {
			
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_scholarly_texts
		}
		scope:terton = {
			scope:terma_artifact = {
				set_owner = {
					target = root
				}
			}			
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:failure
		}
		scope:terton = {
			
		}
		scope:terton_result_recipient = {
			
		}
	}
}

RICE_terton_conclusion_donate_effects = {
	if = {
		limit = {
			var:RICE_terma_type ?= flag:teachings
		}
		hidden_effect = {
			destroy_artifact = scope:terma_artifact
		}
		scope:terton_result_recipient = {

		}
	}
	# else_if = {
	# 	limit = {
	# 		var:RICE_terma_type ?= flag:teachings_great
	# 	}
	# 	hidden_effect = {
	# 		destroy_artifact = scope:terma_artifact
	# 	}
	# 	scope:terton_result_recipient = {
			
	# 	}
	# }
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_statue
		}
		hidden_effect = {
			destroy_artifact = scope:terma_artifact
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_sacred_image
		}
		hidden_effect = {
			destroy_artifact = scope:terma_artifact
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_ritual_instrument
		}
		hidden_effect = {
			destroy_artifact = scope:terma_artifact
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:religious_building
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:riches
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:artifact_scholarly_texts
		}
		hidden_effect = {
			destroy_artifact = scope:terma_artifact
		}
		scope:terton_result_recipient = {
			
		}
	}
	else_if = {
		limit = {
			var:RICE_terma_type ?= flag:failure
		}
		scope:terton_result_recipient = {
			
		}
	}
}

RICE_zhangzhung_patronize_tertons_effect = {
	add_character_modifier = {
		modifier = RICE_zhangzhung_patronizing_tertons
		years = 10
	}
	every_courtier_or_guest = {
		custom = RICE_every_terton_courtier_or_guest
		limit = {
			RICE_is_or_can_become_terton_trigger = yes
		}
		add_opinion = {
			modifier = RICE_patronizing_tertons_opinion
			target = root
			opinion = 10
		}
	}
	custom_tooltip = RICE_zhangzhung_patronize_tertons_effect_tooltip_1
}



RICE_zhangzhung_search_for_termas_effect = {
	add_character_modifier = {
		modifier = RICE_zhangzhung_searching_for_termas
		years = 10
	}
	custom_tooltip = RICE_zhangzhung_search_for_termas_effect_tooltip_1
}


# RICE_zhangzhung_try_to_become_terton_effect = {
# 	add_character_modifier = {
# 		modifier = RICE_zhangzhung_terton_meditation
# 		years = 10
# 	}
# 	custom_tooltip = RICE_zhangzhung_try_to_become_terton_effect_tooltip_1
# }



