#############################################
#											#
# STRUGGLE ENDING DECISIONS				    #
#											#
#############################################

# Regional Integration Ending
RICE_greenland_struggle_ending_integration_decision = {
	decision_group_type = major
	title = RICE_greenland_struggle_ending_integration_decision
	picture = { reference = "gfx/interface/illustrations/decisions/decision_vinland_encounter.dds" }
	extra_picture = "gfx/interface/illustrations/struggle_decisions_buttons/RICE_decision_greenland_integration_button.dds"
	desc = RICE_greenland_struggle_ending_integration_decision_desc
	selection_tooltip = RICE_greenland_struggle_ending_integration_decision_tooltip
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	is_invisible = yes

	sort_order = 80

	is_valid = {
		is_independent_ruler = yes

		custom_tooltip = {
			text = RICE_greenland_struggle_integration_decision_correct_phase_tt
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				is_struggle_phase = struggle_RICE_greenland_phase_integration
			}
		}

		custom_tooltip = {
			text = RICE_greenland_struggle_correct_involvement_tt
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
		}

		OR = {
			# Control at least 50% of the struggle region
			custom_tooltip = {
				text = RICE_greenland_struggle_ending_integration_decision_region_tt
				RICE_greenland_struggle_integration_ending_percent_region_trigger = yes
			}
			# Have at least 60 dev in each county of your capital's de jure duchy
			custom_tooltip = {
				text = RICE_greenland_struggle_ending_integration_decision_development_tt
				NOT = {
					capital_county.duchy = {
						any_in_de_jure_hierarchy = {
							tier = tier_county
							development_level < RICE_greenland_good_ending_development_level
						}
					}
				}
			}
		}

		# Resilience is at least 850
		custom_tooltip = {
			text = RICE_greenland_struggle_ending_integration_decision_resilience_tt_1
			OR = {
				AND = {
					has_game_rule = RICE_greenland_difficulty_default
					global_var:RICE_greenland_resilience >= 850
				}
				AND = {
					has_game_rule = RICE_greenland_difficulty_easy
					global_var:RICE_greenland_resilience >= 600
				}
				AND = {
					has_game_rule = RICE_greenland_difficulty_hard
					global_var:RICE_greenland_resilience >= 950
				}
				has_game_rule = RICE_greenland_difficulty_cheat_mode
			}
		}

		# Networks is at least 850
		custom_tooltip = {
			text = RICE_greenland_struggle_ending_integration_decision_networks_tt_1
			OR = {
				AND = {
					has_game_rule = RICE_greenland_difficulty_default
					global_var:RICE_greenland_networks >= 850
				}
				AND = {
					has_game_rule = RICE_greenland_difficulty_easy
					global_var:RICE_greenland_networks >= 600
				}
				AND = {
					has_game_rule = RICE_greenland_difficulty_hard
					global_var:RICE_greenland_networks >= 950
				}
				has_game_rule = RICE_greenland_difficulty_cheat_mode
			}
		}

		# Resilience is not below 500
		# custom_tooltip = {
		# 	text = RICE_greenland_struggle_ending_integration_decision_resilience_tt_2
		# 	NOT = { global_var:RICE_greenland_resilience < 500 }
		# }

		# # Networks is not below 500
		# custom_tooltip = {
		# 	text = RICE_greenland_struggle_ending_integration_decision_networks_tt_2
		# 	NOT = { global_var:RICE_greenland_networks < 500 }
		# }

		# random_character_struggle = {
		# 	limit = { is_struggle_type = RICE_greenland_struggle }
		# 	change_struggle_phase = struggle_RICE_greenland_phase_integration
		# }

		# struggle:RICE_normandy_struggle ?= {
		# 	change_struggle_phase = struggle_RICE_normandy_phase_confrontation		
		# }

		prestige_level >= high_prestige_level # Illustrious

		# Need to be moderately wealthy
		#gold > 500

		# Completely control at least 2 of the important North Atlantic duchies
		calc_true_if = {
			amount >= 2
			completely_controls = title:d_iceland
			completely_controls = title:d_western_isles
			completely_controls = title:d_trandalog
			completely_controls = title:d_ulster
			completely_controls = title:d_northern_isles
			completely_controls = title:d_albany
			completely_controls = title:d_viken
		}

	}

	# widget = {
	# 	gui = "decision_view_widget_RICE_progressbars_greenland"
	# }

	effect = {		
		if = {
			limit = { has_dlc_feature = legends }
			RICE_north_atlantic_legend_seed_greenland_struggle_ending_effect = {
				ENDER = root
				STRUGGLE = RICE_greenland_struggle
			}
		}
		if = {
			limit = { has_ach_dlc_trigger = yes }
			add_character_flag = ach_ended_struggle
		}
		##### Major Effects #####
		 show_as_tooltip = {
		 	RICE_greenland_struggle_integration_ender_effect = yes
		 	RICE_greenland_struggle_integration_ending_tooltip_effect = yes
		 	RICE_greenland_struggle_integration_county_modifier_effect = yes
		}

		show_as_tooltip = {
			stress_impact = {
				lazy = medium_stress_impact_gain
				content = minor_stress_impact_gain
			}
		}

		# Trigger a player facing event as a coda
		trigger_event = north_atlantic.0170
	}

	cost = {}

	ai_check_interval = 120

	ai_potential = { always = yes }

	ai_will_do = { base = 100 }
}


# Indigenous/Native Sovereignty Ending	
RICE_greenland_struggle_ending_indigenous_decision = {
	decision_group_type = major
	title = RICE_greenland_struggle_ending_indigenous_decision
	picture = { reference = "gfx/interface/illustrations/decisions/decision_inukshuk.dds" }
	extra_picture = "gfx/interface/illustrations/struggle_decisions_buttons/RICE_decision_greenland_indigenous_button.dds"
	desc = RICE_greenland_struggle_ending_indigenous_decision_desc
	selection_tooltip = RICE_greenland_struggle_ending_indigenous_decision_tooltip
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	is_invisible = yes

	sort_order = 80

	# is_shown = {
	# 	has_fp2_dlc_trigger = yes
	# }

	is_valid = {
		is_independent_ruler = yes
		RICE_is_native_american_culture_trigger = yes

		# custom_tooltip = {
		# 	text = RICE_greenland_struggle_integration_decision_correct_phase_tt
		# 	any_character_struggle = {
		# 		is_struggle_type = RICE_greenland_struggle
		# 		is_struggle_phase = struggle_RICE_greenland_phase_integration
		# 	}
		# }

		custom_tooltip = {
			text = RICE_greenland_struggle_correct_involvement_tt
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
		}

		# Control at least 75% of the struggle region
		custom_tooltip = {
			text = RICE_greenland_struggle_ending_indigenous_decision_region_tt
			RICE_greenland_struggle_indigenous_ending_percent_region_trigger = yes
		}


		prestige_level >= high_prestige_level

		# Completely control at least 3 of the important North Atlantic duchies
		calc_true_if = {
			amount >= 4
			completely_controls = title:d_iceland
			completely_controls = title:d_western_isles
			completely_controls = title:d_trandalog
			completely_controls = title:d_ulster
			completely_controls = title:d_northern_isles
			completely_controls = title:d_albany
			completely_controls = title:d_viken
		}

	}

	# widget = {
	# 	gui = "decision_view_widget_RICE_progressbars_greenland"
	# }

	effect = {
		if = {
			limit = { has_dlc_feature = legends }
			RICE_north_atlantic_legend_seed_greenland_struggle_sunset_invasion_ending_effect = {
				ENDER = root
				STRUGGLE = RICE_greenland_struggle
			}
		}
		if = {
			limit = { has_ach_dlc_trigger = yes }
			add_character_flag = ach_ended_struggle
		}
		##### Major Effects #####
		show_as_tooltip = {
			RICE_greenland_struggle_indigenous_ender_effect = yes
			RICE_greenland_struggle_indigenous_ending_tooltip_effect = yes
			RICE_greenland_struggle_indigenous_county_modifier_effect = yes
	   }

	   show_as_tooltip = {
		   stress_impact = {
			   lazy = medium_stress_impact_gain
			   content = minor_stress_impact_gain
		   }
	   }

		# Trigger a player facing event as a coda
		trigger_event = north_atlantic.0172
	}

	cost = {}

	ai_check_interval = 120

	#ai_potential = { always = yes }

	ai_potential = {
		global_var:RICE_greenland_resilience <= 100
		global_var:RICE_greenland_networks <= 100
	}

	ai_will_do = { base = 100 }
}


# Abandonment/Abandon Greenland Ending
RICE_greenland_struggle_ending_abandonment_decision = {
	decision_group_type = major
	title = RICE_greenland_struggle_ending_abandonment_decision
	picture = { reference = "gfx/interface/illustrations/decisions/decision_ice_ship.dds" }
	extra_picture = "gfx/interface/illustrations/struggle_decisions_buttons/RICE_decision_greenland_abandonment_button.dds"
	desc = RICE_greenland_struggle_ending_abandonment_decision_desc
	selection_tooltip = RICE_greenland_struggle_ending_abandonment_decision_tooltip
	confirm_click_sound = "event:/DLC/FP2/SFX/UI/fp2_struggle_ending_decision_confirm"
	is_invisible = yes

	sort_order = 80

	# is_shown = {
	# 	has_fp2_dlc_trigger = yes
	# }

	is_valid = {
		is_independent_ruler = yes

		custom_tooltip = {
			text = RICE_greenland_struggle_marginalization_decision_correct_phase_tt
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				is_struggle_phase = struggle_RICE_greenland_phase_marginalization
			}
		}

		custom_tooltip = {
			text = RICE_greenland_struggle_correct_involvement_tt
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
		}

		prestige_level >= very_high_prestige_level # Exalted among Men or higher

				
		# Resilience is under 250
		custom_tooltip = {
			text = RICE_greenland_struggle_ending_abandonment_decision_resilience_tt_1
			global_var:RICE_greenland_resilience < 250
		}

		# Networks is under 250
		custom_tooltip = {
			text = RICE_greenland_struggle_ending_abandonment_decision_networks_tt_1
			global_var:RICE_greenland_networks < 250
		}

	}

	# widget = {
	# 	gui = "decision_view_widget_RICE_progressbars_greenland"
	# }

	effect = {
		if = {
			limit = { has_ach_dlc_trigger = yes }
			add_character_flag = ach_ended_struggle
		}
		##### Major Effects #####
		show_as_tooltip = {
			RICE_greenland_struggle_abandonment_ender_effect = yes
			RICE_greenland_struggle_abandonment_ending_tooltip_effect = yes
			RICE_greenland_struggle_abandonment_county_modifier_effect = yes
	   }

	   show_as_tooltip = {
		   stress_impact = {
			   ambitious = medium_stress_impact_gain
			   diligent = minor_stress_impact_gain
		   }
	   }

		# Trigger a player facing event as a coda
		trigger_event = north_atlantic.0174
	}

	cost = {}

	ai_check_interval = 120

	ai_potential = { always = yes }

	ai_will_do = { base = 100 }
}


#############################################
#											#
# MAJOR GREENLAND DECISIONS				    #
#											#
#############################################


# Explore Greenland
RICE_north_atlantic_explore_greenland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_vinland.dds" }

	desc = RICE_north_atlantic_explore_greenland_desc
	selection_tooltip = RICE_north_atlantic_explore_greenland_tooltip
	decision_group_type = RICE_greenland_struggle_major

	ai_check_interval = 40

	is_shown = {
		NOT = { exists = struggle:RICE_greenland_struggle }
		NOT = { has_global_variable = RICE_game_started_on_TFE_start_date }
		NOT = { has_global_variable = RICE_north_atlantic_greenland_struggle_started }
		NOT = { has_global_variable = RICE_north_atlantic_greenland_discovery_in_progress }
		has_game_rule = RICE_struggle_greenland_toggle_on
		exists = dynasty
		highest_held_title_tier > tier_barony
		is_landed = yes
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greenland_struggle_region	
			}
		}
	}
	
	is_valid = {
		custom_tooltip = {
			text = RICE_greenland_struggle_region_capital_req
			capital_county = {
				title_province = { geographical_region = RICE_greenland_struggle_region }
			}
		}
		OR = {
			completely_controls = title:d_iceland
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
			custom_tooltip = {
				text = RICE_greenland_struggle_region_capital_development_req
				capital_county = {
					development_level >= RICE_greenland_walrus_ivory_development_level
					title_province = { geographical_region = RICE_greenland_struggle_region }
				}
			}
		}
		OR = {
			trigger_if = {
				limit = {
					is_ai = yes
				}
				prestige_level >= 1
			}
			trigger_else = {
				prestige_level >= 3
			}
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {		

		culture:norse = {
			save_scope_as = norse
		}
		culture:irish = {
			save_scope_as = irish
		}

		set_variable = {
			name = RICE_grand_expedition_destination_pick
			value = flag:greenland
		}

		custom_tooltip = RICE_north_atlantic_explore_greenland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_explore_greenland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_explore_greenland_effect_tooltip_3
		custom_tooltip = RICE_north_atlantic_explore_greenland_effect_tooltip_4

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_explore_greenland_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.0162 # Have some default courtier options, or allow time to wait for a pick
									# Event notification to other players in the region
		}

	}

	cost = { 
		gold = RICE_greenland_discover_cost # Will depend
	}	

	ai_potential = {
		gold > RICE_greenland_discover_cost
	}

	ai_will_do = {
		base = 40
		modifier = {
			add = -30
			NOT = { culture = { has_cultural_pillar = heritage_north_germanic } }
		}
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
		modifier = {
			add = 25
			# Happened late 900s IRL
			current_date >= 950.1.1
		}
		modifier = {
			add = 50
			# Happened late 900s IRL
			current_date >= 975.1.1
		}
		modifier = {
			add = 75
			# Happened late 900s IRL
			current_date >= 1000.1.1
		}
		modifier = {
			add = 100
			# Happened late 900s IRL
			current_date >= 1025.1.1
		}
		modifier = {
			add = 100
			# Happened late 900s IRL
			current_date >= 1050.1.1
		}
	}
}


# Explore Vinland
RICE_north_atlantic_explore_vinland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_vinland.dds" }

	desc = RICE_north_atlantic_explore_vinland_desc
	selection_tooltip = RICE_north_atlantic_explore_vinland_tooltip
	decision_group_type = RICE_vinland_major

	ai_check_interval = 24

	is_shown = {	
		NOT = { has_global_variable = RICE_north_atlantic_vinland_discovered }
		NOT = { has_global_variable = RICE_north_atlantic_vinland_discovery_in_progress }
		has_game_rule = RICE_struggle_greenland_toggle_on
		exists = dynasty
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}		
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
		NOT = {
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				is_struggle_phase = struggle_RICE_greenland_phase_marginalization
			}
		}
		#debug_only = yes
		#RICE_is_not_native_american_culture_trigger = yes
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
			#	text = RICE_greenland_struggle_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}	
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}		
		}
		OR = {
			completely_controls = title:d_iceland
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
			custom_tooltip = {
				text = RICE_greenland_struggle_region_capital_development_req
				capital_county = {
					development_level >= RICE_greenland_walrus_ivory_development_level
					title_province = { geographical_region = RICE_greenland_struggle_region }
				}
			}
		}
		OR = {
			trigger_if = {
				limit = {
					is_ai = yes
				}
				prestige_level >= 1
			}
			trigger_else = {
				prestige_level >= 3
			}
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {

		culture:norse = {
			save_scope_as = norse
		}
		culture:irish = {
			save_scope_as = irish
		}

		set_variable = {
			name = RICE_grand_expedition_destination_pick
			value = flag:americas
		}

		custom_tooltip = RICE_north_atlantic_explore_vinland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_explore_vinland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_explore_vinland_effect_tooltip_3
		custom_tooltip = RICE_north_atlantic_explore_vinland_effect_tooltip_4


		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_explore_vinland_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.0162 # Have some default courtier options, or allow time to wait for a pick
									# Event notification to other players in the region
		}

	}

	cost = { 
		gold = RICE_vinland_discover_cost # Will depend
	}	

	ai_potential = {
		gold > RICE_vinland_discover_cost
	}

	ai_will_do = {
		base = 40
		modifier = {
			add = -30
			NOT = { culture = { has_cultural_pillar = heritage_north_germanic } }
		}
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
		modifier = {
			add = 25
			# Happened early 1000s IRL
			current_date >= 980.1.1
		}
		modifier = {
			add = 50
			# Happened early 1000s IRL
			current_date >= 1000.1.1
		}
		modifier = {
			add = 75
			# Happened early 1000s IRL
			current_date >= 1020.1.1
		}
		modifier = {
			add = 100
			# Happened early 1000s IRL
			current_date >= 1040.1.1
		}
		modifier = {
			add = 100
			# Happened early 1000s IRL
			current_date >= 1060.1.1
		}
	}
}


# Settle Vinland
RICE_north_atlantic_settle_vinland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_vinland_encounter.dds" }

	desc = RICE_north_atlantic_settle_vinland_desc
	selection_tooltip = RICE_north_atlantic_settle_vinland_tooltip
	decision_group_type = RICE_vinland_major

	ai_check_interval = 120

	is_shown = {
		#exists = struggle:RICE_greenland_struggle
		has_global_variable = RICE_north_atlantic_vinland_discovered
		NOT = { has_global_variable = RICE_north_atlantic_vinland_colonized }
		exists = dynasty
		highest_held_title_tier > tier_barony
		is_landed = yes
		#OR = {
		#	#exists = struggle:RICE_greenland_struggle
		#	has_global_variable = RICE_greenland_ending_integration
		#	has_global_variable = RICE_greenland_ending_indigenous
		#}
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greenland_struggle_region		
			}
		}
		#dynasty = {
		#	has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
		#}
		NOT = {
			dynasty = { has_dynasty_modifier = RICE_north_atlantic_vinland_settlement }
		}
		#global_var:RICE_north_atlantic_vinland_outposts > 0
		#debug_only = yes
		#RICE_is_not_native_american_culture_trigger = yes
	}
	
	is_valid = {
		custom_description = {
			text = RICE_greenland_struggle_region_req
			any_held_title = {
				tier = tier_county
				any_county_province = {
					geographical_region = RICE_greenland_struggle_region		
				}
			}
		}	
		# Viability is at least 80
		custom_tooltip = {
			text = RICE_vinland_colonization_decision_viability_tt_1
			global_var:RICE_vinland_viability >= 80
		}
		#OR = {
			#custom_tooltip = {
			#	text = RICE_greenland_struggle_correct_involvement_tt
			#	any_character_struggle = {
			#		involvement = involved
			#		is_struggle_type = RICE_greenland_struggle
			#	}
			#}			
			custom_description = {
				text = RICE_greenland_struggle_good_ending_req
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		#}
		OR = {
			prestige_level >= 3
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
		dynasty = {
			has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
		}
		global_var:RICE_north_atlantic_vinland_outposts > 0
		custom_description = {
			text = RICE_no_ongoing_expedition_req
			RICE_north_atlantic_ongoing_expedition_trigger = no
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	# widget = {
	# 	gui = "decision_view_widget_RICE_progressbars_all"
	# }

	effect = {

		show_as_tooltip = {
			RICE_establish_permanent_vinland_colony_effect = yes
		}

		custom_tooltip = RICE_north_atlantic_settle_vinland_effect_tooltip_1
		RICE_vinland_colony_tooltip_effect = yes


		# if = {
		# 	limit = {
		# 		NOR = {
		# 			has_global_variable = RICE_greenland_ending_integration
		# 			has_global_variable = RICE_greenland_ending_indigenous
		# 		}
		# 	}
		# 	custom_tooltip = RICE_north_atlantic_settle_vinland_effect_tooltip_5
		# }

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_settle_vinland_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.0144 # Have some default courtier options, or allow time to wait for a pick
									# Event notification to other players in the region
		}
		
		set_global_variable = {
			name = RICE_north_atlantic_vinland_colonized
			value = yes
		}

	}

	cost = { 
		gold = RICE_vinland_settle_cost #massive_gold_value # Will depend
	}	

	ai_potential = {
		short_term_gold > RICE_vinland_settle_cost #massive_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
		modifier = {
			add = 25
			# Happened early 1000s IRL
			current_date >= 980.1.1
		}
		modifier = {
			add = 50
			# Happened early 1000s IRL
			current_date >= 1000.1.1
		}
		modifier = {
			add = 75
			# Happened early 1000s IRL
			current_date >= 1020.1.1
		}
		modifier = {
			add = 100
			# Happened early 1000s IRL
			current_date >= 1040.1.1
		}
	}
}


#############################################
#											#
# OTHER MAJOR DECISIONS					    #
#											#
#############################################



# Form the Icelandic Commonwealth / Convene the First Althing
RICE_north_atlantic_form_iceland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_north_european_council.dds" }

	desc = RICE_north_atlantic_form_iceland_desc
	selection_tooltip = RICE_north_atlantic_form_iceland_tooltip
	decision_group_type = major

	ai_check_interval = 24

	is_shown = {
		is_landed = yes
		OR = {
			has_title = title:c_vestisland
			has_title = title:c_nordrland
			has_title = title:c_austisland
			has_title = title:c_sudurland
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:RICE_north_atlantic_iceland_formed_flag
			}
		}
	}
	
	is_valid = {
		culture = {
			has_cultural_pillar = heritage_north_germanic
		}
		custom_description = {
			text = RICE_althing_iceland_capital_req
			capital_county = {
				title:d_iceland = {
					is_de_jure_liege_or_above_target = prev
				}
			}
		}
		prestige_level >= 3
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		#Can only happen once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:RICE_north_atlantic_iceland_formed_flag
		}

		save_scope_as = althing_convener

		culture:norse = {
			save_scope_as = norse
		}

		culture:irish = {
			save_scope_as = irish
		}

		culture:icelandic = {
			save_scope_as = icelandic
		}

		custom_tooltip = RICE_north_atlantic_form_iceland_effect_tooltip_1

		show_as_tooltip = {
			RICE_iceland_decision_effect = yes
		}

		custom_tooltip = RICE_north_atlantic_form_iceland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_form_iceland_effect_tooltip_3

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_form_iceland_context_tooltip
		}

		trigger_event = north_atlantic.0022


	}

	cost = { 
		gold = { value = medium_gold_value } # Cheaper if you have an estate in Greenland
	}	

	ai_potential = {
		short_term_gold > medium_gold_value
	}

	ai_will_do = {
		base = 75
		modifier = {
			add = 25
			# Happened in 930 IRL
			current_date >= 900.1.1
		}
		modifier = {
			add = 25
			# Happened in 930 IRL
			current_date >= 925.1.1
		}
		modifier = {
			add = 25
			# Happened in 930 IRL
			current_date >= 950.1.1
		}
		modifier = {
			add = 25
			# Happened in 930 IRL
			current_date >= 975.1.1
		}
		modifier = {
			add = -5
			has_trait = lazy
		}
		modifier = {
			add = 5
			has_trait = diligent
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = 5
			has_trait = greedy
		}
	}
}


# Walrus Ivory Carving center - Scandinavia
RICE_north_atlantic_walrus_ivory_workshop_scandinavia = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_european_port.dds" }

	desc = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_desc
	selection_tooltip = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_tooltip
	decision_group_type = RICE_greenland_struggle_major

	ai_check_interval = 120

	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greenland_struggle_region		
			}
		}
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:RICE_north_atlantic_walrus_scandinavia_flag
			}
		}
	}
	
	is_valid = {
		# custom_description = {
		# 	text = RICE_greenland_struggle_region_req
		# 	any_held_title = {
		# 		tier = tier_county
		# 		any_county_province = {
		# 			geographical_region = RICE_greenland_struggle_region		
		# 		}
		# 	}
		# }
		#custom_tooltip = {
			#	text = RICE_greenland_struggle_correct_involvement_tt
			OR = {
				custom_tooltip = {
					text = RICE_greenland_struggle_integration_or_settlement_phase
					exists = struggle:RICE_greenland_struggle
					any_character_struggle = {
						is_struggle_type = RICE_greenland_struggle
						OR = {
							is_struggle_phase = struggle_RICE_greenland_phase_settlement
							is_struggle_phase = struggle_RICE_greenland_phase_integration
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		#}
		custom_tooltip = {
			text = RICE_greenland_struggle_region_capital_development_req
			capital_county = {
				development_level >= RICE_greenland_walrus_ivory_development_level
				title_province = { geographical_region = RICE_greenland_struggle_region }
			}
		}
		OR = {
			prestige_level >= 4
			AND = {
				custom_description = {
					text = "is_king_or_emperor"
					highest_held_title_tier >= tier_kingdom
				}
				prestige_level >= 3
			}
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {
		
		#Can only happen once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:RICE_north_atlantic_walrus_scandinavia_flag
		}

		save_scope_as = walrus_person

		RICE_north_atlantic_establish_walrus_workshop_inside_effect = yes

		custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_effect_tooltip_2
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_scandinavia_context_tooltip
		}

		every_ruler = {
			limit = {
				is_ai = no
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_europe_and_mediterranean_region
					}
				}
			}
			trigger_event = north_atlantic.0023
		}

	}

	cost = { 
		gold = { value = major_gold_value }
	}	

	ai_potential = {
		short_term_gold > major_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = lazy
		}
		modifier = {
			add = 5
			has_trait = diligent
		}
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
	}
}


# Walrus Ivory Carving center - Europe
RICE_north_atlantic_walrus_ivory_workshop_europe = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_european_port.dds" }

	desc = RICE_north_atlantic_walrus_ivory_workshop_europe_desc
	selection_tooltip = RICE_north_atlantic_walrus_ivory_workshop_europe_tooltip
	decision_group_type = RICE_greenland_struggle_major

	ai_check_interval = 120

	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_ivory_center_europe_region
				NOT = { geographical_region = RICE_greenland_struggle_region }							
			}
		}
		OR = {			
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:RICE_north_atlantic_walrus_europe_flag
			}
		}
	}
	
	is_valid = {
		OR = {
			custom_tooltip = {
				text = RICE_greenland_struggle_integration_or_settlement_phase
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle ?= {
					OR = {
						is_struggle_phase = struggle_RICE_greenland_phase_settlement
						is_struggle_phase = struggle_RICE_greenland_phase_integration
					}
				}
			}			
			custom_description = {
				text = RICE_greenland_struggle_good_ending_req
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}

		}
		custom_tooltip = {
			text = RICE_europe_not_greenland_struggle_region_capital_development_req
			capital_county = {
				development_level >= RICE_greenland_walrus_ivory_development_level
				title_province = {
					geographical_region = RICE_ivory_center_europe_region
					NOT = { geographical_region = RICE_greenland_struggle_region }	
				}
			}
		}
		OR = {
			prestige_level >= 4
			AND = {
				custom_description = {
					text = "is_king_or_emperor"
					highest_held_title_tier >= tier_kingdom
				}
				prestige_level >= 3
			}
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {		

		#Can only happen once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:RICE_north_atlantic_walrus_europe_flag
		}

		save_scope_as = walrus_person
		
		RICE_north_atlantic_establish_walrus_workshop_outside_effect = yes

		custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_europe_effect_tooltip_1

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_walrus_ivory_workshop_europe_context_tooltip
		}

		every_ruler = {
			limit = {
				is_ai = no
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_europe_and_mediterranean_region
					}
				}
			}
			trigger_event = north_atlantic.0024
		}

	}

	cost = { 
		gold = { value = major_gold_value }
	}	

	ai_potential = {
		short_term_gold > major_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -10
			has_trait = lazy
		}
		modifier = {
			add = 5
			has_trait = diligent
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = 5
			has_trait = greedy
		}
	}
}


# Incorporate Inuit Ideas
RICE_north_atlantic_incorporate_inuit_ideas = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_inukshuk.dds" }

	desc = RICE_north_atlantic_incorporate_inuit_ideas_desc
	selection_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_tooltip
	decision_group_type = RICE_greenland_struggle_major

	ai_check_interval = 120

	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		has_global_variable = RICE_greenland_inuit_are_here
		NOT = { has_global_variable = RICE_greenland_adopted_arctic_adaptations }
		OR = {
			AND = {				
				exists = struggle:RICE_greenland_struggle
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			}
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
		culture:greenlandic = {
			NOT = { has_cultural_tradition = tradition_RICE_arctic_adaptations }
		}
	}
	
	is_valid = {
		custom_tooltip = {
			text = RICE_greenland_inuit_arrive_req		
			has_global_variable = RICE_greenland_inuit_are_here
		}
		custom_tooltip = {
			text = RICE_greenland_adopt_inuit_ideas_networks_req		
			global_var:RICE_greenland_networks > 800
		}
		#custom_tooltip = {
			#	text = RICE_greenland_struggle_correct_involvement_tt		
			OR = {
				AND = {				
					exists = struggle:RICE_greenland_struggle
					any_character_struggle = {
						involvement = involved
						is_struggle_type = RICE_greenland_struggle
					}
				}
				AND = {
					custom_description = {
						text = RICE_greenland_struggle_region_req
						any_held_title = {
							tier = tier_county
							any_county_province = {
								geographical_region = RICE_greenland_struggle_region		
							}
						}
					}
					custom_description = {
						text = RICE_greenland_struggle_good_ending_req
						OR = {
							has_global_variable = RICE_greenland_ending_integration
							has_global_variable = RICE_greenland_ending_indigenous
						}
					}
				}
			}
		#}
		OR = {
			prestige_level >= 5
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		save_scope_as = adopter

		# culture:greenlandic = {
		# 	save_scope_as = greenlandic
		# }

		character:RICE_greenlandic_deity_001 = {
			culture = {
				save_scope_as = greenlandic
			}
		}

		culture:inuit = {
			save_scope_as = inuit
		}

		#show_as_tooltip = {
			RICE_north_atlantic_incorporate_inuit_ideas_effect = yes
		#}

		custom_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_effect_tooltip_2

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_context_tooltip
		}

		every_ruler = {
			limit = {
				is_ai = no
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region
					}
				}
			}
			trigger_event = north_atlantic.0017
		}

	}

	cost = { 
		prestige = { value = monumental_prestige_value }
	}	

	ai_potential = {
		prestige > monumental_prestige_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -5
			has_trait = zealous
		}
		modifier = {
			add = 5
			has_trait = paranoid
		}
	}
}




# Establish the Skalholt School
RICE_north_atlantic_skalholt_school = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_RICE_european_book.dds" }

	desc = RICE_north_atlantic_skalholt_school_desc
	selection_tooltip = RICE_north_atlantic_skalholt_school_tooltip
	decision_group_type = major

	ai_check_interval = 24

	is_shown = {
		exists = dynasty
		is_landed = yes
		OR = {
			has_title = title:c_vestisland
			has_title = title:c_nordrland
			has_title = title:c_austisland
			has_title = title:c_sudurland
		}
		is_target_in_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:RICE_north_atlantic_iceland_formed_flag
		}
		NOT = {
			is_target_in_global_variable_list = {
				name = unavailable_unique_decisions
				target = flag:RICE_north_atlantic_established_skalholt_school
			}
		}
	}
	
	is_valid = {
		custom_description = {
			text = faith_is_reformed
			subject = root
			faith = { NOT = { has_doctrine_parameter = unreformed } }
		}

		# culture = {
		# 	has_cultural_pillar = heritage_north_germanic
		# }
		custom_description = {
			text = RICE_althing_iceland_capital_req
			capital_county = {
				title:d_iceland = {
					is_de_jure_liege_or_above_target = prev
				}
			}
		}
		custom_description = {
			text = RICE_capital_same_religion_req
			capital_county = {
				religion = root.religion
			}
		}
		piety_level >= 3
	}

	is_valid_showing_failures_only = {
		is_available_adult = yes
	}

	effect = {

		#Can only happen once
		add_to_global_variable_list = {
			name = unavailable_unique_decisions
			target = flag:RICE_north_atlantic_established_skalholt_school
		}

		save_scope_as = isleifur

		#custom_tooltip = RICE_north_atlantic_skalholt_school_effect_tooltip_1

		RICE_skalholt_school_decision_effect = yes

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_skalholt_school_context_tooltip
		}

		trigger_event = north_atlantic.0027


	}

	cost = { 
		gold = { value = medium_gold_value } # Cheaper if you have an estate in Greenland
	}	

	ai_potential = {
		short_term_gold > medium_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = 15
			# Happened after Isleifur became bishop IRL in 1056
			current_date >= 1000.1.1
		}
		modifier = {
			add = 15
			# Happened after Isleifur became bishop IRL in 1056
			current_date >= 1050.1.1
		}
		modifier = {
			add = 15
			# Happened after Isleifur became bishop IRL in 1056
			current_date >= 1100.1.1
		}
		modifier = {
			add = 15
			# Happened after Isleifur became bishop IRL in 1056
			current_date >= 1150.1.1
		}
		modifier = {
			add = -5
			has_trait = lazy
		}
		modifier = {
			add = 5
			has_trait = diligent
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = shy
		}
		modifier = {
			add = 5
			has_trait = zealous
		}
		modifier = {
			add = -5
			has_trait = cynical
		}
	}
}

# Immersively make your culture involved in Greenland
RICE_north_atlantic_make_culture_involved_in_greenland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_longship_warriors.dds" }

	desc = RICE_north_atlantic_make_culture_involved_in_greenland_desc
	selection_tooltip = RICE_north_atlantic_make_culture_involved_in_greenland_tooltip
	decision_group_type = RICE_greenland_struggle_major

	ai_check_interval = 24

	is_shown = {
		exists = dynasty
		is_landed = yes
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greenland_struggle_region
			}			
		}
		exists = struggle:RICE_greenland_struggle
		NOT = { struggle:RICE_greenland_struggle ?= { is_culture_involved_in_struggle = root.culture } }
	}
	
	is_valid = {

		# any_character_struggle = {
		# 	involvement = involved
		# 	is_struggle_type = RICE_greenland_struggle
		# }

		custom_tooltip = {
			text = RICE_greenland_struggle_region_capital_req
			capital_county = {
				title_province = { geographical_region = RICE_greenland_struggle_region }
			}
		}

		# Have a few counties of the correct culture
		custom_tooltip = {
			text = RICE_greenland_struggle_county_culture_req
			any_county_in_region = {
				region = RICE_greenland_struggle_region
				count >= RICE_greenland_county_involved_req_value
				culture = root.culture
			}
		}

		# Own a few counties in the struggle region
		custom_tooltip = {
			text = RICE_greenland_struggle_own_territory_req
			# any_county_in_region = {
			# 	region = RICE_greenland_struggle_region
			# 	count >= RICE_greenland_county_own_req_value
			# 	holder = root
			# }
			# At least 5 counties
			any_county_in_region = {
				region = RICE_greenland_struggle_region
				count >= RICE_greenland_county_own_req_value
				save_temporary_scope_as = county_temp
				root = { completely_controls = scope:county_temp }				
			}
		}

		prestige_level >= 2
	}

	is_valid_showing_failures_only = {
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {

		save_scope_as = greenland_colonizer

		show_as_tooltip = {
			RICE_greenland_new_culture_involvement_effect = yes			
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_make_culture_involved_in_greenland_context_tooltip
		}

		trigger_event = north_atlantic.0028


	}

	cost = { 
		gold = { value = medium_gold_value } # Cheaper if you have an estate in Greenland
	}	

	ai_potential = {
		short_term_gold > medium_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = lazy
		}
		modifier = {
			add = 5
			has_trait = diligent
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = greedy
		}
		modifier = {
			add = -5
			has_trait = craven
		}
	}
}

# Immersively make your faith involved in Greenland
RICE_north_atlantic_make_faith_involved_in_greenland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_north_european_council.dds" }

	desc = RICE_north_atlantic_make_faith_involved_in_greenland_desc
	selection_tooltip = RICE_north_atlantic_make_faith_involved_in_greenland_tooltip
	decision_group_type = RICE_greenland_struggle_major

	ai_check_interval = 24

	is_shown = {
		exists = dynasty
		is_landed = yes
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greenland_struggle_region
			}			
		}
		exists = struggle:RICE_greenland_struggle
		NOT = { struggle:RICE_greenland_struggle ?= { is_faith_involved_in_struggle = root.faith } }
	}
	
	is_valid = {

		# any_character_struggle = {
		# 	involvement = involved
		# 	is_struggle_type = RICE_greenland_struggle
		# }

		custom_tooltip = {
			text = RICE_greenland_struggle_region_capital_req
			capital_county = {
				title_province = { geographical_region = RICE_greenland_struggle_region }
			}
		}

		# Have a few counties of the correct faith
		custom_tooltip = {
			text = RICE_greenland_struggle_county_faith_req
			any_county_in_region = {
				region = RICE_greenland_struggle_region
				count >= RICE_greenland_county_involved_req_value
				faith = root.faith
			}
		}

		# Own a few counties in the struggle region
		custom_tooltip = {
			text = RICE_greenland_struggle_own_territory_req
			# any_county_in_region = {
			# 	region = RICE_greenland_struggle_region
			# 	count >= RICE_greenland_county_own_req_value
			# 	holder = root
			# }
			# At least 5 counties
			any_county_in_region = {
				region = RICE_greenland_struggle_region
				count >= RICE_greenland_county_own_req_value
				save_temporary_scope_as = county_temp
				root = { completely_controls = scope:county_temp }
			}
		}

		piety_level >= 2
	}

	is_valid_showing_failures_only = {
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {

		save_scope_as = greenland_colonizer

		show_as_tooltip = {
			RICE_greenland_new_faith_involvement_effect = yes			
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_make_faith_involved_in_greenland_context_tooltip
		}

		trigger_event = north_atlantic.0029


	}

	cost = { 
		gold = { value = medium_gold_value } # Cheaper if you have an estate in Greenland
	}	

	ai_potential = {
		short_term_gold > medium_gold_value
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -5
			has_trait = lazy
		}
		modifier = {
			add = 5
			has_trait = diligent
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = zealous
		}
		modifier = {
			add = -5
			has_trait = cynical
		}
	}
}


#############################################
#											#
# NORMAL GREENLAND DECISIONS			    #
#											#
#############################################


# Establish a family estate in Greenland
RICE_north_atlantic_family_estate_greenland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_longship.dds" }

	desc = RICE_north_atlantic_family_estate_greenland_desc
	selection_tooltip = RICE_north_atlantic_family_estate_greenland_tooltip
	decision_group_type = RICE_greenland_struggle

	ai_check_interval = 60

	is_shown = {
		exists = house
		NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			exists = struggle:RICE_greenland_struggle			
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
				#	text = RICE_greenland_struggle_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		#is_house_head = yes
		#NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
		# RICE_north_atlantic_vinland_outposts
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {

		save_scope_as = establisher

		house = {
			add_house_modifier = {
				modifier = RICE_north_atlantic_greenland_family_estate
			}
		}
		dynasty = {
			add_dynasty_prestige = 100
		}
		add_prestige = 200

		custom_tooltip = RICE_north_atlantic_family_estate_greenland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_family_estate_greenland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_family_estate_greenland_effect_tooltip_3

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_family_estate_greenland_context_tooltip
		}

		house = {
			every_house_member = {
				limit = {
					is_landed = yes
				}
				trigger_event = north_atlantic.0020
				# Change to immediately later
				#trigger_event = {
				#	id = north_atlantic.0020
				#	days = 1
				#}
			}
		}

	}

	cost = { 
		gold = RICE_north_atlantic_establish_estate_cost # Will depend
	}	

	ai_potential = {
		short_term_gold > RICE_north_atlantic_establish_estate_cost
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
	}
}


# Attempt to Build an Outpost in Vinland
RICE_north_atlantic_build_outpost_vinland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_vinland_skyrim.dds" }

	desc = RICE_north_atlantic_build_outpost_vinland_desc
	selection_tooltip = RICE_north_atlantic_build_outpost_vinland_tooltip
	decision_group_type = RICE_vinland

	ai_check_interval = 60

	cooldown = { days = 3650 }

	is_shown = {
		exists = dynasty
		#NOT = { house = { has_house_modifier = RICE_north_atlantic_settled_vinland } }
		has_global_variable = RICE_north_atlantic_vinland_discovered
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			exists = struggle:RICE_greenland_struggle			
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
		NOT = { dynasty = { has_dynasty_modifier = RICE_north_atlantic_vinland_outpost } }
		#RICE_is_not_native_american_culture_trigger = yes
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
				#	text = RICE_greenland_struggle_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		#is_house_head = yes
		#NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
		custom_description = {
			text = RICE_no_ongoing_expedition_req
			RICE_north_atlantic_ongoing_expedition_trigger = no
		}
	}

	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {
		# dynasty = {
		# 	add_dynasty_modifier = {
		# 		modifier = RICE_north_atlantic_vinland_outpost
		# 	}
		# }

		custom_tooltip = RICE_north_atlantic_build_outpost_vinland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_build_outpost_vinland_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_build_outpost_vinland_effect_tooltip_3
		custom_tooltip = RICE_north_atlantic_build_outpost_vinland_effect_tooltip_4

		if = {
			limit = {
				NOR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
			custom_tooltip = RICE_north_atlantic_build_outpost_vinland_effect_tooltip_5
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_build_outpost_vinland_context_tooltip
		}

		trigger_event = north_atlantic.0140

	}

	# widget = {
	# 	gui = "decision_view_widget_RICE_progressbars_all"
	# }

	cost = { 
		gold = RICE_vinland_outpost_cost_value # Will depend
	}	

	ai_potential = {
		short_term_gold > RICE_vinland_outpost_cost_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -5
			has_trait = content
		}
		modifier = {
			add = 5
			has_trait = ambitious
		}
		modifier = {
			add = -5
			has_trait = craven
		}
		modifier = {
			add = 5
			has_trait = brave
		}
		modifier = {
			add = -10
			global_var:RICE_vinland_viability < 25
		}
		modifier = {
			add = 10
			global_var:RICE_vinland_viability > 60
		}
		modifier = {
			add = 40
			OR = {
				has_global_variable = RICE_greenland_ending_integration
				has_global_variable = RICE_greenland_ending_indigenous
			}
		}
	}
}


# Organize a walrus hunting trip in Nordsetur, Greenland
RICE_north_atlantic_hunting_trip = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_ice_ship.dds" }
	decision_group_type = RICE_greenland_struggle
	desc = RICE_north_atlantic_hunting_trip_desc
	selection_tooltip = RICE_north_atlantic_hunting_trip_tooltip

	ai_check_interval = 32

	cooldown = { days = 3650 }

	is_shown = {
		exists = house
		house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			exists = struggle:RICE_greenland_struggle			
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		custom_description = {
			text = RICE_current_nordsetur_hunt_req
			NOT = { any_owned_story = { story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt } }
		}		
		OR = {
			#custom_tooltip = {
				#	text = RICE_greenland_struggle_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		#is_house_head = yes
		house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		custom_description = {
			text = RICE_decision_nordsetur_hunt_month_req
			current_month <= 4
		}
	}

	is_valid_showing_failures_only = {
		RICE_is_available_adult_even_if_sick_trigger = yes
	}


    widget = {
    	gui = "decision_view_widget_RICE_north_atlantic_nordsetur_hunt_decision"
		controller = decision_option_list_controller
    	
		#decision_has_second_step = yes
		#decision_custom_widget_container = "custom_widgets_container_step_two"
		decision_to_second_step_button = "RICE_north_atlantic_nordsetur_hunt_type" 



		# Minor Hunt
		item = {
			value = RICE_north_atlantic_minor_walrus_hunt_option
			is_valid = {
				is_ai = no
			}
			current_description = RICE_north_atlantic_minor_walrus_hunt_option_desc
			localization = RICE_north_atlantic_minor_walrus_hunt_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_ship_bronze.dds"

			ai_chance = {
				value = 10
			}
		}

		# Major Hunt
		item = {
			value = RICE_north_atlantic_major_walrus_hunt_option
			is_valid = {
				is_ai = no
			}
			current_description = RICE_north_atlantic_major_walrus_hunt_option_desc
			localization = RICE_north_atlantic_major_walrus_hunt_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_ship_silver.dds"

			ai_chance = {
				value = 10
			}
		}

		# Great Hunt
		item = {
			value = RICE_north_atlantic_great_walrus_hunt_option
			is_valid = {
				is_ai = no
			}
			current_description = RICE_north_atlantic_great_walrus_hunt_option_desc
			localization = RICE_north_atlantic_great_walrus_hunt_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_ship_gold.dds"

			ai_chance = {
				value = 10
			}
		}

		# AI Hunt
		item = {
			value = RICE_north_atlantic_ai_walrus_hunt_option
			is_shown = {
				is_ai = yes
			}
			current_description = RICE_north_atlantic_ai_walrus_hunt_option_desc
			localization = RICE_north_atlantic_ai_walrus_hunt_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_ship_gold.dds"

			ai_chance = {
				value = 10
			}
		}

	}



	effect = {

		custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_3
		custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_4
		custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_5
		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle ?= {
					OR = {
						is_struggle_phase = struggle_RICE_greenland_phase_settlement
						is_struggle_phase = struggle_RICE_greenland_phase_integration
					}
				}	
			}
			custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_6
		}
		else_if = {
			limit = {
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
			custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_7
		}
		else_if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle ?= {
					is_struggle_phase = struggle_RICE_greenland_phase_subsistence
				}
			}
			custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_8
		}
		else_if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle ?= {
					is_struggle_phase = struggle_RICE_greenland_phase_marginalization
				}
			}
			custom_tooltip = RICE_north_atlantic_hunting_trip_effect_tooltip_9
		}


		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_hunting_trip_context_tooltip
		}

		if = { # Minor hunt
			limit = { scope:RICE_north_atlantic_minor_walrus_hunt_option = yes }
			remove_short_term_gold = RICE_walrus_hunt_minor_value # CHANGE TO DYNAMIC AMOUNT
			set_variable = {
				name = RICE_nordsetur_hunt
				value = flag:minor
			}
		}

		else_if = { # Major hunt
			limit = { scope:RICE_north_atlantic_major_walrus_hunt_option = yes }
			remove_short_term_gold = RICE_walrus_hunt_major_value # CHANGE TO DYNAMIC AMOUNT
			set_variable = {
				name = RICE_nordsetur_hunt
				value = flag:major
			}
		}

		else_if = { # Great hunt
			limit = { scope:RICE_north_atlantic_great_walrus_hunt_option = yes }
			remove_short_term_gold = RICE_walrus_hunt_great_value # CHANGE TO DYNAMIC AMOUNT
			set_variable = {
				name = RICE_nordsetur_hunt
				value = flag:great
			}
		}

		else_if = { # Minor hunt
			limit = { scope:RICE_north_atlantic_ai_walrus_hunt_option = yes }
			random_list = {
				20 = {
					remove_short_term_gold = RICE_walrus_hunt_minor_value # CHANGE TO DYNAMIC AMOUNT
					set_variable = {
						name = RICE_nordsetur_hunt
						value = flag:minor
					}
				}
				20 = {
					trigger = {
						gold >= 75
					}
					remove_short_term_gold = RICE_walrus_hunt_major_value # CHANGE TO DYNAMIC AMOUNT
					set_variable = {
						name = RICE_nordsetur_hunt
						value = flag:major
					}
				}
				10 = {
					trigger = {
						gold >= 125
					}
					remove_short_term_gold = RICE_walrus_hunt_great_value # CHANGE TO DYNAMIC AMOUNT
					set_variable = {
						name = RICE_nordsetur_hunt
						value = flag:great
					}
				}
			}
		}

		trigger_event = north_atlantic.0123

	}

	minimum_cost = {
		gold = RICE_walrus_hunt_minor_value
	}

	ai_potential = {
		gold > RICE_walrus_hunt_minor_value
	}

	ai_will_do = {
		base = 110
		modifier = {
			add = -10
			has_trait = content
		}
		modifier = {
			add = 10
			has_trait = ambitious
		}
		modifier = {
			add = -10
			has_trait = craven
		}
		modifier = {
			add = 10
			has_trait = brave
		}
		modifier = {
			add = -10
			has_trait = paranoid
		}
		modifier = {
			add = 10
			has_trait = greedy
		}
		# Need more money
		modifier = {
			add = 10
			gold < 100
		}
		# Need more money
		modifier = {
			add = 10
			gold < 75
		}
	}
}


# Send aid to Greenland
RICE_north_atlantic_support_greenland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_longship.dds" }
	decision_group_type = RICE_greenland_struggle
	ai_check_interval = 48

	cooldown = { days = RICE_greenland_support_cooldown_time }
	
	desc = RICE_north_atlantic_support_greenland_desc
	
	is_shown = {
		#exists = house
		#house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
			#	text = RICE_greenland_struggle_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}						
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	widget = {
		gui = "decision_view_widget_RICE_progressbars_greenland"
	}

    widget = {
    	gui = "decision_view_widget_RICE_north_atlantic_support_greenland_decision"
		controller = decision_option_list_controller
    	
		#decision_has_second_step = yes
		#decision_custom_widget_container = "custom_widgets_container_step_two"
		decision_to_second_step_button = "RICE_north_atlantic_greenland_aid_type" 



		# Send a few supplies
		item = {
			value = RICE_north_atlantic_basic_supplies_option
			is_valid = {
				gold >= RICE_greenland_support_small_cost
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_basic_supplies_option_desc
			localization = RICE_north_atlantic_basic_supplies_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_basic_supplies.dds"

			ai_chance = {
				value = 35 # Make it a little less likely so AI is more likely to choose the 100 cost options
			}
		}

		# Recruit Settlers
		item = {
			value = RICE_north_atlantic_settlers_option
			is_valid = {
				gold >= RICE_greenland_support_medium_cost
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_settlers_option_desc
			localization = RICE_north_atlantic_settlers_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_settlers.dds"

			ai_chance = {
				value = 50
			}
		}

		# Send food
		item = {
			value = RICE_north_atlantic_food_option
			is_valid = {
				gold >= RICE_greenland_support_medium_cost
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_food_option_desc
			localization = RICE_north_atlantic_food_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_food.dds"

			ai_chance = {
				value = 50
			}
		}

		# Send materials
		item = {
			value = RICE_north_atlantic_materials_option
			is_valid = {
				gold >= RICE_greenland_support_medium_cost
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_materials_option_desc
			localization = RICE_north_atlantic_materials_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_materials.dds"

			ai_chance = {
				value = 50
			}
		}

		# Send clergy
		item = {
			value = RICE_north_atlantic_clergy_option
			is_valid = {
				gold >= RICE_greenland_support_medium_cost
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_clergy_option_desc
			localization = RICE_north_atlantic_clergy_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_clergy.dds"

			ai_chance = {
				value = 50
			}
		}

		# Construct Hunting Stations
		item = {
			value = RICE_north_atlantic_hunting_stations_option
			is_valid = {
				gold >= RICE_greenland_support_large_cost
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_hunting_stations_option_desc
			localization = RICE_north_atlantic_hunting_stations_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_hunting_stations.dds"

			ai_chance = {
				value = 20
			}
		}

		# Construct Shielings
		item = {
			value = RICE_north_atlantic_shielings_option
			is_valid = {
				gold >= RICE_greenland_support_large_cost
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_shielings_option_desc
			localization = RICE_north_atlantic_shielings_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_shielings.dds"

			ai_chance = {
				value = 20
			}
		}

		# Construct temples
		item = {
			value = RICE_north_atlantic_temples_option
			is_valid = {
				gold >= RICE_greenland_support_large_cost
				is_ai = no # AI is apparently too dumb to properly pick something
			}
			current_description = RICE_north_atlantic_temples_option_desc
			localization = RICE_north_atlantic_temples_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_temples.dds"

			ai_chance = {
				value = 20
			}
		}

		# AI option
		item = {
			value = RICE_north_atlantic_ai_option
			is_shown = {
				is_ai = yes # AI picker
			}
			current_description = RICE_north_atlantic_ai_option_desc
			localization = RICE_north_atlantic_ai_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_temples.dds"

			ai_chance = {
				value = 20
			}
		}

	}

	effect = {
		custom_tooltip = RICE_north_atlantic_support_greenland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_support_greenland_effect_tooltip_2
		if = {
			limit = {
				exists = house
				NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
			}
			custom_tooltip = RICE_north_atlantic_support_greenland_effect_tooltip_3
		}
		custom_tooltip = RICE_north_atlantic_support_greenland_effect_tooltip_4
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_support_greenland_context_tooltip
		}

		if = { # Basic Supplies
			limit = { scope:RICE_north_atlantic_basic_supplies_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:basic_supplies
			}
		}

		else_if = { # Settlers
			limit = { scope:RICE_north_atlantic_settlers_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:settlers
			}
		}

		else_if = { # Food
			limit = { scope:RICE_north_atlantic_food_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:food
			}
		}

		else_if = { # Materials
			limit = { scope:RICE_north_atlantic_materials_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:materials
			}
		}

		else_if = { # Clergy
			limit = { scope:RICE_north_atlantic_clergy_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:clergy
			}
		}

		else_if = { # Hunting Stations
			limit = { scope:RICE_north_atlantic_hunting_stations_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:hunting_stations
			}
		}

		else_if = { # Shielings
			limit = { scope:RICE_north_atlantic_shielings_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:shielings
			}
		}

		else_if = { # Temples
			limit = { scope:RICE_north_atlantic_temples_option = yes }
			set_variable = {
				name = RICE_greenland_aid
				value = flag:temples
			}
		}

		else_if = { # AI
			limit = { scope:RICE_north_atlantic_ai_option = yes }
			random_list = {
				10 = {
					set_variable = {
						name = RICE_greenland_aid
						value = flag:basic_supplies
					}
				}
				15 = {
					trigger = {
						gold >= 75
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:settlers
					}
				}
				15 = {
					trigger = {
						gold >= 75
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:food
					}
				}
				15 = {
					trigger = {
						gold >= 75
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:materials
					}
				}
				15 = {
					trigger = {
						gold >= 75
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:clergy
					}
				}
				10 = {
					trigger = {
						gold >= 150
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:hunting_stations
					}
				}
				10 = {
					trigger = {
						gold >= 150
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:shielings
					}
				}
				10 = {
					trigger = {
						gold >= 150
					}
					set_variable = {
						name = RICE_greenland_aid
						value = flag:temples
					}
				}
			}
		}

		trigger_event = {
			id = north_atlantic.0100
		}
	}

	minimum_cost = {
		gold = 50
	}

	ai_potential = {
		gold > 75
	}

	ai_will_do = {
		base = 50
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
		modifier = {
			add = -8
			has_trait = lazy
		}
		modifier = {
			add = 8
			has_trait = diligent
		}
		modifier = {
			add = -8
			has_trait = greedy
		}
		modifier = {
			add = 8
			has_trait = generous
		}
	}
}

# Send aid to Vinland
RICE_north_atlantic_support_vinland = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_vinland_encounter.dds" }
	decision_group_type = RICE_vinland
	ai_check_interval = 48

	cooldown = { days = RICE_greenland_support_cooldown_time }
	
	desc = RICE_north_atlantic_support_vinland_desc
	
	is_shown = {
		#exists = house
		#house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		has_global_variable = RICE_north_atlantic_vinland_discovered
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
		#RICE_is_not_native_american_culture_trigger = yes
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
			#	text = RICE_greenland_struggle_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}						
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		global_var:RICE_north_atlantic_vinland_outposts > 0
		dynasty = {
			OR = {
				has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
				has_dynasty_modifier = RICE_north_atlantic_vinland_settlement
			}
		}
	}
	
	is_valid_showing_failures_only = {
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	widget = {
		gui = "decision_view_widget_RICE_progressbars_all"
	}

    widget = {
    	gui = "decision_view_widget_RICE_north_atlantic_support_vinland_decision"
		controller = decision_option_list_controller
    	
		#decision_has_second_step = yes
		#decision_custom_widget_container = "custom_widgets_container_step_two"
		decision_to_second_step_button = "RICE_north_atlantic_vinland_aid_type" 



		# Send supplies
		item = {
			value = RICE_north_atlantic_vinland_supplies_option
			current_description = RICE_north_atlantic_vinland_supplies_option_desc
			localization = RICE_north_atlantic_vinland_supplies_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_basic_supplies.dds"

			ai_chance = {
				value = 10
			}
		}

		# Recruit Settlers
		item = {
			value = RICE_north_atlantic_vinland_settlers_option
			current_description = RICE_north_atlantic_vinland_settlers_option_desc
			localization = RICE_north_atlantic_vinland_settlers_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_settlers.dds"

			ai_chance = {
				value = 10
			}
		}

		# Build base camps
		item = {
			value = RICE_north_atlantic_vinland_base_camps_option
			current_description = RICE_north_atlantic_vinland_base_camps_option_desc
			localization = RICE_north_atlantic_vinland_base_camps_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_forest.dds"

			ai_chance = {
				value = 10
			}
		}

		# Build temples
		item = {
			value = RICE_north_atlantic_vinland_temples_option
			current_description = RICE_north_atlantic_vinland_temples_option_desc
			localization = RICE_north_atlantic_vinland_temples_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_temples.dds"

			ai_chance = {
				value = 10
			}
		}

	}

	effect = {
		custom_tooltip = RICE_north_atlantic_support_vinland_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_support_vinland_effect_tooltip_2
		if = {
			limit = {
				exists = house
				NOT = { house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate } }
			}
			custom_tooltip = RICE_north_atlantic_support_vinland_effect_tooltip_3
		}
		custom_tooltip = RICE_north_atlantic_support_vinland_effect_tooltip_4
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_support_vinland_context_tooltip
		}

		if = { # Basic Supplies
			limit = { scope:RICE_north_atlantic_vinland_supplies_option = yes }
			set_variable = {
				name = RICE_vinland_aid
				value = flag:supplies
			}
		}

		else_if = { # Settlers
			limit = { scope:RICE_north_atlantic_vinland_settlers_option = yes }
			set_variable = {
				name = RICE_vinland_aid
				value = flag:settlers
			}
		}

		else_if = { # Base Camps
			limit = { scope:RICE_north_atlantic_vinland_base_camps_option = yes }
			set_variable = {
				name = RICE_vinland_aid
				value = flag:base_camps
			}
		}

		else_if = { # Temples
			limit = { scope:RICE_north_atlantic_vinland_temples_option = yes }
			set_variable = {
				name = RICE_vinland_aid
				value = flag:temples
			}
		}

		trigger_event = {
			id = north_atlantic.0110
		}
	}

	minimum_cost = {
		gold = RICE_vinland_cost
	}

	ai_potential = {
		short_term_gold > RICE_vinland_cost
	}

	ai_will_do = {
		base = 30
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
		modifier = {
			add = -8
			has_trait = lazy
		}
		modifier = {
			add = 8
			has_trait = diligent
		}
		modifier = {
			add = -8
			has_trait = greedy
		}
		modifier = {
			add = 8
			has_trait = generous
		}
	}
}


# Send minor expeditions to the western territories
RICE_north_atlantic_explore_americas = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_vinland.dds" }
	decision_group_type = RICE_greenland_struggle
	ai_check_interval = 48

	cooldown = { days = 3650 }
	
	desc = RICE_north_atlantic_explore_americas_desc
	
	is_shown = {
		exists = house
		house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		has_global_variable = RICE_north_atlantic_vinland_discovered
		OR = {
			exists = struggle:RICE_greenland_struggle
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
		}
		highest_held_title_tier > tier_barony
		is_landed = yes
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}			
			AND = {
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
		}
	}
	
	is_valid = {
		OR = {
			#custom_tooltip = {
			#	text = RICE_greenland_struggle_correct_involvement_tt
				any_character_struggle = {
					involvement = involved
					is_struggle_type = RICE_greenland_struggle
				}
			#}					
			AND = {
				custom_description = {
					text = RICE_greenland_struggle_region_req
					any_held_title = {
						tier = tier_county
						any_county_province = {
							geographical_region = RICE_greenland_struggle_region		
						}
					}
				}
				custom_description = {
					text = RICE_greenland_struggle_good_ending_req
					OR = {
						has_global_variable = RICE_greenland_ending_integration
						has_global_variable = RICE_greenland_ending_indigenous
					}
				}
			}
		}
		custom_description = {
			text = RICE_no_ongoing_expedition_req
			RICE_north_atlantic_ongoing_expedition_trigger = no
		}
	}
	
	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	widget = {
		gui = "decision_view_widget_RICE_progressbars_all"
	}

    widget = {
    	gui = "decision_view_widget_RICE_north_atlantic_explore_americas_decision"
		controller = decision_option_list_controller
    	
		#decision_has_second_step = yes
		#decision_custom_widget_container = "custom_widgets_container_step_two"
		decision_to_second_step_button = "RICE_north_atlantic_pick_expedition_destination_type" 

		# AI option
		item = {
			value = RICE_north_atlantic_expedition_ai_option
			is_shown = {
				exists = dynasty
				is_ai = yes # AI picker
			}
			current_description = RICE_north_atlantic_expedition_ai_option_desc
			localization = RICE_north_atlantic_expedition_ai_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_vinland.dds"

			ai_chance = {
				value = 20
			}
		}


		# # Nordsetur
		# item = {
		# 	value = RICE_north_atlantic_nordsetur_option
		# 	is_valid = {
		# 		exists = dynasty
		# 	}
		# 	current_description = RICE_north_atlantic_nordsetur_option_desc
		# 	localization = RICE_north_atlantic_nordsetur_option
		# 	icon = "gfx/interface/icons/widgets/RICE_north_atlantic_nordsetur.dds"

		# 	ai_chance = {
		# 		value = 12
		# 	}
		# }

		# Helluland
		item = {
			value = RICE_north_atlantic_helluland_option
			is_valid = {
				exists = dynasty
				is_ai = no
			}
			current_description = RICE_north_atlantic_helluland_option_desc
			localization = RICE_north_atlantic_helluland_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_helluland.dds"

			ai_chance = {
				value = 11
			}
		}

		# Markland
		item = {
			value = RICE_north_atlantic_markland_option
			is_valid = {
				exists = dynasty
				is_ai = no
			}
			current_description = RICE_north_atlantic_markland_option_desc
			localization = RICE_north_atlantic_markland_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_markland.dds"

			ai_chance = {
				value = 7
			}
		}

		# Vinland
		item = {
			value = RICE_north_atlantic_vinland_option
			is_valid = {
				exists = dynasty
				is_ai = no
				NAND = {			
					exists = struggle:RICE_greenland_struggle
					any_character_struggle = {
						is_struggle_type = RICE_greenland_struggle
						is_struggle_phase = struggle_RICE_greenland_phase_marginalization
					}
				}
				# culture = {
				# 	NOR = {
				# 		has_cultural_pillar = heritage_algonquian
				# 		has_cultural_pillar = heritage_iroquoian
				# 		has_cultural_pillar = heritage_inuit
				# 		has_cultural_pillar = heritage_paleo_inuit
				# 	}
				# }
			}
			current_description = RICE_north_atlantic_vinland_option_desc
			localization = RICE_north_atlantic_vinland_option
			icon = "gfx/interface/icons/widgets/RICE_north_atlantic_vinland.dds"

			ai_chance = {
				value = 2
			}
		}

	}

	effect = {
		custom_tooltip = RICE_north_atlantic_explore_americas_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_explore_americas_effect_tooltip_2
		custom_tooltip = RICE_north_atlantic_explore_americas_effect_tooltip_3
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_explore_americas_context_tooltip
		}

		if = { # AI choice
			limit = { scope:RICE_north_atlantic_expedition_ai_option = yes }
			random_list = {
				28 = {
					set_variable = {
						name = RICE_expedition_destination_pick
						value = flag:helluland
					}
				}
				18 = {
					modifier = {
						add = 4
						OR = {
							has_global_variable = RICE_greenland_ending_integration
							has_global_variable = RICE_greenland_ending_indigenous
						}
					}
					modifier = {
						add = 4
						has_global_variable = RICE_north_atlantic_vinland_colonized_done
					}
					set_variable = {
						name = RICE_expedition_destination_pick
						value = flag:markland
					}
				}
				4 = {
					trigger = {
						OR = {
							gold >= 150
							has_trait = ambitious
						}
					}
					modifier = {
						add = 6
						OR = {
							has_global_variable = RICE_greenland_ending_integration
							has_global_variable = RICE_greenland_ending_indigenous
						}
					}
					modifier = {
						add = 6
						has_global_variable = RICE_north_atlantic_vinland_colonized_done
					}
					set_variable = {
						name = RICE_expedition_destination_pick
						value = flag:vinland
					}
				}
			}
		}

		else_if = { # Helluland
			limit = { scope:RICE_north_atlantic_helluland_option = yes }
			set_variable = {
				name = RICE_expedition_destination_pick
				value = flag:helluland
			}
		}

		else_if = { # Markland
			limit = { scope:RICE_north_atlantic_markland_option = yes }
			set_variable = {
				name = RICE_expedition_destination_pick
				value = flag:markland
			}
		}

		else_if = { # Vinland
			limit = { scope:RICE_north_atlantic_vinland_option = yes }
			set_variable = {
				name = RICE_expedition_destination_pick
				value = flag:vinland
			}
		}

		trigger_event = {
			id = north_atlantic.0030 # Have some default courtier options, or allow time to wait for a pick
		}
	}

	minimum_cost = { 
		gold = 50
	}	

	ai_potential = {
		gold >= 100
	}

	ai_will_do = {
		base = 55
		modifier = {
			add = 20
			OR = {
				has_global_variable = RICE_greenland_ending_integration
				has_global_variable = RICE_greenland_ending_indigenous
			}
		}
		modifier = {
			add = 10
			exists = struggle:RICE_greenland_struggle
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				OR = {
					is_struggle_phase = struggle_RICE_greenland_phase_settlement
					is_struggle_phase = struggle_RICE_greenland_phase_integration
				}
			}
		}
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
		modifier = {
			add = -8
			has_trait = craven
		}
		modifier = {
			add = 8
			has_trait = brave
		}
	}
}





# Attract Immigrants from Greenland
RICE_north_atlantic_attract_greenland_immigrants = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_longship.dds" }
	decision_group_type = RICE_greenland_struggle
	ai_check_interval = 48

	cooldown = { days = 3650 }
	
	desc = RICE_north_atlantic_attract_greenland_immigrants_desc
	
	is_shown = {
		#exists = house
		#house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
		exists = struggle:RICE_greenland_struggle
		highest_held_title_tier > tier_barony
		is_landed = yes
		any_character_struggle = {
			involvement = involved
			is_struggle_type = RICE_greenland_struggle
		}	
		any_character_struggle = {
			is_struggle_type = RICE_greenland_struggle
			OR = {
				is_struggle_phase = struggle_RICE_greenland_phase_subsistence
				is_struggle_phase = struggle_RICE_greenland_phase_marginalization
			}
		}
	}
	
	is_valid = {
		#custom_tooltip = {
		#	text = RICE_greenland_struggle_correct_involvement_tt
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
		#}	
		custom_tooltip = {
			text = RICE_greenland_struggle_subsistence_or_marginalization_phase
			any_character_struggle = {
				is_struggle_type = RICE_greenland_struggle
				OR = {
					is_struggle_phase = struggle_RICE_greenland_phase_subsistence
					is_struggle_phase = struggle_RICE_greenland_phase_marginalization
				}
			}
		}
	}
	
	is_valid_showing_failures_only = {
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {

		culture:greenlandic = {
			save_scope_as = greenlandic
		}

		show_as_tooltip = {
			add_prestige = 100
			#RICE_north_atlantic_attract_greenland_immigrants_effect = yes
		}

		custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_effect_tooltip_2

		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle ?= { is_struggle_phase = struggle_RICE_greenland_phase_subsistence }
			}
			custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_effect_tooltip_3
		}
		else_if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle ?= { is_struggle_phase = struggle_RICE_greenland_phase_marginalization }
			}
			custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_effect_tooltip_4
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_attract_greenland_immigrants_context_tooltip
		}

		trigger_event = north_atlantic.0021
	}

	cost = { 
		gold = { value = medium_gold_value } # Could be more
	}	

	ai_potential = {
		short_term_gold > medium_gold_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
	}

	# widget = {
	# 	gui = "decision_view_widget_RICE_progressbars_greenland"
	# }
}


#############################################
#											#
# OTHER DECISIONS						    #
#											#
#############################################




# Recruit Native American warriors
RICE_north_atlantic_recruit_native_american_warriors = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_native_american_council.dds" }
	decision_group_type = RICE_regional
	ai_check_interval = 36

	cooldown = { days = 1825 }
	
	desc = RICE_north_atlantic_recruit_native_american_warriors_desc
	
	is_shown = {
		is_landed = yes
		#custom_description = {
			#	text = RICE_native_american_culture_req
			RICE_is_native_american_culture_trigger = yes
		#}
	}
	
	is_valid = {
		#custom_description = {
		#	text = RICE_native_american_culture_req
			RICE_is_native_american_culture_trigger = yes
		#}			

	}

	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {
		
		RICE_native_american_warrior_spawn_effect = yes	
		
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_recruit_native_american_warriors_context_tooltip
		}
		
	}

	cost = { 
		gold = { value = medium_gold_value } # Will depend 
		piety = { value = medium_piety_value } # Will depend 
		prestige = { value = medium_prestige_value } # Will depend 
	}	

	ai_potential = {
		short_term_gold >= medium_gold_value
		piety >= medium_piety_value
		prestige >= medium_prestige_value
	}

	ai_will_do = {
		base = 20
	}
}



# Whale Hunt
RICE_north_atlantic_whale_hunt = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_longship.dds" }
	decision_group_type = RICE_regional
	ai_check_interval = 64

	cooldown = { days = 3650 }
	
	desc = RICE_north_atlantic_whale_hunt_desc
	
	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		culture = {
			OR = {
				has_cultural_tradition = tradition_RICE_whalers
				has_cultural_tradition = tradition_RICE_master_whalers
			}
		}
		# any_held_county = {
		# 	#tier = tier_county
		# 	is_coastal_county = yes
		# }
	}
	
	is_valid = {
		culture = {
			OR = {
				has_cultural_tradition = tradition_RICE_whalers
				has_cultural_tradition = tradition_RICE_master_whalers
			}
		}
		custom_description = {
			text = RICE_capital_coastal_county
			any_held_county = {
				#tier = tier_county
				is_coastal_county = yes
			}
		}
	}
	
	is_valid_showing_failures_only = {
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {
		custom_tooltip = RICE_north_atlantic_whale_hunt_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_whale_hunt_effect_tooltip_2
		if = {
			limit = {
				culture = {
					has_cultural_tradition = tradition_RICE_master_whalers
				}
			}
			custom_tooltip = RICE_north_atlantic_whale_hunt_effect_tooltip_3
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_whale_hunt_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.0180
		}
	}

	cost = { 
		gold = RICE_whaling_cost_value
	}	

	ai_potential = {
		short_term_gold > RICE_whaling_cost_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -8
			has_trait = content
		}
		modifier = {
			add = 8
			has_trait = ambitious
		}
		modifier = {
			add = -8
			has_trait = craven
		}
		modifier = {
			add = 8
			has_trait = brave
		}
	}
}

# Exempt Whaling Towns from paying tax
RICE_north_atlantic_whale_exempt_tax = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_european_port.dds" }
	decision_group_type = RICE_regional
	ai_check_interval = 64

	cooldown = { days = 3650 }

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					culture = {
						has_cultural_tradition = tradition_RICE_master_whalers
					}
				}
				desc = RICE_north_atlantic_whale_exempt_tax_desc
			}
			desc = RICE_north_atlantic_whale_exempt_tax_not_basque_desc
		}
	}
	
	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
			culture = {
				has_cultural_tradition = tradition_RICE_master_whalers
			}
		}
	}
	
	is_valid = {
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
			culture = {
				has_cultural_tradition = tradition_RICE_master_whalers
			}
		}	
		NOR = {
			has_character_modifier = RICE_north_atlantic_whale_tax_exempter
			has_character_modifier = RICE_north_atlantic_whale_tax_levier
		}
		OR = {
			prestige_level >= 2
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
		culture = {
			has_innovation = innovation_development_02
		}
	}
	
	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {
		#custom_tooltip = RICE_north_atlantic_whale_exempt_tax_effect_tooltip_1

		show_as_tooltip = {
			RICE_exempt_from_tax_whaling_towns_effect = yes
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_whale_exempt_tax_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.0182
		}
	}

	cost = { 
		prestige = { value = major_prestige_value }
	}	

	ai_potential = {
		prestige > major_prestige_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = -8
			has_trait = arbitrary
		}
		modifier = {
			add = 8
			has_trait = just
		}
		modifier = {
			add = -8
			has_trait = greedy
		}
		modifier = {
			add = 8
			has_trait = generous
		}
	}
}

# Levy extra taxes on whaling towns
RICE_north_atlantic_whale_levy_extra_tax = {
	picture = { reference = "gfx/interface/illustrations/decisions/decision_european_port.dds" }
	decision_group_type = RICE_regional
	ai_check_interval = 64

	cooldown = { days = 3650 }

	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					culture = {
						has_cultural_tradition = tradition_RICE_master_whalers
					}
				}
				desc = RICE_north_atlantic_whale_levy_extra_tax_desc
			}
			desc = RICE_north_atlantic_whale_levy_extra_tax_not_basque_desc
		}
	}
	
	is_shown = {
		highest_held_title_tier > tier_barony
		is_landed = yes
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
			culture = {
				has_cultural_tradition = tradition_RICE_master_whalers
			}
		}
	}
	
	is_valid = {
		# culture = {
		# 	has_cultural_tradition = tradition_RICE_master_whalers
		# }
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
			culture = {
				has_cultural_tradition = tradition_RICE_master_whalers
			}
		}	
		NOR = {
			has_character_modifier = RICE_north_atlantic_whale_tax_exempter
			has_character_modifier = RICE_north_atlantic_whale_tax_levier
		}
		OR = {
			prestige_level >= 2
			custom_description = {
				text = "is_king_or_emperor"
				highest_held_title_tier >= tier_kingdom
			}
		}
		culture = {
			has_innovation = innovation_development_02
		}
	}
	
	is_valid_showing_failures_only = {
		is_adult = yes
		RICE_is_available_adult_even_if_sick_trigger = yes
	}

	effect = {
		#custom_tooltip = RICE_north_atlantic_whale_levy_extra_tax_effect_tooltip_1

		show_as_tooltip = {
			RICE_levy_extra_tax_whaling_towns_effect = yes
		}

		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = RICE_north_atlantic_whale_levy_extra_tax_context_tooltip
		}

		trigger_event = {
			id = north_atlantic.0183
		}
	}

	cost = { 
		prestige = { value = major_prestige_value }
	}	

	ai_potential = {
		prestige > major_prestige_value
	}

	ai_will_do = {
		base = 20
		modifier = {
			add = 8
			has_trait = arbitrary
		}
		modifier = {
			add = -8
			has_trait = just
		}
		modifier = {
			add = 8
			has_trait = greedy
		}
		modifier = {
			add = -8
			has_trait = generous
		}
	}
}



