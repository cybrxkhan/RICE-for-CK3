###############################################################################
# 
# NUBIA
# 
# nubia.0000-nubia.0019			Setup events, history events, miscellaneous events and decisions
# nubia.0020-nubia.0029			Minor decisions
# nubia.0030-nubia.0039			Nile Flood & Related Decisions
# nubia.0040-nubia.0059			Baqt Exchange
# nubia.0060-nubia.0079			Niuty's Rebellion Event Chain
# nubia.0080-nubia.0089			Culture events and decisions
# nubia.0090-nubia.0099			Pastoralists and Farmers
# nubia.0100-nubia.0119			Eldad ha-Dani/Danite stuff
# nubia.0120-nubia.0139			Other Historical Aspirations
# nubia.0140-nubia.0159			Eparch Marianos slave fugitive event chain
# nubia.0160-nubia.0179			Baqt Frontier Administration Decision 
# nubia.0180-nubia.0189			Pilgrimage to Banganarti
# nubia.0190-nubia.0199			Pilgrimage to Saint Catherine's Monastery
# nubia.0200-nubia.0209			Pilgrimage to Saint Anthony's Monastery
# nubia.0210-nubia.0219			Nilotic Bovine Sacrifice
# nubia.0220-nubia.0239			Nile Empire and Legends
# nubia.0240-nubia.0259			Sibir Festival
# nubia.0260-nubia.0299			Generic flavor events
# 
###############################################################################

namespace = nubia

######################################################################################
# 
# SETUP EVENTS, HISTORY EVENTS, MISC DECISIONS
# 
# nubia.0000-nubia.0019
# 
######################################################################################


# Nile River and Baqt concepts tutorial
nubia.0001 = {
	type = character_event
	window = fullscreen_event
	title = nubia.0001.t
	desc = {
		desc = nubia.0001.desc.intro
		triggered_desc = {
			trigger = { exists = situation:RICE_nubia_baqt_situation }
			desc = nubia.0001.desc.baqt
		}
		desc = nubia.0001.desc.conclusion
	}
	theme = realm
	override_background = { reference = RICE_nile_river_fullscreen_intro }


	trigger = { # we need to prevent this from firing for all players when a new player joins in MP
		is_ai = no
		NOT = { has_variable = RICE_nile_intro_event_triggered }
 	}

	immediate = {
		set_variable = RICE_nile_intro_event_triggered
		random_list = {
			10 = { play_music_cue = mx_forefathers_of_the_nile }
			10 = { play_music_cue = mx_gift_of_the_nile }
			10 = { play_music_cue = mx_legacy_of_the_pharaohs }
			10 = { play_music_cue = mx_eternal_inundation }
		}
	}

	widgets = {
		widget = {
			gui = "event_window_widget_RICE_nile_situation_concepts_info"
			container = "dynamic_content_widget" # container = "custom_widgets_container"
		}
	}

	option = {
		name = nubia.0001.a
	}

}


# Start new phase of the Baqt Situation
nubia.0002 = {
	type = character_event
	title = nubia.0002.t
	desc = {
		desc = nubia.0002.desc
		first_valid = {
			triggered_desc = {
				trigger = {			
					any_character_situation = {
						any_situation_sub_region = {
							sub_region_current_phase = baqt_accord
						}
					}
				}
				desc = nubia.0002.desc.baqt_accord
			}
			triggered_desc = {
				trigger = {	
					any_character_situation = {
						any_situation_sub_region = {
							sub_region_current_phase = baqt_discord
						}
					}
				}
				desc = nubia.0002.desc.baqt_discord
			}
		}
		desc = nubia.0002.desc.conclusion
	}
	theme = RICE_theme_nile_valley

	right_portrait = {
		character = root
		animation = survey
	}
	
	option = { # Ok
		name = nubia.0002.a
	}

}

# Change Lord of the Mountain trait
nubia.0010 = {
	hidden = yes
	
	trigger = {
		scope:title = title:d_nobatia
		NOT = { has_trait = RICE_lord_of_the_mountain }
	}
	
	immediate = {
		add_trait = RICE_lord_of_the_mountain		
	}
}

# Change Governor of Aswan trait
nubia.0011 = {
	hidden = yes
	
	trigger = {
		scope:title = title:c_aswan
		NOT = { has_trait = RICE_governor_of_aswan }
	}
	
	immediate = {
		add_trait = RICE_governor_of_aswan		
	}
}



# 1066 info for the Fatimids
nubia.0012 = {
	type = character_event
	title = nubia.0012.t
	window = big_event_window
	desc = nubia.0012.desc
	theme = martial
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:nasir_al_dawla
		animation = war_attacker
	}	
	right_portrait = {
		character = scope:rasad
		animation = war_defender
	}
	lower_left_portrait = scope:badr_al_jamali
	lower_center_portrait = scope:al_mustansir
	lower_right_portrait = scope:nahid_al_dawla
	
	immediate = {

		character:3096 = {
			save_scope_as = al_mustansir
		}

		character:additional_fatimids_1 = {
			save_scope_as = rasad
		}

		character:RICE_hamdanid_009 = {
			save_scope_as = nasir_al_dawla
		}

		character:34980 = {
			save_scope_as = badr_al_jamali
		}
		
		character:RICE_fatimid_african_003 = {
			save_scope_as = nahid_al_dawla
		}
		
		character:bedouin0027 = {
			save_scope_as = banu_kanz
		}

	}
	
	option = {
		name = nubia.0012.a
		# flavor = {
		# 	first_valid = {
		# 		triggered_desc = {
		# 			trigger = { this = character:RICE_upper_egypt_012 }
		# 			desc = nubia.0012.tooltip.al_tabataba
		# 		}
		# 		triggered_desc = {
		# 			trigger = { this = character:al-farghani_1 }
		# 			desc = nubia.0012.tooltip.al_farghani
		# 		}
		# 		desc = nubia.0012.tooltip.ibn_tulun
		# 	}
		# }
	}
}



# Rebuilding Banganarti Church
nubia.0013 = {
	type = character_event
	title = nubia.0013.t
	desc = nubia.0013.desc
	theme = RICE_theme_nubia_church_interior

	right_portrait = {
		character = scope:rebuilder
		animation = personality_zealous
	}

	immediate = {
		play_music_cue = "mx_cue_ck3_vocal_maintheme"
		if = {
			limit = {
				root = scope:rebuilder
			}
			RICE_nubia_rebuild_banganarti_church_effect = yes
		}
		else = {
			show_as_tooltip = {
				RICE_nubia_rebuild_banganarti_church_effect = yes
			}
		}
		custom_tooltip = RICE_nubia_rebuild_banganarti_church_effect_tooltip_1
		custom_tooltip = RICE_nubia_rebuild_banganarti_church_effect_tooltip_2
		custom_tooltip = RICE_nubia_rebuild_banganarti_church_effect_tooltip_3
	}
	
	option = { # Ok
		name = nubia.0013.a
	}

}


# Formation of Sudanese culture
nubia.0014 = {
	type = character_event
	window = fullscreen_event
	title = nubia.0014.t
	desc = {
		desc = nubia.0014.desc
		first_valid = {
			triggered_desc = {
				trigger = {			
					scope:sudanese_ruler = {
						culture = { has_cultural_pillar = heritage_east_african }
					}
				}
				desc = nubia.0014.desc.sudanese_nubian
			}
			desc = nubia.0014.desc.sudanese_arabic
		}
	}
	theme = culture_change
	override_background = { reference = RICE_desert_settlement_fullscreen }

	immediate = {
		if = {
			limit = {
				root = scope:sudanese_ruler
			}
			RICE_nubia_sudanese_culture_decision_effect = yes
		}
		else = {
			show_as_tooltip = {
				scope:sudanese_ruler = {
					RICE_nubia_sudanese_culture_decision_effect = yes					
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0014.a	
	}

	after = {
		if = {
			limit = {
				NOT = { root = scope:sudanese_ruler }
			}
			if = {
				limit = {
					scope:culture = {
						OR = {
							has_cultural_pillar = heritage_east_african
							has_cultural_pillar = heritage_arabic
						}
					}
					capital_county = {
						any_county_province = {
							geographical_region = ghw_region_egypt
						}
					}
				}
				trigger_event = nubia.0015
			}
			else_if = {
				limit = {
					scope:culture = {
						OR = {
							has_cultural_pillar = heritage_east_african
							has_cultural_pillar = heritage_arabic
						}
					}
					capital_county = {
						any_county_province = {
							geographical_region = RICE_greater_nubia_region
						}
					}
				}
				trigger_event = nubia.0016
			}
		}
	}

}

# Convert to the new Sudanese Nubian culture?
nubia.0015 = {
	type = character_event
	title = nubia.0015.t
	desc = {
		desc = nubia.0014.desc
		first_valid = {
			triggered_desc = {
				trigger = {			
					culture:sudanese = { has_cultural_pillar = heritage_east_african }
				}
				desc = nubia.0014.desc.sudanese_nubian
			}
			desc = nubia.0014.desc.sudanese_arabic
		}
	}
	theme = culture_change
	override_background = { reference = RICE_background_nile_valley }

	right_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { # Ok
		name = nubia.0015.a
		# AI will only take in places where it makes sense
		trigger = {
			OR = {
				is_ai = no
				AND = {
					culture:sudanese = {
						has_cultural_pillar = heritage_east_african
					}
					capital_county = {
						any_county_province = {
							geographical_region = ghw_region_egypt
						}
					}
				}
			}
		}
		make_sudanese_culture_restricted_effect = yes
		ai_chance = {
			base = 0
			modifier = {
				add = 30
				any_liege_or_above = { this = scope:sudanese_ruler }
			}
			modifier = {
				add = 10
				culture = {
					has_cultural_pillar = heritage_arabic
				}
			}
			modifier = {
				add = 10
				culture = {
					has_cultural_pillar = heritage_arabic
				}
				any_vassal_or_below = {
					culture = {
						has_cultural_pillar = heritage_east_african
					}					
				}
			}
			modifier = {
				add = 10
				culture = {
					has_cultural_pillar = heritage_east_african
				}
				any_liege_or_above = {
					culture = {
						has_cultural_pillar = heritage_arabic
					}					
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0015.b
		ai_chance = {
			base = 80
		}
	}

}

# Convert to the new Sudanese Arabic culture?
nubia.0016 = {
	type = character_event
	title = nubia.0016.t
	desc = {
		desc = nubia.0016.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_cultural_pillar = heritage_east_african
				}
				desc = nubia.0016.desc.east_african
			}
			desc = nubia.0016.desc.arabic
		}
	}
	theme = culture_change
	override_background = { reference = RICE_background_nile_valley }

	right_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { # Ok
		name = nubia.0016.a
		# AI will only take in places where it makes sense
		trigger = {
			OR = {
				is_ai = no
				AND = {
					culture:sudanese = {
						has_cultural_pillar = heritage_arabic
					}
					capital_county = {
						any_county_province = {
							geographical_region = RICE_greater_nubia_region
						}
					}
				}
			}
		}
		make_sudanese_culture_restricted_effect = yes
		ai_chance = {
			base = 0
			modifier = {
				add = 30
				any_liege_or_above = { this = scope:sudanese_ruler }
			}
			modifier = {
				add = 10
				culture = {
					has_cultural_pillar = heritage_east_african
				}
			}
			modifier = {
				add = 10
				culture = {
					has_cultural_pillar = heritage_east_african
				}
				any_vassal_or_below = {
					culture = {
						has_cultural_pillar = heritage_arabic
					}					
				}
			}
			modifier = {
				add = 10
				culture = {
					has_cultural_pillar = heritage_arabic
				}
				any_liege_or_above = {
					culture = {
						has_cultural_pillar = heritage_east_african
					}					
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0016.b
		ai_chance = {
			base = 80
		}
	}

}




######################################################################################
# 
# MINOR DECISIONS
# 
# nubia.0020-nubia.0029
# 
######################################################################################




# East African tattoo decision
# By Cybrxkhan
nubia.0020 = {
	type = character_event
	title = nubia.0020.t
	desc = nubia.0020.desc
	theme = faith
	override_background = { reference = physicians_study }
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	# Ok
	option = {
		name = nubia.0020.a
		RICE_east_african_tattoo_decision_effect = yes
	}

}


# Commission donor portrait
# By Cybrxkhan
nubia.0021 = {
	type = character_event
	title = nubia.0021.t
	desc = {
		desc = nubia.0021.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_donor_portrait_type = flag:self
				}
				desc = nubia.0021.desc.self
			}
			triggered_desc = {
				trigger = {
					var:RICE_donor_portrait_type = flag:family
				}
				desc = nubia.0021.desc.family
			}
			triggered_desc = {
				trigger = {
					var:RICE_donor_portrait_type = flag:clergy
				}
				desc = nubia.0021.desc.clergy
			}
		}
	}
	theme = faith
	
	left_portrait = {
		character = scope:chaplain
		animation = idle
		trigger = {
			exists = scope:chaplain
		}
	}	

	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	immediate = {
		# Court Chaplain should only appear if they're also Christian, and don't follow a religion with Aniconism
		if = {
			limit = {
				#exists = cp:councillor_court_chaplain
				cp:councillor_court_chaplain ?= {
					religion = religion:christianity_religion
					NOT = { faith = { has_doctrine = tenet_aniconism } }
				}
			}
			cp:councillor_court_chaplain = { save_scope_as = chaplain }
		}
	}

	# Ok
	option = {
		name = nubia.0021.a
		RICE_christian_commission_donor_portrait_effect = yes
	}

}


# Update the list of Faras Bishops - notification event to updater and anyone controlling Faras but is not updater (i.e. vassal or liege)
nubia.0022 = {
	type = character_event
	title = nubia.0022.t
	desc = {	
		desc = nubia.0022.desc	
		first_valid = {
			triggered_desc = {
				trigger = {
					root = scope:updater
				}
				desc = nubia.0022.desc.updater
			}
			desc = nubia.0022.desc.not_updater
		}
	}
	theme = RICE_theme_nubia_church_interior
	
	left_portrait = {
		character = scope:chaplain
		animation = wedding_priest
		trigger = {
			exists = scope:chaplain
		}
	}	

	right_portrait = {
		character = scope:updater
		animation = personality_zealous
	}
	
	immediate = {
		# Court Chaplain should only appear if they're also Christian
		if = {
			limit = {
				cp:councillor_court_chaplain ?= {
					religion = religion:christianity_religion
				}
			}
			cp:councillor_court_chaplain = { save_scope_as = chaplain }
		}
	}
	
	# Ok
	option = {
		name = nubia.0022.a
		if = {
			limit = {
				root = scope:updater
			}
			RICE_nubia_update_list_of_faras_bishops_effect = yes
		}
		else = {
			show_as_tooltip = {				
				RICE_nubia_update_list_of_faras_bishops_effect = yes
			}
		}
	}

}


# Tebeldi Trees
nubia.0023 = {
	type = character_event
	title = nubia.0023.t
	desc = nubia.0023.desc
	theme = RICE_theme_nubia_nuba_savanna_village
	
	right_portrait = {
		character = root
		animation = war_over_win
	}
	
	# Ok
	option = {
		name = nubia.0023.a
		RICE_nubia_tebeldi_trees_decision_effect = yes
	}

}

# Mountain Lake Oracle - Choose who to send
nubia.0024 = {
	type = character_event
	title = nubia.0024.t
	desc = {
		desc = nubia.0024.desc
		triggered_desc = {
			trigger = {
				exists = scope:courtier
			}
			desc = nubia.0024.desc.courtier
		}
		triggered_desc = {
			trigger = {
				exists = scope:clergy
			}
			desc = nubia.0024.desc.clergy
		}
	}
	theme = faith
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	right_portrait = {
		character = scope:ruler
		animation = thinking
	}
	
	lower_left_portrait = {
		character = scope:courtier
		trigger = { exists = scope:courtier }
	}
	
	lower_right_portrait = {
		character = scope:clergy
		trigger = { exists = scope:clergy }
	}

	immediate = {
		save_scope_as = ruler
		if = {
			limit = {
				is_landless_adventurer = no
			}
			random_realm_province = {
				limit = {
					OR = {
						terrain = hills
						terrain = mountains
						terrain = desert_mountains
					}
				}
				save_scope_as = lake_oracle_province
			}
		}
		random_courtier = {
			limit = {
				is_available_ai_adult = yes
				is_clergy = no
				OR = {
					religion = religion:darfur_religion
					culture = {
						has_cultural_tradition = tradition_RICE_darfur_mountain_palaces
					}
				}
				NOT = { has_character_flag = RICE_undergoing_lake_oracle } # In an edge case where they have this flag
			}	
			save_scope_as = courtier		
		}
		random_courtier = {
			limit = {
				is_available_ai_adult = yes
				is_clergy = yes
				OR = {
					religion = religion:darfur_religion
					culture = {
						has_cultural_tradition = tradition_RICE_darfur_mountain_palaces
					}
				}
				NOT = { has_character_flag = RICE_undergoing_lake_oracle } # In an edge case where they have this flag
			}	
			save_scope_as = clergy		
		}
	}

	# Send a servant/minor official
	option = {
		name = nubia.0024.a
		trigger_event = {
			id = nubia.0025
			days = { 10 30 }
		}
	}

	# Send a courtier
	option = {
		name = nubia.0024.b
		trigger = {
			exists = scope:courtier
		}
		add_prestige = minor_prestige_loss
		custom_tooltip = nubia.0024.b.tooltip
		scope:courtier = {
			save_scope_as = representative
			add_prestige = minor_prestige_gain
			# To prevent them from somehow leaving your court while they're on the trip
			add_character_flag = {
				flag = blocked_from_leaving
				years = 1
			}
			add_character_flag = {
				flag = RICE_undergoing_lake_oracle
				years = 3 # It's unlikely going to be three years, but just do this as a failsafe
			}
			add_opinion = {
				modifier = respect_opinion
				opinion = 10
				target = scope:ruler
			}
		}
		if = {
			limit = {
				root.capital_province = scope:lake_oracle_province
			}
			scope:courtier = {
				trigger_event = {
					id = nubia.0026
					days = { 10 30 }
				}				
			}
		}
		else = {
			scope:courtier = {
				start_travel_plan = { 
					destination = scope:lake_oracle_province
					return_trip = yes
					on_arrival_event = nubia.0026
				}
			}			
		}
	}

	# Send a clergy
	option = {
		name = nubia.0024.c
		trigger = {
			exists = scope:clergy
		}
		add_prestige = medium_prestige_loss
		custom_tooltip = nubia.0024.c.tooltip
		scope:clergy = {
			save_scope_as = representative
			add_prestige = medium_prestige_gain
			# To prevent them from somehow leaving your court while they're on the trip
			add_character_flag = {
				flag = blocked_from_leaving
				years = 1
			}
			add_character_flag = {
				flag = RICE_undergoing_lake_oracle
				years = 3 # It's unlikely going to be three years, but just do this as a failsafe
			}
			add_opinion = {
				modifier = respect_opinion
				opinion = 10
				target = scope:ruler
			}
			start_travel_plan = { 
				destination = scope:lake_oracle_province
				return_trip = yes
				on_arrival_event = nubia.0026
			}
		}
		if = {
			limit = {
				root.capital_province = scope:lake_oracle_province
			}
			scope:clergy = {
				trigger_event = {
					id = nubia.0026
					days = { 10 30 }
				}				
			}
		}
		else = {
			scope:clergy = {
				start_travel_plan = { 
					destination = scope:lake_oracle_province
					return_trip = yes
					on_arrival_event = nubia.0026
				}
			}			
		}
	}

}



# Representative arrives at the lake
nubia.0025 = {
	type = character_event
	title = nubia.0025.t
	desc = {
		desc = nubia.0025.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					RICE_nubia_lake_oracle_positive_result_trigger = yes
				}
				desc = nubia.0025.desc.positive
			}
			triggered_desc = {
				trigger = {
					RICE_nubia_lake_oracle_negative_result_trigger = yes
				}
				desc = nubia.0025.desc.negative
			}
			desc = nubia.0025.desc.nothing
		}
	}
	theme = faith
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		triggered_animation = {
			trigger = { RICE_nubia_lake_oracle_negative_result_trigger = yes }
			animation = worry
		}
		animation = personality_zealous
	}

	right_portrait = {
		character = scope:representative
		trigger = {
			exists = scope:representative
		}
		triggered_animation = {
			trigger = { RICE_nubia_lake_oracle_negative_result_trigger = yes }
			animation = sadness
		}
		animation = personality_content
	}

	immediate = {
		RICE_nubia_lake_oracle_decision_effect = yes
		hidden_effect = {
			RICE_nubia_lake_oracle_randomizer_effect = yes			
		}
	}
	
	# Ok
	option = {
		name = nubia.0025.a
		RICE_nubia_lake_oracle_display_effect = yes
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_mountain_lake_sent_courtier
			}
			remove_character_flag = RICE_mountain_lake_sent_courtier
		}
		if = {
			limit = {
				has_character_flag = RICE_mountain_lake_sent_clergy
			}
			remove_character_flag = RICE_mountain_lake_sent_clergy
		}
	}

}



# Once representative arrives at the mountain lake
nubia.0026 = {
	type = character_event
	hidden = yes

	immediate = {
		if = {
			limit = {
				has_character_flag = RICE_undergoing_lake_oracle
			}
			remove_character_flag = RICE_undergoing_lake_oracle
		}
		if = {
			limit = {
				exists = scope:ruler
				scope:ruler = {
					is_alive = yes
				}
			}
			if = {
				limit = {
					root = scope:clergy
				}
				scope:ruler = {
					add_character_flag = {
						flag = RICE_mountain_lake_sent_clergy
						days = 1
					}					
				}
			}
			else_if = {
				limit = {
					root = scope:courtier
				}
				scope:ruler = {
					add_character_flag = {
						flag = RICE_mountain_lake_sent_courtier
						days = 1
					}					
				}
			}
			scope:ruler = {
				trigger_event = nubia.0025
			}
		}
	}
}



######################################################################################
# 
# NILE FLOOD & RELATED DECISIONS
# 
# nubia.0030-nubia.0039
# 
######################################################################################




# Expanding Irrigation Networks
nubia.0030 = {
	type = character_event
	title = nubia.0030.t
	desc = nubia.0030.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = survey
	}
	
	# Ok
	option = {
		name = nubia.0030.a
		RICE_nubia_agriculture_decision_expand_irrigation_networks_effect = yes
	}

}

# Maintaining hafirs
nubia.0031 = {
	type = character_event
	title = nubia.0031.t
	desc = nubia.0031.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = personality_forgiving
	}
	
	# Ok
	option = {
		name = nubia.0031.a
		RICE_nubia_agriculture_decision_maintain_hafirs_effect = yes
	}

}

# Growing pig herds
nubia.0032 = {
	type = character_event
	title = nubia.0032.t
	desc = nubia.0032.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = personality_content
	}
	
	# Ok
	option = {
		name = nubia.0032.a
		RICE_nubia_agriculture_decision_grow_pig_herds_effect = yes
	}

}

# Importing cattle
nubia.0033 = {
	type = character_event
	title = nubia.0033.t
	desc = nubia.0033.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = personality_greedy
	}
	
	# Ok
	option = {
		name = nubia.0033.a
		RICE_nubia_agriculture_decision_import_cattle_effect = yes
	}

}

# Breeding cattle
nubia.0034 = {
	type = character_event
	title = nubia.0034.t
	desc = nubia.0034.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = personality_dishonorable
	}
	
	# Ok
	option = {
		name = nubia.0034.a
		RICE_nubia_agriculture_decision_breed_cattle_effect = yes
	}

}




######################################################################################
# 
# BAQT EXCHANGE
# 
# nubia.0040-nubia.0059
# 
######################################################################################


# Baqt exchange: Decide what good to give to the other party
nubia.0040 = {
	type = character_event
	title = nubia.0040.t
	window = big_event_window
	desc = nubia.0040.desc
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:actor
		animation = personality_compassionate
	}
	
	right_portrait = {
		character = scope:recipient
		animation = thinking
	}

	# textiles
	option = {
		name = nubia.0040.textiles
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.textiles
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:textiles
			days = 1
		}
	}

	# foodstuffs
	option = {
		name = nubia.0040.foodstuffs
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.foodstuffs
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:foodstuffs
			days = 1
		}
	}

	# olive_oil
	option = {
		name = nubia.0040.olive_oil
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.olive_oil
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:olive_oil
			days = 1
		}
	}

	# wine
	option = {
		name = nubia.0040.wine
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.wine
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:wine
			days = 1
		}
	}

	# glass
	option = {
		name = nubia.0040.glass
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.glass
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:glass
			days = 1
		}
	}

	# horses
	option = {
		name = nubia.0040.horses
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.horses
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:horses
			days = 1
		}
	}

	# exotic_beasts
	option = {
		name = nubia.0040.exotic_beasts
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.exotic_beasts
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:exotic_beasts
			days = 1
		}
	}

	# metals
	option = {
		name = nubia.0040.metals
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.metals
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:metals
			days = 1
		}
	}

	# ebony
	option = {
		name = nubia.0040.ebony
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.ebony
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:ebony
			days = 1
		}
	}

	# slaves
	option = {
		name = nubia.0040.slaves
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.slaves
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:slaves
			days = 1
		}
	}

	# ivory
	option = {
		name = nubia.0040.ivory
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.ivory
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:ivory
			days = 1
		}
	}

	# animal_skins
	option = {
		name = nubia.0040.animal_skins
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.animal_skins
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:animal_skins
			days = 1
		}
	}

	after = {
		scope:actor = {
			trigger_event = nubia.0041
		}
		scope:recipient = {
			trigger_event = nubia.0041
		}
	}

}

# Baqt exchange: the exchange happens
nubia.0041 = {
	type = character_event
	title = nubia.0041.t
	window = big_event_window
	desc = {
		desc = nubia.0041.baqt.intro2
		first_valid = {
			triggered_desc = {
				trigger = {
					root = scope:actor
				}
				desc = nubia.0041.desc.actor
			}
			triggered_desc = {
				trigger = {
					root = scope:recipient
				}
				desc = nubia.0041.desc.recipient
			}
		}
		desc = nubia.0041.baqt.conclusion
	}
	theme = RICE_theme_nile_valley
	
	left_portrait = {
		character = scope:actor
		animation = personality_forgiving
	}
	
	right_portrait = {
		character = scope:recipient
		animation = personality_content
	}

	immediate = {
		show_as_tooltip = {
			# For some reason using a scripted value doesn't work
			# See commented out RICE_nubia_baqt_truce_value in scripted values
			if = {
				limit = {
					situation:RICE_nubia_baqt_situation ?= {
						any_situation_sub_region = {
							has_sub_region_phase_parameter = rice_baqt_longer_truces
						}
					}				
				}
				scope:actor = {
					add_truce_both_ways = {
						character = scope:recipient
						years = 20
						name = RICE_nubia_baqt_exchange_truce
					}
				}
			}
			else = {
				scope:actor = {
					add_truce_both_ways = {
						character = scope:recipient
						years = 10
						name = RICE_nubia_baqt_exchange_truce
					}
				}
			}
		}
		if = {
			limit = {
				root = scope:actor
			}
			scope:recipient = {
				save_scope_as = other
			}
			RICE_nubia_baqt_exchange_effect = yes
		}
		else_if = {
			limit = {
				root = scope:recipient
			}
			scope:actor = {
				save_scope_as = other
			}
			show_as_tooltip = {				
				RICE_nubia_baqt_exchange_effect = yes
			}
		}
	}

	# ok
	option = {
		name = nubia.0041.a
	}

	# after = {
	# 	if = {
	# 		limit = {
	# 			has_variable = RICE_baqt_actor_good
	# 		}
	# 		remove_variable = RICE_baqt_actor_good
	# 	}
	# 	if = {
	# 		limit = {
	# 			has_variable = RICE_baqt_recipient_good
	# 		}
	# 		remove_variable = RICE_baqt_recipient_good
	# 	}
	# }

}

# Offer Baqt gift event
# Actor is giver
# Recipient is receiver
nubia.0042 = {
	type = character_event
	title = nubia.0042.t
	window = big_event_window
	desc = {
		desc = nubia.0041.baqt.intro
		desc = nubia.0041.baqt.intro2
		first_valid = {
			triggered_desc = {
				trigger = {
					root = scope:actor
				}
				desc = nubia.0042.desc.actor
			}
			triggered_desc = {
				trigger = {
					root = scope:recipient
				}
				desc = nubia.0042.desc.recipient
			}
		}
		desc = nubia.0041.baqt.conclusion
	}
	theme = RICE_theme_nile_valley
	
	left_portrait = {
		character = scope:actor
		animation = personality_compassionate
	}
	
	right_portrait = {
		character = scope:recipient
		animation = personality_greedy
	}


	
	immediate = {
		show_as_tooltip = {
			# For some reason using a scripted value doesn't work
			# See commented out RICE_nubia_baqt_truce_value in scripted values
			if = {
				limit = {
					situation:RICE_nubia_baqt_situation ?= {
						any_situation_sub_region = {
							has_sub_region_phase_parameter = rice_baqt_longer_truces
						}
					}				
				}
				scope:actor = {
					add_truce_both_ways = {
						character = scope:recipient
						years = 20
						name = RICE_nubia_baqt_exchange_truce
					}
				}
			}
			else = {
				scope:actor = {
					add_truce_both_ways = {
						character = scope:recipient
						years = 10
						name = RICE_nubia_baqt_exchange_truce
					}
				}
			}
		}
		if = {
			limit = {
				root = scope:actor
			}
			stress_impact = {
				greedy = medium_stress_impact_gain
				arrogant = minor_stress_impact_gain
			}	
			scope:recipient = {
				save_scope_as = other
			}
			RICE_nubia_baqt_actor_give_effect = yes
		}
		else_if = {
			limit = {
				root = scope:recipient
			}
			scope:actor = {
				save_scope_as = other
				show_as_tooltip = {
					stress_impact = {
						greedy = medium_stress_impact_gain
						arrogant = minor_stress_impact_gain
					}				
				}
			}
			show_as_tooltip = {				
				RICE_nubia_baqt_actor_give_effect = yes
			}
		}
	}

	# ok
	option = {
		name = nubia.0042.a
	}

}

# Demand Baqt Payment event
# Actor is demander
# Recipient is giver
nubia.0043 = {
	type = character_event
	title = nubia.0043.t
	window = big_event_window
	desc = {
		desc = nubia.0041.baqt.intro
		desc = nubia.0041.baqt.intro2
		first_valid = {
			triggered_desc = {
				trigger = {
					root = scope:actor
				}
				desc = nubia.0043.desc.actor
			}
			triggered_desc = {
				trigger = {
					root = scope:recipient
				}
				desc = nubia.0043.desc.recipient
			}
		}
		desc = nubia.0041.baqt.conclusion
	}
	theme = RICE_theme_nile_valley
	
	left_portrait = {
		character = scope:actor
		# If the demander likes the giver, they'll act less condenscending
		triggered_animation = {
			trigger = {
				NOT = { has_trait = arrogant }
				NOT = { has_trait = greedy }
				scope:recipient = {
					opinion = {
						target = scope:actor
						value >= low_positive_opinion
					}					
				}
			}
			animation = personality_forgiving
		}
		animation = personality_callous
	}
	
	right_portrait = {
		character = scope:recipient
		# If the giver likes the demander, they'll look more accomodating
		triggered_animation = {
			trigger = {
				NOT = { has_trait = arrogant }
				NOT = { has_trait = greedy }
				scope:recipient = {
					opinion = {
						target = scope:actor
						value >= low_positive_opinion
					}					
				}
			}
			animation = personality_content
		}
		animation = disappointed
	}


	
	immediate = {
		show_as_tooltip = {
			# For some reason using a scripted value doesn't work
			# See commented out RICE_nubia_baqt_truce_value in scripted values
			if = {
				limit = {
					situation:RICE_nubia_baqt_situation ?= {
						any_situation_sub_region = {
							has_sub_region_phase_parameter = rice_baqt_longer_truces
						}
					}				
				}
				scope:actor = {
					add_truce_both_ways = {
						character = scope:recipient
						years = 20
						name = RICE_nubia_baqt_exchange_truce
					}
				}
			}
			else = {
				scope:actor = {
					add_truce_both_ways = {
						character = scope:recipient
						years = 10
						name = RICE_nubia_baqt_exchange_truce
					}
				}
			}
		}
		if = {
			limit = {
				root = scope:actor
			}
			scope:recipient = {
				stress_impact = {
					greedy = medium_stress_impact_gain
					arrogant = minor_stress_impact_gain
				}
				save_scope_as = other
			}
			RICE_nubia_baqt_recipient_give_effect = yes
		}
		else_if = {
			limit = {
				root = scope:recipient
			}
			scope:actor = {
				save_scope_as = other
			}
			show_as_tooltip = {	
				scope:recipient = {
					stress_impact = {
						greedy = medium_stress_impact_gain
						arrogant = minor_stress_impact_gain
					}
				}			
				RICE_nubia_baqt_recipient_give_effect = yes
			}
		}
	}

	# ok
	option = {
		name = nubia.0043.a
	}

}



######################################################################################
# 
# NIUTY'S REBELLION EVENT CHAIN
# 
# nubia.0060-nubia.0079
# 
######################################################################################


# Niuty's rebellion - Georgios' POV
nubia.0060 = {
	type = character_event
	title = nubia.0060.t
	window = duel_event
	desc = nubia.0060.desc
	theme = martial
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:georgios
		animation = war_defender
	}
	
	right_portrait = {
		character = scope:niuty
		animation = war_attacker
	}

	lower_right_portrait = {
		character = scope:umari
		trigger = { exists = scope:umari }
	}

	immediate = {
		character:dongola0010 = {
			save_scope_as = georgios
			spawn_army = {
				levies = 500
				men_at_arms = {
					type = archers_of_the_nile
					stacks = 3
				}
				men_at_arms = {
					type = RICE_alodian_cavalry
					stacks = 4
				}
				men_at_arms = {
					type = light_footmen
					stacks = 2
				}
				men_at_arms = {
					type = pikemen_unit
					stacks = 2
				}
				men_at_arms = {
					type = armored_footmen
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = event_troop_default_name
			}
			show_as_tooltip = {
				add_character_modifier = {
					modifier = RICE_nubia_aspiration_defeat_the_traitor_and_the_bandit
				}
			}
		}
		character:dongola0011d = {
			save_scope_as = niuty
			spawn_army = {
				levies = 300
				men_at_arms = {
					type = archers_of_the_nile
					stacks = 3
				}
				men_at_arms = {
					type = RICE_alodian_cavalry
					stacks = 2
				}
				men_at_arms = {
					type = light_footmen
					stacks = 1
				}
				men_at_arms = {
					type = pikemen_unit
					stacks = 2
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = event_troop_default_name
			}
			show_as_tooltip = {
				add_character_modifier = {
					modifier = RICE_nubia_aspiration_take_over_makuria
				}
			}
		}
		character:bedouin0018 = {
			save_scope_as = umari
		}
		character:34014 = { # Abbasid Caliph
			save_scope_as = abbasid
		}		
		character:dongola0009 = {
			save_scope_as = father
		}		
	}

	# ok
	option = {
		name = nubia.0060.a
		scope:niuty = {
			start_war = {
				cb = claim_cb
				target = scope:georgios
				claimant = scope:niuty
				target_title = title:k_nubia
			}
			add_truce_both_ways = {
				character = scope:umari
				years = 10
				name = TRUCE_COLLABORATION
			}
		}
		custom_tooltip = nubia.0060.a.umari
	}

	# # ok
	# option = {
	# 	name = nubia.0060.b
	# }
	
	after = {
		scope:niuty = {
			trigger_event = nubia.0061
		}
	}

}


# Niuty's rebellion - Niuty' POV
nubia.0061 = {
	type = character_event
	title = nubia.0061.t
	window = duel_event
	desc = nubia.0061.desc
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	left_portrait = {
		character = scope:georgios
		animation = war_defender
	}
	
	right_portrait = {
		character = scope:niuty
		animation = war_attacker
	}

	lower_right_portrait = {
		character = scope:umari
		trigger = { exists = scope:umari }
	}

	immediate = {
		show_as_tooltip = {
			character:dongola0010 = {
				spawn_army = {
					levies = 300
					men_at_arms = {
						type = archers_of_the_nile
						stacks = 3
					}
					men_at_arms = {
						type = RICE_alodian_cavalry
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 1
					}
					men_at_arms = {
						type = pikemen_unit
						stacks = 2
					}
					location = capital_province
					uses_supply = yes
					inheritable = yes
					name = event_troop_default_name
				}
				show_as_tooltip = {
					add_character_modifier = {
						modifier = RICE_nubia_aspiration_defeat_the_traitor_and_the_bandit
					}
				}
			}
			character:dongola0011d = {
				spawn_army = {
					levies = 500
					men_at_arms = {
						type = archers_of_the_nile
						stacks = 4
					}
					men_at_arms = {
						type = RICE_alodian_cavalry
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 2
					}
					men_at_arms = {
						type = pikemen_unit
						stacks = 3
					}
					location = capital_province
					uses_supply = yes
					inheritable = yes
					name = event_troop_default_name
				}
				show_as_tooltip = {
					add_character_modifier = {
						modifier = RICE_nubia_aspiration_take_over_makuria
					}
				}
			}	
			scope:niuty = {
				start_war = {
					cb = claim_cb
					target = scope:georgios
					claimant = scope:niuty
					target_title = title:k_nubia
				}
				add_truce_both_ways = {
					character = scope:umari
					years = 10
					name = TRUCE_COLLABORATION
				}
			}			
		}
	}

	# ok
	option = {
		name = nubia.0061.a		
		custom_tooltip = nubia.0060.a.umari
	}

	after = {
		# Ask al-Umari to join your side
		trigger_event = {
			id = nubia.0062
			months = { 3 6 }
		}
	}

}


# Niuty makes an offer to al-Umari
nubia.0062 = {
	type = character_event
	title = nubia.0062.t
	window = duel_event
	desc = nubia.0062.desc
	theme = corruption
	override_background = { reference = RICE_background_egypt_desert }
	
	left_portrait = {
		character = scope:umari
		animation = scheme
	}
	
	right_portrait = {
		character = scope:niuty
		animation = bribing
	}

	lower_center_portrait = {
		character = scope:georgios
		trigger = { exists = scope:georgios }
	}

	trigger = {
		# Make sure your war with Georgios is still ongoing and that neither of you are at war with al-Umari
		is_at_war_with = scope:georgios
		scope:georgios = {
			is_alive = yes
			has_title = title:k_nubia
			NOT = {
				is_at_war_with = scope:umari
			}
		}
		NOT = {
			is_at_war_with = scope:umari
		}
	}

	# If you are at war with al-Umari for some reason, but still at war with Georgios and Georgios isn't at war with al-Umari, punt to Georgios
	on_trigger_fail = {
		if = {
			limit = {
				is_at_war_with = scope:georgios
				scope:georgios = {
					is_alive = yes
					has_title = title:k_nubia
					NOT = {
						is_at_war_with = scope:umari
					}
				}				
			}
			trigger_event = nubia.0063
		}
	}

	# immediate = {
	# }

	# no gift
	option = {
		name = nubia.0062.a
		custom_tooltip = nubia.0062.a.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:nothing
			days = 30
		}
	}

	# gold
	option = {
		name = nubia.0062.b
		# trigger = {
		# 	OR = {
		# 		is_ai = no
		# 		short_term_gold >= 50			
		# 	}
		# }
		remove_short_term_gold = 50
		custom_tooltip = nubia.0062.b.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:gold
			days = 30
		}
	}

	# gold
	option = {
		name = nubia.0062.c
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= 100			
			}
		}
		remove_short_term_gold = 200
		custom_tooltip = nubia.0062.c.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:big_gold
			days = 30
		}
	}

	after = {
		# Georgios asks al-Umari to join his side
		scope:georgios = {
			trigger_event = {
				id = nubia.0063
				#months = { 4 12 }
			}			
		}
	}

}


# Georgios makes an offer to al-Umari
nubia.0063 = {
	type = character_event
	title = nubia.0063.t
	window = duel_event
	desc = nubia.0063.desc
	theme = corruption
	override_background = { reference = RICE_background_egypt_desert }
	
	left_portrait = {
		character = scope:umari
		animation = scheme
	}
	
	right_portrait = {
		character = scope:georgios
		animation = bribing
	}

	lower_center_portrait = {
		character = scope:niuty
		trigger = { exists = scope:niuty }
	}

	# immediate = {
	# }

	# no gift
	option = {
		name = nubia.0063.a
		custom_tooltip = nubia.0063.a.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:nothing
			days = 30
		}
	}

	# gold
	option = {
		name = nubia.0063.b
		# trigger = {
		# 	OR = {
		# 		is_ai = no
		# 		short_term_gold >= 50			
		# 	}
		# }
		remove_short_term_gold = 50
		custom_tooltip = nubia.0063.b.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:gold
			days = 30
		}
	}

	# gold
	option = {
		name = nubia.0063.c
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= 100			
			}
		}
		remove_short_term_gold = 200
		custom_tooltip = nubia.0063.c.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:big_gold
			days = 30
		}
	}

	after = {
		scope:umari = {
			# al-Umari makes his choice
			trigger_event = {
				id = nubia.0064
				days = { 15 30 }
			}
		}
	}

}


# al-Umari contemplates Niuty and Georgios' offers
nubia.0064 = {
	type = character_event
	title = nubia.0064.t
	window = duel_event
	desc = {
		desc = nubia.0064.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:niuty = {
						var:RICE_umari_offer ?= flag:nothing
					}
					scope:georgios = {
						OR = {
							var:RICE_umari_offer ?= flag:gold
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
				}
				desc = nubia.0064.desc.georgios
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						var:RICE_umari_offer ?= flag:nothing
					}
					scope:niuty = {
						OR = {
							var:RICE_umari_offer ?= flag:gold
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
				}
				desc = nubia.0064.desc.niuty
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						OR = {
							var:RICE_umari_offer ?= flag:gold
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
					scope:niuty = {
						OR = {
							var:RICE_umari_offer ?= flag:gold
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
				}
				desc = nubia.0064.desc.both
			}
			desc = nubia.0064.desc.neither
		}
		desc = nubia.0064.desc.conclusion
	}
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	
	# right_portrait = {
	# 	character = scope:umari
	# 	animation = personality_dishonorable
	# }

	left_portrait = {
		character = scope:georgios
		animation = bribing
		trigger = { exists = scope:georgios }
	}

	right_portrait = {
		character = scope:niuty
		animation = bribing
		trigger = { exists = scope:niuty }
	}

	immediate = {
		scope:niuty = {
			random_character_war = {
				limit = {
					any_war_attacker = { this = scope:niuty }
					any_war_defender = { this = scope:georgios }
				}
				save_scope_as = niuty_rebellion_war
			}
		}
	}

	# Support Niuty
	option = {
		name = nubia.0064.a
		if = {
			limit = {
				scope:niuty = {
					var:RICE_umari_offer ?= flag:gold
				}
			}
			add_gold = 50
		}
		else_if = {
			limit = {
				scope:niuty = {
					var:RICE_umari_offer ?= flag:big_gold
				}
			}
			add_gold = 200
		}
		scope:niuty_rebellion_war = { add_attacker = scope:umari }
		scope:niuty = {
			add_opinion = {
				modifier = RICE_opinion_al_umari_useful_bandit
				target = root
			}
			trigger_event = nubia.0065
		}
		scope:georgios = {
			add_opinion = {
				modifier = RICE_opinion_al_umari_treacherous_bandit
				target = root
			}
			trigger_event = nubia.0065
		}
		ai_chance = {
			base = 25
			modifier = {
				scope:niuty = {
					var:RICE_umari_offer ?= flag:big_gold
				}
				add = 75 
			}
			modifier = {
				scope:niuty = {
					var:RICE_umari_offer ?= flag:gold
				}
				add = 25 
			}
		}
	}

	# Support Georgios
	option = {
		name = nubia.0064.b
		if = {
			limit = {
				scope:georgios = {
					var:RICE_umari_offer ?= flag:gold
				}
			}
			add_gold = 50
		}
		else_if = {
			limit = {
				scope:georgios = {
					var:RICE_umari_offer ?= flag:big_gold
				}
			}
			add_gold = 200
		}
		scope:niuty_rebellion_war = { add_defender = scope:umari }
		scope:niuty = {
			add_opinion = {
				modifier = RICE_opinion_al_umari_treacherous_bandit
				target = root
			}
			trigger_event = nubia.0066
		}
		scope:georgios = {
			add_opinion = {
				modifier = RICE_opinion_al_umari_useful_bandit
				target = root
			}
			trigger_event = nubia.0066
		}
		ai_chance = {
			base = 25
			modifier = {
				scope:georgios = {
					var:RICE_umari_offer ?= flag:big_gold
				}
				add = 75 
			}
			modifier = {
				scope:georgios = {
					var:RICE_umari_offer ?= flag:gold
				}
				add = 25 
			}
		}
	}

	# Support neither
	option = {
		name = nubia.0064.c
		scope:niuty = {
			trigger_event = nubia.0067
		}
		scope:georgios = {
			trigger_event = nubia.0067
		}
		ai_chance = {
			base = 50
		}
	}

	# after = {
	# 	custom_tooltip = nubia.0064.tooltip # The victor of the war might still attack you after
	# }

}



# Georgios and Niuty are notified that al-Umari sided with Niuty 
nubia.0065 = {
	type = character_event
	title = nubia.0065.t
	desc = {
		desc = nubia.0065.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:niuty = {
						root = this
					}
				}
				desc = nubia.0065.desc.niuty
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						root = this
					}
				}
				desc = nubia.0065.desc.georgios
			}
		}
	}
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	
	right_portrait = {
		character = scope:umari
		animation = war_attacker
	}

	lower_left_portrait = {
		character = scope:georgios
		trigger = { exists = scope:georgios }
	}

	lower_right_portrait = {
		character = scope:niuty
		trigger = { exists = scope:niuty }
	}

	immediate = {
		show_as_tooltip = {
			scope:umari = {
				if = {
					limit = {
						scope:niuty = {
							var:RICE_umari_offer ?= flag:gold
						}
					}
					add_gold = 50
				}
				else_if = {
					limit = {
						scope:niuty = {
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
					add_gold = 200
				}
			}
			scope:niuty_rebellion_war = { add_attacker = scope:umari }
			scope:niuty = {
				add_opinion = {
					modifier = RICE_opinion_al_umari_useful_bandit
					target = root
				}
			}
			scope:georgios = {
				add_opinion = {
					modifier = RICE_opinion_al_umari_treacherous_bandit
					target = root
				}
			}			
		}
	}

	# Ok
	option = {
		name = nubia.0065.a
		#custom_tooltip = nubia.0064.tooltip # The victor of the war might still attack al-Umari after
	}

}



# Georgios and Niuty are notified that al-Umari sided with Georgios
nubia.0066 = {
	type = character_event
	title = nubia.0066.t
	desc = {
		desc = nubia.0066.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:niuty = {
						root = this
					}
				}
				desc = nubia.0066.desc.niuty
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						root = this
					}
				}
				desc = nubia.0066.desc.georgios
			}
		}
	}
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	
	right_portrait = {
		character = scope:umari
		animation = war_attacker
	}

	lower_left_portrait = {
		character = scope:georgios
		trigger = { exists = scope:georgios }
	}

	lower_right_portrait = {
		character = scope:niuty
		trigger = { exists = scope:niuty }
	}

	immediate = {
		show_as_tooltip = {
			scope:umari = {
				if = {
					limit = {
						scope:georgios = {
							var:RICE_umari_offer ?= flag:gold
						}
					}
					add_gold = 50
				}
				else_if = {
					limit = {
						scope:georgios = {
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
					add_gold = 200
				}
			}
			scope:niuty_rebellion_war = { add_defender = scope:umari }
			scope:niuty = {
				add_opinion = {
					modifier = RICE_opinion_al_umari_treacherous_bandit
					target = root
				}
			}
			scope:georgios = {
				add_opinion = {
					modifier = RICE_opinion_al_umari_useful_bandit
					target = root
				}
			}		
		}
	}

	# ok
	option = {
		name = nubia.0066.a
		#custom_tooltip = nubia.0064.tooltip # The victor of the war might still attack al-Umari after
	}

}


# Georgios and Niuty are notified that al-Umari sided with no one
nubia.0067 = {
	type = character_event
	title = nubia.0067.t
	desc = {
		desc = nubia.0067.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:niuty = {
						root = this
					}
				}
				desc = nubia.0067.desc.niuty
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						root = this
					}
				}
				desc = nubia.0067.desc.georgios
			}
		}
		desc = nubia.0067.desc.conclusion
	}
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	
	right_portrait = {
		character = scope:umari
		animation = war_attacker
	}

	lower_left_portrait = {
		character = scope:georgios
		trigger = { exists = scope:georgios }
	}

	lower_right_portrait = {
		character = scope:niuty
		trigger = { exists = scope:niuty }
	}

	# ok
	option = {
		name = nubia.0067.a
		#custom_tooltip = nubia.0064.tooltip # The victor of the war might still attack al-Umari after
	}

}



# Georgios Aspiration Fulfilled
nubia.0068 = {
	type = character_event
	title = nubia.0068.t
	desc = nubia.0068.desc
	theme = RICE_theme_nubia_dongola_building

	right_portrait = {
		character = scope:georgios
		animation = war_over_win
	}

	lower_left_portrait = scope:niuty
	lower_right_portrait = scope:umari

	immediate = {

		play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:dongola0010 = { # Georgios
			save_scope_as = georgios
		}	

		character:dongola0011d = { # Niuty
			save_scope_as = niuty
		}	

		character:bedouin0018 = { # al-Umari
			save_scope_as = umari
		}	
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_defeat_the_traitor_and_the_bandit
				}
				remove_character_modifier = RICE_nubia_aspiration_defeat_the_traitor_and_the_bandit
			}
		}

		# Main Objective Reward
		add_legitimacy = medium_legitimacy_gain
		add_prestige = RICE_aspiration_large_resource_bonus
		add_martial_lifestyle_perk_points = 1
		RICE_upgrade_education_trait_effect = yes
		spawn_army = {
			levies = 500
			men_at_arms = {
				type = archers_of_the_nile
				stacks = 1
			}
			men_at_arms = {
				type = RICE_alodian_cavalry
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 1
			}
			men_at_arms = {
				type = pikemen_unit
				stacks = 1
			}
			men_at_arms = {
				type = armored_footmen
				stacks = 1
			}
			location = capital_province
			uses_supply = yes
			inheritable = yes
			name = event_troop_default_name
		}

		# Bonus Objective Reward(s)
		if = {
			limit = {
				completely_controls = title:k_nubia
			}
			every_county_in_region = {
				region = RICE_greater_nubia_region
				limit = { holder.top_liege = root }
				custom = RICE_every_county_you_completely_control_in_nubia
				change_development_level = RICE_red_sea_al_umari_aspiration_dev_bonus	
			}
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_positive_pastoralist_decision
			}
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_negative_pastoralist_decision
			}
			add_intrigue_lifestyle_perk_points = 1
		}

	}

	# Ok
	option = {
		name = nubia.0068.a
	}


}



# Niuty Aspiration Fulfilled
nubia.0069 = {
	type = character_event
	title = nubia.0069.t
	desc = nubia.0069.desc
	theme = RICE_theme_nubia_dongola_building

	right_portrait = {
		character = scope:niuty
		animation = war_over_win
	}

	lower_left_portrait = scope:georgios
	lower_right_portrait = scope:umari

	immediate = {

		play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:dongola0010 = { # Georgios
			save_scope_as = georgios
		}	

		character:dongola0011d = { # Niuty
			save_scope_as = niuty
		}	

		character:bedouin0018 = { # al-Umari
			save_scope_as = umari
		}	
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_take_over_makuria
				}
				remove_character_modifier = RICE_nubia_aspiration_take_over_makuria
			}
		}

		# Main Objective Reward
		add_legitimacy = medium_legitimacy_gain
		add_prestige = RICE_aspiration_large_resource_bonus
		add_martial_lifestyle_perk_points = 1
		RICE_upgrade_education_trait_effect = yes
		spawn_army = {
			levies = 500
			men_at_arms = {
				type = archers_of_the_nile
				stacks = 1
			}
			men_at_arms = {
				type = RICE_alodian_cavalry
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 1
			}
			men_at_arms = {
				type = pikemen_unit
				stacks = 1
			}
			men_at_arms = {
				type = armored_footmen
				stacks = 1
			}
			location = capital_province
			uses_supply = yes
			inheritable = yes
			name = event_troop_default_name
		}

		# Bonus Objective Reward(s)
		if = {
			limit = {
				completely_controls = title:k_nubia
			}
			every_county_in_region = {
				region = RICE_greater_nubia_region
				limit = { holder.top_liege = root }
				custom = RICE_every_county_you_completely_control_in_nubia
				change_development_level = RICE_red_sea_al_umari_aspiration_dev_bonus	
			}
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_positive_pastoralist_decision
			}
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_negative_pastoralist_decision
			}
			add_intrigue_lifestyle_perk_points = 1
		}

	}

	# Ok
	option = {
		name = nubia.0069.a
	}


}






######################################################################################
# 
# CULTURE EVENTS AND DECISIONS
# 
# nubia.0080-nubia.0089
# 
######################################################################################




# Nilotic Culture character appears
nubia.0080 = {
	type = character_event
	title = nubia.0080.t
	desc = nubia.0080.desc
	theme = RICE_theme_uganda_savanna

	left_portrait = root
	right_portrait = {
		character = scope:courtier
		animation = throne_room_bow_1
	}

	trigger = {
		any_held_county = {
			any_county_province = {
				geographical_region = RICE_nubia_and_ethiopia
			}
		}
		RICE_is_offmap_nilotic_culture_trigger = no
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		culture:oropom = {
			save_scope_as = oropom
		}
		random_list = {
			100 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:luo
					faith = faith:dinka_pagan
					save_scope_as = courtier			
				}
			}
			100 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:ateker
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			100 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:bari
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			50 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:kalenjin
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			50 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:maasai
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			50 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:sirikwa
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			50 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:oropom
					faith = faith:south_omotic_pagan
					save_scope_as = courtier			
				}
			}
		}
		random_list = {
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:warriors
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:artisans
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:blacksmiths
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:traders
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:ritualists
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:builders
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:herders
					days = 1
				}
			}
		}
	}

	# Work with them
	option = {
		name = nubia.0080.a
		trigger = {
			OR = {
				gold >= 50
				is_ai = no
			}
		}
		remove_short_term_gold = 50
		if = {
			limit = {
				var:RICE_nilotic_type ?= flag:warriors
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_warriors
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:artisans
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_artisans
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:blacksmiths
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_blacksmiths
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:traders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_traders
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:ritualists
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_ritualists
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:builders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_builders
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:herders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_herders
				years = 20
			}
		}
	}

	# Invite courtier
	option = {
		name = nubia.0080.b
		trigger = {
			OR = {
				gold >= 50
				is_ai = no
			}
		}
		remove_short_term_gold = 100
		add_courtier = scope:courtier
		if = {
			limit = {
				var:RICE_nilotic_type ?= flag:warriors
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_warriors
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:artisans
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_artisans
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:blacksmiths
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_blacksmiths
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:traders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_traders
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:ritualists
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_ritualists
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:builders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_builders
				years = 20
			}
		}
	}
	
	# Don't work with them
	option = {
		name = nubia.0080.c
		hidden_effect = {
			random = {
				chance = 80
				scope:courtier = {
					death = {
						death_reason = death_vanished
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				has_variable = RICE_nilotic_type
			}
			remove_variable = RICE_nilotic_type
		}
	}

}


######################################################################################
# 
# PASTORALISTS AND FARMERS
# 
# nubia.0090-nubia.0099
# 
######################################################################################


# Welcome Nile Pastoralists
nubia.0090 = {
	type = character_event
	title = nubia.0090.t
	desc = nubia.0090.desc
	theme = migration
	override_background = { reference = RICE_background_nile_travel }

	right_portrait = {
		character = root
		animation = personality_forgiving
	}

	immediate = {
		RICE_nile_pastoralists_positive_decision_effect = yes
	}

	# Ok
	option = {
		name = nubia.0090.a
	}

	# Pay extra
	option = {
		name = nubia.0090.b
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_pastoralist_decision_bonus_max
			}
		}
		remove_short_term_gold = { RICE_pastoralist_decision_bonus_min RICE_pastoralist_decision_bonus_max }
		# You are in Egypt
		if = {
			limit = {
				capital_county = {
					any_county_province = {
						geographical_region = ghw_region_egypt
					}
				}
			}
			spawn_army = {
				levies = 200
				men_at_arms = {
					type = light_horsemen
					stacks = 1
				}
				men_at_arms = {
					type = abudrar
					stacks = 1
				}
				men_at_arms = {
					type = mubarizun
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_nile_pastoralist_troops
			}
		}
		# You are in Nubia
		else_if = {
			limit = {
				capital_county = {
					any_county_province = {
						geographical_region = RICE_greater_nubia_region
					}
				}
			}
			spawn_army = {
				levies = 200
				men_at_arms = {
					type = archers_of_the_nile
					stacks = 1
				}
				men_at_arms = {
					type = RICE_nilotic_raiders
					stacks = 1
				}
				men_at_arms = {
					type = sahel_horsemen
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_nile_pastoralist_troops
			}
		}
		# You are in neither Nubia or Egypt for some reason
		else = {
			spawn_army = {
				levies = 200
				men_at_arms = {
					type = archers_of_the_nile
					stacks = 1
				}
				men_at_arms = {
					type = abudrar
					stacks = 1
				}
				men_at_arms = {
					type = sahel_horsemen
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_nile_pastoralist_troops
			}
		}
	}

}



# Ward Off Nile Pastoralists
nubia.0091 = {
	type = character_event
	title = nubia.0091.t
	desc = nubia.0091.desc
	theme = migration
	override_background = { reference = RICE_background_nile_travel }

	right_portrait = {
		character = root
		animation = disapproval
	}

	immediate = {
		RICE_nile_pastoralists_negative_decision_effect = yes
	}

	# Ok
	option = {
		name = nubia.0091.a
	}

}

# Protect Nile farmers
nubia.0092 = {
	type = character_event
	title = nubia.0092.t
	desc = nubia.0092.desc
	theme = martial
	override_background = { reference = RICE_background_nile_travel }

	right_portrait = {
		character = root
		animation = war_defender
	}

	immediate = {
		RICE_nile_farmers_positive_decision_effect = yes
	}

	# Ok
	option = {
		name = nubia.0092.a
	}

}

# Plunder Nile farmers
nubia.0093 = {
	type = character_event
	title = nubia.0093.t
	desc = nubia.0093.desc
	theme = raid
	override_background = { reference = RICE_background_nile_travel }

	right_portrait = {
		character = root
		animation = menacing
	}

	immediate = {
		add_gold = { RICE_pastoralist_decision_bonus_min RICE_pastoralist_decision_bonus_max }
		RICE_nile_farmers_negative_decision_effect = yes
	}

	# Ok
	option = {
		name = nubia.0093.a
	}

}






######################################################################################
# 
# ELDAD HA-DANI/DANITE STUFF
# 
# nubia.0100-nubia.0119
# 
######################################################################################




# Introduction event - version for Eldad ha-Dani
nubia.0100 = {
	type = character_event
	title = nubia.0100.t
	desc = nubia.0100.desc
	theme = RICE_theme_red_sea_beach
	override_icon = { reference = "gfx/interface/icons/event_types/type_legends.dds" }

	right_portrait = {
		character = root
		animation = personality_content
	}

	immediate = {
		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_spread_stories_tribe_of_dan
			}			
		}
	}

	# Stay Yemeni Jewish
	option = {
		name = nubia.0100.a	
		add_trait_xp = { 
			trait = RICE_the_danite
			track = RICE_the_danite_justice
			value = RICE_the_danite_trait_medium_xp_gain
		}
		# AI will more likely go with this option
		ai_chance = {
			base = 80
		}
	}

	# Become Ethiopian
	option = {
		name = nubia.0100.b	
		set_culture = culture:ethiopian
		set_character_faith = faith:haymanot	
		custom_tooltip = RICE_physical_appearance_change_desc
		hidden_effect = {
			copy_inheritable_appearance_from = character:RICE_eldad_ha_dani_ethiopian_version
			character:RICE_red_sea_001a = {
				copy_inheritable_appearance_from = character:RICE_eldad_ha_dani_ethiopian_version_father
				set_culture = culture:ethiopian
				set_character_faith = faith:haymanot	
			}
		}
		add_trait_xp = { 
			trait = RICE_the_danite
			track = RICE_the_danite_serpent
			value = RICE_the_danite_trait_medium_xp_gain
		}
		# However, there's a chance the AI will go with this option instead
		ai_chance = {
			base = 20
		}
	}

	after = {
		trigger_event = nubia.0101
	}

}

# Introduction event - version for Eldad ha-Dani
nubia.0101 = {
	type = character_event
	title = nubia.0101.t
	desc = nubia.0101.desc
	theme = RICE_theme_red_sea_beach
	override_icon = { reference = "gfx/interface/icons/event_types/type_legends.dds" }

	right_portrait = {
		character = root
		animation = personality_content
	}

	# Ok
	option = {
		name = nubia.0101.a		
		# create_legend = {
		# 	type = heroic
		# 	quality = famed
		# 	chronicle = RICE_the_tribe_of_dan_legend
		# 	properties = {
		# 		danite = root
		# 		religion = religion:judaism_religion
		# 	}
		# }
	}

	# Ok
	# option = {
	# 	name = nubia.0101.b		
	# 	# create_legend = {
	# 	# 	type = holy
	# 	# 	quality = famed
	# 	# 	chronicle = RICE_the_tribe_of_dan_legend
	# 	# 	properties = {
	# 	# 		danite = root
	# 	# 		religion = religion:judaism_religion
	# 	# 	}
	# 	# }
	# }


}

# Introduction event - version for everyone else who starts with the trait as a failsafe
# nubia.0102 = {
# 	type = character_event
# 	title = nubia.0102.t
# 	desc = nubia.0102.desc
# 	theme = RICE_theme_red_sea_beach
# 	override_icon = { reference = "gfx/interface/icons/event_types/type_legends.dds" }

# 	right_portrait = {
# 		character = root
# 		animation = personality_content
# 	}

# 	# Ok
# 	option = {
# 		name = nubia.0102.a		
# 		# create_legend = {
# 		# 	type = heroic
# 		# 	quality = famed
# 		# 	chronicle = RICE_the_tribe_of_dan_legend
# 		# 	properties = {
# 		# 		danite = root
# 		# 		religion = religion:judaism_religion
# 		# 	}
# 		# }
# 	}

# 	# Ok
# 	option = {
# 		name = nubia.0102.b		
# 		# create_legend = {
# 		# 	type = holy
# 		# 	quality = famed
# 		# 	chronicle = RICE_the_tribe_of_dan_legend
# 		# 	properties = {
# 		# 		danite = root
# 		# 		religion = religion:judaism_religion
# 		# 	}
# 		# }
# 	}


# }

# Spread the legend
nubia.0103 = {
	type = character_event
	title = nubia.0103.t
	desc = nubia.0103.desc
	theme = legend
	override_background = { reference = tavern }

	right_portrait = {
		character = root
		animation = storyteller
	}

	immediate = {
		set_variable = {
			name = RICE_eldad_ha_dani_reception
			value = {
				value = 0
				add = {
					integer_range = {
						min = 1
						max = 100
					}
				}
			}
			days = 1
		}
		#RICE_eldad_ha_dani_decision_effect = yes
	}

	# Serpent: Martial, Intrigue, Prowess
	# Justice: Diplomacy, Stewardship, Learning

	# Serpent - fanciful tales
	option = {
		name = nubia.0103.a
		set_variable = {
			name = RICE_eldad_ha_dani_story_type
			value = flag:fanciful_tales
			days = 1
		}
		random_list = { # add = var:team_b_ptv
			50 = {
				#show_chance = no
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception >= 55 # Slightly Enthusiastic Reception
				}
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception >= 70 # Somewhat Enthusiastic Reception
				}
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception >= 85 # Very Enthusiastic Reception
				}
				modifier = {
					add = 15
					has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_serpent value >= 25 }
				}
				modifier = {
					add = 15
					has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_serpent value >= 50 }
				}
				modifier = {
					add = 15
					has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_serpent value >= 75 }
				}
				modifier = {
					add = 15
					has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_serpent value >= 100 }
				}
				modifier = {
					add = 75
					has_trait = RICE_the_danite_upgraded_serpent
				}
				desc = nubia.0103.success
				trigger_event = nubia.0104
			}
			50 = {
				#show_chance = no
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception <= 45 # Slightly Skeptical Reception
				}
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception <= 30 # Somewhat Skeptical Reception
				}
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception <= 15 # Very Skeptical Reception
				}
				desc = nubia.0103.failure
				trigger_event = nubia.0105
			}
		}
	}

	# Justice - informative commentary
	option = {
		name = nubia.0103.b
		set_variable = {
			name = RICE_eldad_ha_dani_story_type
			value = flag:informative_commentary
			days = 1
		}
		random_list = {
			50 = {
				#show_chance = no
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception <= 45 # Slightly Skeptical Reception
				}
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception <= 30 # Somewhat Skeptical Reception
				}
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception <= 15 # Very Skeptical Reception
				}
				modifier = {
					add = 15
					has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_justice value >= 25 }
				}
				modifier = {
					add = 15
					has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_justice value >= 50 }
				}
				modifier = {
					add = 15
					has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_justice value >= 75 }
				}
				modifier = {
					add = 15
					has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_justice value >= 100 }
				}
				modifier = {
					add = 75
					has_trait = RICE_the_danite_upgraded_justice
				}
				desc = nubia.0103.success
				trigger_event = nubia.0104
			}
			50 = {
				#show_chance = no
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception >= 55 # Slightly Enthusiastic Reception
				}
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception >= 70 # Somewhat Enthusiastic Reception
				}
				modifier = {
					add = 25
					var:RICE_eldad_ha_dani_reception >= 85 # Very Enthusiastic Reception
				}
				desc = nubia.0103.failure
				trigger_event = nubia.0105
			}
		}
	}


}

# Eldad ha-Dani - success
nubia.0104 = {
	type = character_event
	title = nubia.0104.t
	desc = nubia.0104.desc
	theme = legend
	override_background = { reference = tavern }

	right_portrait = {
		character = root
		animation = personality_compassionate
	}

	#immediate = {		
	#}

	# Serpent: Martial, Intrigue, Prowess
	# Justice: Diplomacy, Stewardship, Learning

	# Ok
	option = {
		name = nubia.0104.a
		RICE_eldad_ha_dani_decision_success_effect = yes
	}

	after = {		
		RICE_eldad_ha_dani_end_decision_effect = yes
	}

}

# Eldad ha-Dani - failure
nubia.0105 = {
	type = character_event
	title = nubia.0105.t
	desc = nubia.0105.desc
	theme = legend
	override_background = { reference = tavern }

	right_portrait = {
		character = root
		animation = sadness
	}

	#immediate = {
	#}

	# Serpent: Martial, Intrigue, Prowess
	# Justice: Diplomacy, Stewardship, Learning

	# Ok
	option = {
		name = nubia.0105.a
		RICE_eldad_ha_dani_decision_failure_effect = yes
	}

	after = {		
		RICE_eldad_ha_dani_end_decision_effect = yes
	}

}


# Eldad ha-Dani aspiration fulfilled
nubia.0106 = {
	type = character_event
	title = nubia.0106.t
	desc = nubia.0106.desc
	theme = legend
	override_background = { reference = bp2_tavern_mena }

	right_portrait = {
		character = root
		animation = war_over_win
	}


	immediate = {

		play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:RICE_red_sea_001 = {
			save_scope_as = eldad
		}	
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_spread_stories_tribe_of_dan
				}
				remove_character_modifier = RICE_nubia_aspiration_spread_stories_tribe_of_dan
			}
		}

		# Main Objective Reward
		faith = {
			change_fervor = {
				value = 20
				desc = fervor_gain_RICE_eldad_ha_dani_success
			}
		}

		if = {
			limit = {
				has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_serpent value >= 100 }
			}
			remove_trait = RICE_the_danite
			add_trait = RICE_the_danite_upgraded_serpent
			add_prestige = RICE_aspiration_medium_resource_bonus
		}
		else_if = {
			limit = {
				has_trait_xp = { trait = RICE_the_danite track = RICE_the_danite_justice value >= 100 }
			}
			remove_trait = RICE_the_danite
			add_trait = RICE_the_danite_upgraded_justice
			add_piety = RICE_aspiration_medium_resource_bonus
		}

		add_gold = RICE_aspiration_medium_resource_bonus

		create_legend_seed = {
			type = heroic
			quality = famed
			chronicle = RICE_the_tribe_of_dan_legend
			properties = {
				danite = root
				religion = religion:judaism_religion
			}
		}

		# create_legend = {
		# 	type = heroic
		# 	quality = famed
		# 	chronicle = RICE_the_tribe_of_dan_legend
		# 	properties = {
		# 		danite = root
		# 		religion = religion:judaism_religion
		# 	}
		# }

		# Bonus Objective Reward(s)
		if = {
			limit = {
				is_landless_adventurer = yes
			}
			add_gold = RICE_aspiration_medium_resource_bonus
		}
		if = {
			limit = {
				piety_level >= 4
			}
			dynasty ?= {
				add_dynasty_prestige = RICE_aspiration_medium_resource_bonus
			}
		}
		if = {
			limit = {
				prestige_level >= 4
				}
			if = {
				limit = {
					has_trait = RICE_the_danite_upgraded_serpent
				}
				add_intrigue_lifestyle_perk_points = 1
			}
			else_if = {
				limit = {
					has_trait = RICE_the_danite_upgraded_justice
				}
				add_learning_lifestyle_perk_points = 1
			}
		}
		

	}

	option = { # Ok
		name = nubia.0106.a
	}

}

######################################################################################
# 
# OTHER HISTORICAL ASPIRATIONS
# 
# nubia.0120-nubia.0129
# 
######################################################################################


# Merki intro event
nubia.0120 = {
	type = character_event
	title = nubia.0120.t
	desc = nubia.0120.desc
	theme = RICE_theme_nile_valley

	left_portrait = {
		character = root
		animation = chancellor
	}

	immediate = {
		character:RICE_nubia_misc_001 = {
			save_scope_as = merki
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_ascend_bureaucracy_makuria
			}
			add_character_modifier = {
				modifier = RICE_nubia_merki_modifier
			}
		}
	}

	option = { # Ok
		name = nubia.0120.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0120.info
		}
	}

}


# Merki aspiration fulfilled
nubia.0121 = {
	type = character_event
	title = nubia.0121.t
	desc = nubia.0121.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = root
		animation = chancellor
	}


	immediate = {

		#play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:RICE_nubia_misc_001 = { # Merki
			save_scope_as = merki
		}	

		title:k_nubia.holder = {
			save_scope_as = makurian_king
		}
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_ascend_bureaucracy_makuria
				}
				remove_character_modifier = RICE_nubia_aspiration_ascend_bureaucracy_makuria
			}
		}

		# Main Objective Reward
		dynasty ?= {
			add_dynasty_prestige = RICE_aspiration_medium_resource_bonus
		}
		RICE_upgrade_education_trait_effect = yes
		remove_character_modifier = RICE_nubia_merki_modifier
		add_character_modifier = {
			modifier = RICE_nubia_merki_upgraded_modifier
		}
		add_gold = RICE_aspiration_medium_resource_bonus

		# Bonus Objective Reward(s)
		if = {
			limit = {
				OR = {
					has_relation_friend = scope:makurian_king
					has_relation_best_friend = scope:makurian_king
					is_councillor_of = scope:makurian_king
					scope:makurian_king = {						
						opinion = {
							target = scope:merki
							value >= 75
						}
					}
				}
			}
			add_gold = RICE_aspiration_medium_resource_bonus
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_positive_pastoralist_decision
			}
			add_diplomacy_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_negative_pastoralist_decision
			}
			add_intrigue_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				exists = var:RICE_num_times_did_nubian_agriculture_decision
				var:RICE_num_times_did_nubian_agriculture_decision > 1
			}
			add_prestige = RICE_nubian_agriculture_decision_aspiration_prestige_bonus_value
		}

	}

	option = { # Ok
		name = nubia.0121.a
	}

}

# Kusbur intro event
nubia.0122 = {
	type = character_event
	title = nubia.0122.t
	desc = nubia.0122.desc
	theme = wanderer_journey_focus
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }

	left_portrait = {
		character = root
		animation = holding_staff
	}

	immediate = {

		character:RICE_daju_002 = { # Kusbur
			save_scope_as = kusbur
		}	

		culture:daju = {
			save_scope_as = daju
		}

		culture:tora = {
			save_scope_as = tora
		}

		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_daju_migration_into_darfur
			}
		}
	}

	option = { # Ok
		name = nubia.0122.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0122.info
		}
	}

}

# Kusbur aspiration fulfilled
nubia.0123 = {
	type = character_event
	title = nubia.0123.t
	desc = nubia.0123.desc
	theme = wanderer_journey_focus
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }

	right_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:RICE_daju_002 = { # Kusbur
			save_scope_as = kusbur
		}	

		scope:kusbur.culture = {
			save_scope_as = daju
		}

		culture:tora = {
			save_scope_as = tora
		}
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_daju_migration_into_darfur
				}
				remove_character_modifier = RICE_nubia_aspiration_daju_migration_into_darfur
			}
		}

		# Main Objective Reward
		dynasty ?= {
			add_dynasty_prestige = RICE_aspiration_large_resource_bonus
		}
		every_county_in_region = {
			region = RICE_greater_darfur
			limit = { holder.top_liege = root }
			custom = RICE_every_county_completely_control_greater_darfur
			add_county_modifier = {
				modifier = RICE_nubia_daju_migrations_modifier
				years = 50
			}
		}

		# Bonus Objective Reward(s)
		if = {
			limit = {
				any_vassal = {
					highest_held_title_tier = tier_county
					OR = {
						culture = culture:tora
						culture = {
							any_parent_culture_or_above = {
								this = culture:tora
							}
						}
					}					
				}
			}
			spawn_army = {
				levies = 200
				men_at_arms = {
					type = bowmen
					stacks = 1
				}
				men_at_arms = {
					type = pikemen_unit
					stacks = 1
				}
				men_at_arms = {
					type = RICE_sudanese_highlanders
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_daju_warriors_event_troops
			}
		}
		if = {
			limit = {
				any_vassal = {
					highest_held_title_tier = tier_county
					OR = {
						culture = culture:daju
						culture = {
							any_parent_culture_or_above = {
								this = culture:daju
							}
						}
					}					
				}
			}
			spawn_army = {
				levies = 100
				men_at_arms = {
					type = bowmen
					stacks = 1
				}
				men_at_arms = {
					type = pikemen_unit
					stacks = 1
				}
				men_at_arms = {
					type = sahel_horsemen
					stacks = 1
				}
				men_at_arms = {
					type = RICE_sudanese_highlanders
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_daju_warriors_event_troops
			}
		}
		if = {
			limit = {
				has_character_flag = RICE_did_tebeldi_trees_decision
			}
			add_piety = RICE_aspiration_medium_resource_bonus
		}
		if = {
			limit = {
				has_character_flag = RICE_did_lake_oracle_decision
			}
			add_piety = RICE_aspiration_medium_resource_bonus
		}
	}

	option = { # Ok
		name = nubia.0123.a
	}

}

# Moses Georgios intro event
nubia.0124 = {
	type = character_event
	title = nubia.0124.t
	desc = nubia.0124.desc
	theme = RICE_theme_nubia_church_interior

	left_portrait = {
		character = root
		animation = worry
	}

	lower_right_portrait = scope:saladin

	immediate = {
		character:dongola0022 = { # Moses Georgios
			save_scope_as = moses_georgios
		}	

		character:226000 = { # saladin
			save_scope_as = saladin
		}	

		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_revive_nubia
			}
		}
	}

	option = { # Ok
		name = nubia.0124.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0124.info
		}
	}

}

# Moses Georgios aspiration fulfilled
nubia.0125 = {
	type = character_event
	title = nubia.0125.t
	desc = nubia.0125.desc
	theme = RICE_theme_nubia_church_interior

	right_portrait = {
		character = root
		animation = personality_callous
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:dongola0022 = { # Moses Georgios
			save_scope_as = moses_georgios
		}	

		character:226000 = { # saladin
			save_scope_as = saladin
		}	
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_revive_nubia
				}
				remove_character_modifier = RICE_nubia_aspiration_revive_nubia
			}
		}

		# Main Objective Reward
		every_county_in_region = {
			region = RICE_greater_nubia_region
			limit = { holder.top_liege = root }
			custom = RICE_every_county_you_completely_control_in_nubia
			change_development_level = RICE_red_sea_al_umari_aspiration_dev_bonus	
		}
		add_gold = RICE_aspiration_large_resource_bonus
		add_prestige = RICE_aspiration_large_resource_bonus
		spawn_army = {
			levies = 500
			men_at_arms = {
				type = archers_of_the_nile
				stacks = 3
			}
			men_at_arms = {
				type = RICE_alodian_cavalry
				stacks = 4
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			men_at_arms = {
				type = pikemen_unit
				stacks = 2
			}
			men_at_arms = {
				type = armored_footmen
				stacks = 1
			}
			location = capital_province
			uses_supply = yes
			inheritable = yes
			name = event_troop_default_name
		}
		situation:RICE_nubia_baqt_situation ?= {
			trigger_situation_catalyst = {
				catalyst = catalyst_situation_RICE_baqt_major_historical_event_accord
				character = root
			}
		}
		# Bonus Objective Reward(s)
		if = {
			limit = {
				OR = {
					piety_level >= 3
					prestige_level >= 3
				}
				#completely_controls = title:k_nubia
				#completely_controls = title:k_alodia
			}
			dynasty ?= {
				add_dynasty_prestige = RICE_aspiration_large_resource_bonus
			}
		}
		if = {
			limit = {
				any_vassal = {
					OR = {
						is_allied_to = scope:moses_georgios
						has_dread_level_towards = {
							target = scope:moses_georgios
							level >= 2
						}
						opinion = {
							target = scope:moses_georgios
							value >= 75
						}
					}					
				}
			}
			spawn_army = {
				levies = 200
				# men_at_arms = {
				# 	type = bowmen
				# 	stacks = 1
				# }
				# men_at_arms = {
				# 	type = pikemen_unit
				# 	stacks = 1
				# }
				men_at_arms = {
					type = mubarizun
					stacks = 1
				}
				men_at_arms = {
					type = abudrar
					stacks = 1
				}
				men_at_arms = {
					type = mulaththamun
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_sicily_norman_muslim_event_troops
			}
		}
	}

	option = { # Ok
		name = nubia.0125.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0125.info
		}
	}

}

# Eparch Adam intro event
nubia.0126 = {
	type = character_event
	title = nubia.0126.t
	desc = nubia.0126.desc
	theme = RICE_theme_nubia_dongola_building

	left_portrait = {
		character = root
		animation = survey
	}

	right_portrait = {
		character = scope:moses_georgios
		animation = debating
	}

	lower_right_portrait = scope:saladin

	immediate = {
		character:dongola0022 = { # Moses Georgios
			save_scope_as = moses_georgios
		}	

		character:226000 = { # saladin
			save_scope_as = saladin
		}	
		
		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_look_after_nubia_frontier
			}
		}
	}

	option = { # Ok
		name = nubia.0126.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0126.info
		}
	}

}

# Eparch Adam aspiration fulfilled
nubia.0127 = {
	type = character_event
	title = nubia.0127.t
	desc = nubia.0127.desc
	theme = RICE_theme_nile_valley

	right_portrait = {
		character = scope:adam
		animation = chancellor
	}

	immediate = {

		RICE_historical_aspiration_fulfilled_effect = yes

		character:nobadia0018 = { # Eparch Adam
			save_scope_as = adam
		}	
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_look_after_nubia_frontier
				}
				remove_character_modifier = RICE_nubia_aspiration_look_after_nubia_frontier
			}
		}

		# Main Objective Reward
		every_county_in_region = {
			region = RICE_nubia_frontier
			limit = { holder.top_liege = root }
			custom = RICE_every_county_completely_control_nobatia
			change_development_level = RICE_red_sea_al_umari_aspiration_dev_bonus	
		}
		RICE_upgrade_education_trait_effect = yes
		add_diplomacy_lifestyle_perk_points = 1
		# Bonus Objective Reward(s)
		if = {
			limit = {
				OR = {
					any_truce_holder = {
						religion = religion:islam_religion
					}
					any_ally = {
						religion = religion:islam_religion
					}
				}
			}
			spawn_army = {
				levies = 200
				# men_at_arms = {
				# 	type = bowmen
				# 	stacks = 1
				# }
				# men_at_arms = {
				# 	type = pikemen_unit
				# 	stacks = 1
				# }
				men_at_arms = {
					type = mubarizun
					stacks = 1
				}
				men_at_arms = {
					type = abudrar
					stacks = 1
				}
				men_at_arms = {
					type = mulaththamun
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_sicily_norman_muslim_event_troops
			}
		}
		if = {
			limit = {
				prestige_level >= 3
			}
			add_intrigue_lifestyle_perk_points = 1
		}
	}

	option = { # Ok
		name = nubia.0127.a
	}

}



######################################################################################
# 
# EPARCH MARIANOS SLAVE FUGITIVE EVENT CHAIN
# 
# nubia.0140-nubia.0159
# 
######################################################################################


# Teniellasi reports the escaped slaves to Marianos
nubia.0140 = {
	type = character_event
	title = nubia.0140.t
	desc = nubia.0140.desc
	theme = martial_authority_focus
	override_background = { reference = RICE_background_nubia_dongola_building }

	left_portrait = {
		character = scope:marianos
		animation = war_defender
	}

	right_portrait = {
		character = scope:teniellasi
		animation = stress # worry
	}

	lower_left_portrait = scope:mena
	lower_right_portrait = scope:aswan_governor

	trigger = {
		has_title = title:d_nobatia
		NOT = { has_title = title:c_qurta }
		exists = title:c_qurta.holder
		NOT = { has_title = title:c_aswan }
		exists = title:c_aswan.holder
		OR = {
			AND = {				
				game_start_date = 1066.9.15
				character:RICE_nubia_misc_007 ?= {
					is_alive = yes
				}
			}
			any_courtier = {
				is_available_ai_adult = yes
			}
		}
		character:RICE_nubia_misc_007 = {
			is_alive = yes
		}
	}

	immediate = {
		title:d_nobatia.holder = {
			save_scope_as = marianos
		}
		title:c_qurta.holder = {
			save_scope_as = mena
		}
		title:c_aswan.holder = {
			save_scope_as = aswan_governor
		}
		if = {
			limit = {
				game_start_date = 1066.9.15
				character:RICE_nubia_misc_007 ?= {
					is_alive = yes
				}
			}
			character:RICE_nubia_misc_007 = {
				save_scope_as = teniellasi
			}
		}
		# Randomly choose a courtier
		else = {
			random_courtier = {
				limit = {
					is_available_ai_adult = yes
				}
				save_scope_as = teniellasi
			}
		}
	}

	option = { # I'll take on the case
		name = nubia.0140.a
		stress_impact = {
			lazy = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = relieved_opinion
				target = scope:marianos
				opinion = 10
			}
		}
		#custom_tooltip = nubia.0140.a.tooltip
		trigger_event = nubia.0141
	}

	option = { # I have no time for this
		name = nubia.0140.b
		stress_impact = {
			diligent = minor_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			just = miniscule_stress_impact_gain
		}
		add_prestige = medium_prestige_loss
		scope:teniellasi = {
			add_opinion = {
				modifier = angry_opinion
				target = scope:marianos
				opinion = -40
			}
		}
		add_character_modifier = {
			modifier = RICE_nubia_marianos_focused_on_other_work
			years = 5
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0140.info
		}
	}

}


# Marianos decides who to send to Mena to notify him of the situation
nubia.0141 = {
	type = character_event
	title = nubia.0141.t
	desc = nubia.0141.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = scope:marianos
		animation = war_over_tie
	}

	right_portrait = {
		character = scope:angelosinkouda
		animation = obsequious_bow
	}

	lower_left_portrait = scope:teniellasi
	lower_right_portrait = scope:mena

	immediate = {
		# Find Angelosinkouda, the historical writer of the letter
		if = {
			limit = {
				character:RICE_nubia_misc_008 ?= {
					is_alive = yes
					is_courtier_of = scope:marianos
				}
			}
			character:RICE_nubia_misc_008 = {
				save_scope_as = angelosinkouda
			}
		}
		# If Angelosinkouda doesn't exist, create a new equivalent official
		else = {
			add_character_flag = {
				flag = RICE_had_to_create_scribe
				days = 365
			}
			create_character = {
				template = administrator_character
				gender_female_chance = root_faith_dominant_gender_adjusted_female_chance
				dynasty = none
				location = root.location
				faith = root.location.faith
				culture = root.location.culture
				save_scope_as = angelosinkouda
			}
		}
		title:c_qurta.holder.capital_province = {
			save_scope_as = target_province
		}
	}

	option = { # Send a low-ranking official
		name = nubia.0141.a
		custom_tooltip = nubia.0141.a.tooltip
		trigger_event = {
			id = nubia.0142
			days = { 20 40 }
		}
	}

	option = { # Send Angelosinkouda
		name = nubia.0141.b
		trigger = {
			OR = {
				gold >= 15
				is_ai = no
			}
		}
		remove_short_term_gold = 15
		if = {
			limit = {
				scope:angelosinkouda = {
					NOT = { is_courtier_of = root }
				}
			}
			add_courtier = scope:angelosinkouda
		}
		scope:angelosinkouda = {
			start_travel_plan = { 
				destination = scope:target_province
				return_trip = yes
				on_arrival_event = nubia.0142
			}
		}
		custom_tooltip = nubia.0141.b.tooltip
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0141.info
		}
	}

}



# Mena receives the letter from Marianos through Angelosinkouda
# Ping event
nubia.0142 = {
	type = character_event
	hidden = yes

	immediate = {
		if = {
			limit = {
				title:c_qurta.holder.top_liege = scope:marianos.top_liege
			}
			title:c_qurta.holder = {
				trigger_event = nubia.0144
			}
		}
		# Letter was unable to arrive for some reason
		# 40% chance automatic failure, 60% chance automatic success
		else = {
			scope:marianos = {
				trigger_event = nubia.0143
			}
		}
	}
}

# Marianos is notified that Mena was unable to receive the letter properly and the slaves have escaped
nubia.0143 = {
	type = character_event
	title = nubia.0143.t
	desc = nubia.0143.desc
	theme = diplomacy_foreign_affairs_focus

	left_portrait = {
		character = scope:marianos
		animation = shame
	}

	right_portrait = {
		character = scope:teniellasi
		animation = disappointed
	}

	lower_right_portrait = scope:mena

	option = {
		name = nubia.0143.a
		stress_impact = {
			diligent = miniscule_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			just = miniscule_stress_impact_gain
		}
		add_prestige = minor_prestige_loss
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -20
			}
		}
	}

}

# Mena receives Angelosinkouda
nubia.0144 = {
	type = character_event
	title = nubia.0144.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					exists = scope:angelosinkouda
				}
				desc = nubia.0144.desc.courtier
			}
			desc = nubia.0144.desc.messenger
		}
		desc = nubia.0144.desc
	}
	theme = intrigue
	override_background = { reference = RICE_background_nile_private_courtyard }


	# If scope:angelosinkouda doesn't exist, such as if it was a lower-ranked official choice, then don't add him in the scene
	left_portrait = {
		character = scope:angelosinkouda
		animation = throne_room_messenger_3
		trigger = {
			exists = scope:angelosinkouda
		}
	}

	right_portrait = {
		character = scope:mena
		animation = war_over_tie
	}

	# lower_left_portrait = scope:teniellasi
	# lower_right_portrait = scope:marianos

	immediate = {
		save_scope_as = mena # Re-save scope in case the ruler has changed		
	}

	option = { # Read the letter
		name = nubia.0144.a
		#custom_tooltip = nubia.0144.a.tooltip
		trigger_event = nubia.0145
	}

}


# Read the letter
nubia.0145 = {
	type = character_event
	title = nubia.0145.t
	desc = nubia.0145.desc
	theme = intrigue
	override_background = { reference = RICE_background_nile_private_courtyard }


	right_portrait = {
		character = scope:mena
		animation = chancellor
	}

	lower_left_portrait = scope:teniellasi
	lower_right_portrait = scope:marianos

	option = { # Mena is not interested in helping
		name = nubia.0145.a
		custom_tooltip = nubia.0145.a.tooltip
		add_character_modifier = {
			modifier = RICE_nubia_marianos_focused_on_other_work
			years = 5
		}
		scope:marianos = {
			stress_impact = {
				diligent = miniscule_stress_impact_gain
				ambitious = miniscule_stress_impact_gain
				just = miniscule_stress_impact_gain
			}
			add_prestige = minor_prestige_loss
			trigger_event = nubia.0146
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -10
			}
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -40
			}
		}
		ai_chance = {
			base = 20
		}
	}

	option = { # Mena will help
		name = nubia.0145.b
		custom_tooltip = nubia.0145.b.tooltip
		scope:marianos = {
			trigger_event = nubia.0147
		}
		trigger_event = nubia.0148
		ai_chance = {
			base = 80
		}
	}

}


# Marianos receives Mena's response - negative
nubia.0146 = {
	type = letter_event
	opening = {
		desc = nubia.0146.opening
	}
	desc = nubia.0146.desc
	sender = scope:mena

	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_character_modifier = {
					modifier = RICE_nubia_marianos_focused_on_other_work
					years = 5
				}
			}
			scope:marianos = {
				stress_impact = {
					diligent = miniscule_stress_impact_gain
					ambitious = miniscule_stress_impact_gain
					just = miniscule_stress_impact_gain
				}
				add_prestige = minor_prestige_loss
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = disappointed_opinion
					target = scope:marianos
					opinion = -10
				}
				add_opinion = {
					modifier = angry_opinion
					target = scope:mena
					opinion = -40
				}
			}			
		}		
	}

	# What?
	option = { 
		name = nubia.0146.a
	}

}


# Marianos receives Mena's response - positive
nubia.0147 = {
	type = letter_event
	opening = {
		desc = nubia.0147.opening
	}
	desc = nubia.0147.desc
	sender = scope:mena

	# What?
	option = { 
		name = nubia.0147.a
		custom_tooltip = nubia.0147.a.tooltip
	}

}


# Mena decides how to proceed
nubia.0148 = {
	type = character_event
	title = nubia.0148.t
	desc = nubia.0148.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = scope:mena
		animation = thinking
	}

	lower_left_portrait = scope:teniellasi
	lower_right_portrait = scope:marianos

	option = { # Dedicate normal resources
		name = nubia.0148.a
		stress_impact = {
			diligent = miniscule_stress_impact_gain
			paranoid = miniscule_stress_impact_gain
		}
		duel = {
			skills = { diplomacy martial stewardship intrigue learning }
			value = mediocre_skill_rating
			10 = {
				custom_tooltip = nubia.0148.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.9
				}
				trigger_event = {
					id = nubia.0149
					days = { 5 10 }
				}
			}
			10 = {
				custom_tooltip = nubia.0148.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.9
				}
				trigger_event = {
					id = nubia.0151
					days = { 5 10 }
				}
			}
		}
	}

	option = { # Dedicate extra resources
		name = nubia.0148.b
		trigger = {
			OR = {
				gold >= 30
				is_ai = no
			}
		}
		remove_short_term_gold = 30
		stress_impact = {
			base = miniscule_stress_impact_gain
			lazy = miniscule_stress_impact_gain
			greedy = miniscule_stress_impact_gain
		}
		duel = {
			skills = { diplomacy martial stewardship intrigue learning }
			value = mediocre_skill_rating
			8 = {
				custom_tooltip = nubia.0148.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.9
				}
				trigger_event = {
					id = nubia.0149
					days = { 5 10 }
				}
			}
			12 = {
				custom_tooltip = nubia.0148.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.9
				}
				trigger_event = {
					id = nubia.0152
					days = { 5 10 }
				}
			}
		}
	}

}



# Mena fails to catch the slaves
nubia.0149 = {
	type = character_event
	title = nubia.0149.t
	desc = nubia.0149.desc
	theme = martial
	override_background = { reference = RICE_background_nile_private_courtyard }

	right_portrait = {
		character = scope:mena
		animation = sadness
	}

	lower_left_portrait = scope:teniellasi
	lower_right_portrait = scope:marianos


	option = { # Take the blame
		name = nubia.0149.a
		add_prestige = medium_prestige_loss
		add_legitimacy = miniscule_legitimacy_loss
		stress_impact = {
			arrogant = miniscule_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
			brave = miniscule_stress_impact_gain
		}
		scope:marianos = {
			stress_impact = {
				diligent = miniscule_stress_impact_gain
				ambitious = miniscule_stress_impact_gain
				just = miniscule_stress_impact_gain
			}
			add_prestige = minor_prestige_loss
			trigger_event = nubia.0150
			add_opinion = {
				modifier = failure_opinion
				target = scope:mena
				opinion = -20
			}
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -10
			}
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -40
			}
		}	
	}

	option = { # Blame subordinates
		name = nubia.0149.b
		stress_impact = {
			humble = miniscule_stress_impact_gain
			just = miniscule_stress_impact_gain
			craven = miniscule_stress_impact_gain
			calm = miniscule_stress_impact_gain
		}
		scope:marianos = {
			stress_impact = {
				diligent = miniscule_stress_impact_gain
				ambitious = miniscule_stress_impact_gain
				just = miniscule_stress_impact_gain
			}
			add_prestige = minor_prestige_loss
			trigger_event = nubia.0150
			add_opinion = {
				modifier = failure_opinion
				target = scope:mena
				opinion = -5
			}
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -10
			}
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -20
			}
		}
		add_character_modifier = {
			modifier = RICE_nubia_blames_subordinates
			years = 10
		}
	}

	after = {
		custom_tooltip = nubia.0149.tooltip
	}

}




# Mena fails to catch the slaves - Marianos takes note
nubia.0150 = {
	type = character_event
	title = nubia.0150.t
	desc = {
		desc = nubia.0150.desc.intro
		desc = nubia.0150.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:mena = {
						has_character_modifier = RICE_nubia_blames_subordinates
					}
				}
				desc = nubia.0150.desc.blame_others
			}
			desc = nubia.0150.desc.blame_self
		}
		desc = nubia.0150.desc.conclusion
	}
	theme = administrative
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = scope:teniellasi
		animation = anger
	}

	right_portrait = {
		character = scope:mena
		animation = shame
	}

	immediate = {
		if = {
			limit = {
				scope:mena = {
					has_character_modifier = RICE_nubia_blames_subordinates
				}
			}
			show_as_tooltip = {
				scope:mena = {
					add_character_modifier = {
						modifier = RICE_nubia_blames_subordinates
						years = 10
					}
					stress_impact = {
						humble = miniscule_stress_impact_gain
						just = miniscule_stress_impact_gain
						craven = miniscule_stress_impact_gain
						calm = miniscule_stress_impact_gain
					}
				}
				scope:marianos = {
					stress_impact = {
						diligent = miniscule_stress_impact_gain
						ambitious = miniscule_stress_impact_gain
						just = miniscule_stress_impact_gain
					}
					add_prestige = minor_prestige_loss
					trigger_event = nubia.0151
					add_opinion = {
						modifier = failure_opinion
						target = scope:mena
						opinion = -5
					}
				}
				scope:teniellasi = {
					add_opinion = {
						modifier = disappointed_opinion
						target = scope:marianos
						opinion = -10
					}
					add_opinion = {
						modifier = angry_opinion
						target = scope:mena
						opinion = -20
					}
				}
			}
		}
		else = {
			show_as_tooltip = {
				scope:mena = {
					add_prestige = medium_prestige_loss
					add_legitimacy = miniscule_legitimacy_loss
					stress_impact = {
						arrogant = miniscule_stress_impact_gain
						ambitious = miniscule_stress_impact_gain
						arbitrary = miniscule_stress_impact_gain
						brave = miniscule_stress_impact_gain
					}
				}
				scope:marianos = {
					stress_impact = {
						diligent = miniscule_stress_impact_gain
						ambitious = miniscule_stress_impact_gain
						just = miniscule_stress_impact_gain
					}
					add_prestige = minor_prestige_loss
					trigger_event = nubia.0150
					add_opinion = {
						modifier = failure_opinion
						target = scope:mena
						opinion = -20
					}
				}
				scope:teniellasi = {
					add_opinion = {
						modifier = disappointed_opinion
						target = scope:marianos
						opinion = -10
					}
					add_opinion = {
						modifier = angry_opinion
						target = scope:mena
						opinion = -40
					}
				}	
			}
		}
	}

	option = { # Oh well
		name = nubia.0150.a
	}

	option = { # Compensate Teniellasi
		name = nubia.0150.b
		trigger = {
			OR = {
				is_ai = no
				gold >= 50
			}
		}
		add_prestige = minor_prestige_gain
		pay_short_term_gold = {
			target = scope:teniellasi
			gold = 50
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = RICE_opinion_compensated_for_lost_slaves
				target = scope:marianos
			}
		}	
	}

}


# Marianos is notified that Mena was unable to receive the letter properly but the slaves were found and caught by other officials
nubia.0151 = {
	type = character_event
	title = nubia.0151.t
	desc = nubia.0151.desc
	theme = stewardship_domain_focus

	left_portrait = {
		character = scope:marianos
		animation = personality_forgiving
	}
	
	right_portrait = {
		character = scope:teniellasi
		animation = personality_content
	}

	option = {
		name = nubia.0151.a
		scope:marianos = {
			RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			add_prestige = medium_prestige_gain
			trigger_event = nubia.0155
			add_opinion = {
				modifier = pleased_opinion
				target = scope:mena
				opinion = 25
			}
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = pleased_opinion
				target = scope:marianos
				opinion = 20
			}
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 20
			}
		}
	}

}


# Mena catches the slaves... let them go, buy their freedom, or capture them?
nubia.0152 = {
	type = character_event
	title = nubia.0152.t
	desc = nubia.0152.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_valley }

	left_portrait = {
		character = scope:slave_1
		animation = delirium
		camera = camera_event_very_left
	}

	right_portrait = {
		character = scope:slave_2
		animation = beg
		camera = camera_event_very_left
	}

	immediate = {
		random_list = {
			15 = {
				random_county_in_region = {
					region = world_africa_east
					save_scope_as = county
				}
			}
			5 = {
				random_county_in_region = {
					region = RICE_greater_darfur
					save_scope_as = county
				}
			}
		}
		random_list = {
			20 = {
				scope:county.culture = {
					save_scope_as = culture
				}
				scope:county.faith = {
					save_scope_as = faith
				}
			}
			5 = {
				faith:dinka_pagan = {
					save_scope_as = faith
				}
				culture:luo = {
					save_scope_as = culture
				}
			}
			5 = {
				faith:south_omotic_pagan = {
					save_scope_as = faith
				}
				random_list = {
					10 = {
						culture:oropom = {
							save_scope_as = culture
						}
					}
					10 = {
						culture:aari = {
							save_scope_as = culture
						}
					}
				}
			}
			5 = {
				faith:turkana_pagan = {
					save_scope_as = faith
				}
				random_list = {
					10 = {
						culture:sirikwa = {
							save_scope_as = culture
						}
					}
					10 = {
						culture:kalenjin = {
							save_scope_as = culture
						}					
					}
					10 = {
						culture:bari = {
							save_scope_as = culture
						}				
					}
					10 = {
						culture:maasai = {
							save_scope_as = culture
						}					
					}
					10 = {
						culture:ateker = {
							save_scope_as = culture
						}					
					}
				}
			}
		}	
		create_character = {
			location = root.location
			template = RICE_slave_generic_template
			save_scope_as = slave_1
			culture = scope:culture
			faith = scope:faith
		}
		create_character = {
			location = root.location
			template = RICE_slave_generic_template
			save_scope_as = slave_2
			culture = scope:culture
			faith = scope:faith
		}
	}

	option = { # Let them go
		name = nubia.0152.a
		add_prestige = medium_prestige_loss
		add_legitimacy = miniscule_legitimacy_loss
		scope:marianos = {
			stress_impact = {
				diligent = miniscule_stress_impact_gain
				ambitious = miniscule_stress_impact_gain
				just = miniscule_stress_impact_gain
			}
			add_prestige = minor_prestige_loss
			trigger_event = nubia.0153
			add_opinion = {
				modifier = failure_opinion
				target = scope:mena
				opinion = -20
			}
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -10
			}
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -40
			}
		}
		stress_impact = {
			callous = minor_stress_impact_gain
			just = minor_stress_impact_gain
			wrathful = minor_stress_impact_gain
			diligent = minor_stress_impact_gain
		}
		scope:slave_1 = {
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 100
			}
			add_character_modifier = {
				modifier = former_slave_npc_modifier
			}
		}
		scope:slave_2 = {
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 100
			}
			add_character_modifier = {
				modifier = former_slave_npc_modifier
			}
		}
		# hidden_effect = {
		# 	scope:slave_1 = {
		# 		death = {
		# 			death_reason = death_vanished
		# 		}
		# 	}
		# 	scope:slave_2 = {
		# 		death = {
		# 			death_reason = death_vanished
		# 		}
		# 	}
		# }
		ai_chance = {
			factor = 10
			modifier = {
				has_trait = compassionate
				add = 5
			}
			modifier = {
				has_trait = forgiving
				add = 1
			}
			modifier = {
				has_trait = callous
				add = -4
			}
			modifier = {
				has_trait = just
				add = -4
			}
			modifier = {
				has_trait = wrathful
				add = -2
			}
			modifier = {
				has_trait = diligent
				add = -2
			}
		}
	}

	option = { # Purchase their freedom
		name = nubia.0152.b
		trigger = {
			OR = {
				gold >= 100
				is_ai = no
			}
		}
		if = {
			limit = {
				scope:teniellasi = {
					is_alive = yes
				}
			}
			pay_short_term_gold = {
				target = scope:teniellasi
				gold = 100
			}
		}
		else = {
			remove_short_term_gold = 100
		}
		scope:marianos = {
			RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			trigger_event = nubia.0154
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = annoyed_opinion
				target = scope:mena
				opinion = -10
			}
		}
		add_courtier = scope:slave_1
		scope:slave_1 = {
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 100
			}
			add_character_modifier = {
				modifier = former_slave_npc_modifier
			}
		}
		add_courtier = scope:slave_2
		scope:slave_2 = {
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 100
			}
			add_character_modifier = {
				modifier = former_slave_npc_modifier
			}
		}
		if = {
			limit = {
				can_add_hook = {
					target = scope:slave_1
					type = loyalty_hook
				}
			}
			add_hook = {
				target = scope:slave_1
				type = loyalty_hook
			}
		}
		if = {
			limit = {
				can_add_hook = {
					target = scope:slave_2
					type = loyalty_hook
				}
			}
			add_hook = {
				target = scope:slave_2
				type = loyalty_hook
			}
		}
		stress_impact = {
			callous = minor_stress_impact_gain
			greedy = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
			paranoid = minor_stress_impact_gain
		}

		ai_chance = {
			factor = 10
			modifier = {
				has_trait = compassionate
				add = 5
			}
			modifier = {
				has_trait = forgiving
				add = 2
			}
			modifier = {
				has_trait = callous
				add = -4
			}
			modifier = {
				has_trait = paranoid
				add = -3
			}
			modifier = {
				has_trait = arrogant
				add = -3
			}
			modifier = {
				has_trait = diligent
				add = -2
			}
		}
	}

	option = { # Return them
		name = nubia.0152.c
		add_prestige = medium_prestige_gain
		add_legitimacy = miniscule_legitimacy_gain
		RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
		scope:marianos = {
			RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			add_prestige = medium_prestige_gain
			trigger_event = nubia.0155
			add_opinion = {
				modifier = pleased_opinion
				target = scope:mena
				opinion = 25
			}
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = pleased_opinion
				target = scope:marianos
				opinion = 20
			}
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 20
			}
		}
		scope:slave_1 = {
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -100
			}
		}
		scope:slave_2 = {
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -100
			}
		}
		hidden_effect = {
			scope:slave_1 = {
				death = {
					death_reason = death_vanished
				}
			}
			scope:slave_2 = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		stress_impact = {
			compassionate = minor_stress_impact_gain
		}

		ai_chance = {
			factor = 25
			modifier = {
				has_trait = diligent
				add = 3
			}
			modifier = {
				has_trait = just
				add = 2
			}
			modifier = {
				has_trait = ambitious
				add = 2
			}
			modifier = {
				has_trait = compassionate
				add = 2
			}
		}
	}

}




# Mena lets the slaves go - Marianos learns what happened
nubia.0153 = {
	type = character_event
	title = nubia.0153.t
	desc = {
		desc = nubia.0150.desc.intro
		desc = nubia.0153.desc
	}
	theme = administrative
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:marianos
		animation = worry
	}
	
	right_portrait = {
		character = scope:teniellasi
		animation = anger
	}

	lower_right_portrait = scope:mena
	
	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_prestige = medium_prestige_loss
				add_legitimacy = miniscule_legitimacy_loss
				stress_impact = {
					callous = minor_stress_impact_gain
					just = minor_stress_impact_gain
					wrathful = minor_stress_impact_gain
					diligent = minor_stress_impact_gain
				}	
			}
			scope:marianos = {
				stress_impact = {
					diligent = miniscule_stress_impact_gain
					ambitious = miniscule_stress_impact_gain
					just = miniscule_stress_impact_gain
				}
				add_prestige = minor_prestige_loss
				add_opinion = {
					modifier = failure_opinion
					target = scope:mena
					opinion = -20
				}
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = disappointed_opinion
					target = scope:marianos
					opinion = -10
				}
				add_opinion = {
					modifier = angry_opinion
					target = scope:mena
					opinion = -40
				}
			}	
		}		
	}

	option = { # Oh well
		name = nubia.0150.a
	}

	option = { # Compensate Teniellasi
		name = nubia.0150.b
		trigger = {
			OR = {
				is_ai = no
				gold >= 50
			}
		}
		add_prestige = minor_prestige_gain
		pay_short_term_gold = {
			target = scope:teniellasi
			gold = 50
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = RICE_opinion_compensated_for_lost_slaves
				target = scope:marianos
			}
		}	
	}
}

# Mena buys the slaves' freedom - Marianos learns what happened
nubia.0154 = {
	type = character_event
	title = nubia.0154.t
	desc = {
		desc = nubia.0150.desc.intro
		desc = nubia.0154.desc
	}
	theme = administrative
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:marianos
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:teniellasi
		animation = personality_irrational
	}

	lower_right_portrait = scope:mena
	
	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_courtier = scope:slave_1
				add_courtier = scope:slave_2
				stress_impact = {
					callous = minor_stress_impact_gain
					greedy = minor_stress_impact_gain
					lazy = minor_stress_impact_gain
					arrogant = minor_stress_impact_gain
					paranoid = minor_stress_impact_gain
				}
				if = {
					limit = {
						scope:teniellasi = {
							is_alive = yes
						}
					}
					pay_short_term_gold = {
						target = scope:teniellasi
						gold = 100
					}
				}
				else = {
					remove_short_term_gold = 100
				}
			}
			scope:marianos = {
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = annoyed_opinion
					target = scope:mena
					opinion = -10
				}
			}
			scope:slave_1 = {
				add_opinion = {
					modifier = grateful_opinion
					target = scope:mena
					opinion = 100
				}
				add_character_modifier = {
					modifier = former_slave_npc_modifier
				}
			}
			scope:slave_2 = {
				add_opinion = {
					modifier = grateful_opinion
					target = scope:mena
					opinion = 100
				}
				add_character_modifier = {
					modifier = former_slave_npc_modifier
				}
			}	
		}		
	}

	option = { # Ok
		name = nubia.0154.a
	}
}

# Mena returns the slaves - Marianos learns what happened
nubia.0155 = {
	type = character_event
	title = nubia.0155.t
	desc = {
		desc = nubia.0150.desc.intro
		desc = nubia.0155.desc
	}
	theme = administrative
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:marianos
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:teniellasi
		animation = happiness
	}

	lower_right_portrait = scope:mena
	
	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_prestige = medium_prestige_gain
				add_legitimacy = miniscule_legitimacy_gain
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			}
			scope:marianos = {
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				add_prestige = medium_prestige_gain
				trigger_event = nubia.0155
				add_opinion = {
					modifier = pleased_opinion
					target = scope:mena
					opinion = 25
				}
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = pleased_opinion
					target = scope:marianos
					opinion = 20
				}
				add_opinion = {
					modifier = grateful_opinion
					target = scope:mena
					opinion = 20
				}
			}
		}		
	}

	option = { # Ok
		name = nubia.0155.a
	}
}



######################################################################################
# 
# BAQT FRONTIER ADMINISTRATION DECISION
# 
# nubia.0160-nubia.0179
# 
######################################################################################


# Diplomacy: Correspond with Counterpart
# Decide what to send to the other party
nubia.0160 = {
	type = character_event
	title = nubia.0160.t
	desc = nubia.0160.desc
	theme = diplomacy_foreign_affairs_focus
	# override_background = {
	# 	trigger = { has_title = title:d_nobatia }
	# 	reference = RICE_background_nile_private_courtyard
	# }
	# override_background = {
	# 	trigger = { NOT = { has_title = title:d_nobatia } }
	# 	reference = RICE_background_nile_private_courtyard
	# }
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	left_portrait = {
		character = scope:giver
		animation = chancellor
	}

	lower_center_portrait = scope:receiver

	immediate = {
		save_scope_as = giver
		top_liege = {
			save_scope_as = top_liege
		}
		top_liege.primary_title = {
			save_scope_as = realm_title
		}
		if = {
			limit = {				
				has_title = title:d_nobatia
				exists = title:c_aswan.holder
			}
			title:c_aswan.holder = {
				save_scope_as = receiver
			}
		}
		else_if = {
			limit = {				
				has_title = title:c_aswan
				exists = title:d_nobatia.holder
			}
			title:d_nobatia.holder = {
				save_scope_as = receiver
			}
		}
	}

	# Ordinary message
	option = {
		name = nubia.0160.a
		duel = {
			skills = { diplomacy }
			value = mediocre_skill_rating
			# Success.
			40 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				custom_description_no_bullet = {
					text = nubia.0160.success.tooltip
				}
				set_variable = {
					name = RICE_baqt_correspondence_impression
					value = flag:good
					days = 1
				}
			}
			# Neutral
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
				}
				custom_description_no_bullet = {
					text = nubia.0160.neutral.tooltip
				}
				set_variable = {
					name = RICE_baqt_correspondence_impression
					value = flag:neutral
					days = 1
				}
			}
			# Failure
			40 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				custom_description_no_bullet = {
					text = nubia.0160.failure.tooltip
				}
				set_variable = {
					name = RICE_baqt_correspondence_impression
					value = flag:bad
					days = 1
				}
			}
		}
	}

	# Send a gift
	# Amount depends on the title tier of the other party
	option = {
		name = nubia.0160.b
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_frontier_gift_amount
			}
		}
		pay_short_term_gold = {
			target = scope:receiver
			gold = RICE_egypt_nubia_frontier_gift_amount
		}
		# show_as_tooltip = {
		# 	pay_short_term_gold = {
		# 		target = scope:receiver
		# 		gold = RICE_egypt_nubia_frontier_gift_amount
		# 	}
		# 	# remove_short_term_gold = RICE_egypt_nubia_frontier_gift_amount
		# 	# scope:receiver = {
		# 	# 	add_gold = RICE_egypt_nubia_frontier_gift_amount_receiver
		# 	# }
		# }
		add_character_flag = {
			flag = RICE_nubia_correspondence_give_gift
			days = 1
		}
		duel = {
			skills = { diplomacy }
			value = mediocre_skill_rating
			# Success.
			70 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				custom_description_no_bullet = {
					text = nubia.0160.success.tooltip
				}
				set_variable = {
					name = RICE_baqt_correspondence_impression
					value = flag:good
					days = 1
				}
			}
			# Neutral
			40 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
				}
				custom_description_no_bullet = {
					text = nubia.0160.neutral.tooltip
				}
				set_variable = {
					name = RICE_baqt_correspondence_impression
					value = flag:neutral
					days = 1
				}
			}
			# Failure
			30 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				custom_description_no_bullet = {
					text = nubia.0160.failure.tooltip
				}
				set_variable = {
					name = RICE_baqt_correspondence_impression
					value = flag:bad
					days = 1
				}
			}
		}
	}

	after = {
		custom_tooltip = RICE_baqt_frontier_correpsondence_effect_1_tt
		scope:receiver = {
			trigger_event = nubia.0161
		}
	}

}



# Read the letter
nubia.0161 = {
	type = character_event
	title = nubia.0161.t
	desc = {
		desc = nubia.0161.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:giver = { var:RICE_baqt_correspondence_impression = flag:good }
				}
				desc = nubia.0161.desc.good_letter
			}
			triggered_desc = {
				trigger = {
					scope:giver = { var:RICE_baqt_correspondence_impression = flag:neutral }
				}
				desc = nubia.0161.desc.neutral_letter
			}
			triggered_desc = {
				trigger = {
					scope:giver = { var:RICE_baqt_correspondence_impression = flag:bad }
				}
				desc = nubia.0161.desc.bad_letter
			}
		}
		desc = nubia.0161.desc.middle
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:giver = { var:RICE_baqt_correspondence_impression = flag:good }
				}
				desc = nubia.0161.desc.good
			}
			triggered_desc = {
				trigger = {
					scope:giver = { var:RICE_baqt_correspondence_impression = flag:neutral }
				}
				desc = nubia.0161.desc.neutral
			}
			triggered_desc = {
				trigger = {
					scope:giver = { var:RICE_baqt_correspondence_impression = flag:bad }
				}
				desc = nubia.0161.desc.bad
			}
		}
		triggered_desc = {
			trigger = {
				scope:giver = { has_character_flag = RICE_nubia_correspondence_give_gift }
			}
			desc = nubia.0161.desc.gift
		}
	}
	theme = diplomacy_foreign_affairs_focus
	# override_background = {
	# 	trigger = { has_title = title:d_nobatia }
	# 	reference = RICE_background_nile_private_courtyard
	# }
	# override_background = {
	# 	trigger = { NOT = { has_title = title:d_nobatia } }
	# 	reference = RICE_background_nile_private_courtyard
	# }
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	left_portrait = {
		character = scope:receiver
		animation = chancellor
	}

	lower_center_portrait = scope:giver

	immediate = {
		show_as_tooltip = {
			if = {
				limit = {
					scope:giver = { has_character_flag = RICE_nubia_correspondence_give_gift }
				}
				pay_short_term_gold = {
					target = scope:receiver
					gold = RICE_egypt_nubia_frontier_gift_amount
				}
			}
		}
	}

	# Send positive message back
	option = {
		name = nubia.0161.a
		if = {
			limit = {
				scope:giver = { var:RICE_baqt_correspondence_impression = flag:bad }
			}
			add_prestige = medium_prestige_loss
			custom_tooltip = nubia.0161.a.tooltip.bad
		}
		else = {
			custom_tooltip = nubia.0161.a.tooltip
		}
		ai_chance = {
			base = 60
			modifier = {
				add = 50
				scope:giver = {
					has_character_flag = RICE_nubia_correspondence_give_gift
				}
			}
			modifier = {
				add = 10
				has_trait = gregarious
			}
			modifier = {
				add = 10
				has_trait = diligent
			}
			modifier = {
				add = 10
				has_trait = trusting
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = gregarious
				}
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = compassionate
				}
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = generous
				}
			}
			modifier = {
				add = 25
				scope:giver = {
					diplomacy >= high_skill_rating
				}
			}
			modifier = {
				add = 25
				scope:giver = {
					diplomacy >= medium_skill_rating
				}
			}
		}
		scope:giver = {
			RICE_baqt_frontier_decision_trait_gain_tooltip_effect = yes
			custom_tooltip = RICE_baqt_frontier_correpsondence_success_1_tt
			custom_tooltip = RICE_baqt_frontier_correpsondence_success_2_tt
			custom_tooltip = RICE_baqt_frontier_correpsondence_success_3_tt
			trigger_event = nubia.0162
		}
	}

	# Send positive message with a gift

	# Send negative message back
	option = {
		name = nubia.0161.b
		if = {
			limit = {
				scope:giver = { var:RICE_baqt_correspondence_impression = flag:good }
			}
			add_prestige = medium_prestige_loss
			custom_tooltip = nubia.0161.b.tooltip.bad
		}
		else = {
			custom_tooltip = nubia.0161.b.tooltip
		}
		ai_chance = {
			base = 40
			modifier = {
				add = 10
				has_trait = arbitrary
			}
			modifier = {
				add = 10
				has_trait = paranoid
			}
			modifier = {
				add = 10
				has_trait = eccentric
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = shy
				}
			}
			modifier = {
				add = 10
				scope:giver = {
					OR = {
						has_trait = sadistic
						has_trait = callous
					}
				}
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = arbitrary
				}
			}
			modifier = {
				add = 25
				scope:giver = {
					diplomacy <= mediocre_skill_rating
				}
			}
			modifier = {
				add = 25
				scope:giver = {
					diplomacy <= low_skill_rating
				}
			}
		}
		scope:giver = {
			RICE_baqt_frontier_decision_trait_gain_tooltip_effect = yes
			custom_tooltip = RICE_baqt_frontier_correpsondence_failure_1_tt
			custom_tooltip = RICE_baqt_frontier_correpsondence_failure_2_tt
			custom_tooltip = RICE_baqt_frontier_correpsondence_failure_3_tt
			trigger_event = nubia.0163
		}
	}

	after = {
		RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
		# if = {
		# 	limit = {
		# 		scope:giver = {
		# 			has_character_flag = RICE_nubia_correspondence_give_gift
		# 		}
		# 	}
		# 	add_gold = RICE_egypt_nubia_frontier_gift_amount_receiver
		# }
		if = {
			limit = {
				scope:giver = {
					has_variable = RICE_baqt_correspondence_impression
				}
			}
			scope:giver = {
				remove_variable = RICE_baqt_correspondence_impression
			}
		}
	}

}

# The receiver likes the correspondence
nubia.0162 = {
	type = character_event
	title = nubia.0162.t
	desc = {
		desc = nubia.0162.desc.intro
		desc = nubia.0162.desc
	}
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:receiver
		animation = personality_compassionate
	}
	
	right_portrait = {
		character = scope:giver
		animation = personality_content
	}

	immediate = {
		scope:receiver = {
			show_as_tooltip = {
				if = {
					limit = {
						scope:giver = { var:RICE_baqt_correspondence_impression = flag:bad }
					}
					add_prestige = medium_prestige_loss
					custom_tooltip = nubia.0161.a.tooltip.bad
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			}
		}
	}

	# Determine how much success
	option = {
		name = nubia.0162.a
		duel = {
			skill = diplomacy
			value = mediocre_skill_rating
			10 = {
				custom_tooltip = nubia.0162.a.small_success
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.9
				}
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = ROOT
					title = nubia.0162.a.small_success
					add_prestige = minor_prestige_gain
					RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
					scope:giver = {
						add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_good
							target = scope:receiver
							opinion = 5
						}
						reverse_add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_good
							target = scope:receiver
							opinion = 5
						}
						if = {
							limit = {
								RICE_nubia_northern_frontier_manager_trigger = yes
							}
							situation:RICE_nubia_baqt_situation ?= {
								trigger_situation_catalyst = {
									catalyst = catalyst_situation_RICE_baqt_nubian_frontier_correspondence_success
									character = scope:giver
								}
							}
						}
						if = {
							limit = {
								RICE_egypt_southern_frontier_manager_trigger = yes
							}
							situation:RICE_nubia_baqt_situation ?= {
								trigger_situation_catalyst = {
									catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_correspondence_success
									character = scope:giver
								}
							}
						}
					}
				}	
			}
			10 = {
				custom_tooltip = nubia.0162.a.large_success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.9
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = ROOT
					title = nubia.0162.a.large_success
					add_prestige = minor_prestige_gain
					RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
					scope:giver = {
						add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_good
							target = scope:receiver
							opinion = 10
						}
						reverse_add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_good
							target = scope:receiver
							opinion = 10
						}
						progress_towards_friend_effect = {
							CHARACTER = scope:receiver
							OPINION = default_friend_opinion
							REASON = RICE_nubia_egypt_border_governors_reason_good
						}
						if = {
							limit = {
								RICE_nubia_northern_frontier_manager_trigger = yes
							}
							situation:RICE_nubia_baqt_situation ?= {
								trigger_situation_catalyst = {
									catalyst = catalyst_situation_RICE_baqt_nubian_frontier_correspondence_success
									character = scope:giver
								}
							}
						}
						if = {
							limit = {
								RICE_egypt_southern_frontier_manager_trigger = yes
							}
							situation:RICE_nubia_baqt_situation ?= {
								trigger_situation_catalyst = {
									catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_correspondence_success
									character = scope:giver
								}
							}
						}
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_correspondence_give_gift
			}
			remove_character_flag = RICE_nubia_correspondence_give_gift
		}
	}

}

# The receiver doesn't like the correspondence
nubia.0163 = {
	type = character_event
	title = nubia.0163.t
	desc = {
		desc = nubia.0162.desc.intro
		desc = nubia.0163.desc
	}
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:receiver
		animation = disapproval
	}
	
	right_portrait = {
		character = scope:giver
		animation = sadness
	}

	immediate = {
		scope:receiver = {
			show_as_tooltip = {
				if = {
					limit = {
						scope:giver = { var:RICE_baqt_correspondence_impression = flag:good }
					}
					add_prestige = medium_prestige_loss
					custom_tooltip = nubia.0161.b.tooltip.bad.giver
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			}
		}
	}

	# Determine how much failure
	option = {
		name = nubia.0163.a
		duel = {
			skill = diplomacy
			value = mediocre_skill_rating
			10 = {
				custom_tooltip = nubia.0163.a.large_failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.9
				}
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = ROOT
					title = nubia.0163.a.large_failure
					add_prestige = medium_prestige_loss
					RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
					scope:giver = {
						add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_bad
							target = scope:receiver
							opinion = -10
						}
						reverse_add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_bad
							target = scope:receiver
							opinion = -10
						}
						random = {
							chance = 25
							progress_towards_rival_effect = {
								CHARACTER = scope:receiver
								OPINION = default_rival_opinion
								REASON = RICE_nubia_egypt_border_governors_reason_bad
							}
						}
						if = {
							limit = {
								RICE_nubia_northern_frontier_manager_trigger = yes
							}
							situation:RICE_nubia_baqt_situation ?= {
								trigger_situation_catalyst = {
									catalyst = catalyst_situation_RICE_baqt_nubian_frontier_correspondence_failure
									character = scope:giver
								}
							}
						}
						if = {
							limit = {
								RICE_egypt_southern_frontier_manager_trigger = yes
							}
							situation:RICE_nubia_baqt_situation ?= {
								trigger_situation_catalyst = {
									catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_correspondence_failure
									character = scope:giver
								}
							}
						}
					}
				}	
			}
			10 = {
				custom_tooltip = nubia.0163.a.small_failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.9
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = ROOT
					title = nubia.0163.a.small_failure
					add_prestige = minor_prestige_loss
					RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
					scope:giver = {
						add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_bad
							target = scope:receiver
							opinion = -5
						}
						reverse_add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_bad
							target = scope:receiver
							opinion = -5
						}
						if = {
							limit = {
								RICE_nubia_northern_frontier_manager_trigger = yes
							}
							situation:RICE_nubia_baqt_situation ?= {
								trigger_situation_catalyst = {
									catalyst = catalyst_situation_RICE_baqt_nubian_frontier_correspondence_failure
									character = scope:giver
								}
							}
						}
						if = {
							limit = {
								RICE_egypt_southern_frontier_manager_trigger = yes
							}
							situation:RICE_nubia_baqt_situation ?= {
								trigger_situation_catalyst = {
									catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_correspondence_failure
									character = scope:giver
								}
							}
						}
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_correspondence_give_gift
			}
			remove_character_flag = RICE_nubia_correspondence_give_gift
		}
	}

}


# Fortify borders - spend extra money?
nubia.0164 = {
	type = character_event
	title = nubia.0164.t
	desc = nubia.0164.desc
	theme = martial
	override_background = { reference = RICE_background_nile_travel }
	
	right_portrait = {
		character = root
		animation = survey
	}
	
	option = { # Ok
		name = nubia.0164.a
		#hidden_effect = {
			duel = {
				skills = { martial }
				value = mediocre_skill_rating
				# Success.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					desc = RICE_baqt_frontier_decision_success
					custom_tooltip = RICE_baqt_frontier_fortify_success_1_tt
					custom_tooltip = RICE_baqt_frontier_fortify_success_2_tt
					trigger_event = nubia.0165
				}
				# Failure.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					desc = RICE_baqt_frontier_decision_failure
					custom_tooltip = RICE_baqt_frontier_fortify_failure_1_tt
					custom_tooltip = RICE_baqt_frontier_fortify_failure_2_tt
					trigger_event = nubia.0166
				}
			}
		#}
	}
	
	option = { # Ok
		name = nubia.0164.b	
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_boost_cost_amount
			}
		}
		remove_short_term_gold = RICE_egypt_nubia_boost_cost_amount
		#hidden_effect = {
			duel = {
				skills = { martial }
				value = mediocre_skill_rating
				# Success.
				70 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					custom_tooltip = nubia.0164.success
					custom_tooltip = RICE_baqt_frontier_fortify_success_1_tt
					custom_tooltip = RICE_baqt_frontier_fortify_success_2_tt
					trigger_event = nubia.0165
				}
				# Failure.
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					custom_tooltip = nubia.0164.mixed
					custom_tooltip = RICE_baqt_frontier_fortify_failure_1_tt
					custom_tooltip = RICE_baqt_frontier_fortify_failure_2_tt
					trigger_event = nubia.0166
				}
			}
		#}
	}

}

# Fortify borders - success
nubia.0165 = {
	type = character_event
	title = nubia.0165.t
	desc = {
		desc = nubia.0165.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_fortify_major_success
				}
				desc = nubia.0165.desc.major
			}
			desc = nubia.0165.desc.minor
		}
	}
	theme = martial
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	right_portrait = {
		character = root
		animation = war_over_win
	}

	immediate = {
		if = {
			limit = {
				RICE_nubia_northern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_nubian_frontier_fortify_success
					character = root
				}
			}
		}
		if = {
			limit = {
				RICE_egypt_southern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_fortify_success
					character = root
				}
			}
		}
		# Determine how much success
		duel = {
			skills = { martial }
			value = mediocre_skill_rating
			# Great Success.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_fortify_major_success
					days = 1
				}
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_county_control = minor_county_control_gain
					add_county_modifier = {
						modifier = RICE_baqt_greatly_improved_defenses
						years = 10
					}	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_county_control = minor_county_control_gain
				# 	add_county_modifier = {
				# 		modifier = RICE_baqt_greatly_improved_defenses
				# 		years = 10
				# 	}	
				# }
			}
			# Minor Success
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_county_control = miniscule_county_control_gain
					add_county_modifier = {
						modifier = RICE_baqt_greatly_improved_defenses
						years = 10
					}	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_county_control = miniscule_county_control_gain
				# 	add_county_modifier = {
				# 		modifier = RICE_baqt_greatly_improved_defenses
				# 		years = 10
				# 	}	
				# }
			}
		}
	}
	
	option = { # Ok
		name = nubia.0165.a
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_fortify_major_success
			}
			remove_character_flag = RICE_nubia_fortify_major_success
		}
	}

}

# Fortify borders - mixed results
nubia.0166 = {
	type = character_event
	title = nubia.0166.t
	desc = {
		desc = nubia.0166.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_fortify_major_failure
				}
				desc = nubia.0166.desc.major
			}
			desc = nubia.0166.desc.minor
		}
	}
	theme = martial
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	right_portrait = {
		character = root
		animation = war_over_win
	}

	immediate = {
		if = {
			limit = {
				RICE_nubia_northern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_nubian_frontier_fortify_failure
					character = root
				}
			}
		}
		if = {
			limit = {
				RICE_egypt_southern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_fortify_failure
					character = root
				}
			}
		}
		# Determine how much success
		duel = {
			skills = { martial }
			value = mediocre_skill_rating
			# Minor failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_county_control = miniscule_county_control_loss
					add_county_modifier = {
						modifier = RICE_baqt_mixed_result_defenses
						years = 10
					}	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_county_control = miniscule_county_control_loss
				# 	add_county_modifier = {
				# 		modifier = RICE_baqt_mixed_result_defenses
				# 		years = 10
				# 	}	
				# }
			}
			# Major failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_fortify_major_failure
					days = 1
				}
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_county_control = miniscule_county_control_loss
					add_county_modifier = {
						modifier = RICE_baqt_mixed_result_defenses
						years = 10
					}	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_county_control = minor_county_control_loss
				# 	add_county_modifier = {
				# 		modifier = RICE_baqt_mixed_result_defenses
				# 		years = 10
				# 	}	
				# }
			}
		}
	}

	option = { # Ok
		name = nubia.0166.a
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_fortify_major_failure
			}
			remove_character_flag = RICE_nubia_fortify_major_failure
		}
	}

}





# Oversee land sales - spend extra money?
nubia.0167 = {
	type = character_event
	title = nubia.0167.t
	desc = nubia.0167.desc
	theme = stewardship
	override_background = { reference = council_chamber }
	
	left_portrait = {
		character = root
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:witness
		animation = thinking
	}
	
	immediate = {
		top_liege = {
			save_scope_as = top_liege
		}
		# top_liege.primary_title = {
		# 	save_scope_as = realm_title
		# }
		every_courtier = {
			limit = {
				is_available_ai_adult = yes
			}
			add_to_list = candidate_characters
		}
		every_vassal = {
			limit = {
				is_available_ai_adult = yes
			}
			add_to_list = candidate_characters
		}
		random_in_list = {
			list = candidate_characters
			save_scope_as = witness
		}
	}
	
	option = { # Ok
		name = nubia.0167.a
		#hidden_effect = {
			duel = {
				skills = { stewardship }
				value = mediocre_skill_rating
				# Success.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					desc = RICE_baqt_frontier_decision_success
					custom_tooltip = RICE_baqt_frontier_land_sales_success_1_tt
					custom_tooltip = RICE_baqt_frontier_land_sales_success_2_tt
					custom_tooltip = RICE_baqt_frontier_land_sales_success_3_tt
					trigger_event = nubia.0168
				}
				# Failure.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					desc = RICE_baqt_frontier_decision_failure
					custom_tooltip = RICE_baqt_frontier_land_sales_failure_1_tt
					custom_tooltip = RICE_baqt_frontier_land_sales_failure_2_tt
					custom_tooltip = RICE_baqt_frontier_land_sales_failure_3_tt
					trigger_event = nubia.0169
				}
			}
		#}
	}
	
	option = { # Ok
		name = nubia.0167.b		
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_boost_cost_amount
			}
		}
		remove_short_term_gold = RICE_egypt_nubia_boost_cost_amount
		#hidden_effect = {
			duel = {
				skills = { stewardship }
				value = mediocre_skill_rating
				# Success.
				70 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					desc = RICE_baqt_frontier_decision_success
					custom_tooltip = RICE_baqt_frontier_land_sales_success_1_tt
					custom_tooltip = RICE_baqt_frontier_land_sales_success_2_tt
					custom_tooltip = RICE_baqt_frontier_land_sales_success_3_tt
					trigger_event = nubia.0168
				}
				# Failure.
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					desc = RICE_baqt_frontier_decision_failure
					custom_tooltip = RICE_baqt_frontier_land_sales_failure_1_tt
					custom_tooltip = RICE_baqt_frontier_land_sales_failure_2_tt
					custom_tooltip = RICE_baqt_frontier_land_sales_failure_3_tt
					trigger_event = nubia.0169
				}
			}
		#}
	}

}

# Oversee land sales - success
nubia.0168 = {
	type = character_event
	title = nubia.0168.t
	desc = {
		desc = nubia.0168.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_land_sale_major_success
				}
				desc = nubia.0168.desc.major
			}
			desc = nubia.0168.desc.minor
		}
	}
	theme = stewardship
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:witness
		animation = happiness
	}

	immediate = {
		if = {
			limit = {
				RICE_nubia_northern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_nubian_frontier_land_sales_success
					character = root
				}
			}
		}
		if = {
			limit = {
				RICE_egypt_southern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_land_sales_success
					character = root
				}
			}
		}
		# Determine how much success
		duel = {
			skills = { stewardship }
			value = mediocre_skill_rating
			# Great Success.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_land_sale_major_success
					days = 1
				}
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_development_progress_with_overflow = minor_development_progress_gain	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_development_progress_with_overflow = minor_development_progress_gain	
				# }
				scope:witness = {
					add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_good
						target = root
						opinion = 10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_good
						target = root
						opinion = 10
					}
					progress_towards_friend_effect = {
						CHARACTER = root
						OPINION = default_friend_opinion
						REASON = RICE_nubia_egypt_land_sales_reason_good
					}
				}
			}
			# Minor Success
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_development_progress_with_overflow = minimal_development_progress_gain
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_development_progress_with_overflow = minimal_development_progress_gain
				# }
				scope:witness = {
					add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_good
						target = root
						opinion = 5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_good
						target = root
						opinion = 5
					}
					random = {
						chance = 25
						progress_towards_friend_effect = {
							CHARACTER = root
							OPINION = default_friend_opinion
							REASON = RICE_nubia_egypt_land_sales_reason_good
						}
					}
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0168.a
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_land_sale_major_success
			}
			remove_character_flag = RICE_nubia_land_sale_major_success
		}
	}

}

# Oversee land sales - mixed results
nubia.0169 = {
	type = character_event
	title = nubia.0169.t
	desc = {
		desc = nubia.0169.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_land_sale_major_failure
				}
				desc = nubia.0169.desc.major
			}
			desc = nubia.0169.desc.minor
		}
	}
	theme = stewardship
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:witness
		animation = disapproval
	}

	immediate = {
		if = {
			limit = {
				RICE_nubia_northern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_nubian_frontier_land_sales_failure
					character = root
				}
			}
		}
		if = {
			limit = {
				RICE_egypt_southern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_land_sales_failure
					character = root
				}
			}
		}
		# Determine how much failure
		duel = {
			skills = { stewardship }
			value = mediocre_skill_rating
			# Minor failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_development_progress_with_overflow = minimal_development_progress_loss
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_development_progress_with_overflow = minimal_development_progress_loss
				# }
				scope:witness = {
					add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_bad
						target = root
						opinion = -5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_bad
						target = root
						opinion = -5
					}
					random = {
						chance = 5
						progress_towards_rival_effect = {
							CHARACTER = root
							OPINION = default_rival_opinion
							REASON = RICE_nubia_egypt_land_sales_reason_bad
						}
					}
				}
			}
			# Major failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_land_sale_major_failure
					days = 1
				}
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_development_progress_with_overflow = minor_development_progress_loss
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_development_progress_with_overflow = minor_development_progress_loss	
				# }
				scope:witness = {
					add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_bad
						target = root
						opinion = -10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_bad
						target = root
						opinion = -10
					}
					random = {
						chance = 15
						progress_towards_rival_effect = {
							CHARACTER = root
							OPINION = default_rival_opinion
							REASON = RICE_nubia_egypt_land_sales_reason_bad
						}
					}
				}
			}
		}
	}

	option = { # Ok
		name = nubia.0169.a
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_land_sale_major_failure
			}
			remove_character_flag = RICE_nubia_land_sale_major_failure
		}
	}

}




# Scrutinize Travelers - spend extra money?
nubia.0170 = {
	type = character_event
	title = nubia.0170.t
	desc = nubia.0170.desc
	theme = intrigue
	override_background = { reference = RICE_background_nile_travel }
	
	right_portrait = {
		character = root
		animation = debating
	}
	
	# right_portrait = {
	# 	character = scope:neighbor
	# 	animation = thinking
	# }

	lower_right_portrait = scope:counterpart
	
	immediate = {
		save_scope_as = scrutinizer
		if = {
			limit = {				
				has_title = title:d_nobatia
				exists = title:c_aswan.holder
			}
			title:c_aswan.holder = {
				save_scope_as = counterpart
			}
		}
		else_if = {
			limit = {				
				has_title = title:c_aswan
				exists = title:d_nobatia.holder
			}
			title:d_nobatia.holder = {
				save_scope_as = counterpart
			}
		}
	}
	
	option = { # Ok
		name = nubia.0170.a
		#hidden_effect = {
			duel = {
				skills = { intrigue }
				value = mediocre_skill_rating
				# Success.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					desc = RICE_baqt_frontier_decision_success
					custom_tooltip = RICE_baqt_frontier_scrutinize_success_1_tt
					custom_tooltip = RICE_baqt_frontier_scrutinize_success_2_tt
					trigger_event = nubia.0171
				}
				# Failure.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					desc = RICE_baqt_frontier_decision_failure
					custom_tooltip = RICE_baqt_frontier_scrutinize_failure_1_tt
					custom_tooltip = RICE_baqt_frontier_scrutinize_failure_2_tt
					trigger_event = nubia.0172
				}
			}
		#}
	}
	
	option = { # Ok
		name = nubia.0170.b		
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_boost_cost_amount
			}
		}
		remove_short_term_gold = RICE_egypt_nubia_boost_cost_amount
		#hidden_effect = {
			duel = {
				skills = { intrigue }
				value = mediocre_skill_rating
				# Success.
				70 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					desc = RICE_baqt_frontier_decision_success
					custom_tooltip = RICE_baqt_frontier_scrutinize_success_1_tt
					custom_tooltip = RICE_baqt_frontier_scrutinize_success_2_tt
					trigger_event = nubia.0171
				}
				# Failure.
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					desc = RICE_baqt_frontier_decision_failure
					custom_tooltip = RICE_baqt_frontier_scrutinize_failure_1_tt
					custom_tooltip = RICE_baqt_frontier_scrutinize_failure_2_tt
					trigger_event = nubia.0172
				}
			}
		#}
	}

}


# Scrutinize Travelers - success
nubia.0171 = {
	type = character_event
	title = nubia.0171.t
	desc = {
		desc = nubia.0171.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_scrutinize_travelers_major_success
				}
				desc = nubia.0171.desc.major
			}
			desc = nubia.0171.desc.minor
		}
	}
	theme = intrigue
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = personality_callous
	}
	
	right_portrait = {
		character = scope:counterpart
		animation = personality_dishonorable
	}

	immediate = {
		if = {
			limit = {
				RICE_nubia_northern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_nubian_frontier_scrutinize_success
					character = root
				}
			}
		}
		if = {
			limit = {
				RICE_egypt_southern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_scrutinize_success
					character = root
				}
			}
		}
		# Determine how much success
		duel = {
			skills = { intrigue }
			value = mediocre_skill_rating
			# Great Success.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_scrutinize_travelers_major_success
					days = 1
				}
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_5
							years = 10
						}
					}
				}
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = root
						opinion = 10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = root
						opinion = 10
					}
				}
			}
			# Minor Success
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_5
							years = 10
						}
					}
				}
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = root
						opinion = 5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = root
						opinion = 5
					}
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0171.a
		# Notify counterpart
		scope:counterpart = {
			trigger_event = nubia.0173
		}
	}

}





# Scrutinize Travelers - failure
nubia.0172 = {
	type = character_event
	title = nubia.0172.t
	desc = {
		desc = nubia.0172.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_scrutinize_travelers_major_failure
				}
				desc = nubia.0172.desc.major
			}
			desc = nubia.0172.desc.minor
		}
	}
	theme = stewardship
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = shame
	}
	
	right_portrait = {
		character = scope:counterpart
		animation = disapproval
	}

	immediate = {
		if = {
			limit = {
				RICE_nubia_northern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_nubian_frontier_scrutinize_failure
					character = root
				}
			}
		}
		if = {
			limit = {
				RICE_egypt_southern_frontier_manager_trigger = yes
			}
			situation:RICE_nubia_baqt_situation ?= {
				trigger_situation_catalyst = {
					catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_scrutinize_failure
					character = root
				}
			}
		}
		# Determine how much failure
		duel = {
			skills = { intrigue }
			value = mediocre_skill_rating
			# Minor failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_5
							years = 10
						}
					}
				}				
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = root
						opinion = -5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = root
						opinion = -5
					}
				}
			}
			# Major failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_scrutinize_travelers_major_failure
					days = 1
				}
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_5
							years = 10
						}
					}
				}				
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = root
						opinion = -10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = root
						opinion = -10
					}
				}
			}
		}
	}

	option = { # Ok
		name = nubia.0172.a
		# Notify counterpart
		scope:counterpart = {
			trigger_event = nubia.0174
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_scrutinize_travelers_major_failure
			}
			remove_character_flag = RICE_nubia_scrutinize_travelers_major_failure
		}
	}

}


# Counterpart is notified about success
nubia.0173 = {
	type = letter_event
	opening = {
		desc = nubia.0173.opening
	}
	desc = nubia.0173.desc
	sender = scope:scrutinizer

	immediate = {
		show_as_tooltip = {
			if = {
				limit = {
					scope:scrutinizer = {
						has_character_flag = RICE_nubia_scrutinize_travelers_major_success
					}
				}
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = scope:scrutinizer
						opinion = 10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = scope:scrutinizer
						opinion = 10
					}
				}
			}
			else = {
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = scope:scrutinizer
						opinion = 5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = scope:scrutinizer
						opinion = 5
					}
				}
			}
			if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_1
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_1
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_2
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_2
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_3
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_3
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_4
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_4
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_5
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_5
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_1
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_1
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_2
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_2
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_3
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_3
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_4
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_4
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_5
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_5
						years = 10
					}
				}	
			}
		}
	}

	option = {
		name = nubia.0173.a
	}

	after = {
		if = {
			limit = {
				scope:scrutinizer = {
					has_character_flag = RICE_nubia_scrutinize_travelers_major_success
				}					
			}
			scope:scrutinizer = {
				remove_character_flag = RICE_nubia_scrutinize_travelers_major_success
			}	
		}
	}
	
}



# Counterpart is notified about failure
nubia.0174 = {
	type = letter_event
	opening = {
		desc = nubia.0174.opening
	}
	desc = nubia.0174.desc
	sender = scope:scrutinizer

	immediate = {
		show_as_tooltip = {
			if = {
				limit = {
					scope:scrutinizer = {
						has_character_flag = RICE_nubia_scrutinize_travelers_major_failure
					}
				}
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = scope:scrutinizer
						opinion = -10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = scope:scrutinizer
						opinion = -10
					}
				}
			}
			else = {
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = scope:scrutinizer
						opinion = -5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = scope:scrutinizer
						opinion = -5
					}
				}
			}
			if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_1
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_1
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_2
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_2
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_3
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_3
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_4
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_4
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_5
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_5
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_1
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_1
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_2
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_2
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_3
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_3
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_4
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_4
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_5
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_5
						years = 10
					}
				}	
			}
		}
	}

	option = {
		name = nubia.0174.a
	}

	after = {
		if = {
			limit = {
				scope:scrutinizer = {
					has_character_flag = RICE_nubia_scrutinize_travelers_major_failure
				}					
			}
			scope:scrutinizer = {
				remove_character_flag = RICE_nubia_scrutinize_travelers_major_failure
			}	
		}
	}
	
}




# Report to Superiors - spend extra money?
nubia.0175 = {
	type = character_event
	title = nubia.0175.t
	desc = nubia.0175.desc
	theme = learning
	override_background = { reference = council_chamber }
	
	right_portrait = {
		character = root
		animation = writing
	}

	lower_right_portrait = scope:liege
	
	immediate = {
		save_scope_as = reporter
		liege = {
			save_scope_as = liege
		}
		liege.primary_title = {
			save_scope_as = primary_title
		}
	}
	
	option = { # Ok
		name = nubia.0175.a
		#hidden_effect = {
			duel = {
				skills = { learning }
				value = mediocre_skill_rating
				# Success.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					desc = RICE_baqt_frontier_decision_success
					custom_tooltip = RICE_baqt_frontier_report_success_1_tt
					custom_tooltip = RICE_baqt_frontier_report_success_2_tt
					scope:liege = {
						trigger_event = nubia.0176
					}
				}
				# Failure.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					desc = RICE_baqt_frontier_decision_failure
					custom_tooltip = RICE_baqt_frontier_report_failure_1_tt
					custom_tooltip = RICE_baqt_frontier_report_failure_2_tt
					scope:liege = {
						trigger_event = nubia.0177
					}
				}
			}
		#}
	}
	
	option = { # Ok
		name = nubia.0175.b		
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_boost_cost_amount
			}
		}
		remove_short_term_gold = RICE_egypt_nubia_boost_cost_amount
		#hidden_effect = {
			duel = {
				skills = { learning }
				value = mediocre_skill_rating
				# Success.
				70 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					desc = RICE_baqt_frontier_decision_success
					custom_tooltip = RICE_baqt_frontier_report_success_1_tt
					custom_tooltip = RICE_baqt_frontier_report_success_2_tt
					scope:liege = {
						trigger_event = nubia.0176
					}
				}
				# Failure.
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					desc = RICE_baqt_frontier_decision_failure
					custom_tooltip = RICE_baqt_frontier_report_failure_1_tt
					custom_tooltip = RICE_baqt_frontier_report_failure_2_tt
					scope:liege = {
						trigger_event = nubia.0177
					}
				}
			}
		#}
	}

}

# Report to Superiors - success
nubia.0176 = {
	type = character_event
	title = nubia.0176.t
	desc = nubia.0176.desc
	theme = learning
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = scope:liege
		animation = war_defender
	}

	right_portrait = {
		character = scope:reporter
		animation = throne_room_bow_1
	}
	
	option = { # Ok
		name = nubia.0176.a
		add_opinion = {
			target = scope:reporter
			modifier = RICE_opinion_baqt_frontier_good_job
		}
		reverse_add_opinion = {
			target = scope:reporter
			modifier = grateful_opinion
			opinion = 10
		}
		scope:reporter = {
			add_legitimacy = miniscule_legitimacy_gain
			RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
		}
		hidden_effect = {
			scope:reporter = {
				if = {
					limit = {
						RICE_nubia_northern_frontier_manager_trigger = yes
					}
					situation:RICE_nubia_baqt_situation ?= {
						trigger_situation_catalyst = {
							catalyst = catalyst_situation_RICE_baqt_nubian_frontier_report_success
							character = scope:reporter
						}
					}
				}
				if = {
					limit = {
						RICE_egypt_southern_frontier_manager_trigger = yes
					}
					situation:RICE_nubia_baqt_situation ?= {
						trigger_situation_catalyst = {
							catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_report_success
							character = scope:reporter
						}
					}
				}
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:liege
					title = nubia.0176.a.toast
					show_as_tooltip = {
						scope:liege = {
							add_opinion = {
								target = scope:reporter
								modifier = RICE_opinion_baqt_frontier_good_job
							}
							reverse_add_opinion = {
								target = scope:reporter
								modifier = grateful_opinion
								opinion = 10
							}
						}
						scope:reporter = {
							add_legitimacy = miniscule_legitimacy_gain
							RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
						}						
					}
				}			
			}
		}
		ai_chance = {
			base = 70
			modifier = {
				add = 10
				has_trait = greedy
			}
			modifier = {
				add = 10
				has_trait = ambitious
			}
			modifier = {
				add = 10
				has_trait = paranoid
			}
			modifier = {
				add = 5
				has_trait = arbitrary
			}
			modifier = {
				add = 5
				has_trait = lunatic
			}
			modifier = {
				add = 30
				has_relation_rival = scope:reporter
			}
			modifier = {
				add = 50				
				has_relation_nemesis = scope:reporter
			}
			modifier = {
				add = 10
				opinion = {
					target = scope:reporter
					value <= low_negative_opinion
				}
			}
			modifier = {
				add = 25
				opinion = {
					target = scope:reporter
					value <= medium_negative_opinion
				}
			}
		}
	}
	
	option = { # Send a gift back
		name = nubia.0176.b
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= minor_gold_value			
			}
		}
		add_opinion = {
			target = scope:reporter
			modifier = RICE_opinion_baqt_frontier_great_job
		}
		reverse_add_opinion = {
			target = scope:reporter
			modifier = grateful_opinion
			opinion = 20
		}
		scope:reporter = {
			add_legitimacy = minor_legitimacy_gain
			RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
		}
		pay_short_term_gold = {
			target = scope:reporter
			gold = minor_gold_value
		}
		hidden_effect = {
			scope:reporter = {
				if = {
					limit = {
						RICE_nubia_northern_frontier_manager_trigger = yes
					}
					situation:RICE_nubia_baqt_situation ?= {
						trigger_situation_catalyst = {
							catalyst = catalyst_situation_RICE_baqt_nubian_frontier_report_success
							character = scope:reporter
						}
					}
				}
				if = {
					limit = {
						RICE_egypt_southern_frontier_manager_trigger = yes
					}
					situation:RICE_nubia_baqt_situation ?= {
						trigger_situation_catalyst = {
							catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_report_success
							character = scope:reporter
						}
					}
				}
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:liege
					title = nubia.0176.b.toast
					show_as_tooltip = {
						scope:liege = {
							add_opinion = {
								target = scope:reporter
								modifier = RICE_opinion_baqt_frontier_great_job
							}
							reverse_add_opinion = {
								target = scope:reporter
								modifier = grateful_opinion
								opinion = 20
							}
							pay_short_term_gold = {
								target = scope:reporter
								gold = minor_gold_value
							}								
						}
						scope:reporter = {
							add_legitimacy = minor_legitimacy_gain
							RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
						}					
					}
				}			
			}
		}
		ai_chance = {
			base = 30
			modifier = {
				add = 10
				has_trait = generous
			}
			modifier = {
				add = 10
				has_trait = just
			}
			modifier = {
				add = 10
				has_trait = trusting
			}

			modifier = {
				add = 30
				has_relation_friend = scope:reporter
			}
			modifier = {
				add = 50
				has_relation_best_friend = scope:reporter
			}
			modifier = {
				add = 50
				has_relation_lover = scope:reporter
			}
			modifier = {
				add = 50
				has_relation_soulmate = scope:reporter
			}
			modifier = {
				add = 10
				opinion = {
					target = scope:reporter
					value >= low_positive_opinion
				}
			}
			modifier = {
				add = 25
				opinion = {
					target = scope:reporter
					value >= medium_positive_opinion
				}
			}
		}
	}

}

# Report to Superiors - failure
nubia.0177 = {
	type = character_event
	title = nubia.0177.t
	desc = nubia.0177.desc
	theme = learning
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = scope:liege
		animation = war_defender
	}

	right_portrait = {
		character = scope:reporter
		animation = shame
	}
	
	option = { # Ok
		name = nubia.0177.a
		add_opinion = {
			target = scope:reporter
			modifier = RICE_opinion_baqt_frontier_bad_job
		}
		reverse_add_opinion = {
			target = scope:reporter
			modifier = frustrated_opinion
			opinion = -5
		}
		scope:reporter = {
			RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
		}
		hidden_effect = {
			scope:reporter = {
				if = {
					limit = {
						RICE_nubia_northern_frontier_manager_trigger = yes
					}
					situation:RICE_nubia_baqt_situation ?= {
						trigger_situation_catalyst = {
							catalyst = catalyst_situation_RICE_baqt_nubian_frontier_report_failure
							character = scope:reporter
						}
					}
				}
				if = {
					limit = {
						RICE_egypt_southern_frontier_manager_trigger = yes
					}
					situation:RICE_nubia_baqt_situation ?= {
						trigger_situation_catalyst = {
							catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_report_failure
							character = scope:reporter
						}
					}
				}				
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:liege
					title = nubia.0177.a.toast
					show_as_tooltip = {
						scope:liege = {
							add_opinion = {
								target = scope:reporter
								modifier = RICE_opinion_baqt_frontier_bad_job
							}
							reverse_add_opinion = {
								target = scope:reporter
								modifier = frustrated_opinion
								opinion = -5
							}
						}
						scope:reporter = {
							RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
						}					
					}
				}			
			}
		}
	}
	
	option = { # Send a reprimand back
		name = nubia.0177.b
		add_prestige = minor_prestige_gain
		add_opinion = {
			target = scope:reporter
			modifier = RICE_opinion_baqt_frontier_terrible_job
		}
		reverse_add_opinion = {
			target = scope:reporter
			modifier = frustrated_opinion
			opinion = -15
		}
		scope:reporter = {
			add_legitimacy = miniscule_legitimacy_loss
		}
		hidden_effect = {
			scope:reporter = {
				if = {
					limit = {
						RICE_nubia_northern_frontier_manager_trigger = yes
					}
					situation:RICE_nubia_baqt_situation ?= {
						trigger_situation_catalyst = {
							catalyst = catalyst_situation_RICE_baqt_nubian_frontier_report_failure
							character = scope:reporter
						}
					}
				}
				if = {
					limit = {
						RICE_egypt_southern_frontier_manager_trigger = yes
					}
					situation:RICE_nubia_baqt_situation ?= {
						trigger_situation_catalyst = {
							catalyst = catalyst_situation_RICE_baqt_egyptian_frontier_report_failure
							character = scope:reporter
						}
					}
				}
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:liege
					title = nubia.0177.b.toast
					show_as_tooltip = {
						scope:liege = {
							add_prestige = minor_prestige_gain
							add_opinion = {
								target = scope:reporter
								modifier = RICE_opinion_baqt_frontier_terrible_job
							}
							reverse_add_opinion = {
								target = scope:reporter
								modifier = frustrated_opinion
								opinion = -15
							}
						}
						scope:reporter = {
							add_legitimacy = miniscule_legitimacy_loss
						}					
					}
				}			
			}
		}
	}

}

# Process complaints and requests
nubia.0178 = {
	type = character_event
	title = nubia.0178.t
	desc = {
		desc = nubia.0178.desc
		random_valid = {
			desc = RICE_nubia_baqt_real_document_excerpt_01
			desc = RICE_nubia_baqt_real_document_excerpt_02
			desc = RICE_nubia_baqt_real_document_excerpt_03
			desc = RICE_nubia_baqt_real_document_excerpt_04
			desc = RICE_nubia_baqt_real_document_excerpt_05
			desc = RICE_nubia_baqt_real_document_excerpt_06
			desc = RICE_nubia_baqt_real_document_excerpt_07
			desc = RICE_nubia_baqt_real_document_excerpt_08
			desc = RICE_nubia_baqt_real_document_excerpt_09
			desc = RICE_nubia_baqt_real_document_excerpt_10
			desc = RICE_nubia_baqt_real_document_excerpt_11
			desc = RICE_nubia_baqt_real_document_excerpt_12
			desc = RICE_nubia_baqt_real_document_excerpt_13
			desc = RICE_nubia_baqt_real_document_excerpt_14
			desc = RICE_nubia_baqt_real_document_excerpt_15
			desc = RICE_nubia_baqt_real_document_excerpt_16
			desc = RICE_nubia_baqt_real_document_excerpt_17
			desc = RICE_nubia_baqt_real_document_excerpt_18
			desc = RICE_nubia_baqt_real_document_excerpt_19
			desc = RICE_nubia_baqt_real_document_excerpt_20
			desc = RICE_nubia_baqt_real_document_excerpt_21
			desc = RICE_nubia_baqt_real_document_excerpt_22
			desc = RICE_nubia_baqt_real_document_excerpt_23
			desc = RICE_nubia_baqt_real_document_excerpt_24
			desc = RICE_nubia_baqt_real_document_excerpt_25
			desc = RICE_nubia_baqt_real_document_excerpt_26
			desc = RICE_nubia_baqt_real_document_excerpt_27
			desc = RICE_nubia_baqt_real_document_excerpt_28
			desc = RICE_nubia_baqt_real_document_excerpt_29
			desc = RICE_nubia_baqt_real_document_excerpt_30
			desc = RICE_nubia_baqt_real_document_excerpt_31
			desc = RICE_nubia_baqt_real_document_excerpt_32
			desc = RICE_nubia_baqt_real_document_excerpt_33
			desc = RICE_nubia_baqt_real_document_excerpt_34
			desc = RICE_nubia_baqt_real_document_excerpt_35
			desc = RICE_nubia_baqt_real_document_excerpt_36
			desc = RICE_nubia_baqt_real_document_excerpt_37
			desc = RICE_nubia_baqt_real_document_excerpt_38
			desc = RICE_nubia_baqt_real_document_excerpt_39
			desc = RICE_nubia_baqt_real_document_excerpt_40
			desc = RICE_nubia_baqt_real_document_excerpt_41
			desc = RICE_nubia_baqt_real_document_excerpt_42
			desc = RICE_nubia_baqt_real_document_excerpt_43
			desc = RICE_nubia_baqt_real_document_excerpt_44
			desc = RICE_nubia_baqt_real_document_excerpt_45
			desc = RICE_nubia_baqt_real_document_excerpt_46
			desc = RICE_nubia_baqt_real_document_excerpt_47
			desc = RICE_nubia_baqt_real_document_excerpt_48
			desc = RICE_nubia_baqt_real_document_excerpt_49
			desc = RICE_nubia_baqt_real_document_excerpt_50
		}
	}
	theme = administrative
	override_background = { reference = study }
	
	right_portrait = {
		character = root
		animation = reading
	}

	immediate = {
		RICE_baqt_process_complaints_and_requests_setup_effect = yes
	}
	
	option = { # Ok
		name = nubia.0178.a
		RICE_baqt_process_complaints_and_requests_effect = yes
		# Historical context tooltip mentioning this is a real document
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0178.info
		}
	}

}



##################################################################
# 
# PILGRIMAGE TO BANGANARTI
# nubia.0180-0189 reserved
# 
##################################################################

# Make preparations to begin the pilgrimage
nubia.0180 = {
	type = character_event
	title = nubia.0180.t
	desc = nubia.0180.desc
	theme = travel_pilgrimage
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = holding_staff
	}

	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = {
			has_activity_type = activity_RICE_nubia_banganarti_pilgrimage
		}
	}
	
	immediate = {
		religion:christianity_religion = { save_scope_as = christian }
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = nubia.0180.a
	}
}


# Arrive in Banganarti, settle in the guesthouses
nubia.0181 = {
	type = activity_event
	title = nubia.0181.t
	desc = nubia.0181.desc
	theme = faith
	override_background = {
		reference = RICE_background_nubia_dongola_building
	}
	
	right_portrait = {
		character = root
		animation = survey_staff
	}

	immediate = {
		title:b_old_dongola = {
			save_scope_as = dongola
		}
		faith = {
			save_scope_as = faith
		}
	}
	
	option = { # Ok
		name = nubia.0181.a
		trigger_event = {
			id = nubia.0182
			days = { 3 8 }
		}
	}
}


# Go to Banganarti church
nubia.0182 = {
	type = activity_event
	title = nubia.0182.t
	desc = nubia.0182.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_dongola_building }
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	immediate = {
		culture:greek = {
			save_scope_as = greek
		}
		culture:nubian = {
			save_scope_as = nubian
		}
	}

	option = { # Ok
		name = nubia.0182.a
		trigger_event = {
			id = nubia.0183
			days = { 3 8 }
		}
	}
}

# Pray at Banganarti church
nubia.0183 = {
	type = activity_event
	title = nubia.0183.t
	desc = {
		desc = nubia.0183.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					NOT = {
						scope:activity = {
							has_activity_option = {
								category = RICE_nubia_banganarti_pilgrimage_dream_incubation_type
								option = RICE_nubia_banganarti_pilgrimage_dream_incubation_type_none
							}
						}
					}	
				}
				desc = nubia.0183.desc.dreaming
			}
			desc = nubia.0183.desc.no_dreaming
		}
	}
	theme = RICE_theme_nubia_church_interior
	
	right_portrait = {
		character = root
		animation = prayer
	}
	
	option = { # Ok
		name = nubia.0183.a
	}

	after = {
		if = {
			limit = {
				NOT = {
					scope:activity = {
						has_activity_option = {
							category = RICE_nubia_banganarti_pilgrimage_dream_incubation_type
							option = RICE_nubia_banganarti_pilgrimage_dream_incubation_type_none
						}
					}
				}				
			}
			trigger_event = {
				id = nubia.0185
				days = { 3 8 }
			}
		}
		else = {
			trigger_event = {
				id = nubia.0184
				days = { 3 8 }
			}
		}
	}

}

# Pilgrimage concludes
nubia.0184 = {
	type = activity_event
	title = nubia.0184.t
	desc = nubia.0184.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_dongola_building }
	
	right_portrait = {
		character = root
		animation = personality_content
	}
	
	option = { # Ok
		name = nubia.0184.a
		RICE_nubia_banganarti_pilgrimage_completed_log_entry_effect = yes
	}

	after = {
		hidden_effect = {
			scope:activity = {
				hidden_effect = { skip_activity_phase = yes }
			}
		}
	}
}

# Staying at guesthouses for over a month; trying to see if you get a dream
nubia.0185 = {
	type = activity_event
	title = nubia.0185.t
	desc = nubia.0185.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_dongola_building }
	
	right_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { # Ok
		name = nubia.0185.a
	}

	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = RICE_nubia_banganarti_pilgrimage_dream_incubation_type
						option = RICE_nubia_banganarti_pilgrimage_dream_incubation_type_large
					}
				}			
			}
			custom_tooltip = nubia.0185.a.long_stay
			trigger_event = {
				id = nubia.0186
				months = 3
			}
		}
		else = {
			custom_tooltip = nubia.0185.a.short_stay
			trigger_event = {
				id = nubia.0186
				months = 1
			}
		}
	}
}

# Results of the dream incubation
nubia.0186 = {
	type = activity_event
	title = nubia.0186.t
	desc = {
		desc = nubia.0186.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:host = {
						OR = {
							has_character_modifier = RICE_banganarti_health_dream
							has_character_modifier = RICE_banganarti_prophetic_dream
							has_character_modifier = RICE_banganarti_inspiring_dream
							has_character_modifier = RICE_banganarti_advice_dream
						}
					}
				}
				desc = nubia.0186.desc.success
			}
			desc = nubia.0186.desc.no_success
		}
	}
	theme = faith
	override_background = { reference = RICE_background_nubia_dongola_building }
	
	right_portrait = {
		character = scope:host
		animation = personality_bold
	}

	immediate = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = RICE_nubia_banganarti_pilgrimage_dream_incubation_type
						option = RICE_nubia_banganarti_pilgrimage_dream_incubation_type_large
					}
				}			
			}
			random = {
				chance = RICE_banganarti_pilgrimage_dream_incubation_large_chance
				random_list = {
					10 = {
						modifier = {
							add = 5
							has_any_illness = yes
						}
						modifier = {
							add = 10
							has_any_debilitating_illness = yes
						}
						modifier = {
							add = 10
							has_permanent_physical_injury = yes
						}
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_health_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_prophetic_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_inspiring_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_advice_dream
										years = 10
									}
								}
							}
						}
					}
				}
			}
		}
		else = {
			random = {
				chance = RICE_banganarti_pilgrimage_dream_incubation_small_chance
				random_list = {
					10 = {
						modifier = {
							add = 5
							has_any_illness = yes
						}
						modifier = {
							add = 10
							has_any_debilitating_illness = yes
						}
						modifier = {
							add = 10
							has_permanent_physical_injury = yes
						}
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_health_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_prophetic_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_inspiring_dream
										years = 10
									}
								}
							}
						}
					}
				}
			}
		}	
		if = {
			limit = {
				NOR = {
					has_character_modifier = RICE_banganarti_health_dream
					has_character_modifier = RICE_banganarti_prophetic_dream
					has_character_modifier = RICE_banganarti_inspiring_dream
					has_character_modifier = RICE_banganarti_advice_dream
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_nubia_banganarti_dream_failure_log
					tags = { bad }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = root
					# scope:host = {
					# 	custom_tooltip = nubia.0186.a.failure
					# }
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0186.a
	}

	after = {
		trigger_event = {
			id = nubia.0184
			days = { 3 8 }
		}
	}
}




##################################################################
# 
# PILGRIMAGE TO SAINT CATHERINE'S MONASTERY
# nubia.0190-0199 reserved
# 
##################################################################

# Make preparations to begin the pilgrimage
nubia.0190 = {
	type = character_event
	title = nubia.0190.t
	desc = nubia.0190.desc
	theme = travel_pilgrimage
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = holding_staff
	}

	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = {
			has_activity_type = activity_RICE_coptic_saint_catherine_pilgrimage
		}
	}
	
	immediate = {
		faith = {
			save_scope_as = faith
		}
		religion:christianity_religion = { save_scope_as = christian }
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = nubia.0190.a
	}
}




# Arrive in Saint Catherine's Monastery
nubia.0191 = {
	type = activity_event
	title = nubia.0191.t
	desc = nubia.0191.desc
	theme = RICE_theme_saint_catherines_monastery
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = nubia.0191.a
		trigger_event = {
			id = nubia.0192
			days = { 4 12 }
		}
	}
}

# Praying in Saint Catherine's Monastery
nubia.0192 = {
	type = activity_event
	title = nubia.0192.t
	desc = nubia.0192.desc
	theme = faith
	
	right_portrait = {
		character = root
		animation = prayer
	}
	
	option = { # Ok
		name = nubia.0192.a
		trigger_event = {
			id = nubia.0193
			days = { 4 12 }
		}
	}
}

# Inspired by something in Saint Catherine's Monastery
nubia.0193 = {
	type = activity_event
	title = nubia.0193.t
	desc = nubia.0193.desc
	theme = RICE_theme_saint_catherines_monastery
	
	right_portrait = {
		character = root
		animation = admiration
	}

	immediate = {
		hidden_effect = {
			scope:host = {
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_ashtiname_of_muhammad
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_bedouin_guards
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_burning_bush
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_collection_of_icons
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_monasterys_library
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_path_of_moses
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_relics_of_saint_catherine
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_well_of_moses
							years = 10
						}
					}
				}				
			}
		}
	}
	
	option = { # Ok
		name = nubia.0193.a
		if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_ashtiname_of_muhammad
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_ashtiname_of_muhammad
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_bedouin_guards
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_bedouin_guards
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_burning_bush
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_burning_bush
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_collection_of_icons
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_collection_of_icons
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_monasterys_library
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_monasterys_library
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_path_of_moses
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_path_of_moses
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_relics_of_saint_catherine
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_relics_of_saint_catherine
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_well_of_moses
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_well_of_moses
								years = 10
							}							
						}
					}
				}
			}
		}
		trigger_event = {
			id = nubia.0194
			days = { 4 12 }
		}
	}
}





# Pilgrimage concludes
nubia.0194 = {
	type = activity_event
	title = nubia.0194.t
	desc = nubia.0194.desc
	theme = RICE_theme_saint_catherines_monastery
	
	right_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Ok
		name = nubia.0194.a
		RICE_coptic_saint_catherine_pilgrimage_completed_log_entry_effect = yes
	}


	after = {
		hidden_effect = {
			scope:activity = {
				hidden_effect = { skip_activity_phase = yes }
			}
		}
	}

}



##################################################################
# 
# PILGRIMAGE TO SAINT ANTHONY'S MONASTERY
# nubia.0200-0209 reserved
# 
##################################################################

# Make preparations to begin the pilgrimage
nubia.0200 = {
	type = character_event
	title = nubia.0200.t
	desc = nubia.0200.desc
	theme = travel_pilgrimage
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = holding_staff
	}

	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = {
			has_activity_type = activity_RICE_coptic_saint_anthony_pilgrimage
		}
	}
	
	immediate = {
		# faith = {
		# 	save_scope_as = faith
		# }
		religion:christianity_religion = { save_scope_as = christian }
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = nubia.0200.a
	}
}




# Arrive in Saint Anthony's Monastery
nubia.0201 = {
	type = activity_event
	title = nubia.0201.t
	desc = nubia.0201.desc
	theme = RICE_theme_saint_anthony_monastery
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = nubia.0201.a
		trigger_event = {
			id = nubia.0202
			days = { 4 12 }
		}
	}
}

# Praying in Saint Anthony's Monastery - learning about the hermits and monasteries
nubia.0202 = {
	type = activity_event
	title = nubia.0202.t
	desc = nubia.0202.desc
	theme = faith
	
	right_portrait = {
		character = root
		animation = prayer
	}
	
	option = { # Visit the gardens
		name = nubia.0202.a
		random = {
			chance = 25
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_gardens_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_character_modifier = {
							modifier = RICE_coptic_saint_anthony_pilgrimage_garden_inspired
							years = 5
						}
					}
				}
			}
		}
	}
	
	option = { # Visit Mount Colzim
		name = nubia.0202.b
		trigger = {
			is_healthy = yes
		}
		if = {
			limit = {
				NOR = {
					has_trait = athletic
					has_trait = strong
					has_trait = physique_good
					has_trait = zealous
					has_trait = lifestyle_mystic
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_mount_colzim_climb_bad_log
					tags = { bad }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_piety = 50
						stress_impact = {
							base = miniscule_stress_impact_gain
							cynical = miniscule_stress_impact_gain
							lazy = minor_stress_impact_gain
						}
					}
				}
			}
		}
		else = {
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_mount_colzim_climb_good_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_piety = 50
						stress_impact = {
							athletic = miniscule_stress_impact_loss
							strong = miniscule_stress_impact_loss
							physique_good_1 = miniscule_stress_impact_loss
							physique_good_2 = miniscule_stress_impact_loss
							physique_good_3 = miniscule_stress_impact_loss
							zealous = miniscule_stress_impact_loss
							lifestyle_mystic = miniscule_stress_impact_loss
						}
					}
				}
			}
		}
		random = {
			chance = 25
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_mount_colzim_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_character_modifier = {
							modifier = RICE_coptic_saint_anthony_pilgrimage_mount_colzim_inspired
							years = 5
						}
					}
				}
			}
		}
	}
	
	option = { # Observe the ascetics
		name = nubia.0202.c
		random = {
			chance = 25
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_ascetics_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_character_modifier = {
							modifier = RICE_coptic_saint_anthony_pilgrimage_ascetics_inspired
							years = 5
						}
					}
				}
			}
		}
	}
	
	option = { # Focus on Prayer
		name = nubia.0202.d
		scope:activity = {
			add_activity_log_entry = {
				key = RICE_coptic_saint_anthony_pilgrimage_prayer_log
				tags = { good }
				# this line below adds the entry to the Effects section of the conclusion UI
				show_in_conclusion = yes
				character = scope:host
				scope:host = {
					add_piety = 25
					stress_impact = {
						base = miniscule_stress_impact_loss
						zealous = miniscule_stress_impact_loss
					}
				}
			}
		}
	}

	after = {		
		trigger_event = {
			id = nubia.0203
			days = { 4 12 }
		}
	}

}



# Pilgrimage concludes
nubia.0203 = {
	type = activity_event
	title = nubia.0203.t
	desc = nubia.0203.desc
	theme = RICE_theme_saint_anthony_monastery
	
	right_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Ok
		name = nubia.0203.a
		RICE_coptic_saint_anthony_pilgrimage_completed_log_entry_effect = yes
	}


	after = {
		hidden_effect = {
			scope:activity = {
				hidden_effect = { skip_activity_phase = yes }
			}
		}
	}

}





######################################################################################
# 
# BULL SACRIFICE
# 
# nubia.0210-nubia.0219
# 
######################################################################################



# Bull Sacrifice Prep
nubia.0210 = {
	type = activity_event
	title = nubia.0210.t
	desc = nubia.0210.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}

	immediate = {
		faith = { save_scope_as = faith }
		scope:activity.activity_location = {
			save_scope_as = location
		}
	}
	
	option = { # Ok
		name = nubia.0210.a
		custom_tooltip = nubia.0210.a.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:diplomacy
			days = 1
		}
	}
	
	option = { # Ok
		name = nubia.0210.b
		custom_tooltip = nubia.0210.b.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:martial
			days = 1
		}
	}
	
	option = { # Ok
		name = nubia.0210.c
		custom_tooltip = nubia.0210.c.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:stewardship
			days = 1
		}
	}
	
	option = { # Ok
		name = nubia.0210.d
		custom_tooltip = nubia.0210.d.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:intrigue
			days = 1
		}
	}
	
	option = { # Ok
		name = nubia.0210.e
		custom_tooltip = nubia.0210.e.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:learning
			days = 1
		}
	}

	after = {
		trigger_event = {
			id = nubia.0211
			days = { 5 10 }
		}
	}
}


# Bovine Sacrifice done
nubia.0211 = {
	type = activity_event
	title = nubia.0211.t
	desc = {
		desc = nubia.0211.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_5
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_5
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_5
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_5
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_5
					}
				}
				desc = nubia.0211.desc.good
			}
			desc = nubia.0211.desc.bad
		}
	}
	theme = faith
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = wedding_priest # prayer
	}

	right_portrait = {
		character = scope:chaplain
		animation = throne_room_two_handed_passive_1
		trigger = {
			exists = scope:chaplain
		}
	}	

	immediate = {
		if = {
			limit = {
				exists = cp:councillor_court_chaplain
			}
			cp:councillor_court_chaplain ?= { save_scope_as = chaplain }
		}
		hidden_effect = {
			if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:diplomacy
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_diplomacy_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_5
								years = 10
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:martial
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_martial_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_5
								years = 10
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:stewardship
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_stewardship_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_5
								years = 10
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:intrigue
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_intrigue_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_5
								years = 10
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:learning
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_learning_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_5
								years = 10
							}
						}
					}
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0211.a
		if = {
			limit = {
				scope:activity.activity_host = {
					has_activity_intent = RICE_nubia_nilotic_bovine_sacrifice_honor_the_ancestors_intent
				}
			}
			add_piety = { 25 200 }
		}
		else_if = {
			limit = {
				scope:activity.activity_host = {
					has_activity_intent = RICE_nubia_nilotic_bovine_sacrifice_communion_intent
				}
			}
			add_prestige = { 25 200 }
		}
		scope:activity = {
			add_activity_log_entry = {
				key = RICE_nubia_nilotic_bovine_sacrifice_modifier_log
				tags = { good }
				# this line below adds the entry to the Effects section of the conclusion UI
				show_in_conclusion = yes
				character = root
				scope:host = {
					if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_5
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_5
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_5
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_5
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_5
							years = 10
						}
					}
				}
			}
		}
	}

	after = {
		# Needs to be displayed at the end so we don't have two instances of piety/prestige, one vague and one specific
		#RICE_nubia_nilotic_bovine_sacrifice_completed_log_entry_effect = yes
		if = {
			limit = { has_variable = RICE_nilotic_sacrifice_type }
			remove_variable = RICE_nilotic_sacrifice_type
		}
		scope:activity = {
			hidden_effect = { skip_activity_phase = yes }
		}
	}
}




######################################################################################
# 
# NILE EMPIRE AND LEGENDS
# 
# nubia.0220-nubia.0239
# 
######################################################################################


# First, choose a name
nubia.0220 = {
	type = character_event
	title = nubia.0220.t
	desc = nubia.0220.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = thinking
	}
	
	option = { # Default
		name = nubia.0220.a
	}
	
	option = { # Egypt
		name = nubia.0220.b
		title:e_RICE_nile = {
			set_title_name = e_RICE_greater_egypt
		}
	}
	
	option = { # Nubia
		name = nubia.0220.c
		title:e_RICE_nile = {
			set_title_name = e_RICE_greater_nubia
		}
	}
	
	option = { # Kemet
		name = nubia.0220.d
		title:e_RICE_nile = {
			set_title_name = e_RICE_greater_kemet
		}
	}
	
	option = { # Kush
		name = nubia.0220.e
		title:e_RICE_nile = {
			set_title_name = e_RICE_greater_kush
		}
	}

	after = {
		custom_tooltip = nubia.0220.tooltip
		trigger_event = nubia.0221
	}
}

# Second, choose a legend
nubia.0221 = {
	type = character_event
	window = big_event_window
	title = nubia.0221.t
	desc = nubia.0221.desc
	theme = RICE_theme_nile_valley
	
	left_portrait = {
		character = root
		animation = war_over_win
	}
	
	option = { # Abbasids
		name = nubia.0221.a
		set_variable = {
			name = RICE_nile_empire_lineage
			value = flag:abbasids
		}
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_abbasids_legend
			properties = {
				descendant = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 300
				OR = {
					religion = religion:islam_religion
					culture = { has_cultural_pillar = heritage_arabic }
					culture = { has_cultural_pillar = heritage_berber }
				}
			}
		}
	}
	
	option = { # Alexander the Great
		name = nubia.0221.b
		set_variable = {
			name = RICE_nile_empire_lineage
			value = flag:alexander
		}
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_alexander_legend
			properties = {
				descendant = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 100
				OR = {
					religion = religion:hellenism_religion
					culture = { has_cultural_pillar = heritage_byzantine }
				}
			}
		}
	}
	
	option = { # Candace (Kushite Queens)
		name = nubia.0221.c
		set_variable = {
			name = RICE_nile_empire_lineage
			value = flag:candace
		}
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_candace_legend
			properties = {
				descendant = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				OR = {
					religion = religion:kushitism_religion
					culture = { has_cultural_pillar = heritage_east_african }
					culture = { has_cultural_pillar = heritage_somalian }
				}
			}
		}
	}
	
	option = { # Cleopatra the Scholar
		name = nubia.0221.d
		set_variable = {
			name = RICE_nile_empire_lineage
			value = flag:cleopatra_the_scholar
		}
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_cleopatra_scholar_legend
			properties = {
				descendant = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				OR = {
					religion = religion:kushitism_religion
					culture = { has_cultural_pillar = heritage_east_african }
					culture = { has_cultural_pillar = heritage_egyptian }
					culture = { has_cultural_pillar = heritage_arabic }
					culture = { has_cultural_pillar = heritage_berber }
				}
			}
		}
	}
	
	option = { # Cleopatra the Seducer
		name = nubia.0221.e
		set_variable = {
			name = RICE_nile_empire_lineage
			value = flag:cleopatra_the_seducer
		}
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_cleopatra_seducer_legend
			properties = {
				descendant = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				OR = {
					religion = religion:hellenism_religion
					culture_has_european_heritage_pillar_trigger = yes
				}
			}
		}
	}
	
	option = { # Hermes Trismegistus
		name = nubia.0221.f
		set_variable = {
			name = RICE_nile_empire_lineage
			value = flag:hermes_trismegistus
		}
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_hermes_legend
			properties = {
				descendant = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				RICE_is_greco_roman_religion_group_trigger = yes
			}
		}
	}
	
	option = { # Sesostris
		name = nubia.0221.g
		set_variable = {
			name = RICE_nile_empire_lineage
			value = flag:sesostris
		}
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_sesostris_legend
			properties = {
				descendant = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				OR = {
					RICE_is_greco_roman_religion_group_trigger = yes
					faith = faith:coptic
					culture = { has_cultural_pillar = heritage_egyptian }
				}
			}
		}
	}
	
	option = { # Surid Ibn Salhouk
		name = nubia.0221.h
		set_variable = {
			name = RICE_nile_empire_lineage
			value = flag:surid_ibn_salhouk
		}
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_surid_legend
			properties = {
				descendant = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				OR = {
					religion = religion:kushitism_religion
					religion = religion:islam_religion
					faith = faith:coptic
					culture = { has_cultural_pillar = heritage_egyptian }
					culture_has_mena_heritage_pillar_trigger = yes
				}
			}
		}
	}
	
	option = { # Umayyads
		name = nubia.0221.i
		set_variable = {
			name = RICE_nile_empire_lineage
			value = flag:umayyads
		}
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_umayyads_legend
			properties = {
				descendant = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 300
				OR = {
					religion = religion:islam_religion
					culture = { has_cultural_pillar = heritage_arabic }
					culture = { has_cultural_pillar = heritage_berber }
				}
			}
		}
	}

	after = {
		every_ruler = {
			limit = {
				is_playable_character = yes
				OR = {
					this = scope:nile_conqueror
					any_liege_or_above = {
						this = scope:nile_conqueror
					}
					domicile.domicile_location ?= {					
						OR = {
							geographical_region = world_middle_east
							geographical_region = world_africa
							geographical_region = world_europe
							geographical_region = world_india
							geographical_region = world_steppe_west
							geographical_region = world_steppe_central
						}
					}
					any_held_county = {
						any_county_province = {
							OR = {
								geographical_region = world_middle_east
								geographical_region = world_africa
								geographical_region = world_europe
								geographical_region = world_india
								geographical_region = world_steppe_west
								geographical_region = world_steppe_central
							}
						}
					}
				}
			}
			trigger_event = nubia.0222
		}
	}
}






# Notification event
nubia.0222 = {
	type = character_event
	window = fullscreen_event
	title = nubia.0222.t
	desc = {
		desc = nubia.0222.desc
		first_valid = {
			triggered_desc = {
				trigger = {			
					scope:nile_conqueror = {
						var:RICE_nile_empire_lineage ?= flag:abbasids
					}
				}
				desc = nubia.0222.desc.abbasids
			}
			triggered_desc = {
				trigger = {			
					scope:nile_conqueror = {
						var:RICE_nile_empire_lineage ?= flag:alexander
					}
				}
				desc = nubia.0222.desc.alexander
			}
			triggered_desc = {
				trigger = {			
					scope:nile_conqueror = {
						var:RICE_nile_empire_lineage ?= flag:candace
					}
				}
				desc = nubia.0222.desc.candace
			}
			triggered_desc = {
				trigger = {			
					scope:nile_conqueror = {
						var:RICE_nile_empire_lineage ?= flag:cleopatra_the_scholar
					}
				}
				desc = nubia.0222.desc.cleopatra_the_scholar
			}
			triggered_desc = {
				trigger = {			
					scope:nile_conqueror = {
						var:RICE_nile_empire_lineage ?= flag:cleopatra_the_seducer
					}
				}
				desc = nubia.0222.desc.cleopatra_the_seducer
			}
			triggered_desc = {
				trigger = {			
					scope:nile_conqueror = {
						var:RICE_nile_empire_lineage ?= flag:hermes_trismegistus
					}
				}
				desc = nubia.0222.desc.hermes_trismegistus
			}
			triggered_desc = {
				trigger = {			
					scope:nile_conqueror = {
						var:RICE_nile_empire_lineage ?= flag:sesostris
					}
				}
				desc = nubia.0222.desc.sesostris
			}
			triggered_desc = {
				trigger = {			
					scope:nile_conqueror = {
						var:RICE_nile_empire_lineage ?= flag:surid_ibn_salhouk
					}
				}
				desc = nubia.0222.desc.surid_ibn_salhouk
			}
			triggered_desc = {
				trigger = {			
					scope:nile_conqueror = {
						var:RICE_nile_empire_lineage ?= flag:umayyads
					}
				}
				desc = nubia.0222.desc.umayyads
			}
			desc = nubia.0222.desc.backup
		}
	}
	theme = diplomacy_majesty_focus
	override_background = { reference = RICE_nile_river_fullscreen_intro }

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"
		if = {
			limit = {
				root = scope:nile_conqueror
			}
			RICE_nile_empire_decision_effect = yes
		}
		else = {
			show_as_tooltip = {
				scope:nile_conqueror = {
					RICE_nile_empire_decision_effect = yes
				}			
			}
		}
	}
	
	option = { # Ok
		name = nubia.0222.a	
	}

}




######################################################################################
# 
# SIBIR FESTIVAL
# 
# nubia.0240-nubia.0259
# 
######################################################################################



# Prepare for the Sibir
nubia.0240 = {
	type = activity_event
	title = nubia.0240.t
	desc = nubia.0240.desc
	theme = friendly
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	right_portrait = {
		character = root
		animation = personality_content
	}

	immediate = {
		culture = { save_scope_as = culture }
		scope:activity.activity_location = {
			save_scope_as = location
		}
	}
	
	option = { # Ok
		name = nubia.0240.a
	}

	after = {
		trigger_event = {
			id = nubia.0241
			days = { 5 10 }
		}
	}
}

# Sibir starts, sacrifice the cattle
nubia.0241 = {
	type = activity_event
	title = nubia.0241.t
	desc = nubia.0241.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = throne_room_applaud_1
	}

	right_portrait = {
		character = scope:chaplain
		animation = throne_room_two_handed_passive_1
		trigger = {
			exists = scope:chaplain
		}
	}	

	immediate = {
		if = {
			limit = {
				exists = cp:councillor_court_chaplain
			}
			cp:councillor_court_chaplain ?= { save_scope_as = chaplain }
		}
	}
	
	option = { # Ok
		name = nubia.0241.a
	}

	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = RICE_nubia_sibir_festival_sports_competition_type_none
					}
				}
			}
			trigger_event = {
				id = nubia.0242
				days = { 3 5 }
			}
		}
		else = {			
			trigger_event = {
				id = nubia.0243
				days = { 3 5 }
			}
		}
	}
}

# Sibir concludes
nubia.0242 = {
	type = activity_event
	title = nubia.0242.t
	desc = nubia.0242.desc
	theme = feast_activity
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = toast
	}

	right_portrait = {
		character = scope:drinker
		animation = drink
		trigger = {
			exists = scope:drinker
		}
	}	

	immediate = {
		if = {
			limit = {
				scope:activity = {
					any_attending_character = {
						RICE_activity_participant_trigger = yes
					}
				}				
			}
			scope:activity = {
				random_attending_character = {
					limit = {
						RICE_activity_participant_trigger = yes
					}
					save_scope_as = drinker
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0242.a
		RICE_nubia_sibir_festival_completed_log_entry_effect = yes
	}

	after = {
		scope:activity = {
			hidden_effect = { skip_activity_phase = yes }
		}
	}
}

# Observe the wrestling or stick fighting match, if one has been scheduled
nubia.0243 = {
	type = activity_event
	title = nubia.0243.t
	desc = nubia.0243.desc
	theme = martial
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = throne_room_cheer_1
	}

	right_portrait = {
		character = scope:participant
		animation = throne_room_cheer_2
		trigger = {
			exists = scope:participant
		}
	}	

	immediate = {
		if = {
			limit = {
				scope:activity = {
					any_attending_character = {
						RICE_activity_participant_trigger = yes
					}
				}				
			}
			scope:activity = {
				random_attending_character = {
					limit = {
						RICE_activity_participant_trigger = yes
					}
					save_scope_as = participant
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0243.a
	}

	after = {
		hidden_effect = {
			random_list = {
				# Nothing ever happens
				20 = {
					trigger_event = {
						id = nubia.0242
						days = { 3 5 }
					}
				}
				# Recruit a courtier
				10 = {
					modifier = {
						add = 10
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = RICE_nubia_sibir_festival_sports_competition_type_stick_fighting
							}
						}
					}
					trigger_event = nubia.0244
				}
				# Gain a character modifier or county modifier
				10 = {
					modifier = {
						add = 10
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = RICE_nubia_sibir_festival_sports_competition_type_wrestling
							}
						}
					}
					trigger_event = nubia.0245
				}
			}
		}
	}
}

# Recruit one of the winning youths?
nubia.0244 = {
	type = activity_event
	title = nubia.0244.t
	desc = nubia.0244.desc
	theme = martial
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = thinking
	}

	right_portrait = {
		character = scope:youth
		animation = throne_room_bow_1
	}	

	immediate = {
		create_character = {
			location = root.capital_province
			template = RICE_nuba_young_warrior_template
			save_scope_as = youth			
		}	
	}
	
	option = { # Ok
		name = nubia.0244.a
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= 50			
			}
		}
		scope:activity = {
			add_activity_log_entry = {
				key = RICE_nubia_sibir_festival_recruit_youth_log
				tags = { good }
				# this line below adds the entry to the Effects section of the conclusion UI
				show_in_conclusion = yes
				character = scope:host
				scope:host = {
					remove_short_term_gold = 50
					add_courtier = scope:youth
					if = {
						limit = {
							can_add_hook = {
								target = scope:youth
								type = loyalty_hook
							}
						}
						add_hook = {
							target = scope:youth
							type = loyalty_hook
						}
					}							
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0244.b
		hidden_effect = {
			scope:youth = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

	after = {
		trigger_event = {
			id = nubia.0242
			days = { 3 5 }
		}
	}
}

# Recruit one of the winning youths?
nubia.0245 = {
	type = activity_event
	title = nubia.0245.t
	desc = nubia.0245.desc
	theme = martial
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	right_portrait = {
		character = root
		animation = personality_greedy
	}

	immediate = {
		scope:activity.activity_location = {
			save_scope_as = target_province			
		}
		random_list = {
			10 = {
				scope:target_province = {
					add_province_modifier = {
						modifier = RICE_nubia_sibir_province_modifier_1
						years = 10
					}
				}
			}
			10 = {
				scope:target_province = {
					add_province_modifier = {
						modifier = RICE_nubia_sibir_province_modifier_2
						years = 10
					}
				}
			}
			10 = {
				scope:target_province = {
					add_province_modifier = {
						modifier = RICE_nubia_sibir_province_modifier_3
						years = 10
					}
				}
			}
			10 = {
				add_character_modifier = {
					modifier = RICE_nubia_sibir_character_modifier_1
					years = 10
				}
			}
			10 = {
				add_character_modifier = {
					modifier = RICE_nubia_sibir_character_modifier_2
					years = 10
				}
			}
			10 = {
				add_character_modifier = {
					modifier = RICE_nubia_sibir_character_modifier_3
					years = 10
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0245.a
		hidden_effect = {
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_nubia_sibir_festival_gain_modifier_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					show_as_tooltip = {
						if = {
							limit = {
								scope:target_province = { has_province_modifier = RICE_nubia_sibir_province_modifier_1 }
							}
							scope:target_province = {
								add_province_modifier = {
									modifier = RICE_nubia_sibir_province_modifier_1
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:target_province = { has_province_modifier = RICE_nubia_sibir_province_modifier_2 }
							}
							scope:target_province = {
								add_province_modifier = {
									modifier = RICE_nubia_sibir_province_modifier_2
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:target_province = { has_province_modifier = RICE_nubia_sibir_province_modifier_3 }
							}
							scope:target_province = {
								add_province_modifier = {
									modifier = RICE_nubia_sibir_province_modifier_3
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:host = { has_character_modifier = RICE_nubia_sibir_character_modifier_1 }
							}
							scope:host = {
								add_character_modifier = {
									modifier = RICE_nubia_sibir_character_modifier_1
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:host = { has_character_modifier = RICE_nubia_sibir_character_modifier_2 }
							}
							scope:host = {
								add_character_modifier = {
									modifier = RICE_nubia_sibir_character_modifier_2
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:host = { has_character_modifier = RICE_nubia_sibir_character_modifier_3 }
							}
							scope:host = {
								add_character_modifier = {
									modifier = RICE_nubia_sibir_character_modifier_3
									years = 10
								}
							}
						}						
					}
				}
			}			
		}
	}

	after = {
		trigger_event = {
			id = nubia.0242
			days = { 3 5 }
		}
	}
}



######################################################################################
# 
# GENERIC FLAVOR EVENTS
# 
# nubia.0260-nubia.0299
# 
######################################################################################


# County becomes well known for sunt wood boats - councilor suggests making use of it
nubia.0260 = {
	type = character_event
	title = nubia.0260.t
	desc = nubia.0260.desc
	theme = stewardship_domain_focus
	override_background = { reference = RICE_background_nile_valley }

	left_portrait = {
		character = root
		animation = personality_forgiving
	}

	right_portrait = {
		character = scope:councilor
		animation = personality_dishonorable
	}
		
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_nile_river_valley_without_ethiopia
			}
		}
		any_councillor = {
			is_available_ai_adult = yes
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = brave
		}
		modifier = {
			add = -0.2
			has_trait = craven
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = ambitious
		}
		modifier = {
			add = -0.2
			has_trait = content
		}
	}

	immediate = {
		random_held_title = {			
			limit = {
				tier = tier_county
				any_county_province = {
					geographical_region = RICE_nile_river_valley_without_ethiopia
				}
			}
			save_scope_as = county
		}
		random_councillor = {
			limit = {
				is_available_ai_adult = yes
			}
			save_scope_as = councilor
		}
	}

	option = { # Ok let's set aside the funding
		name = nubia.0260.a
		trigger = {
			OR = {
				gold >= 50
				is_ai = no
			}
		}
		remove_short_term_gold = 50
		add_character_modifier = {
			modifier = RICE_nubia_sunt_boats_character
			years = 10
		}
		stress_impact = {
			greedy = miniscule_stress_impact_gain
		}
		scope:councilor = {
			add_opinion = {
				target = root
				modifier = pleased_opinion
				opinion = 10
			}
		}
	}

	option = { # Ok
		name = nubia.0260.b
		trigger = {
			OR = {
				gold >= 50
				is_ai = no
			}
		}
		remove_short_term_gold = 50
		scope:county = {
			add_county_modifier = {
				modifier = RICE_nubia_sunt_boats_county
				years = 10
			}
		}
		stress_impact = {
			greedy = miniscule_stress_impact_gain
		}
		scope:councilor = {
			add_opinion = {
				target = root
				modifier = pleased_opinion
				opinion = 10
			}
		}
	}

	option = { # Ok
		name = nubia.0260.c
		stress_impact = {
			diligent = miniscule_stress_impact_gain
			forder = miniscule_stress_impact_gain
			strategist = miniscule_stress_impact_gain
		}
		scope:councilor = {
			add_opinion = {
				target = root
				modifier = disappointed_opinion
				opinion = -10
			}
		}
	}

}

# Nubian chancellor suggests training scribes in Nubian, Coptic, Greek, or Arabic
nubia.0261 = {
	type = character_event
	title = nubia.0261.t
	desc = nubia.0261.desc
	theme = learning
	override_background = { reference = council_chamber }

	left_portrait = {
		character = root
		animation = personality_forgiving
	}

	right_portrait = {
		character = scope:chancellor
		animation = personality_dishonorable
	}
		
	trigger = {
		NOT = { government_has_flag = government_is_tribal }
		NOT = { government_has_flag = government_is_nomadic }
		NOT = { religion = religion:islam_religion }
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
		culture:nubian = {
			has_same_culture_language = root.culture
		}
		exists = cp:councillor_chancellor
		cp:councillor_chancellor = {
			is_available_ai_adult = yes
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = just
		}
		modifier = {
			add = -0.2
			has_trait = arbitrary
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = ambitious
		}
		modifier = {
			add = -0.2
			has_trait = content
		}
	}

	immediate = {
		culture:nubian = {
			save_scope_as = nubian
		}
		culture:ancient_egyptian = {
			save_scope_as = coptic
		}
		culture:greek = {
			save_scope_as = greek
		}
		culture:bedouin = {
			save_scope_as = arabic
		}
		cp:councillor_chancellor = {
			save_scope_as = chancellor
		}
	}

	option = { # Train in Nubian
		name = nubia.0261.a
		add_character_modifier = {
			modifier = RICE_nubia_scribes_studying_nubian
			years = 10
		}
	}

	option = { # Train in Coptic
		name = nubia.0261.b
		add_character_modifier = {
			modifier = RICE_nubia_scribes_studying_coptic
			years = 10
		}
	}

	option = { # Train in Greek
		name = nubia.0261.c
		add_character_modifier = {
			modifier = RICE_nubia_scribes_studying_greek
			years = 10
		}
	}

	option = { # Train in Arabic
		name = nubia.0261.d
		add_character_modifier = {
			modifier = RICE_nubia_scribes_studying_arabic
			years = 10
		}
	}

}

# Nubian decides whether to adopt more indigenous Nubian influence in clothing over Byzantine influence
nubia.0262 = {
	type = character_event
	title = nubia.0262.t
	desc = nubia.0262.desc
	theme = court

	right_portrait = {
		character = root
		animation = personality_greedy
	}
		
	trigger = {
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
		NOT = { has_global_variable = RICE_game_started_on_TFE_start_date }
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = just
		}
		modifier = {
			add = -0.2
			has_trait = arbitrary
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = ambitious
		}
		modifier = {
			add = -0.2
			has_trait = content
		}
	}

	immediate = {
		hidden_effect = {
			every_courtier = {
				limit = {
					culture = root.culture
					is_available_ai_adult = yes
				}
				random_list = {
					50 = {
						add_character_modifier = {
							modifier = RICE_nubia_prefers_byzantine_clothing
							years = 10
						}
					}
					50 = {
						add_character_modifier = {
							modifier = RICE_nubia_prefers_indigenous_clothing
							years = 10
						}					
					}
				}
			}			
		}
		custom_tooltip = nubia.0262.tooltip
	}

	option = { # Indigenous
		name = nubia.0262.a
		add_character_modifier = {
			modifier = RICE_nubia_prefers_indigenous_clothing
			years = 10
		}	
		every_courtier = {
			custom = RICE_every_courtier_prefers_byzantine_clothing
			limit = {
				has_character_modifier = RICE_nubia_prefers_byzantine_clothing
			}
			add_opinion = {
				target = root
				modifier = RICE_nubia_similar_fashion_preferences
			}	
		}
		every_courtier = {
			custom = RICE_every_courtier_prefers_indigenous_clothing
			limit = {
				has_character_modifier = RICE_nubia_prefers_indigenous_clothing
			}
			add_opinion = {
				target = root
				modifier = RICE_nubia_dissimilar_fashion_preferences
			}	
		}
	}

	option = { # Byzantine
		name = nubia.0262.b
		add_character_modifier = {
			modifier = RICE_nubia_prefers_byzantine_clothing
			years = 10
		}
		every_courtier = {
			custom = RICE_every_courtier_prefers_byzantine_clothing
			limit = {
				has_character_modifier = RICE_nubia_prefers_byzantine_clothing
			}
			add_opinion = {
				target = root
				modifier = RICE_nubia_dissimilar_fashion_preferences
			}	
		}
		every_courtier = {
			custom = RICE_every_courtier_prefers_indigenous_clothing
			limit = {
				has_character_modifier = RICE_nubia_prefers_indigenous_clothing
			}
			add_opinion = {
				target = root
				modifier = RICE_nubia_similar_fashion_preferences
			}	
		}
	}

}

# Merchants report on others' rumors about Nubians, including how Nubian kings can just enslave anyone
nubia.0263 = {
	type = character_event
	title = nubia.0263.t
	desc = nubia.0263.desc
	theme = diplomacy_foreign_affairs_focus

	right_portrait = {
		character = root
		animation = laugh
	}
		
	trigger = {
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	option = { # Good
		name = nubia.0263.a
		add_dread = miniscule_dread_gain
		stress_impact = {
			sadistic = miniscule_stress_impact_loss
			ambitious = miniscule_stress_impact_loss
			brave = miniscule_stress_impact_loss
			deceitful = miniscule_stress_impact_loss
		}
	}

	option = { # Ignorant foreigners
		name = nubia.0263.b
		add_prestige = 25
		stress_impact = {
			arrogant = miniscule_stress_impact_loss
			stubborn = miniscule_stress_impact_loss
			gregarious = miniscule_stress_impact_loss
			honest = miniscule_stress_impact_loss
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0263.info
		}
	}

}

# Child plays "Forest Protectors," a game still played to this day in modern-day northern Sudan
nubia.0264 = {
	type = character_event
	title = nubia.0264.t
	desc = nubia.0264.desc
	theme = family
	override_background = { reference = corridor_night }

	right_portrait = {
		character = root
		animation = personality_content
	}

	lower_right_portrait = scope:child
		
	trigger = {
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
		any_child = {
			age >= 5
			age < 16	
			is_courtier_of = root	
			OR = {
				culture = culture:nubian
				culture = {
					any_parent_culture_or_above = {
						this = culture:nubian
					}
				}
			}			
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = compassionate
		}
		modifier = {
			add = -0.2
			has_trait = callous
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	immediate = {
		random_child = {
			limit = {
				age >= 5
				age < 16	
				is_courtier_of = root
				OR = {
					culture = culture:nubian
					culture = {
						any_parent_culture_or_above = {
							this = culture:nubian
						}
					}
				}
			}
			save_scope_as = child
			stress_impact = {
				base = minor_stress_impact_loss
			}
		}
	}

	option = { # Serious
		name = nubia.0264.a
		add_prestige = 25
		stress_impact = {
			arrogant = miniscule_stress_impact_loss
		}
	}

	option = { # Happy memories
		name = nubia.0264.b
		stress_impact = {
			base = miniscule_stress_impact_loss
			content = miniscule_stress_impact_loss
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0264.info
		}
	}

}

# Zealous non-Muslim is outraged at the usage of the "Era of Hegira" in your documents
nubia.0265 = {
	type = character_event
	title = nubia.0265.t
	desc = nubia.0265.desc
	theme = administrative

	left_portrait = {
		character = root
		animation = war_over_tie
	}

	right_portrait = {
		character = scope:zealot
		animation = anger
	}
		
	trigger = {
		capital_county = {
			any_county_province = {
				OR = {
					geographical_region = ghw_region_egypt
					geographical_region = RICE_greater_nubia_region
				}
			}
		}
		NOT = { government_has_flag = government_is_tribal }
		NOT = { government_has_flag = government_is_nomadic }
		NOT = { religion = religion:islam_religion }
		OR = {
			any_courtier_or_guest = {
				is_available_ai_adult = yes
				faith = root.faith
				NOT = { has_trait = cynical }
				NOT = { has_trait = content }
				NOT = { has_trait = shy }
				OR = {
					has_trait = zealous
					has_trait = arrogant
					has_trait = wrathful
					has_trait = honest
				}
			}
			any_vassal = {
				is_available_ai_adult = yes
				faith = root.faith
				NOT = { has_trait = cynical }
				NOT = { has_trait = content }
				NOT = { has_trait = shy }
				OR = {
					has_trait = zealous
					has_trait = arrogant
					has_trait = wrathful
					has_trait = honest
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = honest
		}
		modifier = {
			add = -0.2
			has_trait = deceitful
		}
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = cynical
		}
	}

	immediate = {
		culture:bedouin = {
			save_scope_as = arabic
		}
		every_courtier_or_guest = {
			limit = {
				is_available_ai_adult = yes
				faith = root.faith
				NOT = { has_trait = cynical }
				NOT = { has_trait = content }
				NOT = { has_trait = shy }
				OR = {
					has_trait = zealous
					has_trait = arrogant
					has_trait = wrathful
					has_trait = honest
				}
			}
			add_to_list = candidate_characters
		}
		every_vassal = {
			limit = {
				is_available_ai_adult = yes
				faith = root.faith
				NOT = { has_trait = cynical }
				NOT = { has_trait = content }
				NOT = { has_trait = shy }
				OR = {
					has_trait = zealous
					has_trait = arrogant
					has_trait = wrathful
					has_trait = honest
				}
			}
			add_to_list = candidate_characters
		}
		random_in_list = {
			list = candidate_characters
			save_scope_as = zealot
		}
		if = {
			limit = {
				top_liege = {
					religion = religion:islam_religion
				}
			}
			top_liege = {
				save_scope_as = liege
			}
		}
		else_if = {
			limit = {
				liege = {
					religion = religion:islam_religion
				}
			}
			liege = {
				save_scope_as = liege
			}
		}
	}

	option = { # Serious
		name = nubia.0265.a
		trigger = {
			OR = {
				top_liege = {
					religion = religion:islam_religion
				}
				liege = {
					religion = religion:islam_religion
				}
			}
		}
		add_legitimacy = miniscule_legitimacy_gain
	}

	option = { # Don't care
		name = nubia.0265.b
		add_prestige = 50
		add_character_modifier = {
			modifier = RICE_nubia_encouraging_era_of_hegira
			years = 10
		}
		scope:zealot = {
			reverse_add_opinion = {
				modifier = disapproval_opinion
				target = root
				opinion = -15
			}
		}
		stress_impact = {
			zealous = minor_stress_impact_gain
		}
	}

	option = { # Discourage its use
		name = nubia.0265.c
		add_piety = 50
		add_character_modifier = {
			modifier = RICE_nubia_discouraging_era_of_hegira
			years = 10
		}
		scope:zealot = {
			add_opinion = {
				modifier = pleased_opinion
				target = root
				opinion = 10
			}
		}
		stress_impact = {
			diligent = miniscule_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			cynical = miniscule_stress_impact_gain
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0265.info
		}
	}

}

# Mound of red brick discovered in Nubia, but could be home to fearsome spirits
nubia.0266 = {
	type = character_event
	title = nubia.0266.t
	desc = nubia.0266.desc
	theme = RICE_theme_nubia_dongola_building

	right_portrait = root
		
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_nile_river_valley_nubia
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = patient
		}
		modifier = {
			add = -0.2
			has_trait = impatient
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	immediate = {
		random_held_title = {			
			limit = {
				tier = tier_county
				any_county_province = {
					geographical_region = RICE_nile_river_valley_nubia
				}
			}
			save_scope_as = county
			add_county_modifier = {
				modifier = RICE_nubia_red_brick_mounds
				years = 10
			}
		}
	}

	option = { # Ok
		name = nubia.0266.a
		add_piety = -50
		every_courtier = {
			custom = RICE_every_zealous_nubian_courtier_of_religion
			limit = {
				religion = root.religion
				OR = {
					has_trait = zealous
					has_trait = humble
					has_trait = paranoid
					has_trait = craven
				}
			}
			add_opinion = {
				target = root
				modifier = RICE_nubia_disrespects_local_spirits
				opinion = -10
			}
		}
		stress_impact = {
			craven = miniscule_stress_impact_gain
			paranoid = miniscule_stress_impact_gain
			zealous = minor_stress_impact_gain
		}
	}

	option = { # Don't touch them!
		name = nubia.0266.b
		add_piety = 50
		every_courtier = {
			custom = RICE_every_zealous_nubian_courtier_of_religion
			limit = {
				religion = root.religion
				OR = {
					has_trait = zealous
					has_trait = humble
					has_trait = paranoid
					has_trait = craven
				}
			}
			add_opinion = {
				target = root
				modifier = RICE_nubia_respects_local_spirits
				opinion = 10
			}
		}
		scope:county = {
			remove_county_modifier = RICE_nubia_red_brick_mounds
		}
		stress_impact = {
			diligent = miniscule_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			cynical = minor_stress_impact_gain
			brave = miniscule_stress_impact_gain
		}
	}

}


# Arrive at a Hafir while in Nubia
nubia.0267 = {
	type = character_event
	title = nubia.0267.t
	desc = {
		desc = nubia.0267.desc
		triggered_desc = {
			trigger = {
				root = scope:ruler
			}
			desc = nubia.0267.desc.self
		}
	}
	theme = travel_stewardship
	override_background = { reference = RICE_background_nile_valley }
	
	right_portrait = {
		character = root
		animation = personality_content
	}	

	trigger = {
		is_location_valid_for_travel_event_on_land = yes
		location = {
			geographical_region = RICE_nile_river_valley_nubia
		}
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = patient
		}
		modifier = {
			add = -0.2
			has_trait = impatient
		}
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	immediate = {
		location.county.holder = {
			save_scope_as = ruler
		}
	}

	option = { # Ok
		name = nubia.0267.a
		trigger = {
			root = scope:ruler
		}
		add_prestige = 25
		stress_impact = {
			arrogant = minor_stress_impact_loss
		}
	}

	option = { # Ok
		name = nubia.0267.b
		trigger = {
			root = scope:ruler
		}
		add_piety = 25
		stress_impact = {
			humble = minor_stress_impact_loss
		}
	}

	option = { # Ok
		name = nubia.0267.c
		trigger = {
			NOT = { root = scope:ruler }
		}
		add_piety = 25
		stress_impact = {
			arrogant = minor_stress_impact_gain
			callous = minor_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0267.d
		trigger = {
			NOT = { root = scope:ruler }
		}
		add_prestige = 25
		stress_impact = {
			humble = minor_stress_impact_gain
			paranoid = minor_stress_impact_gain
		}
	}

}


# While stopping by a Nubian village, the locals have no beef to offer you
nubia.0268 = {
	type = character_event
	title = nubia.0268.t
	desc = nubia.0268.desc
	theme = travel_diplomacy
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	right_portrait = {
		character = root
		animation = personality_compassionate
	}	

	trigger = {
		is_location_valid_for_travel_event_on_land = yes
		location = {
			county = {
				OR = {
					culture = culture:nubian
					culture = {
						any_parent_culture_or_above = {
							this = culture:nubian
						}
					}
				}				
			}
			# Not for religions where it wouldn't make sense
			NOR = {
				religion = religion:islam_religion
				religion = religion:judaism_religion
				religion = religion:hinduism_religion
				is_vegetarian_trigger = yes
			}
		}
		# Not for religions where it wouldn't make sense
		NOR = {
			religion = religion:islam_religion
			religion = religion:judaism_religion
			religion = religion:hinduism_religion
			is_vegetarian_trigger = yes
		}
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gluttonous
		}
		modifier = {
			add = -0.2
			has_trait = temperate
		}
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	immediate = {
		location.county.culture = {
			save_scope_as = culture
		}
	}

	option = { # Ok
		name = nubia.0268.a
		add_piety = 25
		stress_impact = {
			gluttonous = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0268.b
		add_prestige = 25
		stress_impact = {
			temperate = minor_stress_impact_gain
			humble = minor_stress_impact_gain
			just = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0268.c
		trigger = {
			OR = {
				gold >= 30
				is_ai = no
			}
		}
		remove_short_term_gold = 30
		add_piety = 25
		add_prestige = 25
		add_character_modifier = {
			modifier = RICE_nubia_generous_to_commoners
			years = 10
		}
		stress_impact = {
			greedy = medium_stress_impact_gain
			arrogant = minor_stress_impact_gain
			callous = minor_stress_impact_gain
			paranoid = miniscule_stress_impact_gain
			sadistic = miniscule_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0268.info
		}
	}

}



# Chaplain complains about Coptic monks owning and farming land
nubia.0269 = {
	type = character_event
	title = nubia.0269.t
	desc = nubia.0269.desc
	theme = learning_scholarship_focus

	left_portrait = {
		character = root
		animation = personality_cynical
	}

	right_portrait = {
		character = scope:chaplain
		animation = stressed_teacher
	}
		
	trigger = {
		NOT = { government_has_flag = government_is_tribal }
		NOT = { government_has_flag = government_is_nomadic }
		religion = religion:christianity_religion
		capital_county = {
			any_county_province = {
				OR = {
					geographical_region = ghw_region_egypt
					geographical_region = RICE_greater_nubia_region
				}
			}
		}
		cp:councillor_court_chaplain = {
			exists = yes
			is_available_ai_adult = yes
			faith = root.faith
			OR = {
				has_trait = zealous
				has_trait = diligent
				has_trait = temperate
				has_trait = humble
				has_trait = generous
				has_trait = impatient
				has_trait = stubborn
			}
			NOR = {
				has_trait = cynical
				has_trait = lazy
				has_trait = greedy
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = shy
		}
		modifier = {
			add = -0.2
			has_trait = gregarious
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = calm
		}
		modifier = {
			add = -0.2
			has_trait = wrathful
		}
	}

	immediate = {
		cp:councillor_court_chaplain = {
			save_scope_as = chaplain
			add_character_modifier = {
				modifier = RICE_nubia_encouraging_monks_away_from_farming
				years = 10
			}
		}
	}

	option = { # Ok
		name = nubia.0269.a
		stress_impact = {
			zealous = minor_stress_impact_gain
		}
		scope:chaplain = {
			add_opinion = {
				target = root
				modifier = disappointed_opinion
				opinion = -5
			}
		}
	}

	option = { # Ok
		name = nubia.0269.b
		add_piety = 100
		add_character_modifier = {
			modifier = RICE_nubia_encouraging_monks_away_from_farming
			years = 10
		}
		stress_impact = {
			greedy = minor_stress_impact_gain
			diligent = miniscule_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			cynical = minor_stress_impact_gain
		}
		scope:chaplain = {
			add_opinion = {
				target = root
				modifier = pious_opinion
				opinion = 15
			}
		}
	}

}


# Chaplain lists the many epithets of Saint Raphael
nubia.0270 = {
	type = character_event
	title = nubia.0270.t
	desc = nubia.0270.desc
	theme = RICE_theme_nubia_church_interior

	left_portrait = {
		character = root
		animation = personality_honorable
	}

	right_portrait = {
		character = scope:chaplain
		animation = personality_zealous
	}
		
	trigger = {
		religion = religion:christianity_religion
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
		cp:councillor_court_chaplain = {
			exists = yes
			is_available_ai_adult = yes
			faith = root.faith
			OR = {
				culture = culture:nubian
				culture = {
					any_parent_culture_or_above = {
						this = culture:nubian
					}
				}
			}
			NOR = {
				has_trait = cynical
				has_trait = lazy
				has_trait = shy
				has_trait = reclusive
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = shy
		}
		modifier = {
			add = -0.2
			has_trait = gregarious
		}
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = cynical
		}
		modifier = {
			add = 0.2
			has_trait = patient
		}
		modifier = {
			add = -0.2
			has_trait = impatient
		}
	}

	immediate = {
		culture:greek = {
			save_scope_as = greek
		}
		cp:councillor_court_chaplain = {
			add_piety = 25
			save_scope_as = chaplain
		}
	}

	option = { # Ok
		name = nubia.0270.a
		add_character_modifier = {
			modifier = RICE_nubia_raphael_inspiration_spiritual
			years = 5
		}
		stress_impact = {
			cynical = minor_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0270.b
		add_character_modifier = {
			modifier = RICE_nubia_raphael_inspiration_enemies
			years = 5
		}
		stress_impact = {
			craven = minor_stress_impact_gain
			forgiving = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0270.c
		add_character_modifier = {
			modifier = RICE_nubia_cynical_ruler
			years = 5
		}
		stress_impact = {
			zealous = minor_stress_impact_gain
			trusting = miniscule_stress_impact_gain
			content = miniscule_stress_impact_gain
		}
	}

}


# Traveling merchant remarks on the beautiful art in Nubian churches
nubia.0271 = {
	type = character_event
	title = nubia.0271.t
	desc = nubia.0271.desc
	theme = RICE_theme_nubia_church_interior

	right_portrait = {
		character = root
		animation = personality_dishonorable
	}
		
	trigger = {
		NOT = { government_has_flag = government_is_tribal }
		NOT = { government_has_flag = government_is_nomadic }
		religion = religion:christianity_religion
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = generous
		}
		modifier = {
			add = -0.2
			has_trait = greedy
		}
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = cynical
		}
	}


	option = { # Ok
		name = nubia.0271.a
		add_prestige = 50
	}

	option = { # Ok
		name = nubia.0271.b
		add_piety = 50
		stress_impact = {
			cynical = minor_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0271.c
		add_character_modifier = {
			modifier = RICE_nubia_interested_in_foreign_art
			years = 5
		}
		stress_impact = {
			callous = minor_stress_impact_gain
		}
	}

}

# While stopping by a Nubian church, the monks there talk about pigs and pork
nubia.0272 = {
	type = character_event
	title = nubia.0272.t
	desc = nubia.0272.desc
	theme = travel_learning
	override_background = { reference = RICE_background_nubia_church_interior }
	
	right_portrait = {
		character = root
		animation = personality_content
	}	

	trigger = {
		is_location_valid_for_travel_event_on_land = yes
		location = {
			county = {
				religion = religion:christianity_religion
				faith = {
					NOT = {
						has_doctrine = doctrine_pilgrimage_forbidden
					}
				}
				OR = {
					culture = culture:nubian
					culture = {
						any_parent_culture_or_above = {
							this = culture:nubian
						}
					}
				}				
			}
		}
		# Not for religions where it wouldn't make sense
		# NOR = {
		# 	religion = religion:islam_religion
		# 	religion = religion:judaism_religion
		# 	religion = religion:hinduism_religion
		# 	is_vegetarian_trigger = yes
		# }
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gluttonous
		}
		modifier = {
			add = -0.2
			has_trait = temperate
		}
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	immediate = {
		location.county.culture = {
			save_scope_as = culture
		}
		location.county.faith = {
			save_scope_as = faith
		}
	}

	option = { # You follow a religion that forbids pork
		name = nubia.0272.a
		trigger = {
			OR = {
				religion = religion:islam_religion
				religion = religion:judaism_religion
				is_vegetarian_trigger = yes
			}			
		}
		add_piety = 50
		stress_impact = {
			greedy = medium_stress_impact_gain
			arrogant = minor_stress_impact_gain
			callous = minor_stress_impact_gain
			paranoid = miniscule_stress_impact_gain
			sadistic = miniscule_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
		}
	}

	option = { # kk
		name = nubia.0272.b
		trigger = {
			NOR = {
				religion = religion:islam_religion
				religion = religion:judaism_religion
				is_vegetarian_trigger = yes
			}			
		}
		add_piety = 25
		stress_impact = {
			gluttonous = miniscule_stress_impact_gain
			arrogant = miniscule_stress_impact_gain
			callous = miniscule_stress_impact_gain
		}
	}

	option = { # wtf
		name = nubia.0272.c
		trigger = {
			NOR = {
				religion = religion:islam_religion
				religion = religion:judaism_religion
				is_vegetarian_trigger = yes
			}			
		}
		add_prestige = 25
		stress_impact = {
			temperate = miniscule_stress_impact_gain
			humble = miniscule_stress_impact_gain
			calm = miniscule_stress_impact_gain
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0272.info
		}
	}

}


# Chaplain recommends you an oikonomos (title likely referring to a steward of a church/monastery in a Nubian context) to bring onto your staff
nubia.0273 = {
	type = character_event
	title = nubia.0273.t
	desc = nubia.0273.desc
	theme = RICE_theme_nubia_church_interior

	# left_portrait = {
	# 	character = root
	# 	animation = personality_rational
	# }

	left_portrait = {
		character = scope:chaplain
		animation = happiness
		camera = camera_event_very_right
	}

	right_portrait = {
		character = scope:oikonomos
		animation = throne_room_bow_3
		camera = camera_event_very_right
	}

	trigger = {
		religion = religion:christianity_religion
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
		cp:councillor_court_chaplain = {
			exists = yes
			is_available_ai_adult = yes
			faith = root.faith
			OR = {
				culture = culture:nubian
				culture = {
					any_parent_culture_or_above = {
						this = culture:nubian
					}
				}
			}
			NOR = {
				has_trait = lazy
				has_trait = shy
				has_trait = reclusive
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = fickle
		}
		modifier = {
			add = -0.2
			has_trait = stubborn
		}
		modifier = {
			add = 0.2
			has_trait = trusting
		}
		modifier = {
			add = -0.2
			has_trait = paranoid
		}
		modifier = {
			add = 0.2
			has_trait = honest
		}
		modifier = {
			add = -0.2
			has_trait = deceitful
		}
	}

	immediate = {
		cp:councillor_court_chaplain = {
			save_scope_as = chaplain
		}
		create_character = {
			location = root.capital_province
			template = RICE_nubia_oikonomos_template
			save_scope_as = oikonomos			
		}
		# scope:oikonomos = {
		# 	add_character_modifier = {
		# 		modifier = RICE_nubia_oikonomos_modifier
		# 	}
		# }
	}

	option = { # Ok
		name = nubia.0273.a
		trigger = {
			OR = {
				gold >= 50
				is_ai = no
			}
		}
		remove_short_term_gold = 50
		add_courtier = scope:oikonomos
		stress_impact = {
			greedy = miniscule_stress_impact_gain
			paranoid = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0273.b
        scope:chaplain = {
            add_opinion = {
                target = root
                modifier = disappointed_opinion
                opinion = -5
            }
        }
		hidden_effect = {
			scope:oikonomos = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
	}

}



# One of your knights is very devoted to Saint Epimachos
nubia.0274 = {
	type = character_event
	title = nubia.0274.t
	desc = nubia.0274.desc
	theme = RICE_theme_nubia_church_interior

	right_portrait = {
		character = scope:knight
		animation = prayer
	}
		
	trigger = {
		religion = religion:christianity_religion
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
		any_knight = {
			is_available_ai_adult = yes
			religion = religion:christianity_religion
			OR = {
				culture = culture:nubian
				culture = {
					any_parent_culture_or_above = {
						this = culture:nubian
					}
				}
			}
			NOT = { has_trait = cynical }
			NOT = { has_trait = lazy }
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = honest
		}
		modifier = {
			add = -0.2
			has_trait = deceitful
		}
		modifier = {
			add = 0.2
			has_trait = brave
		}
		modifier = {
			add = -0.2
			has_trait = craven
		}
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = cynical
		}
	}

	immediate = {
		random_knight = {				
			limit = {
				is_available_ai_adult = yes
				religion = religion:christianity_religion
				OR = {
					culture = culture:nubian
					culture = {
						any_parent_culture_or_above = {
							this = culture:nubian
						}
					}
				}
				NOT = { has_trait = cynical }
				NOT = { has_trait = lazy }
			}
			save_scope_as = knight
			add_character_modifier = {
				modifier = RICE_nubia_saint_epimachos_devotee
				years = 20
			}
		}		
	}

	option = { # Ok
		name = nubia.0274.a
		add_piety = 25
		stress_impact = {
			cynical = minor_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0274.b
		add_prestige = 25
		stress_impact = {
			zealous = minor_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0274.c
		trigger = {
			has_trait = zealous
		}
		trait = zealous
		add_character_modifier = {
			modifier = RICE_nubia_saint_epimachos_devotee
			years = 20
		}
	}

}

# Nubian ruler decides to focus the efforts of their "soulou"
nubia.0275 = {
	type = character_event
	title = nubia.0275.t
	desc = nubia.0275.desc
	theme = intrigue
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = root
		animation = chancellor
	}
		
	trigger = {
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = deceitful
		}
		modifier = {
			add = -0.2
			has_trait = honest
		}
		modifier = {
			add = 0.2
			has_trait = paranoid
		}
		modifier = {
			add = -0.2
			has_trait = trusting
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = content
		}
	}

	option = { # Political matters
		name = nubia.0275.a
		add_character_modifier = {
			modifier = RICE_nubia_soulou_political
			years = 10
		}
	}

	option = { # Personal matters
		name = nubia.0275.b
		add_character_modifier = {
			modifier = RICE_nubia_soulou_personal
			years = 10
		}
	}

	option = { # Speedy correspondence
		name = nubia.0275.c
		add_character_modifier = {
			modifier = RICE_nubia_soulou_correspondence
			years = 10
		}
	}

}

# Hermits in the Nile are moving into an ancient tomb
nubia.0276 = {
	type = character_event
	title = nubia.0276.t
	desc = nubia.0276.desc
	theme = learning_theology_focus
	override_background = { reference = RICE_background_egypt_desert }

	right_portrait = {
		character = root
		animation = thinking
	}
		
	trigger = {
		any_held_title = {
			tier = tier_county
			OR = {
				religion = religion:christianity_religion
				faith = { has_doctrine = tenet_monasticism }
			}
			any_county_province = {
				geographical_region = RICE_nile_river_valley_without_ethiopia
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = just
		}
		modifier = {
			add = -0.2
			has_trait = arbitrary
		}
	}

	immediate = {
		random_held_title = {			
			limit = {
				tier = tier_county
				OR = {
					religion = religion:christianity_religion
					faith = { has_doctrine = tenet_monasticism }
				}
				any_county_province = {
					geographical_region = RICE_nile_river_valley_without_ethiopia
				}
			}
			save_scope_as = county
			add_county_modifier = {
				modifier = RICE_nubia_hermits_in_ancient_tomb
				years = 20
			}
		}
		scope:county.faith = {
			save_scope_as = faith
		}
	}

	option = { # Ok
		name = nubia.0276.a
	}

	option = { # Ok
		name = nubia.0276.b
		trigger = {
			OR = {
				gold >= 50
				is_ai = no
			}
		}
		remove_short_term_gold = 50
		if = {
			limit = {
				religion = religion:christianity_religion
			}
			add_piety = 50
		}
		else = {
			add_prestige = 50
		}
		add_character_modifier = {
			modifier = RICE_nubia_helped_christian_hermits
			years = 10
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0276.info
		}
	}

}

# African slave claims they're a free man/woman kidnapped into slavery - do you believe their story or not?
nubia.0277 = {
	type = character_event
	title = nubia.0277.t
	window = big_event_window
	desc = nubia.0277.desc
	theme = abduct_scheme
	override_background = { reference = throne_room }

	left_portrait = {
		character = root
		animation = war_defender
	}

	right_portrait = {
		character = scope:african
		animation = beg
	}
		
	trigger = {
		RICE_baqt_egyptian_ruler_trigger = yes
		capital_county = {
			any_county_province = {
				geographical_region = ghw_region_egypt
			}
		}
		any_held_title = {
			tier = tier_county
			RICE_baqt_egyptian_ruler_trigger = yes
			any_county_province = {
				geographical_region = ghw_region_egypt
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = just
		}
		modifier = {
			add = -0.2
			has_trait = arbitrary
		}
		modifier = {
			add = 0.2
			has_trait = compassionate
		}
		modifier = {
			add = -0.2
			has_trait = callous
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = content
		}
	}

	immediate = {
		random_held_title = {			
			limit = {
				tier = tier_county
				RICE_baqt_egyptian_ruler_trigger = yes
				any_county_province = {
					geographical_region = ghw_region_egypt
				}
			}
			save_scope_as = county
		}
		if = {
			limit = {
				any_county_in_region = {
					region = world_africa
					RICE_baqt_nubian_ruler_trigger = yes
				}				
			}
			random_list = {
				# Pick a random county in Africa
				80 = {
					random_county_in_region = {
						region = world_africa
						limit = {
							RICE_baqt_nubian_ruler_trigger = yes
						}
						# Prefer African cultures close to Egypt
						weight = {
							base = 1
							modifier = {
								add = 10
								culture_has_east_african_heritage_pillar_trigger = yes
							}
							modifier = {
								add = 5
								culture_has_central_african_heritage_pillar_trigger = yes
							}
						}
						save_scope_as = origin_county
					}
					scope:origin_county.culture = {
						save_scope_as = county_culture
					}
					scope:origin_county.faith = {
						save_scope_as = county_faith
					}
				}
				# Chance of picking off-map Bantu instead
				20 = {
					root.capital_county = {
						save_scope_as = origin_county
					}	
					random_list = {
						15 = {
							culture:makonde = {
								save_scope_as = county_culture
							}
							faith:makonde_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:malagasy = {
								save_scope_as = county_culture
							}
							faith:malagasy_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:mijikenda = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:pokomo = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:seuta = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:sabaki = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:ruvu = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						5 = {
							culture:shona = {
								save_scope_as = county_culture
							}
							faith:shona_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:makua = {
								save_scope_as = county_culture
							}
							faith:makua_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:tsonga = {
								save_scope_as = county_culture
							}
							faith:tsonga_pagan = {
								save_scope_as = county_faith
							}
						}
						5 = {
							culture:nguni = {
								save_scope_as = county_culture
							}
							faith:nguni_pagan = {
								save_scope_as = county_faith
							}
						}
						5 = {
							culture:sotho_tswana = {
								save_scope_as = county_culture
							}
							faith:sotho_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:dahalo = {
								save_scope_as = county_culture
							}
							faith:waaqism_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:aweer = {
								save_scope_as = county_culture
							}
							faith:waaqism_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:oromo = {
								save_scope_as = county_culture
							}
							faith:waaqism_pagan = {
								save_scope_as = county_faith
							}
						}
					}	
				}
			}
		}
		else = {
			random_list = {
				# Pick a random county in Africa
				80 = {
					random_culture_global = {
						limit = {
							OR = {
								has_cultural_pillar = heritage_somalian
								has_cultural_pillar = heritage_east_african
								has_cultural_pillar = heritage_central_african
							}
						}		
						save_scope_as = county_culture
					}	
					root.capital_county = {
						save_scope_as = origin_county
					}	
					scope:origin_county.faith = {
						save_scope_as = county_faith				
					}	
				}
				# Chance of picking off-map Bantu instead
				20 = {
					root.capital_county = {
						save_scope_as = origin_county
					}	
					random_list = {
						15 = {
							culture:makonde = {
								save_scope_as = county_culture
							}
							faith:makonde_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:malagasy = {
								save_scope_as = county_culture
							}
							faith:malagasy_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:mijikenda = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:pokomo = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:seuta = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:sabaki = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						15 = {
							culture:ruvu = {
								save_scope_as = county_culture
							}
							faith:mijikenda_pagan = {
								save_scope_as = county_faith
							}
						}
						5 = {
							culture:shona = {
								save_scope_as = county_culture
							}
							faith:shona_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:makua = {
								save_scope_as = county_culture
							}
							faith:makua_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:tsonga = {
								save_scope_as = county_culture
							}
							faith:tsonga_pagan = {
								save_scope_as = county_faith
							}
						}
						5 = {
							culture:nguni = {
								save_scope_as = county_culture
							}
							faith:nguni_pagan = {
								save_scope_as = county_faith
							}
						}
						5 = {
							culture:sotho_tswana = {
								save_scope_as = county_culture
							}
							faith:sotho_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:dahalo = {
								save_scope_as = county_culture
							}
							faith:waaqism_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:aweer = {
								save_scope_as = county_culture
							}
							faith:waaqism_pagan = {
								save_scope_as = county_faith
							}
						}
						10 = {
							culture:oromo = {
								save_scope_as = county_culture
							}
							faith:waaqism_pagan = {
								save_scope_as = county_faith
							}
						}
					}	
				}
			}
		}


		create_character = {
			location = root.location
			template = RICE_slave_generic_template
			save_scope_as = african
			culture = scope:county_culture
			faith = scope:county_faith
		}
		hidden_effect = {
			scope:african = {
				add_character_modifier = {
					modifier = RICE_nubia_accused_of_being_slave
				}
			}			
		}
	}

	option = { # Send the slave back
		name = nubia.0277.a
		add_dread = 10
		add_prestige = 50
		stress_impact = {
			trusting = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
		}
		scope:african = {
			add_opinion = {
				target = root
				modifier = RICE_nubia_kept_me_enslaved
			}
		}
		hidden_effect = {
			scope:african = {
				death = {
					death_reason = death_vanished
				}				
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				has_trait = callous
				add = 25
			}
			modifier = {
				has_trait = sadistic
				add = 25
			}
			ai_value_modifier = {
				ai_compassion = -1
			}
		}
	}

	option = { # Let them go free
		name = nubia.0277.b
		add_prestige = -50
		add_piety = 100
		stress_impact = {
			callous = minor_stress_impact_gain
			sadistic = minor_stress_impact_gain
		}
		scope:african = {
			add_opinion = {
				target = root
				modifier = RICE_nubia_freed_me
			}
		}
		hidden_effect = {
			scope:african = {
				death = {
					death_reason = death_vanished
				}				
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				has_trait = compassionate
				add = 10
			}
			modifier = {
				has_trait = trusting
				add = 10
			}
			ai_value_modifier = {
				ai_compassion = 2
			}
		}
	}

	option = { # Go free but also compensate the owner
		name = nubia.0277.c
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= 50			
			}
		}
		remove_short_term_gold = 50
		add_prestige = 100
		add_piety = 100
		stress_impact = {
			callous = minor_stress_impact_gain
			sadistic = minor_stress_impact_gain
			greedy = minor_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
		}
		scope:african = {
			add_opinion = {
				target = root
				modifier = RICE_nubia_freed_me
			}
		}
		hidden_effect = {
			scope:african = {
				death = {
					death_reason = death_vanished
				}				
			}
		}
		ai_chance = {
			factor = 25
			modifier = {
				has_trait = compassionate
				add = 10
			}
			modifier = {
				has_trait = trusting
				add = 10
			}
			ai_value_modifier = {
				ai_compassion = 2
			}
		}
	}

	option = { # Go free but serve me now
		name = nubia.0277.d
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= 50			
			}
		}
		remove_short_term_gold = 50
		add_courtier = scope:african
		if = {
			limit = {
				can_add_hook = {
					target = scope:african
					type = loyalty_hook
				}
			}
			add_hook = {
				target = scope:african
				type = loyalty_hook
			}
		}
		# To prevent them from somehow leaving your court too soon
		scope:african = {
			add_character_flag = {
				flag = blocked_from_leaving
				years = 25
			}	
			add_opinion = {
				target = root
				modifier = RICE_nubia_freed_me
			}		
		}
		stress_impact = {
			callous = minor_stress_impact_gain
			sadistic = minor_stress_impact_gain
			paranoid = miniscule_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
		}
		ai_chance = {
			factor = 15
			modifier = {
				has_trait = ambitious
				add = 10
			}
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0277.info
		}
	}

}

# Female Coptic courtier/vassal is inspired by the example of Saint Hilaria
nubia.0278 = {
	type = character_event
	title = nubia.0278.t
	desc = nubia.0278.desc
	theme = learning

	left_portrait = root

	right_portrait = {
		character = scope:courtier
		animation = personality_zealous
	}
		
	trigger = {
		# OR = {
		# 	faith = faith:coptic
		# 	faith = {
		# 		has_doctrine = special_doctrine_rice_doctrine_northeast_african_tattoo
		# 	}
		# }
		OR = {
			any_courtier_or_guest = {
				is_available_ai_adult = yes
				is_female = yes
				OR = {
					faith = faith:coptic
					faith = {
						has_doctrine = special_doctrine_rice_doctrine_northeast_african_tattoo
					}
				}
				NOT = { has_trait = cynical }
				NOT = { has_trait = shy }
			}
			any_vassal = {
				is_available_ai_adult = yes
				is_female = yes
				OR = {
					faith = faith:coptic
					faith = {
						has_doctrine = special_doctrine_rice_doctrine_northeast_african_tattoo
					}
				}
				NOT = { has_trait = cynical }
				NOT = { has_trait = shy }
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = cynical
		}
	}

	immediate = {
		every_courtier_or_guest = {
			limit = {
				is_available_ai_adult = yes
				is_female = yes
				OR = {
					faith = faith:coptic
					faith = {
						has_doctrine = special_doctrine_rice_doctrine_northeast_african_tattoo
					}
				}
				NOT = { has_trait = cynical }
				NOT = { has_trait = shy }
			}
			add_to_list = candidate_characters
		}
		every_vassal = {
			limit = {
				is_available_ai_adult = yes
				is_female = yes
				OR = {
					faith = faith:coptic
					faith = {
						has_doctrine = special_doctrine_rice_doctrine_northeast_african_tattoo
					}
				}
				NOT = { has_trait = cynical }
				NOT = { has_trait = shy }
			}
			add_to_list = candidate_characters
		}
		random_in_list = {
			list = candidate_characters
			weight = {
				base = 20
				modifier = {
					has_trait = zealous
					add = 10
				}
				modifier = {
					has_trait = calm
					add = 5
				}
				modifier = {
					has_trait = patient
					add = 5
				}
				modifier = {
					has_trait = eccentric
					add = 5
				}
				modifier = {
					has_trait = shy
					add = 5
				}
			}
			save_scope_as = courtier
		}
		scope:courtier = {
			add_character_modifier = {
				modifier = RICE_nubia_inspired_by_saint_hilaria
				years = 25
			}
			# Doesn't seem to work for some reason
			# random_list = {
			# 	50 = {

			# 	}
			# 	10 = {
			# 		trigger = {
			# 			has_trait = lustful
			# 			scope:courtier.faith = {
			# 				NOT = { trait_is_virtue = lustful }
			# 				NOT = { trait_is_sin = chaste }
			# 			}
			# 		}
			# 		remove_trait_force_tooltip = lustful
			# 		add_trait_force_tooltip = chaste
			# 	}
			# 	10 = {
			# 		trigger = {
			# 			has_trait = greedy
			# 			scope:courtier.faith = {
			# 				NOT = { trait_is_virtue = greedy }
			# 				NOT = { trait_is_sin = generous }
			# 			}
			# 		}
			# 		remove_trait_force_tooltip = greedy
			# 		add_trait_force_tooltip = generous	
			# 	}
			# 	10 = {
			# 		trigger = {
			# 			has_trait = sadistic
			# 			scope:courtier.faith = {
			# 				NOT = { trait_is_virtue = sadistic }
			# 				NOT = { trait_is_sin = compassionate }
			# 			}
			# 		}
			# 		remove_trait_force_tooltip = sadistic
			# 		add_trait_force_tooltip = compassionate
			# 	}
			# 	10 = {
			# 		trigger = {
			# 			has_trait = callous
			# 			scope:courtier.faith = {
			# 				NOT = { trait_is_virtue = callous }
			# 				NOT = { trait_is_sin = compassionate }
			# 			}
			# 		}
			# 		remove_trait_force_tooltip = callous
			# 		add_trait_force_tooltip = compassionate	
			# 	}
			# 	10 = {
			# 		trigger = {
			# 			has_trait = wrathful
			# 			scope:courtier.faith = {
			# 				NOT = { trait_is_virtue = wrathful }
			# 				NOT = { trait_is_sin = calm }
			# 			}
			# 		}
			# 		remove_trait_force_tooltip = wrathful
			# 		add_trait_force_tooltip = calm

			# 	}
			# 	10 = {
			# 		trigger = {
			# 			has_trait = vengeful
			# 			scope:courtier.faith = {
			# 				NOT = { trait_is_virtue = vengeful }
			# 				NOT = { trait_is_sin = forgiving }
			# 			}
			# 		}
			# 		remove_trait_force_tooltip = vengeful
			# 		add_trait_force_tooltip = forgiving	

			# 	}
			# 	10 = {
			# 		trigger = {
			# 			has_trait = gluttonous
			# 			scope:courtier.faith = {
			# 				NOT = { trait_is_virtue = gluttonous }
			# 				NOT = { trait_is_sin = temperate }
			# 			}
			# 		}
			# 		remove_trait_force_tooltip = gluttonous
			# 		add_trait_force_tooltip = temperate						
			# 	}
			# 	10 = {
			# 		trigger = {
			# 			has_trait = arrogant
			# 			scope:courtier.faith = {
			# 				NOT = { trait_is_virtue = arrogant }
			# 				NOT = { trait_is_sin = humble }
			# 			}
			# 		}
			# 		remove_trait_force_tooltip = arrogant
			# 		add_trait_force_tooltip = humble	
					
			# 	}
			# 	10 = {
			# 		trigger = {
			# 			has_trait = impatient
			# 			scope:courtier.faith = {
			# 				NOT = { trait_is_virtue = impatient }
			# 				NOT = { trait_is_sin = patient }
			# 			}
			# 		}
			# 		remove_trait_force_tooltip = impatient
			# 		add_trait_force_tooltip = patient	
					
			# 	}
			# }
		}
	}

	option = { # Cool story, good!
		name = nubia.0278.a
		if = {
			limit = {
				religion = religion:christianity_religion
			}
			add_piety = 25
		}
		else = {
			add_prestige = 25
		}
		scope:courtier = {
			add_opinion = {
				target = root
				modifier = RICE_nubia_encouraged_my_religiosity
				opinion = 10
			}			
		}
		stress_impact = {
			cynical = minor_stress_impact_gain
			arrogant = miniscule_stress_impact_gain
			callous = miniscule_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
		}
	}

	option = { # Cool story, bad!
		name = nubia.0278.b
		add_character_modifier = {
			modifier = RICE_nubia_cynical_ruler
			years = 10
		}
		stress_impact = {
			zealous = minor_stress_impact_gain
			humble = miniscule_stress_impact_gain
			trusting = minor_stress_impact_gain
		}
	}

	option = { # Another religion
		name = nubia.0278.c
		trigger = {
			NOT = { religion = religion:christianity_religion }
		}
		add_piety = 25
		scope:courtier = {
			add_opinion = {
				target = root
				modifier = insulted_opinion
				opinion = -10
			}			
		}
		stress_impact = {
			humble = minor_stress_impact_gain
			calm = miniscule_stress_impact_gain
			patient = miniscule_stress_impact_gain
		}
	}

}

# Eating Ful Medames
nubia.0279 = {
	type = character_event
	title = nubia.0279.t
	desc = nubia.0279.desc
	theme = feast_activity
	override_background = { reference = bp1_kitchen_western }

	right_portrait = {
		character = root
		animation = happiness
	}
		
	trigger = {
		OR = {
			culture = culture:egyptian
			culture = {
				any_parent_culture_or_above = {
					this = culture:egyptian
				}
			}			
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}			
			culture = culture:ancient_egyptian
			culture = {
				any_parent_culture_or_above = {
					this = culture:ancient_egyptian
				}
			}			
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = temperate
		}
		modifier = {
			add = -0.2
			has_trait = gluttonous
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
		modifier = {
			add = 0.2
			has_trait = patient
		}
		modifier = {
			add = -0.2
			has_trait = impatient
		}
	}


	option = { # Yum
		name = nubia.0278.a
		add_character_modifier = {
			modifier = RICE_nubia_enjoying_ful_medames
			years = 4
		}
		stress_impact = {
			gluttonous = minor_stress_impact_loss
			temperate = miniscule_stress_impact_loss
			content = miniscule_stress_impact_loss
			humble = miniscule_stress_impact_loss
		}
	}

}

# Ancient Nubian pottery workshops are performing well
nubia.0280 = {
	type = character_event
	title = nubia.0280.t
	desc = nubia.0280.desc
	theme = RICE_theme_nubia_dongola_building

	left_portrait = root

	right_portrait = {
		character = scope:councilor
		animation = debating
	}
		
	trigger = {
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
		any_held_title = {
			tier = tier_county
			OR = {
				culture = culture:nubian
				culture = {
					any_parent_culture_or_above = {
						this = culture:nubian
					}
				}
			}	
			any_county_province = {
				geographical_region = RICE_nile_river_valley_nubia
			}
		}
		any_councillor = {
			is_available_ai_adult = yes
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = ambitious
		}
		modifier = {
			add = -0.2
			has_trait = content
		}
		modifier = {
			add = 0.2
			has_trait = honest
		}
		modifier = {
			add = -0.2
			has_trait = deceitful
		}
	}

	immediate = {
		random_held_title = {			
			limit = {
				tier = tier_county
				OR = {
					culture = culture:nubian
					culture = {
						any_parent_culture_or_above = {
							this = culture:nubian
						}
					}
				}
				any_county_province = {
					geographical_region = RICE_nile_river_valley_nubia
				}
			}
			save_scope_as = county
		}
		scope:county.culture = {
			save_scope_as = culture
		}
		random_councillor = {
			limit = {
				is_available_ai_adult = yes
			}
			save_scope_as = councilor
		}
	}

	option = { # Ok
		name = nubia.0280.a
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= 50			
			}
		}
		remove_short_term_gold = 50
		scope:county = {
			add_county_modifier = {
				modifier = RICE_nubia_ancient_pottery_workshops
				years = 20
			}
		}
		scope:councilor = {
			add_opinion = {
				target = root
				opinion = 10
				modifier = pleased_opinion
			}	
		}
		stress_impact = {
			lazy = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0280.b
		scope:councilor = {
			add_opinion = {
				target = root
				opinion = -10
				modifier = disappointed_opinion
			}	
		}
		stress_impact = {
			diligent = miniscule_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0280.info
		}
	}

}

# Courtier encounters Ablemba sprits
nubia.0281 = {
	type = character_event
	title = nubia.0281.t
	desc = nubia.0281.desc
	theme = memory_negative

	left_portrait = {
		character = root
		animation = shock
	}

	right_portrait = {
		character = scope:courtier
		animation = shiver
	}
		
	trigger = {
		OR = {
			culture = { has_cultural_pillar = heritage_east_african }
			culture = { has_cultural_pillar = heritage_arabic }
			culture = { has_cultural_pillar = heritage_berber }
		}
		NOT = { faith.religion = { is_in_family = rf_pagan } }
		capital_county = {			
			any_county_province = {
				geographical_region = RICE_nile_river_valley_nubia
			}
			OR = {
				culture = culture:nubian
				culture = {
					any_parent_culture_or_above = {
						this = culture:nubian
					}
				}
			}	
		}
		any_courtier_or_guest = {
			is_available_healthy_ai_adult = yes
			religion = root.religion
			culture = root.culture
			NOT = { has_trait = cynical }
			OR = {
				has_trait = zealous
				has_trait = paranoid
				has_trait = shy
				has_trait = lifestyle_mystic
				has_trait = eccentric
				has_trait = impatient
				has_trait = lazy
				has_trait = fickle
				has_trait = stubborn
				has_trait = lustful
				has_trait = arrogant
				has_trait = brave
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = brave
		}
		modifier = {
			add = -0.2
			has_trait = craven
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	immediate = {
		random_courtier_or_guest = {
			limit = {
				is_available_healthy_ai_adult = yes
				religion = root.religion
				culture = root.culture
				NOT = { has_trait = cynical }
				OR = {
					has_trait = zealous
					has_trait = paranoid
					has_trait = shy
					has_trait = lifestyle_mystic
					has_trait = eccentric
					has_trait = impatient
					has_trait = lazy
					has_trait = fickle
					has_trait = stubborn
					has_trait = lustful
					has_trait = arrogant
					has_trait = brave
				}				
			}
			save_scope_as = courtier
		}
		scope:courtier = {
			add_character_modifier = {
				modifier = RICE_nubia_encountered_an_ablemba
				years = 5
			}
		}
		capital_county.culture = {
			save_scope_as = culture
		}
		if = {
			limit = {
				religion = religion:islam_religion
			}
			faith:coptic = {
				save_scope_as = old_faith
			}
		}
		else = {
			faith:kushitism_pagan = {
				save_scope_as = old_faith
			}
		}
	}

	option = { # Ok
		name = nubia.0281.a
		add_piety = 20
		stress_impact = {
			cynical = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0281.b
		add_prestige = 20
		stress_impact = {
			zealous = miniscule_stress_impact_gain
		}
	}

	

}




# Stay at a Nubian Coptic monastery, which they don't have enough space for more people
nubia.0282 = {
	type = character_event
	title = nubia.0282.t
	desc = nubia.0282.desc
	theme = travel_learning
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	right_portrait = {
		character = root
		animation = personality_compassionate
	}	

	trigger = {
		is_location_valid_for_travel_event_on_land = yes
		location = {
			county = {
				religion = religion:christianity_religion
				OR = {
					culture = culture:nubian
					culture = {
						any_parent_culture_or_above = {
							this = culture:nubian
						}
					}
				}				
			}
		}
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = temperate
		}
		modifier = {
			add = -0.2
			has_trait = gluttonous
		}
	}

	immediate = {
		location.county.culture = {
			save_scope_as = culture
		}
		location.county.faith = {
			save_scope_as = faith
		}
	}

	option = { # Ok
		name = nubia.0282.a
		stress_impact = {
			generous = miniscule_stress_impact_gain
			compassionate = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0282.b
		trigger = {
			OR = {
				gold >= 15
				is_ai = no
			}
		}
		remove_short_term_gold = 15
		add_piety = 25
		add_prestige = 25
		# add_character_modifier = {
		# 	modifier = RICE_nubia_generous_to_other_travelers
		# 	years = 10
		# }
		stress_impact = {
			greedy = minor_stress_impact_gain
			arrogant = miniscule_stress_impact_gain
			callous = miniscule_stress_impact_gain
			sadistic = miniscule_stress_impact_gain
		}
	}

}



# Character reflects on stories of the Nubians being legendary archers
nubia.0283 = {
	type = character_event
	title = nubia.0283.t
	desc = nubia.0283.desc
	theme = martial

	right_portrait = {
		character = root
		animation = war_over_win
	}
		
	trigger = {
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}	
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = ambitious
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = brave
		}
		modifier = {
			add = -0.2
			has_trait = craven
		}
		modifier = {
			add = 0.2
			has_trait = wrathful
		}
		modifier = {
			add = -0.2
			has_trait = calm
		}
	}

	immediate = {
		culture = {
			save_scope_as = nubian
		}
		culture:bedouin = {
			save_scope_as = arabic
		}
	}

	option = { # Ok
		name = nubia.0283.a
		add_character_modifier = {
			modifier = RICE_nubia_archers_emulating_ancestors
			years = 10
		}
		stress_impact = {
			brave = miniscule_stress_impact_loss
			diligent = miniscule_stress_impact_loss
			ambitious = miniscule_stress_impact_loss
		}
	}

	option = { # Ok
		name = nubia.0283.b
		add_character_modifier = {
			modifier = RICE_nubia_archers_discourage_foreigners
			years = 10
		}
		stress_impact = {
			paranoid = miniscule_stress_impact_loss
			zealous = miniscule_stress_impact_loss
			stubborn = miniscule_stress_impact_loss
		}
	}


}



# Chaplain is lecturing on the Virgin Mary and the high status of women in Nubia
nubia.0284 = {
	type = character_event
	title = nubia.0284.t
	desc = nubia.0284.desc
	theme = RICE_theme_nubia_church_interior

	right_portrait = {
		character = scope:chaplain
		animation = personality_zealous
	}

	trigger = {
		religion = religion:christianity_religion
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
		cp:councillor_court_chaplain = {
			exists = yes
			is_available_ai_adult = yes
			faith = root.faith
			culture = root.culture
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = cynical
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = just
		}
		modifier = {
			add = -0.2
			has_trait = arbitrary
		}
	}

	immediate = {
		cp:councillor_court_chaplain = {
			save_scope_as = chaplain
		}
		culture = {
			save_scope_as = nubian
		}
	}

	option = { # Ok
		name = nubia.0284.a
		add_character_modifier = {
			modifier = RICE_nubia_respects_powerful_women
			years = 10
		}
		stress_impact = {
			cynical = minor_stress_impact_gain
			paranoid = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0284.b
		add_character_modifier = {
			modifier = RICE_nubia_cynical_ruler
			years = 10
		}
		stress_impact = {
			zealous = minor_stress_impact_gain
			trusting = miniscule_stress_impact_gain
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0284.info
		}
	}

}

# Servants are carving names of saints and archangels into pottery
nubia.0285 = {
	type = character_event
	title = nubia.0285.t
	desc = nubia.0285.desc
	theme = faith
	override_background = { reference = relaxing_room }

	right_portrait = root

	trigger = {
		religion = religion:christianity_religion
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = cynical
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = just
		}
		modifier = {
			add = -0.2
			has_trait = arbitrary
		}
	}

	immediate = {
		culture = {
			save_scope_as = nubian
		}
	}

	option = { # Ok
		name = nubia.0285.a
		add_character_modifier = {
			modifier = RICE_nubia_protective_pots
			years = 10
		}
		stress_impact = {
			cynical = minor_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0285.b
		add_prestige = -100
		add_character_modifier = {
			modifier = RICE_nubia_very_protective_pots
			years = 10
		}
		stress_impact = {
			cynical = medium_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0285.c
		add_character_modifier = {
			modifier = RICE_nubia_cynical_ruler
			years = 10
		}
		stress_impact = {
			zealous = minor_stress_impact_gain
			trusting = miniscule_stress_impact_gain
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0285.info
		}
	}

}


# Character notices locals carving the name of Saint Michael into the walls
nubia.0286 = {
	type = character_event
	title = nubia.0286.t
	desc = nubia.0286.desc
	theme = travel_learning
	override_background = { reference = RICE_background_nile_travel }
	
	right_portrait = {
		character = root
		animation = personality_rational
	}	

	trigger = {
		is_location_valid_for_travel_event_on_land = yes
		location = {
			county = {
				religion = religion:christianity_religion
				OR = {
					culture = culture:nubian
					culture = {
						any_parent_culture_or_above = {
							this = culture:nubian
						}
					}
				}				
			}
		}
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = compassionate
		}
		modifier = {
			add = -0.2
			has_trait = callous
		}
	}

	immediate = {
		location.county.culture = {
			save_scope_as = culture
		}
		location.county.faith = {
			save_scope_as = faith
		}
	}

	option = { # Ok
		name = nubia.0286.a
		add_prestige = 25
	}

	option = { # Ok
		name = nubia.0286.b
		trigger = {
			religion = religion:christianity_religion
		}
		add_piety = 25
		stress_impact = {
			cynical = minor_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0286.c
		trigger = {
			NOT = { religion = religion:christianity_religion }
		}
		add_piety = 25
		stress_impact = {
			cynical = minor_stress_impact_gain
			humble = miniscule_stress_impact_gain
		}
	}


	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_tooltip = nubia.0285.info
		}
	}

}



# Two courtiers are in a dispute as shareholders of a saqia
nubia.0287 = {
	type = character_event
	title = nubia.0287.t
	window = big_event_window
	desc = nubia.0287.desc
	theme = RICE_theme_nile_valley

	
	left_portrait = {
		character = scope:courtier_1
		animation = disapproval
	}
	right_portrait = {
		character = scope:courtier_2
		animation = debating
	}

	trigger = {	
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
			culture = { has_cultural_pillar = heritage_iranian }
			culture = { has_cultural_pillar = heritage_arabic }
			culture = { has_cultural_pillar = heritage_syriac }
			culture = { has_cultural_pillar = heritage_egyptian }
		}	
		any_courtier = {
			is_available_ai_adult = yes
			count >= 2
			culture = root.culture
		}
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = just
		}
		modifier = {
			add = -0.2
			has_trait = arbitrary
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = patient
		}
		modifier = {
			add = -0.2
			has_trait = impatient
		}
	}

	immediate = {
		every_courtier = {
			limit = {
				is_available_ai_adult = yes
				culture = root.culture
			}
			add_to_list = courtier_candidates
		}
		random_in_list = {
			list = courtier_candidates
			save_scope_as = courtier_1
		}
		random_in_list = {
			list = courtier_candidates
			limit = {
				exists = scope:courtier_1
				NOT = { this = scope:courtier_1 }
			}
			save_scope_as = courtier_2
		}
		scope:courtier_1 = {
			add_character_modifier = {
				modifier = RICE_nubia_investing_in_local_saqia
				years = 10
			}
			add_opinion = {
				target = scope:courtier_2
				modifier = RICE_nubia_saqia_dispute_opinion
			}
		}
		scope:courtier_2 = {
			add_character_modifier = {
				modifier = RICE_nubia_investing_in_local_saqia
				years = 10
			}
			add_opinion = {
				target = scope:courtier_1
				modifier = RICE_nubia_saqia_dispute_opinion
			}
		}
	}

	
	option = { # ok
		name = nubia.0287.a
		stress_impact = {
			diligent = miniscule_stress_impact_gain
			calm = miniscule_stress_impact_gain
			patient = miniscule_stress_impact_gain
			just = miniscule_stress_impact_gain
		}
		scope:courtier_1 = {
			add_opinion = {
				target = root
				modifier = frustrated_opinion
				opinion = -15
			}		
		}
		scope:courtier_2 = {
			add_opinion = {
				target = root
				modifier = frustrated_opinion
				opinion = -15
			}		
		}
	}
	
	option = { # ok
		name = nubia.0287.b
		scope:courtier_1 = {
			add_opinion = {
				target = root
				modifier = RICE_agrees_with_me_opinion
				opinion = 30
			}		
		}
		scope:courtier_2 = {
			add_opinion = {
				target = root
				modifier = RICE_disagrees_with_me_opinion
				opinion = -30
			}		
		}
	}
	
	option = { # ok
		name = nubia.0287.c
		scope:courtier_2 = {
			add_opinion = {
				target = root
				modifier = RICE_agrees_with_me_opinion
				opinion = 30
			}		
		}
		scope:courtier_1 = {
			add_opinion = {
				target = root
				modifier = RICE_disagrees_with_me_opinion
				opinion = -30
			}		
		}
	}
	
	option = { # ok
		name = nubia.0287.d
		custom_tooltip = nubia.0287.d.tooltip
		stress_impact = {
			lazy = minor_stress_impact_gain
			shy = miniscule_stress_impact_gain
			callous = miniscule_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
			fickle = miniscule_stress_impact_gain
		}
		duel = {
			skills = { diplomacy }
			value = medium_skill_rating
			# Failure
			50 = {
				desc = nubia.0287.d.bad
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:courtier_1
					right_icon = scope:courtier_2
					title = nubia.0287.d.bad
					add_prestige = -100
					scope:courtier_1 = {
						add_opinion = {
							target = root
							modifier = annoyed_opinion
							opinion = -15
						}
					}
					scope:courtier_2 = {
						add_opinion = {
							target = root
							modifier = annoyed_opinion
							opinion = -15
						}
					}
				}
			}
			# Success.
			50 = {
				desc = nubia.0287.d.good
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:courtier_1
					right_icon = scope:courtier_2
					title = nubia.0287.d.good
					add_prestige = 100
					scope:courtier_1 = {
						remove_opinion = {
							modifier = RICE_nubia_saqia_dispute_opinion
							target = scope:courtier_2
						}
						add_opinion = {
							target = root
							modifier = grateful_opinion
							opinion = 15
						}
					}
					scope:courtier_2 = {
						remove_opinion = {
							modifier = RICE_nubia_saqia_dispute_opinion
							target = scope:courtier_1
						}
						add_opinion = {
							target = root
							modifier = grateful_opinion
							opinion = 15
						}
					}
				}
			}
		}
	}



}

# Traveling merchants tell about difficulties due to cold season on the Nile
nubia.0288 = {
	type = character_event
	title = nubia.0288.t
	desc = nubia.0288.desc
	theme = stewardship_wealth_focus
	override_background = { reference = RICE_background_nile_valley }

	left_portrait = {
		character = root
		animation = personality_forgiving
	}

	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_nile_river_valley_without_ethiopia
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = just
		}
		modifier = {
			add = -0.2
			has_trait = arbitrary
		}
	}

	option = { # Ok
		name = nubia.0288.a
		add_piety = 25
		stress_impact = {
			cynical = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0288.b
		add_prestige = -50
		add_character_modifier = {
			modifier = RICE_nubia_learning_about_nile_seasons
			years = 10
		}
		stress_impact = {
			lazy = minor_stress_impact_gain
			shy = miniscule_stress_impact_gain
		}
	}

}

# Reading the Sayings of the Desert Fathers as a Coptic
nubia.0289 = {
	type = character_event
	title = nubia.0289.t
	desc = nubia.0289.desc
	theme = learning_scholarship_focus

	left_portrait = {
		character = root
		animation = reading
	}

	trigger = {
		faith = faith:coptic
		NOT = { has_trait = cynical }
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = shy
		}
		modifier = {
			add = -0.2
			has_trait = gregarious
		}
		modifier = {
			add = 0.2
			has_trait = patient
		}
		modifier = {
			add = -0.2
			has_trait = impatient
		}
	}

	option = { # Ok
		name = nubia.0289.a
		add_character_modifier = {
			modifier = RICE_nubia_sayings_of_the_desert_fathers_political
			years = 10
		}
	}

	option = { # Ok
		name = nubia.0289.b
		add_character_modifier = {
			modifier = RICE_nubia_sayings_of_the_desert_fathers_spiritual
			years = 10
		}
	}

}


# Courtier gets a religious protective/apotropaic tattoo
nubia.0290 = {
	type = character_event
	title = nubia.0290.t
	desc = nubia.0290.desc
	theme = friendly
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = root

	right_portrait = scope:courtier

	trigger = {
		OR = {
			any_courtier_or_guest = {
				is_available_ai_adult = yes
				NOT = { has_trait = cynical }
				OR = {
					faith = {
						has_doctrine = special_doctrine_rice_doctrine_northeast_african_tattoo
					}
					culture = { has_cultural_pillar = heritage_egyptian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
				NOT = { religion = religion:islam_religion }
				NOT = { religion = religion:judaism_religion }
			}
			any_vassal = {
				is_available_ai_adult = yes
				NOT = { has_trait = cynical }
				OR = {
					faith = {
						has_doctrine = special_doctrine_rice_doctrine_northeast_african_tattoo
					}
					culture = { has_cultural_pillar = heritage_egyptian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
				NOT = { religion = religion:islam_religion }
				NOT = { religion = religion:judaism_religion }
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
		modifier = {
			add = 0.2
			has_trait = generous
		}
		modifier = {
			add = -0.2
			has_trait = greedy
		}
		modifier = {
			add = 0.2
			has_trait = trusting
		}
		modifier = {
			add = -0.2
			has_trait = paranoid
		}
	}

	immediate = {

		every_courtier_or_guest = {
			limit = {
				is_available_ai_adult = yes
				NOT = { has_trait = cynical }
				OR = {
					faith = {
						has_doctrine = special_doctrine_rice_doctrine_northeast_african_tattoo
					}
					culture = { has_cultural_pillar = heritage_egyptian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
				NOT = { religion = religion:islam_religion }
				NOT = { religion = religion:judaism_religion }
			}
			add_to_list = candidate_characters
		}
		every_vassal = {
			limit = {
				is_available_ai_adult = yes
				NOT = { has_trait = cynical }
				OR = {
					faith = {
						has_doctrine = special_doctrine_rice_doctrine_northeast_african_tattoo
					}
					culture = { has_cultural_pillar = heritage_egyptian }
					culture = { has_cultural_pillar = heritage_east_african }
				}
				NOT = { religion = religion:islam_religion }
				NOT = { religion = religion:judaism_religion }
			}
			add_to_list = candidate_characters
		}
		random_in_list = {
			list = candidate_characters
			save_scope_as = courtier
		}

		scope:courtier = {
			RICE_east_african_tattoo_decision_effect = yes			
		}

	}

	option = { # Ok
		name = nubia.0290.a
		add_piety = 15
		stress_impact = {
			cynical = minor_stress_impact_gain
			callous = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0290.b
		add_prestige = 15
		stress_impact = {
			zealous = minor_stress_impact_gain
			humble = miniscule_stress_impact_gain
		}
	}

}

# Observing servants build a gossi grain silo
nubia.0291 = {
	type = character_event
	title = nubia.0291.t
	desc = nubia.0291.desc
	theme = friendly
	override_background = { reference = RICE_background_nubia_dongola_building }

	right_portrait = {
		character = root
		animation = survey
	}

	trigger = {
		culture = {
			has_innovation = innovation_RICE_gossi_grain_silos
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = generous
		}
		modifier = {
			add = -0.2
			has_trait = greedy
		}
	}

	option = { # Ok
		name = nubia.0291.a
		add_prestige = 50
		stress_impact = {
			base = miniscule_stress_impact_loss
			gregarious = miniscule_stress_impact_loss
			gluttonous = minor_stress_impact_loss
		}
	}

	option = { # Ok
		name = nubia.0291.b
		add_character_modifier = {
			modifier = RICE_nubia_learning_about_gossi_grain_silos
			years = 10
		}
	}

}

# Courtier becomes enthusiastic devotee to Saint Raphael
nubia.0292 = {
	type = character_event
	title = nubia.0292.t
	desc = nubia.0292.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_church_interior }

	left_portrait = {
		character = root
		animation = personality_cynical
	}

	right_portrait = {
		character = scope:courtier
		animation = personality_zealous
	}

	trigger = {
		religion = religion:christianity_religion
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
		}	
		OR = {
			any_courtier_or_guest = {
				is_available_ai_adult = yes
				NOT = { has_trait = cynical }
				faith = root.faith
				culture = root.culture
			}
			any_vassal = {
				is_available_ai_adult = yes
				NOT = { has_trait = cynical }
				faith = root.faith
				culture = root.culture
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = cynical
		}
		modifier = {
			add = 0.2
			has_trait = patient
		}
		modifier = {
			add = -0.2
			has_trait = impatient
		}
		modifier = {
			add = 0.2
			has_trait = fickle
		}
		modifier = {
			add = -0.2
			has_trait = stubborn
		}
	}

	immediate = {

		every_courtier_or_guest = {
			limit = {
				is_available_ai_adult = yes
				NOT = { has_trait = cynical }
				faith = root.faith
				culture = root.culture
			}
			add_to_list = candidate_characters
		}
		every_vassal = {
			limit = {
				is_available_ai_adult = yes
				NOT = { has_trait = cynical }
				NOT = { has_trait = cynical }
				faith = root.faith
				culture = root.culture
			}
			add_to_list = candidate_characters
		}
		random_in_list = {
			list = candidate_characters
			weight = {
				base = 10
				modifier = {
					has_trait = zealous
					add = 20
				}
				modifier = {
					has_trait = trusting
					add = 5
				}
				modifier = {
					has_trait = eccentric
					add = 5
				}
				modifier = {
					has_any_illness = yes
					add = 10
				}
				modifier = {
					has_any_debilitating_illness = yes
					add = 10
				}
			}
			save_scope_as = courtier
		}

		scope:courtier = {
			add_character_modifier = {
				modifier = RICE_nubia_enthusiastic_saint_raphael_devotee
				years = 20
			}			
		}

	}

	option = { # Ok
		name = nubia.0292.a
		scope:courtier = {
			add_opinion = {
				target = scope:courtier
				modifier = RICE_nubia_fellow_raphael_devotee
			}
		}
		random_list = {
			50 = {
				desc = nubia.0292.a.nothing
				modifier = {
					add = 10
					has_trait = cynical
				}
				modifier = {
					add = 10
					has_trait = lazy
				}
				modifier = {
					add = 5
					has_trait = arbitrary
				}
				modifier = {
					add = 5
					has_trait = callous
				}
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = ROOT
					title = nubia.0292.a.nothing
					stress_impact = {
						base = miniscule_stress_impact_gain
						impatient = miniscule_stress_impact_gain
						trusting = miniscule_stress_impact_gain
					}
				}
			}
			35 = {
				desc = nubia.0292.a.casual
				modifier = {
					add = 10
					has_trait = zealous
				}
				modifier = {
					add = 5
					has_trait = diligent
				}
				modifier = {
					add = 5
					has_trait = brave
				}
				modifier = {
					add = {
						value = piety_level
						multiply = 2.5
					}					
				}
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = ROOT
					title = nubia.0292.a.casual
					add_character_modifier = {
						modifier = RICE_nubia_casual_saint_raphael_devotee
						years = 20
					}
				}
			}
			15 = {
				desc = nubia.0292.a.enthusiastic
				modifier = {
					add = 5
					has_trait = zealous
				}
				modifier = {
					add = 5
					has_trait = diligent
				}
				modifier = {
					add = 5
					has_trait = brave
				}
				modifier = {
					add = {
						value = piety_level
						multiply = 1.5
					}					
				}
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = ROOT
					title = nubia.0292.a.enthusiastic
					add_character_modifier = {
						modifier = RICE_nubia_enthusiastic_saint_raphael_devotee
						years = 20
					}
				}				
			}
		}
		stress_impact = {
			cynical = minor_stress_impact_gain
			lazy = miniscule_stress_impact_gain
		}
	}

	option = { # Ok
		name = nubia.0292.b
		add_prestige = 50
		stress_impact = {
			zealous = minor_stress_impact_gain
			diligent = miniscule_stress_impact_gain
		}
	}

}

# Servant wants to bury their dead child under the servant's quarters
nubia.0293 = {
	type = character_event
	title = nubia.0293.t
	desc = nubia.0293.desc
	theme = death
	override_background = { reference = RICE_background_nile_private_courtyard }

	right_portrait = root

	trigger = {
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
			culture = culture:ancient_egyptian
			culture = {
				any_parent_culture_or_above = {
					this = culture:ancient_egyptian
				}
			}
			culture = culture:egyptian
			culture = {
				any_parent_culture_or_above = {
					this = culture:egyptian
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = compassionate
		}
		modifier = {
			add = -0.2
			has_trait = callous
		}
		modifier = {
			add = 0.2
			has_trait = just
		}
		modifier = {
			add = -0.2
			has_trait = arbitrary
		}
		modifier = {
			add = 0.2
			has_trait = zealous
		}
		modifier = {
			add = -0.2
			has_trait = cynical
		}
	}

	option = { # Ok
		name = nubia.0293.a
		add_character_modifier = {
			modifier = RICE_nubia_buried_infant_under_servants_quarters
			years = 10
		}
		stress_impact = {
			cynical = minor_stress_impact_gain
			paranoid = minor_stress_impact_gain
			callous = minor_stress_impact_gain
			sadistic = miniscule_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
			arrogant = miniscule_stress_impact_gain
		}
	}

	option = { # No
		name = nubia.0293.b
		stress_impact = {
			compassionate = medium_stress_impact_gain
			generous = minor_stress_impact_gain
			just = minor_stress_impact_gain
			zealous = minor_stress_impact_gain
			humble = miniscule_stress_impact_gain
		}
	}

}

# Drinking Karkade, a traditional drink in Egypt and Sudan made from hibiscus
nubia.0294 = {
	type = character_event
	title = nubia.0294.t
	desc = nubia.0294.desc
	theme = feast_activity
	override_background = { reference = bp1_kitchen_western }

	left_portrait = {
		character = root
		animation = admiration
	}

	trigger = {
		OR = {
			culture = culture:nubian
			culture = {
				any_parent_culture_or_above = {
					this = culture:nubian
				}
			}
			culture = culture:ancient_egyptian
			culture = {
				any_parent_culture_or_above = {
					this = culture:ancient_egyptian
				}
			}
			culture = culture:egyptian
			culture = {
				any_parent_culture_or_above = {
					this = culture:egyptian
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gluttonous
		}
		modifier = {
			add = -0.2
			has_trait = temperate
		}
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	immediate = {
		add_character_modifier = {
			modifier = RICE_nubia_drinking_karkade
			years = 8
		}
	}

	option = { # Ok
		name = nubia.0294.a
		add_prestige = -50
		add_character_modifier = {
			modifier = RICE_nubia_enjoys_making_karkade
			years = 8
		}
		stress_impact = {
			arrogant = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
			shy = miniscule_stress_impact_gain
		}
	}

	option = { # No
		name = nubia.0294.b
	}

}
