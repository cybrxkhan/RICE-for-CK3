###############################################################################
# 
# NUBIA
# 
# nubia.0000-nubia.0019			Setup events, history events, miscellaneous events and decisions
# nubia.0020-nubia.0029			Minor decisions
# nubia.0030-nubia.0039			Nile Flood & Related Decisions
# nubia.0040-nubia.0059			Baqt Exchange
# nubia.0060-nubia.0079			Niuty's Rebellion Event Chain
# nubia.0080-nubia.0089			Culture events and decisions
# nubia.0090-nubia.0099			Pastoralists and Farmers
# nubia.0100-nubia.0119			Eldad ha-Dani/Danite stuff
# nubia.0120-nubia.0139			Other Historical Aspirations
# nubia.0140-nubia.0159			Eparch Marianos slave fugitive event chain
# nubia.0160-nubia.0179			Baqt Frontier Administration Decision 
# nubia.0180-nubia.0189			Pilgrimage to Banganarti
# nubia.0190-nubia.0199			Pilgrimage to Saint Catherine's Monastery
# nubia.0200-nubia.0209			Pilgrimage to Saint Anthony's Monastery
# nubia.0210-nubia.0219			Nilotic Bovine Sacrifice
# nubia.0220-nubia.0239			Nile Empire and Legends
# nubia.0240-nubia.0259			Sibir Festival
# nubia.0270-nubia.0299			Generic flavor events
# 
###############################################################################

namespace = nubia

######################################################################################
# 
# SETUP EVENTS, HISTORY EVENTS, MISC DECISIONS
# 
# nubia.0000-nubia.0019
# 
######################################################################################


# Nile River and Baqt concepts tutorial
nubia.0001 = {
	type = character_event
	window = fullscreen_event
	title = nubia.0001.t
	desc = {
		desc = nubia.0001.desc.intro
		triggered_desc = {
			trigger = { exists = situation:RICE_nubia_baqt_situation }
			desc = nubia.0001.desc.baqt
		}
		desc = nubia.0001.desc.conclusion
	}
	theme = realm
	override_background = { reference = RICE_nile_river_fullscreen_intro }


	trigger = { # we need to prevent this from firing for all players when a new player joins in MP
		is_ai = no
		NOT = { has_variable = RICE_nile_intro_event_triggered }
 	}

	immediate = {
		set_variable = RICE_nile_intro_event_triggered
		random_list = {
			10 = { play_music_cue = mx_forefathers_of_the_nile }
			10 = { play_music_cue = mx_gift_of_the_nile }
			10 = { play_music_cue = mx_legacy_of_the_pharaohs }
			10 = { play_music_cue = mx_eternal_inundation }
		}
	}

	widgets = {
		widget = {
			gui = "event_window_widget_RICE_nile_situation_concepts_info"
			container = "dynamic_content_widget" # container = "custom_widgets_container"
		}
	}

	option = {
		name = nubia.0001.a
	}

}


# Start new phase of the Baqt Situation
nubia.0002 = {
	type = character_event
	title = nubia.0002.t
	desc = {
		desc = nubia.0002.desc
		first_valid = {
			triggered_desc = {
				trigger = {			
					any_character_situation = {
						any_situation_sub_region = {
							sub_region_current_phase = baqt_sufficiency
						}
					}
				}
				desc = nubia.0002.desc.baqt_sufficiency
			}
			triggered_desc = {
				trigger = {	
					any_character_situation = {
						any_situation_sub_region = {
							sub_region_current_phase = baqt_insufficiency
						}
					}
				}
				desc = nubia.0002.desc.baqt_insufficiency
			}
		}
		desc = nubia.0002.desc.conclusion
	}
	theme = RICE_theme_nile_valley

	right_portrait = {
		character = root
		animation = survey
	}
	
	option = { # Ok
		name = nubia.0002.a
	}

}

# Change Lord of the Mountain trait
nubia.0010 = {
	hidden = yes
	
	trigger = {
		scope:title = title:d_nobatia
		NOT = { has_trait = RICE_lord_of_the_mountain }
	}
	
	immediate = {
		add_trait = RICE_lord_of_the_mountain		
	}
}

# Change Governor of Aswan trait
nubia.0011 = {
	hidden = yes
	
	trigger = {
		scope:title = title:c_aswan
		NOT = { has_trait = RICE_governor_of_aswan }
	}
	
	immediate = {
		add_trait = RICE_governor_of_aswan		
	}
}



# 1066 info for the Fatimids
nubia.0012 = {
	type = character_event
	title = nubia.0012.t
	window = big_event_window
	desc = nubia.0012.desc
	theme = martial
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:nasir_al_dawla
		animation = war_attacker
	}	
	right_portrait = {
		character = scope:rasad
		animation = war_defender
	}
	lower_left_portrait = scope:badr_al_jamali
	lower_center_portrait = scope:al_mustansir
	lower_right_portrait = scope:nahid_al_dawla
	
	immediate = {

		character:3096 = {
			save_scope_as = al_mustansir
		}

		character:additional_fatimids_1 = {
			save_scope_as = rasad
		}

		character:RICE_hamdanid_009 = {
			save_scope_as = nasir_al_dawla
		}

		character:34980 = {
			save_scope_as = badr_al_jamali
		}
		
		character:RICE_fatimid_african_003 = {
			save_scope_as = nahid_al_dawla
		}
		
		character:bedouin0027 = {
			save_scope_as = banu_kanz
		}

	}
	
	option = {
		name = nubia.0012.a
		# flavor = {
		# 	first_valid = {
		# 		triggered_desc = {
		# 			trigger = { this = character:RICE_upper_egypt_012 }
		# 			desc = nubia.0012.tooltip.al_tabataba
		# 		}
		# 		triggered_desc = {
		# 			trigger = { this = character:al-farghani_1 }
		# 			desc = nubia.0012.tooltip.al_farghani
		# 		}
		# 		desc = nubia.0012.tooltip.ibn_tulun
		# 	}
		# }
	}
}



# Rebuilding Banganarti Church
nubia.0013 = {
	type = character_event
	title = nubia.0013.t
	desc = nubia.0013.desc
	theme = RICE_theme_nubia_church_interior

	right_portrait = {
		character = scope:rebuilder
		animation = personality_zealous
	}

	immediate = {
		play_music_cue = "mx_cue_ck3_vocal_maintheme"
		if = {
			limit = {
				root = scope:rebuilder
			}
			RICE_nubia_rebuild_banganarti_church_effect = yes
		}
		else = {
			show_as_tooltip = {
				RICE_nubia_rebuild_banganarti_church_effect = yes
			}
		}
		custom_tooltip = RICE_nubia_rebuild_banganarti_church_effect_tooltip_1
		custom_tooltip = RICE_nubia_rebuild_banganarti_church_effect_tooltip_2
		custom_tooltip = RICE_nubia_rebuild_banganarti_church_effect_tooltip_3
	}
	
	option = { # Ok
		name = nubia.0013.a
	}

}


# Formation of Sudanese culture
nubia.0014 = {
	type = character_event
	window = fullscreen_event
	title = nubia.0014.t
	desc = {
		desc = nubia.0014.desc
		first_valid = {
			triggered_desc = {
				trigger = {			
					scope:sudanese_ruler = {
						culture = { has_cultural_pillar = heritage_east_african }
					}
				}
				desc = nubia.0014.desc.sudanese_nubian
			}
			desc = nubia.0014.desc.sudanese_arabic
		}
	}
	theme = culture_change
	override_background = { reference = RICE_desert_settlement_fullscreen }

	immediate = {
		if = {
			limit = {
				root = scope:sudanese_ruler
			}
			RICE_nubia_sudanese_culture_decision_effect = yes
		}
		else = {
			show_as_tooltip = {
				scope:sudanese_ruler = {
					RICE_nubia_sudanese_culture_decision_effect = yes					
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0014.a	
	}

	after = {
		if = {
			limit = {
				NOT = { root = scope:sudanese_ruler }
			}
			if = {
				limit = {
					scope:culture = {
						OR = {
							has_cultural_pillar = heritage_east_african
							has_cultural_pillar = heritage_arabic
						}
					}
					capital_county = {
						any_county_province = {
							geographical_region = ghw_region_egypt
						}
					}
				}
				trigger_event = nubia.0015
			}
			else_if = {
				limit = {
					scope:culture = {
						OR = {
							has_cultural_pillar = heritage_east_african
							has_cultural_pillar = heritage_arabic
						}
					}
					capital_county = {
						any_county_province = {
							geographical_region = RICE_greater_nubia_region
						}
					}
				}
				trigger_event = nubia.0016
			}
		}
	}

}

# Convert to the new Sudanese Nubian culture?
nubia.0015 = {
	type = character_event
	title = nubia.0015.t
	desc = {
		desc = nubia.0015.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_cultural_pillar = heritage_arabic
				}
				desc = nubia.0015.desc.arabic
			}
			desc = nubia.0015.desc.east_african
		}
	}
	theme = culture_change
	override_background = { reference = RICE_background_nile_valley }

	right_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { # Ok
		name = nubia.0015.a
		make_sudanese_culture_restricted_effect = yes
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				any_liege_or_above = { this = scope:sudanese_ruler }
			}
			modifier = {
				add = 20
				culture = {
					has_cultural_pillar = heritage_arabic
				}
			}
			modifier = {
				add = 20
				culture = {
					has_cultural_pillar = heritage_arabic
				}
				any_vassal_or_below = {
					culture = {
						has_cultural_pillar = heritage_east_african
					}					
				}
			}
			modifier = {
				add = 20
				culture = {
					has_cultural_pillar = heritage_east_african
				}
				any_liege_or_above = {
					culture = {
						has_cultural_pillar = heritage_arabic
					}					
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0015.b
		ai_chance = {
			base = 70
		}
	}

}

# Convert to the new Sudanese Arabic culture?
nubia.0016 = {
	type = character_event
	title = nubia.0016.t
	desc = {
		desc = nubia.0016.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_cultural_pillar = heritage_east_african
				}
				desc = nubia.0016.desc.east_african
			}
			desc = nubia.0016.desc.arabic
		}
	}
	theme = culture_change
	override_background = { reference = RICE_background_nile_valley }

	right_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { # Ok
		name = nubia.0016.a
		make_sudanese_culture_restricted_effect = yes
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				any_liege_or_above = { this = scope:sudanese_ruler }
			}
			modifier = {
				add = 20
				culture = {
					has_cultural_pillar = heritage_east_african
				}
			}
			modifier = {
				add = 20
				culture = {
					has_cultural_pillar = heritage_east_african
				}
				any_vassal_or_below = {
					culture = {
						has_cultural_pillar = heritage_arabic
					}					
				}
			}
			modifier = {
				add = 20
				culture = {
					has_cultural_pillar = heritage_arabic
				}
				any_liege_or_above = {
					culture = {
						has_cultural_pillar = heritage_east_african
					}					
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0016.b
		ai_chance = {
			base = 70
		}
	}

}




######################################################################################
# 
# MINOR DECISIONS
# 
# nubia.0020-nubia.0029
# 
######################################################################################




# East African tattoo decision
# By Cybrxkhan
nubia.0020 = {
	type = character_event
	title = nubia.0020.t
	desc = nubia.0020.desc
	theme = faith
	override_background = { reference = physicians_study }
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	# Ok
	option = {
		name = nubia.0020.a
		RICE_east_african_tattoo_decision_effect = yes
	}

}


# Commission donor portrait
# By Cybrxkhan
nubia.0021 = {
	type = character_event
	title = nubia.0021.t
	desc = {
		desc = nubia.0021.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_donor_portrait_type = flag:self
				}
				desc = nubia.0021.desc.self
			}
			triggered_desc = {
				trigger = {
					var:RICE_donor_portrait_type = flag:family
				}
				desc = nubia.0021.desc.family
			}
			triggered_desc = {
				trigger = {
					var:RICE_donor_portrait_type = flag:clergy
				}
				desc = nubia.0021.desc.clergy
			}
		}
	}
	theme = faith
	
	left_portrait = {
		character = scope:chaplain
		animation = idle
		trigger = {
			exists = scope:chaplain
		}
	}	

	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	immediate = {
		# Court Chaplain should only appear if they're also Christian, and don't follow a religion with Aniconism
		if = {
			limit = {
				#exists = cp:councillor_court_chaplain
				cp:councillor_court_chaplain ?= {
					religion = religion:christianity_religion
					NOT = { faith = { has_doctrine = tenet_aniconism } }
				}
			}
			cp:councillor_court_chaplain = { save_scope_as = chaplain }
		}
	}

	# Ok
	option = {
		name = nubia.0021.a
		RICE_christian_commission_donor_portrait_effect = yes
	}

}


# Update the list of Faras Bishops - notification event to updater and anyone controlling Faras but is not updater (i.e. vassal or liege)
nubia.0022 = {
	type = character_event
	title = nubia.0022.t
	desc = {	
		desc = nubia.0022.desc	
		first_valid = {
			triggered_desc = {
				trigger = {
					root = scope:updater
				}
				desc = nubia.0022.desc.updater
			}
			desc = nubia.0022.desc.not_updater
		}
	}
	theme = RICE_theme_nubia_church_interior
	
	left_portrait = {
		character = scope:chaplain
		animation = wedding_priest
		trigger = {
			exists = scope:chaplain
		}
	}	

	right_portrait = {
		character = scope:updater
		animation = personality_zealous
	}
	
	immediate = {
		# Court Chaplain should only appear if they're also Christian
		if = {
			limit = {
				cp:councillor_court_chaplain ?= {
					religion = religion:christianity_religion
				}
			}
			cp:councillor_court_chaplain = { save_scope_as = chaplain }
		}
	}
	
	# Ok
	option = {
		name = nubia.0022.a
		if = {
			limit = {
				root = scope:updater
			}
			RICE_nubia_update_list_of_faras_bishops_effect = yes
		}
		else = {
			show_as_tooltip = {				
				RICE_nubia_update_list_of_faras_bishops_effect = yes
			}
		}
	}

}


# Tebeldi Trees
nubia.0023 = {
	type = character_event
	title = nubia.0023.t
	desc = nubia.0023.desc
	theme = RICE_theme_nubia_nuba_savanna_village
	
	right_portrait = {
		character = root
		animation = war_over_win
	}
	
	# Ok
	option = {
		name = nubia.0023.a
		RICE_nubia_tebeldi_trees_decision_effect = yes
	}

}

# Mountain Lake Oracle - Choose who to send
nubia.0024 = {
	type = character_event
	title = nubia.0024.t
	desc = {
		desc = nubia.0024.desc
		triggered_desc = {
			trigger = {
				exists = scope:courtier
			}
			desc = nubia.0024.desc.courtier
		}
		triggered_desc = {
			trigger = {
				exists = scope:clergy
			}
			desc = nubia.0024.desc.clergy
		}
	}
	theme = faith
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	right_portrait = {
		character = root
		animation = thinking
	}
	
	lower_left_portrait = {
		character = scope:courtier
		trigger = { exists = scope:courtier }
	}
	
	lower_right_portrait = {
		character = scope:clergy
		trigger = { exists = scope:clergy }
	}

	immediate = {
		if = {
			limit = {
				is_landless_adventurer = no
			}
			random_realm_province = {
				limit = {
					OR = {
						terrain = hills
						terrain = mountains
						terrain = desert_mountains
					}
				}
				save_scope_as = lake_oracle_province
			}
		}
		random_courtier = {
			limit = {
				is_available_ai_adult = yes
				is_clergy = no
				OR = {
					religion = religion:darfur_religion
					culture = {
						has_cultural_tradition = tradition_RICE_darfur_mountain_palaces
					}
				}
			}	
			save_scope_as = courtier		
		}
		random_courtier = {
			limit = {
				is_available_ai_adult = yes
				is_clergy = yes
				OR = {
					religion = religion:darfur_religion
					culture = {
						has_cultural_tradition = tradition_RICE_darfur_mountain_palaces
					}
				}
			}	
			save_scope_as = clergy		
		}
	}

	# Send a servant/minor official
	option = {
		name = nubia.0024.a
		trigger_event = {
			id = nubia.0026
			days = { 10 30 }
		}
	}

	# Send a courtier
	option = {
		name = nubia.0024.b
		trigger = {
			exists = scope:courtier
		}
		add_piety = minor_piety_loss
		custom_tooltip = nubia.0024.b.tooltip
		scope:courtier = {
			# To prevent them from somehow leaving your court while they're on the trip
			add_character_flag = {
				flag = blocked_from_leaving
				years = 1
			}
			start_travel_plan = { 
				destination = scope:lake_oracle_province
				return_trip = yes
				on_arrival_event = nubia.0025
			}
		}
	}

	# Send a clergy
	option = {
		name = nubia.0024.c
		trigger = {
			exists = scope:clergy
		}
		add_piety = medium_piety_loss
		custom_tooltip = nubia.0024.c.tooltip
		scope:clergy = {
			# To prevent them from somehow leaving your court while they're on the trip
			add_character_flag = {
				flag = blocked_from_leaving
				years = 1
			}
			start_travel_plan = { 
				destination = scope:lake_oracle_province
				return_trip = yes
				on_arrival_event = nubia.0025
			}
		}
	}

}




######################################################################################
# 
# NILE FLOOD & RELATED DECISIONS
# 
# nubia.0030-nubia.0039
# 
######################################################################################




# Expanding Irrigation Networks
nubia.0030 = {
	type = character_event
	title = nubia.0030.t
	desc = nubia.0030.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = survey
	}
	
	# Ok
	option = {
		name = nubia.0030.a
		RICE_nubia_agriculture_decision_expand_irrigation_networks_effect = yes
	}

}

# Maintaining hafirs
nubia.0031 = {
	type = character_event
	title = nubia.0031.t
	desc = nubia.0031.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = personality_forgiving
	}
	
	# Ok
	option = {
		name = nubia.0031.a
		RICE_nubia_agriculture_decision_maintain_hafirs_effect = yes
	}

}

# Growing pig herds
nubia.0032 = {
	type = character_event
	title = nubia.0032.t
	desc = nubia.0032.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = personality_content
	}
	
	# Ok
	option = {
		name = nubia.0032.a
		RICE_nubia_agriculture_decision_grow_pig_herds_effect = yes
	}

}

# Importing cattle
nubia.0033 = {
	type = character_event
	title = nubia.0033.t
	desc = nubia.0033.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = personality_greedy
	}
	
	# Ok
	option = {
		name = nubia.0033.a
		RICE_nubia_agriculture_decision_import_cattle_effect = yes
	}

}

# Breeding cattle
nubia.0034 = {
	type = character_event
	title = nubia.0034.t
	desc = nubia.0034.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = personality_dishonorable
	}
	
	# Ok
	option = {
		name = nubia.0034.a
		RICE_nubia_agriculture_decision_breed_cattle_effect = yes
	}

}




######################################################################################
# 
# BAQT EXCHANGE
# 
# nubia.0040-nubia.0059
# 
######################################################################################


# Baqt exchange: Decide what good to give to the other party
nubia.0040 = {
	type = character_event
	title = nubia.0040.t
	window = big_event_window
	desc = nubia.0040.desc
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:actor
		animation = personality_compassionate
	}
	
	right_portrait = {
		character = scope:recipient
		animation = thinking
	}

	# textiles
	option = {
		name = nubia.0040.textiles
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.textiles
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:textiles
			days = 1
		}
	}

	# foodstuffs
	option = {
		name = nubia.0040.foodstuffs
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.foodstuffs
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:foodstuffs
			days = 1
		}
	}

	# olive_oil
	option = {
		name = nubia.0040.olive_oil
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.olive_oil
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:olive_oil
			days = 1
		}
	}

	# wine
	option = {
		name = nubia.0040.wine
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.wine
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:wine
			days = 1
		}
	}

	# glass
	option = {
		name = nubia.0040.glass
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.glass
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:glass
			days = 1
		}
	}

	# horses
	option = {
		name = nubia.0040.horses
		trigger = {
			OR = {
				RICE_baqt_egyptian_muslim_trigger = yes
				RICE_baqt_egyptian_coptic_trigger = yes
			}
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.horses
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:horses
			days = 1
		}
	}

	# exotic_beasts
	option = {
		name = nubia.0040.exotic_beasts
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.exotic_beasts
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:exotic_beasts
			days = 1
		}
	}

	# metals
	option = {
		name = nubia.0040.metals
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.metals
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:metals
			days = 1
		}
	}

	# ebony
	option = {
		name = nubia.0040.ebony
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.ebony
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:ebony
			days = 1
		}
	}

	# slaves
	option = {
		name = nubia.0040.slaves
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.slaves
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:slaves
			days = 1
		}
	}

	# ivory
	option = {
		name = nubia.0040.ivory
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.ivory
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:ivory
			days = 1
		}
	}

	# animal_skins
	option = {
		name = nubia.0040.animal_skins
		trigger = {
			RICE_baqt_nubian_christian_trigger = yes
		}
		custom_tooltip = RICE_baqt_other_party_goods_tooltip.animal_skins
		set_variable = {
			name = RICE_baqt_recipient_good
			value = flag:animal_skins
			days = 1
		}
	}

	after = {
		scope:actor = {
			trigger_event = nubia.0041
		}
		scope:recipient = {
			trigger_event = nubia.0041
		}
	}

}

# Baqt exchange: the exchange happens
nubia.0041 = {
	type = character_event
	title = nubia.0041.t
	window = big_event_window
	desc = nubia.0041.desc
	theme = RICE_theme_nile_valley
	
	left_portrait = {
		character = scope:actor
		animation = personality_forgiving
	}
	
	right_portrait = {
		character = scope:recipient
		animation = personality_content
	}

	immediate = {
		if = {
			limit = {
				root = scope:actor
			}
			RICE_nubia_baqt_exchange_effect = yes
		}
		else_if = {
			limit = {
				root = scope:recipient
			}
			show_as_tooltip = {				
				RICE_nubia_baqt_exchange_effect = yes
			}
		}
	}

	# ok
	option = {
		name = nubia.0041.a
	}

	# after = {
	# 	if = {
	# 		limit = {
	# 			has_variable = RICE_baqt_actor_good
	# 		}
	# 		remove_variable = RICE_baqt_actor_good
	# 	}
	# 	if = {
	# 		limit = {
	# 			has_variable = RICE_baqt_recipient_good
	# 		}
	# 		remove_variable = RICE_baqt_recipient_good
	# 	}
	# }

}



######################################################################################
# 
# NIUTY'S REBELLION EVENT CHAIN
# 
# nubia.0060-nubia.0079
# 
######################################################################################


# Niuty's rebellion - Georgios' POV
nubia.0060 = {
	type = character_event
	title = nubia.0060.t
	window = duel_event
	desc = nubia.0060.desc
	theme = martial
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:georgios
		animation = war_defender
	}
	
	right_portrait = {
		character = scope:niuty
		animation = war_attacker
	}

	lower_right_portrait = {
		character = scope:umari
		trigger = { exists = scope:umari }
	}

	immediate = {
		character:dongola0010 = {
			save_scope_as = georgios
			spawn_army = {
				levies = 500
				men_at_arms = {
					type = archers_of_the_nile
					stacks = 3
				}
				men_at_arms = {
					type = RICE_alodian_cavalry
					stacks = 4
				}
				men_at_arms = {
					type = light_footmen
					stacks = 2
				}
				men_at_arms = {
					type = pikemen_unit
					stacks = 2
				}
				men_at_arms = {
					type = armored_footmen
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = event_troop_default_name
			}
			show_as_tooltip = {
				add_character_modifier = {
					modifier = RICE_nubia_aspiration_defeat_the_traitor_and_the_bandit
				}
			}
		}
		character:dongola0011d = {
			save_scope_as = niuty
			spawn_army = {
				levies = 300
				men_at_arms = {
					type = archers_of_the_nile
					stacks = 3
				}
				men_at_arms = {
					type = RICE_alodian_cavalry
					stacks = 2
				}
				men_at_arms = {
					type = light_footmen
					stacks = 1
				}
				men_at_arms = {
					type = pikemen_unit
					stacks = 2
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = event_troop_default_name
			}
			show_as_tooltip = {
				add_character_modifier = {
					modifier = RICE_nubia_aspiration_take_over_makuria
				}
			}
		}
		character:bedouin0018 = {
			save_scope_as = umari
		}
		character:34014 = { # Abbasid Caliph
			save_scope_as = abbasid
		}		
		character:dongola0009 = {
			save_scope_as = father
		}		
	}

	# ok
	option = {
		name = nubia.0060.a
		scope:niuty = {
			start_war = {
				cb = claim_cb
				target = scope:georgios
				claimant = scope:niuty
				target_title = title:k_nubia
			}
			add_truce_both_ways = {
				character = scope:umari
				years = 10
				name = TRUCE_COLLABORATION
			}
		}
		custom_tooltip = nubia.0060.a.umari
	}

	# # ok
	# option = {
	# 	name = nubia.0060.b
	# }
	
	after = {
		scope:niuty = {
			trigger_event = nubia.0061
		}
	}

}


# Niuty's rebellion - Niuty' POV
nubia.0061 = {
	type = character_event
	title = nubia.0061.t
	window = duel_event
	desc = nubia.0061.desc
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	left_portrait = {
		character = scope:georgios
		animation = war_defender
	}
	
	right_portrait = {
		character = scope:niuty
		animation = war_attacker
	}

	lower_right_portrait = {
		character = scope:umari
		trigger = { exists = scope:umari }
	}

	immediate = {
		show_as_tooltip = {
			character:dongola0010 = {
				spawn_army = {
					levies = 300
					men_at_arms = {
						type = archers_of_the_nile
						stacks = 3
					}
					men_at_arms = {
						type = RICE_alodian_cavalry
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 1
					}
					men_at_arms = {
						type = pikemen_unit
						stacks = 2
					}
					location = capital_province
					uses_supply = yes
					inheritable = yes
					name = event_troop_default_name
				}
				show_as_tooltip = {
					add_character_modifier = {
						modifier = RICE_nubia_aspiration_defeat_the_traitor_and_the_bandit
					}
				}
			}
			character:dongola0011d = {
				spawn_army = {
					levies = 500
					men_at_arms = {
						type = archers_of_the_nile
						stacks = 4
					}
					men_at_arms = {
						type = RICE_alodian_cavalry
						stacks = 2
					}
					men_at_arms = {
						type = light_footmen
						stacks = 2
					}
					men_at_arms = {
						type = pikemen_unit
						stacks = 3
					}
					location = capital_province
					uses_supply = yes
					inheritable = yes
					name = event_troop_default_name
				}
				show_as_tooltip = {
					add_character_modifier = {
						modifier = RICE_nubia_aspiration_take_over_makuria
					}
				}
			}	
			scope:niuty = {
				start_war = {
					cb = claim_cb
					target = scope:georgios
					claimant = scope:niuty
					target_title = title:k_nubia
				}
				add_truce_both_ways = {
					character = scope:umari
					years = 10
					name = TRUCE_COLLABORATION
				}
			}			
		}
	}

	# ok
	option = {
		name = nubia.0061.a		
		custom_tooltip = nubia.0060.a.umari
	}

	after = {
		# Ask al-Umari to join your side
		trigger_event = {
			id = nubia.0062
			#months = { 3 6 }
		}
	}

}


# Niuty makes an offer to al-Umari
nubia.0062 = {
	type = character_event
	title = nubia.0062.t
	window = duel_event
	desc = nubia.0062.desc
	theme = corruption
	override_background = { reference = RICE_background_egypt_desert }
	
	left_portrait = {
		character = scope:umari
		animation = scheme
	}
	
	right_portrait = {
		character = scope:niuty
		animation = bribing
	}

	lower_center_portrait = {
		character = scope:georgios
		trigger = { exists = scope:georgios }
	}

	trigger = {
		# Make sure your war with Georgios is still ongoing and that neither of you are at war with al-Umari
		is_at_war_with = scope:georgios
		scope:georgios = {
			is_alive = yes
			has_title = title:k_nubia
			NOT = {
				is_at_war_with = scope:umari
			}
		}
		NOT = {
			is_at_war_with = scope:umari
		}
	}

	# If you are at war with al-Umari for some reason, but still at war with Georgios and Georgios isn't at war with al-Umari, punt to Georgios
	on_trigger_fail = {
		if = {
			limit = {
				is_at_war_with = scope:georgios
				scope:georgios = {
					is_alive = yes
					has_title = title:k_nubia
					NOT = {
						is_at_war_with = scope:umari
					}
				}				
			}
			trigger_event = nubia.0063
		}
	}

	# immediate = {
	# }

	# no gift
	option = {
		name = nubia.0062.a
		custom_tooltip = nubia.0062.a.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:nothing
			days = 30
		}
	}

	# gold
	option = {
		name = nubia.0062.b
		# trigger = {
		# 	OR = {
		# 		is_ai = no
		# 		short_term_gold >= 50			
		# 	}
		# }
		remove_short_term_gold = 50
		custom_tooltip = nubia.0062.b.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:gold
			days = 30
		}
	}

	# gold
	option = {
		name = nubia.0062.c
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= 100			
			}
		}
		remove_short_term_gold = 200
		custom_tooltip = nubia.0062.c.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:big_gold
			days = 30
		}
	}

	after = {
		# Georgios asks al-Umari to join his side
		scope:georgios = {
			trigger_event = {
				id = nubia.0063
				#months = { 4 12 }
			}			
		}
	}

}


# Georgios makes an offer to al-Umari
nubia.0063 = {
	type = character_event
	title = nubia.0063.t
	window = duel_event
	desc = nubia.0063.desc
	theme = corruption
	override_background = { reference = RICE_background_egypt_desert }
	
	left_portrait = {
		character = scope:umari
		animation = scheme
	}
	
	right_portrait = {
		character = scope:georgios
		animation = bribing
	}

	lower_center_portrait = {
		character = scope:niuty
		trigger = { exists = scope:niuty }
	}

	# immediate = {
	# }

	# no gift
	option = {
		name = nubia.0063.a
		custom_tooltip = nubia.0063.a.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:nothing
			days = 30
		}
	}

	# gold
	option = {
		name = nubia.0063.b
		# trigger = {
		# 	OR = {
		# 		is_ai = no
		# 		short_term_gold >= 50			
		# 	}
		# }
		remove_short_term_gold = 50
		custom_tooltip = nubia.0063.b.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:gold
			days = 30
		}
	}

	# gold
	option = {
		name = nubia.0063.c
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= 100			
			}
		}
		remove_short_term_gold = 200
		custom_tooltip = nubia.0063.c.tooltip
		set_variable = {
			name = RICE_umari_offer
			value = flag:big_gold
			days = 30
		}
	}

	after = {
		scope:umari = {
			# al-Umari makes his choice
			trigger_event = {
				id = nubia.0064
				#days = { 10 25 }
			}
		}
	}

}


# al-Umari contemplates Niuty and Georgios' offers
nubia.0064 = {
	type = character_event
	title = nubia.0064.t
	window = duel_event
	desc = {
		desc = nubia.0064.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:niuty = {
						var:RICE_umari_offer ?= flag:nothing
					}
					scope:georgios = {
						OR = {
							var:RICE_umari_offer ?= flag:gold
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
				}
				desc = nubia.0064.desc.georgios
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						var:RICE_umari_offer ?= flag:nothing
					}
					scope:niuty = {
						OR = {
							var:RICE_umari_offer ?= flag:gold
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
				}
				desc = nubia.0064.desc.niuty
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						OR = {
							var:RICE_umari_offer ?= flag:gold
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
					scope:niuty = {
						OR = {
							var:RICE_umari_offer ?= flag:gold
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
				}
				desc = nubia.0064.desc.both
			}
			desc = nubia.0064.desc.neither
		}
		desc = nubia.0064.desc.conclusion
	}
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	
	# right_portrait = {
	# 	character = scope:umari
	# 	animation = personality_dishonorable
	# }

	left_portrait = {
		character = scope:georgios
		animation = bribing
		trigger = { exists = scope:georgios }
	}

	right_portrait = {
		character = scope:niuty
		animation = bribing
		trigger = { exists = scope:niuty }
	}

	immediate = {
		scope:niuty = {
			random_character_war = {
				limit = {
					any_war_attacker = { this = scope:niuty }
					any_war_defender = { this = scope:georgios }
				}
				save_scope_as = niuty_rebellion_war
			}
		}
	}

	# Support Niuty
	option = {
		name = nubia.0064.a
		if = {
			limit = {
				scope:niuty = {
					var:RICE_umari_offer ?= flag:gold
				}
			}
			add_gold = 50
		}
		else_if = {
			limit = {
				scope:niuty = {
					var:RICE_umari_offer ?= flag:big_gold
				}
			}
			add_gold = 200
		}
		scope:niuty_rebellion_war = { add_attacker = scope:umari }
		scope:niuty = {
			add_opinion = {
				modifier = RICE_opinion_al_umari_useful_bandit
				target = root
			}
			trigger_event = nubia.0065
		}
		scope:georgios = {
			add_opinion = {
				modifier = RICE_opinion_al_umari_treacherous_bandit
				target = root
			}
			trigger_event = nubia.0065
		}
	}

	# Support Georgios
	option = {
		name = nubia.0064.b
		if = {
			limit = {
				scope:georgios = {
					var:RICE_umari_offer ?= flag:gold
				}
			}
			add_gold = 50
		}
		else_if = {
			limit = {
				scope:georgios = {
					var:RICE_umari_offer ?= flag:big_gold
				}
			}
			add_gold = 200
		}
		scope:niuty_rebellion_war = { add_defender = scope:umari }
		scope:niuty = {
			add_opinion = {
				modifier = RICE_opinion_al_umari_treacherous_bandit
				target = root
			}
			trigger_event = nubia.0066
		}
		scope:georgios = {
			add_opinion = {
				modifier = RICE_opinion_al_umari_useful_bandit
				target = root
			}
			trigger_event = nubia.0066
		}
	}

	# Support neither
	option = {
		name = nubia.0064.c
		scope:niuty = {
			trigger_event = nubia.0067
		}
		scope:georgios = {
			trigger_event = nubia.0067
		}
	}

	# after = {
	# 	custom_tooltip = nubia.0064.tooltip # The victor of the war might still attack you after
	# }

}



# Georgios and Niuty are notified that al-Umari sided with Niuty 
nubia.0065 = {
	type = character_event
	title = nubia.0065.t
	desc = {
		desc = nubia.0065.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:niuty = {
						root = this
					}
				}
				desc = nubia.0065.desc.niuty
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						root = this
					}
				}
				desc = nubia.0065.desc.georgios
			}
		}
	}
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	
	right_portrait = {
		character = scope:umari
		animation = war_attacker
	}

	lower_left_portrait = {
		character = scope:georgios
		trigger = { exists = scope:georgios }
	}

	lower_right_portrait = {
		character = scope:niuty
		trigger = { exists = scope:niuty }
	}

	immediate = {
		show_as_tooltip = {
			scope:umari = {
				if = {
					limit = {
						scope:niuty = {
							var:RICE_umari_offer ?= flag:gold
						}
					}
					add_gold = 50
				}
				else_if = {
					limit = {
						scope:niuty = {
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
					add_gold = 200
				}
			}
			scope:niuty_rebellion_war = { add_attacker = scope:umari }
			scope:niuty = {
				add_opinion = {
					modifier = RICE_opinion_al_umari_useful_bandit
					target = root
				}
			}
			scope:georgios = {
				add_opinion = {
					modifier = RICE_opinion_al_umari_treacherous_bandit
					target = root
				}
			}			
		}
	}

	# Ok
	option = {
		name = nubia.0065.a
		#custom_tooltip = nubia.0064.tooltip # The victor of the war might still attack al-Umari after
	}

}



# Georgios and Niuty are notified that al-Umari sided with Georgios
nubia.0066 = {
	type = character_event
	title = nubia.0066.t
	desc = {
		desc = nubia.0066.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:niuty = {
						root = this
					}
				}
				desc = nubia.0066.desc.niuty
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						root = this
					}
				}
				desc = nubia.0066.desc.georgios
			}
		}
	}
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	
	right_portrait = {
		character = scope:umari
		animation = war_attacker
	}

	lower_left_portrait = {
		character = scope:georgios
		trigger = { exists = scope:georgios }
	}

	lower_right_portrait = {
		character = scope:niuty
		trigger = { exists = scope:niuty }
	}

	immediate = {
		show_as_tooltip = {
			scope:umari = {
				if = {
					limit = {
						scope:georgios = {
							var:RICE_umari_offer ?= flag:gold
						}
					}
					add_gold = 50
				}
				else_if = {
					limit = {
						scope:georgios = {
							var:RICE_umari_offer ?= flag:big_gold
						}
					}
					add_gold = 200
				}
			}
			scope:niuty_rebellion_war = { add_defender = scope:umari }
			scope:niuty = {
				add_opinion = {
					modifier = RICE_opinion_al_umari_treacherous_bandit
					target = root
				}
			}
			scope:georgios = {
				add_opinion = {
					modifier = RICE_opinion_al_umari_useful_bandit
					target = root
				}
			}		
		}
	}

	# ok
	option = {
		name = nubia.0066.a
		#custom_tooltip = nubia.0064.tooltip # The victor of the war might still attack al-Umari after
	}

}


# Georgios and Niuty are notified that al-Umari sided with no one
nubia.0067 = {
	type = character_event
	title = nubia.0067.t
	desc = {
		desc = nubia.0067.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:niuty = {
						root = this
					}
				}
				desc = nubia.0067.desc.niuty
			}
			triggered_desc = {
				trigger = {
					scope:georgios = {
						root = this
					}
				}
				desc = nubia.0067.desc.georgios
			}
		}
		desc = nubia.0067.desc.conclusion
	}
	theme = martial
	override_background = { reference = RICE_background_egypt_desert }
	
	
	right_portrait = {
		character = scope:umari
		animation = war_attacker
	}

	lower_left_portrait = {
		character = scope:georgios
		trigger = { exists = scope:georgios }
	}

	lower_right_portrait = {
		character = scope:niuty
		trigger = { exists = scope:niuty }
	}

	# ok
	option = {
		name = nubia.0067.a
		#custom_tooltip = nubia.0064.tooltip # The victor of the war might still attack al-Umari after
	}

}



# Georgios Aspiration Fulfilled
nubia.0068 = {
	type = character_event
	title = nubia.0068.t
	desc = nubia.0068.desc
	theme = RICE_theme_nubia_dongola_building

	right_portrait = {
		character = scope:georgios
		animation = war_over_win
	}

	lower_left_portrait = scope:niuty
	lower_right_portrait = scope:umari

	immediate = {

		play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:dongola0010 = { # Georgios
			save_scope_as = georgios
		}	

		character:dongola0011d = { # Niuty
			save_scope_as = niuty
		}	

		character:bedouin0018 = { # al-Umari
			save_scope_as = umari
		}	
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_defeat_the_traitor_and_the_bandit
				}
				remove_character_modifier = RICE_nubia_aspiration_defeat_the_traitor_and_the_bandit
			}
		}

		# Main Objective Reward
		add_legitimacy = medium_legitimacy_gain
		add_prestige = RICE_aspiration_large_resource_bonus
		add_martial_lifestyle_perk_points = 1
		RICE_upgrade_education_trait_effect = yes
		spawn_army = {
			levies = 500
			men_at_arms = {
				type = archers_of_the_nile
				stacks = 1
			}
			men_at_arms = {
				type = RICE_alodian_cavalry
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 1
			}
			men_at_arms = {
				type = pikemen_unit
				stacks = 1
			}
			men_at_arms = {
				type = armored_footmen
				stacks = 1
			}
			location = capital_province
			uses_supply = yes
			inheritable = yes
			name = event_troop_default_name
		}

		# Bonus Objective Reward(s)
		if = {
			limit = {
				completely_controls = title:k_nubia
			}
			every_county_in_region = {
				region = RICE_greater_nubia_region
				limit = { holder.top_liege = root }
				custom = RICE_every_county_you_completely_control_in_nubia
				change_development_level = RICE_red_sea_al_umari_aspiration_dev_bonus	
			}
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_positive_pastoralist_decision
			}
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_negative_pastoralist_decision
			}
			add_intrigue_lifestyle_perk_points = 1
		}

	}

	# Ok
	option = {
		name = nubia.0068.a
	}


}



# Niuty Aspiration Fulfilled
nubia.0069 = {
	type = character_event
	title = nubia.0069.t
	desc = nubia.0069.desc
	theme = RICE_theme_nubia_dongola_building

	right_portrait = {
		character = scope:niuty
		animation = war_over_win
	}

	lower_left_portrait = scope:georgios
	lower_right_portrait = scope:umari

	immediate = {

		play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:dongola0010 = { # Georgios
			save_scope_as = georgios
		}	

		character:dongola0011d = { # Niuty
			save_scope_as = niuty
		}	

		character:bedouin0018 = { # al-Umari
			save_scope_as = umari
		}	
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_take_over_makuria
				}
				remove_character_modifier = RICE_nubia_aspiration_take_over_makuria
			}
		}

		# Main Objective Reward
		add_legitimacy = medium_legitimacy_gain
		add_prestige = RICE_aspiration_large_resource_bonus
		add_martial_lifestyle_perk_points = 1
		RICE_upgrade_education_trait_effect = yes
		spawn_army = {
			levies = 500
			men_at_arms = {
				type = archers_of_the_nile
				stacks = 1
			}
			men_at_arms = {
				type = RICE_alodian_cavalry
				stacks = 2
			}
			men_at_arms = {
				type = light_footmen
				stacks = 1
			}
			men_at_arms = {
				type = pikemen_unit
				stacks = 1
			}
			men_at_arms = {
				type = armored_footmen
				stacks = 1
			}
			location = capital_province
			uses_supply = yes
			inheritable = yes
			name = event_troop_default_name
		}

		# Bonus Objective Reward(s)
		if = {
			limit = {
				completely_controls = title:k_nubia
			}
			every_county_in_region = {
				region = RICE_greater_nubia_region
				limit = { holder.top_liege = root }
				custom = RICE_every_county_you_completely_control_in_nubia
				change_development_level = RICE_red_sea_al_umari_aspiration_dev_bonus	
			}
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_positive_pastoralist_decision
			}
			add_stewardship_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_negative_pastoralist_decision
			}
			add_intrigue_lifestyle_perk_points = 1
		}

	}

	# Ok
	option = {
		name = nubia.0069.a
	}


}






######################################################################################
# 
# CULTURE EVENTS AND DECISIONS
# 
# nubia.0080-nubia.0089
# 
######################################################################################




# Nilotic Culture character appears
nubia.0080 = {
	type = character_event
	title = nubia.0080.t
	desc = nubia.0080.desc
	theme = RICE_theme_uganda_savanna

	left_portrait = root
	right_portrait = {
		character = scope:courtier
		animation = throne_room_bow_1
	}

	trigger = {
		any_held_county = {
			any_county_province = {
				geographical_region = RICE_nubia_and_ethiopia
			}
		}
		RICE_is_offmap_nilotic_culture_trigger = no
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		culture:oropom = {
			save_scope_as = oropom
		}
		random_list = {
			100 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:luo
					faith = faith:dinka_pagan
					save_scope_as = courtier			
				}
			}
			100 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:ateker
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			100 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:bari
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			50 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:kalenjin
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			50 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:maasai
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			50 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:sirikwa
					faith = faith:turkana_pagan
					save_scope_as = courtier			
				}
			}
			50 = {
				create_character = {
					location = root.capital_province
					template = RICE_nilotic_generic_template
					culture = culture:oropom
					faith = faith:south_omotic_pagan
					save_scope_as = courtier			
				}
			}
		}
		random_list = {
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:warriors
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:artisans
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:blacksmiths
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:traders
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:ritualists
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:builders
					days = 1
				}
			}
			10 = {
				set_variable = {
					name = RICE_nilotic_type
					value = flag:herders
					days = 1
				}
			}
		}
	}

	# Work with them
	option = {
		name = nubia.0080.a
		trigger = {
			OR = {
				gold >= 50
				is_ai = no
			}
		}
		remove_short_term_gold = 50
		if = {
			limit = {
				var:RICE_nilotic_type ?= flag:warriors
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_warriors
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:artisans
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_artisans
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:blacksmiths
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_blacksmiths
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:traders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_traders
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:ritualists
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_ritualists
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:builders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_builders
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:herders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_herders
				years = 20
			}
		}
	}

	# Invite courtier
	option = {
		name = nubia.0080.b
		trigger = {
			OR = {
				gold >= 50
				is_ai = no
			}
		}
		remove_short_term_gold = 100
		add_courtier = scope:courtier
		if = {
			limit = {
				var:RICE_nilotic_type ?= flag:warriors
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_warriors
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:artisans
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_artisans
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:blacksmiths
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_blacksmiths
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:traders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_traders
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:ritualists
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_ritualists
				years = 20
			}
		}
		else_if = {
			limit = {
				var:RICE_nilotic_type ?= flag:builders
			}
			add_character_modifier = {
				modifier = RICE_nubia_nilotic_builders
				years = 20
			}
		}
	}
	
	# Don't work with them
	option = {
		name = nubia.0080.c
		hidden_effect = {
			random = {
				chance = 80
				scope:courtier = {
					death = {
						death_reason = death_vanished
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				has_variable = RICE_nilotic_type
			}
			remove_variable = RICE_nilotic_type
		}
	}

}


######################################################################################
# 
# PASTORALISTS AND FARMERS
# 
# nubia.0090-nubia.0099
# 
######################################################################################


# Welcome Nile Pastoralists
nubia.0090 = {
	type = character_event
	title = nubia.0090.t
	desc = nubia.0090.desc
	theme = migration
	override_background = { reference = RICE_background_nile_travel }

	right_portrait = {
		character = root
		animation = personality_forgiving
	}

	immediate = {
		RICE_nile_pastoralists_positive_decision_effect = yes
	}

	# Ok
	option = {
		name = nubia.0090.a
	}

	# Pay extra
	option = {
		name = nubia.0090.b
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_pastoralist_decision_bonus_max
			}
		}
		remove_short_term_gold = { RICE_pastoralist_decision_bonus_min RICE_pastoralist_decision_bonus_max }
		# You are in Egypt
		if = {
			limit = {
				capital_county = {
					any_county_province = {
						geographical_region = ghw_region_egypt
					}
				}
			}
			spawn_army = {
				levies = 200
				men_at_arms = {
					type = light_horsemen
					stacks = 1
				}
				men_at_arms = {
					type = abudrar
					stacks = 1
				}
				men_at_arms = {
					type = mubarizun
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_nile_pastoralist_troops
			}
		}
		# You are in Nubia
		else_if = {
			limit = {
				capital_county = {
					any_county_province = {
						geographical_region = RICE_greater_nubia_region
					}
				}
			}
			spawn_army = {
				levies = 200
				men_at_arms = {
					type = archers_of_the_nile
					stacks = 1
				}
				men_at_arms = {
					type = RICE_nilotic_raiders
					stacks = 1
				}
				men_at_arms = {
					type = sahel_horsemen
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_nile_pastoralist_troops
			}
		}
		# You are in neither Nubia or Egypt for some reason
		else = {
			spawn_army = {
				levies = 200
				men_at_arms = {
					type = archers_of_the_nile
					stacks = 1
				}
				men_at_arms = {
					type = abudrar
					stacks = 1
				}
				men_at_arms = {
					type = sahel_horsemen
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_nile_pastoralist_troops
			}
		}
	}

}



# Ward Off Nile Pastoralists
nubia.0091 = {
	type = character_event
	title = nubia.0091.t
	desc = nubia.0091.desc
	theme = migration
	override_background = { reference = RICE_background_nile_travel }

	right_portrait = {
		character = root
		animation = disapproval
	}

	immediate = {
		RICE_nile_pastoralists_negative_decision_effect = yes
	}

	# Ok
	option = {
		name = nubia.0091.a
	}

}

# Protect Nile farmers
nubia.0092 = {
	type = character_event
	title = nubia.0092.t
	desc = nubia.0092.desc
	theme = martial
	override_background = { reference = RICE_background_nile_travel }

	right_portrait = {
		character = root
		animation = war_defender
	}

	immediate = {
		RICE_nile_farmers_positive_decision_effect = yes
	}

	# Ok
	option = {
		name = nubia.0092.a
	}

}

# Plunder Nile farmers
nubia.0093 = {
	type = character_event
	title = nubia.0093.t
	desc = nubia.0093.desc
	theme = raid
	override_background = { reference = RICE_background_nile_travel }

	right_portrait = {
		character = root
		animation = menacing
	}

	immediate = {
		add_gold = { RICE_pastoralist_decision_bonus_min RICE_pastoralist_decision_bonus_max }
		RICE_nile_farmers_negative_decision_effect = yes
	}

	# Ok
	option = {
		name = nubia.0093.a
	}

}






######################################################################################
# 
# ELDAD HA-DANI/DANITE STUFF
# 
# nubia.0100-nubia.0119
# 
######################################################################################




# Introduction event - version for Eldad ha-Dani
nubia.0100 = {
	type = character_event
	title = nubia.0100.t
	desc = nubia.0100.desc
	theme = RICE_theme_red_sea_beach
	override_icon = { reference = "gfx/interface/icons/event_types/type_legends.dds" }

	right_portrait = {
		character = root
		animation = personality_content
	}

	immediate = {
		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_spread_stories_tribe_of_dan
			}			
		}
	}

	# Stay Yemeni Jewish
	option = {
		name = nubia.0100.a	
		add_trait_xp = { 
			trait = RICE_the_danite
			track = RICE_the_danite_justice
			value = RICE_the_danite_trait_medium_xp_gain
		}
		# AI will more likely go with this option
		ai_chance = {
			base = 80
		}
	}

	# Become Ethiopian
	option = {
		name = nubia.0100.b	
		set_culture = culture:ethiopian
		set_character_faith = faith:haymanot	
		custom_tooltip = RICE_physical_appearance_change_desc
		hidden_effect = {
			copy_inheritable_appearance_from = character:RICE_eldad_ha_dani_ethiopian_version
			character:RICE_red_sea_001a = {
				copy_inheritable_appearance_from = character:RICE_eldad_ha_dani_ethiopian_version_father
			}
		}
		add_trait_xp = { 
			trait = RICE_the_danite
			track = RICE_the_danite_serpent
			value = RICE_the_danite_trait_medium_xp_gain
		}
		# However, there's a chance the AI will go with this option instead
		ai_chance = {
			base = 20
		}
	}

	after = {
		trigger_event = nubia.0101
	}

}

# Introduction event - version for Eldad ha-Dani
nubia.0101 = {
	type = character_event
	title = nubia.0101.t
	desc = nubia.0101.desc
	theme = RICE_theme_red_sea_beach
	override_icon = { reference = "gfx/interface/icons/event_types/type_legends.dds" }

	right_portrait = {
		character = root
		animation = personality_content
	}

	# Ok
	option = {
		name = nubia.0101.a		
		create_legend = {
			type = heroic
			quality = famed
			chronicle = RICE_the_tribe_of_dan_legend
			properties = {
				danite = root
				religion = religion:judaism_religion
			}
		}
	}

	# Ok
	option = {
		name = nubia.0101.b		
		create_legend = {
			type = holy
			quality = famed
			chronicle = RICE_the_tribe_of_dan_legend
			properties = {
				danite = root
				religion = religion:judaism_religion
			}
		}
	}


}

# Introduction event - version for everyone else who starts with the trait as a failsafe
nubia.0102 = {
	type = character_event
	title = nubia.0102.t
	desc = nubia.0102.desc
	theme = RICE_theme_red_sea_beach
	override_icon = { reference = "gfx/interface/icons/event_types/type_legends.dds" }

	right_portrait = {
		character = root
		animation = personality_content
	}

	# Ok
	option = {
		name = nubia.0102.a		
		create_legend = {
			type = heroic
			quality = famed
			chronicle = RICE_the_tribe_of_dan_legend
			properties = {
				danite = root
				religion = religion:judaism_religion
			}
		}
	}

	# Ok
	option = {
		name = nubia.0102.b		
		create_legend = {
			type = holy
			quality = famed
			chronicle = RICE_the_tribe_of_dan_legend
			properties = {
				danite = root
				religion = religion:judaism_religion
			}
		}
	}


}

# Spread the legend
nubia.0103 = {
	type = character_event
	title = nubia.0103.t
	desc = nubia.0103.desc
	theme = legend
	override_background = { reference = tavern }

	right_portrait = {
		character = root
		animation = storyteller
	}

	immediate = {
		set_variable = {
			name = RICE_eldad_ha_dani_reception
			value = {
				value = 0
				add = {
					integer_range = {
						min = 1
						max = 100
					}
				}
			}
			days = 1
		}
		#RICE_eldad_ha_dani_decision_effect = yes
	}

	# Serpent: Martial, Intrigue, Prowess
	# Justice: Diplomacy, Stewardship, Learning

	# Serpent - fanciful tales
	option = {
		name = nubia.0103.a
		set_variable = {
			name = RICE_eldad_ha_dani_story_type
			value = flag:fanciful_tales
			days = 1
		}
		random_list = { # add = var:team_b_ptv
			50 = {
				#show_chance = no
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception >= 55 # Slightly Enthusiastic Reception
				}
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception >= 70 # Somewhat Enthusiastic Reception
				}
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception >= 85 # Very Enthusiastic Reception
				}
				desc = nubia.0103.success
				trigger_event = nubia.0104
			}
			50 = {
				#show_chance = no
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception <= 45 # Slightly Skeptical Reception
				}
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception <= 30 # Somewhat Skeptical Reception
				}
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception <= 15 # Very Skeptical Reception
				}
				desc = nubia.0103.failure
				trigger_event = nubia.0105
			}
		}
	}

	# Justice - informative commentary
	option = {
		name = nubia.0103.b
		set_variable = {
			name = RICE_eldad_ha_dani_story_type
			value = flag:informative_commentary
			days = 1
		}
		random_list = {
			50 = {
				#show_chance = no
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception <= 45 # Slightly Skeptical Reception
				}
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception <= 30 # Somewhat Skeptical Reception
				}
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception <= 15 # Very Skeptical Reception
				}
				desc = nubia.0103.success
				trigger_event = nubia.0104
			}
			50 = {
				#show_chance = no
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception >= 55 # Slightly Enthusiastic Reception
				}
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception >= 70 # Somewhat Enthusiastic Reception
				}
				modifier = {
					add = 15
					var:RICE_eldad_ha_dani_reception >= 85 # Very Enthusiastic Reception
				}
				desc = nubia.0103.failure
				trigger_event = nubia.0105
			}
		}
	}


}

# Eldad ha-Dani - success
nubia.0104 = {
	type = character_event
	title = nubia.0104.t
	desc = nubia.0104.desc
	theme = legend
	override_background = { reference = tavern }

	right_portrait = {
		character = root
		animation = personality_compassionate
	}

	immediate = {
		RICE_eldad_ha_dani_decision_success_effect = yes
	}

	# Serpent: Martial, Intrigue, Prowess
	# Justice: Diplomacy, Stewardship, Learning

	# Ok
	option = {
		name = nubia.0104.a
	}

	after = {		
		RICE_eldad_ha_dani_end_decision_effect = yes
	}

}

# Eldad ha-Dani - failure
nubia.0105 = {
	type = character_event
	title = nubia.0105.t
	desc = nubia.0105.desc
	theme = legend
	override_background = { reference = tavern }

	right_portrait = {
		character = root
		animation = sadness
	}

	immediate = {
		RICE_eldad_ha_dani_decision_failure_effect = yes
	}

	# Serpent: Martial, Intrigue, Prowess
	# Justice: Diplomacy, Stewardship, Learning

	# Ok
	option = {
		name = nubia.0105.a
	}

	after = {		
		RICE_eldad_ha_dani_end_decision_effect = yes
	}

}


######################################################################################
# 
# OTHER HISTORICAL ASPIRATIONS
# 
# nubia.0120-nubia.0129
# 
######################################################################################


# Merki intro event
nubia.0120 = {
	type = character_event
	title = nubia.0120.t
	desc = nubia.0120.desc
	theme = RICE_theme_nile_valley

	left_portrait = {
		character = root
		animation = chancellor
	}

	immediate = {
		character:RICE_nubia_misc_001 = {
			save_scope_as = merki
		}
		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_ascend_bureaucracy_makuria
			}
			add_character_modifier = {
				modifier = RICE_nubia_merki_modifier
			}
		}
	}

	option = { # Ok
		name = nubia.0120.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0120.info
		}
	}

}


# Merki aspiration fulfilled
nubia.0121 = {
	type = character_event
	title = nubia.0121.t
	desc = nubia.0121.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = root
		animation = chancellor
	}


	immediate = {

		#play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:RICE_nubia_misc_001 = { # Merki
			save_scope_as = merki
		}	

		title:k_nubia.holder = {
			save_scope_as = makurian_king
		}
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_ascend_bureaucracy_makuria
				}
				remove_character_modifier = RICE_nubia_aspiration_ascend_bureaucracy_makuria
			}
		}

		# Main Objective Reward
		dynasty ?= {
			add_dynasty_prestige = RICE_aspiration_medium_resource_bonus
		}
		RICE_upgrade_education_trait_effect = yes
		remove_character_modifier = RICE_nubia_merki_modifier
		add_character_modifier = {
			modifier = RICE_nubia_merki_upgraded_modifier
		}
		add_gold = RICE_aspiration_medium_resource_bonus

		# Bonus Objective Reward(s)
		if = {
			limit = {
				OR = {
					has_relation_friend = scope:makurian_king
					has_relation_best_friend = scope:makurian_king
					is_councillor_of = scope:makurian_king
					scope:makurian_king = {						
						opinion = {
							target = scope:merki
							value >= 75
						}
					}
				}
			}
			add_gold = RICE_aspiration_medium_resource_bonus
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_positive_pastoralist_decision
			}
			add_diplomacy_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				has_character_flag = RICE_georgios_or_niuty_did_negative_pastoralist_decision
			}
			add_intrigue_lifestyle_perk_points = 1
		}
		if = {
			limit = {
				exists = var:RICE_num_times_did_nubian_agriculture_decision
				var:RICE_num_times_did_nubian_agriculture_decision > 1
			}
			add_prestige = RICE_nubian_agriculture_decision_aspiration_prestige_bonus_value
		}

	}

	option = { # Ok
		name = nubia.0121.a
	}

}

# Kusbur intro event
nubia.0122 = {
	type = character_event
	title = nubia.0122.t
	desc = nubia.0122.desc
	theme = wanderer_journey_focus
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }

	left_portrait = {
		character = root
		animation = holding_staff
	}

	immediate = {

		character:RICE_daju_002 = { # Kusbur
			save_scope_as = kusbur
		}	

		culture:daju = {
			save_scope_as = daju
		}

		culture:tora = {
			save_scope_as = tora
		}

		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_daju_migration_into_darfur
			}
		}
	}

	option = { # Ok
		name = nubia.0122.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0122.info
		}
	}

}

# Kusbur aspiration fulfilled
nubia.0123 = {
	type = character_event
	title = nubia.0123.t
	desc = nubia.0123.desc
	theme = wanderer_journey_focus
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }

	right_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:RICE_daju_002 = { # Kusbur
			save_scope_as = kusbur
		}	

		scope:kusbur.culture = {
			save_scope_as = daju
		}

		culture:tora = {
			save_scope_as = tora
		}
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_daju_migration_into_darfur
				}
				remove_character_modifier = RICE_nubia_aspiration_daju_migration_into_darfur
			}
		}

		# Main Objective Reward
		dynasty ?= {
			add_dynasty_prestige = RICE_aspiration_large_resource_bonus
		}
		every_county_in_region = {
			region = RICE_greater_darfur
			limit = { holder.top_liege = root }
			custom = RICE_every_county_completely_control_greater_darfur
			add_county_modifier = {
				modifier = RICE_nubia_daju_migrations_modifier
				years = 50
			}
		}

		# Bonus Objective Reward(s)
		if = {
			limit = {
				any_vassal = {
					highest_held_title_tier = tier_county
					OR = {
						culture = culture:tora
						culture = {
							any_parent_culture_or_above = {
								this = culture:tora
							}
						}
					}					
				}
			}
			spawn_army = {
				levies = 200
				men_at_arms = {
					type = bowmen
					stacks = 1
				}
				men_at_arms = {
					type = pikemen_unit
					stacks = 1
				}
				men_at_arms = {
					type = RICE_sudanese_highlanders
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_daju_warriors_event_troops
			}
		}
		if = {
			limit = {
				any_vassal = {
					highest_held_title_tier = tier_county
					OR = {
						culture = culture:daju
						culture = {
							any_parent_culture_or_above = {
								this = culture:daju
							}
						}
					}					
				}
			}
			spawn_army = {
				levies = 100
				men_at_arms = {
					type = bowmen
					stacks = 1
				}
				men_at_arms = {
					type = pikemen_unit
					stacks = 1
				}
				men_at_arms = {
					type = sahel_horsemen
					stacks = 1
				}
				men_at_arms = {
					type = RICE_sudanese_highlanders
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_daju_warriors_event_troops
			}
		}
		if = {
			limit = {
				has_character_flag = RICE_did_tebeldi_trees_decision
			}
			add_piety = RICE_aspiration_medium_resource_bonus
		}
		if = {
			limit = {
				has_character_flag = RICE_did_lake_oracle_decision
			}
			add_piety = RICE_aspiration_medium_resource_bonus
		}
	}

	option = { # Ok
		name = nubia.0123.a
	}

}

# Moses Georgios intro event
nubia.0124 = {
	type = character_event
	title = nubia.0124.t
	desc = nubia.0124.desc
	theme = RICE_theme_nubia_church_interior

	left_portrait = {
		character = root
		animation = worry
	}

	lower_right_portrait = scope:saladin

	immediate = {
		character:dongola0022 = { # Moses Georgios
			save_scope_as = moses_georgios
		}	

		character:226000 = { # saladin
			save_scope_as = saladin
		}	

		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_revive_nubia
			}
		}
	}

	option = { # Ok
		name = nubia.0124.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0124.info
		}
	}

}

# Moses Georgios aspiration fulfilled
nubia.0125 = {
	type = character_event
	title = nubia.0125.t
	desc = nubia.0125.desc
	theme = RICE_theme_nubia_church_interior

	right_portrait = {
		character = root
		animation = personality_callous
	}

	immediate = {
		play_music_cue = "mx_cue_epic_sacral_moment"

		RICE_historical_aspiration_fulfilled_effect = yes

		character:dongola0022 = { # Moses Georgios
			save_scope_as = moses_georgios
		}	

		character:226000 = { # saladin
			save_scope_as = saladin
		}	
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_revive_nubia
				}
				remove_character_modifier = RICE_nubia_aspiration_revive_nubia
			}
		}

		# Main Objective Reward
		every_county_in_region = {
			region = RICE_greater_nubia_region
			limit = { holder.top_liege = root }
			custom = RICE_every_county_you_completely_control_in_nubia
			change_development_level = RICE_red_sea_al_umari_aspiration_dev_bonus	
		}
		add_gold = RICE_aspiration_large_resource_bonus
		add_prestige = RICE_aspiration_large_resource_bonus
		spawn_army = {
			levies = 500
			men_at_arms = {
				type = archers_of_the_nile
				stacks = 3
			}
			men_at_arms = {
				type = RICE_alodian_cavalry
				stacks = 4
			}
			men_at_arms = {
				type = light_footmen
				stacks = 2
			}
			men_at_arms = {
				type = pikemen_unit
				stacks = 2
			}
			men_at_arms = {
				type = armored_footmen
				stacks = 1
			}
			location = capital_province
			uses_supply = yes
			inheritable = yes
			name = event_troop_default_name
		}
		situation:RICE_nubia_baqt_situation = {
			situation_sub_region:nubia = {
				trigger_situation_catalyst = catalyst_situation_RICE_baqt_major_historical_event_sufficiency
			}
		}
		# Bonus Objective Reward(s)
		if = {
			limit = {
				OR = {
					piety_level >= 3
					prestige_level >= 3
				}
				#completely_controls = title:k_nubia
				#completely_controls = title:k_alodia
			}
			dynasty ?= {
				add_dynasty_prestige = RICE_aspiration_large_resource_bonus
			}
		}
		if = {
			limit = {
				any_vassal = {
					OR = {
						is_allied_to = scope:moses_georgios
						has_dread_level_towards = {
							target = scope:moses_georgios
							level >= 2
						}
						opinion = {
							target = scope:moses_georgios
							value >= 75
						}
					}					
				}
			}
			spawn_army = {
				levies = 200
				# men_at_arms = {
				# 	type = bowmen
				# 	stacks = 1
				# }
				# men_at_arms = {
				# 	type = pikemen_unit
				# 	stacks = 1
				# }
				men_at_arms = {
					type = mubarizun
					stacks = 1
				}
				men_at_arms = {
					type = abudrar
					stacks = 1
				}
				men_at_arms = {
					type = mulaththamun
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_sicily_norman_muslim_event_troops
			}
		}
	}

	option = { # Ok
		name = nubia.0125.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0125.info
		}
	}

}

# Eparch Adam intro event
nubia.0126 = {
	type = character_event
	title = nubia.0126.t
	desc = nubia.0126.desc
	theme = RICE_theme_nubia_dongola_building

	left_portrait = {
		character = root
		animation = survey
	}

	right_portrait = {
		character = scope:moses_georgios
		animation = debating
	}

	lower_right_portrait = scope:saladin

	immediate = {
		character:dongola0022 = { # Moses Georgios
			save_scope_as = moses_georgios
		}	

		character:226000 = { # saladin
			save_scope_as = saladin
		}	
		
		show_as_tooltip = {
			add_character_modifier = {
				modifier = RICE_nubia_aspiration_look_after_nubia_frontier
			}
		}
	}

	option = { # Ok
		name = nubia.0126.a
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0126.info
		}
	}

}

# Eparch Adam aspiration fulfilled
nubia.0127 = {
	type = character_event
	title = nubia.0127.t
	desc = nubia.0127.desc
	theme = RICE_theme_nile_valley

	right_portrait = {
		character = scope:adam
		animation = chancellor
	}

	immediate = {

		RICE_historical_aspiration_fulfilled_effect = yes

		character:nobadia0018 = { # Eparch Adam
			save_scope_as = adam
		}	
		
		hidden_effect = {
			if = {
				limit = {
					has_character_modifier = RICE_nubia_aspiration_look_after_nubia_frontier
				}
				remove_character_modifier = RICE_nubia_aspiration_look_after_nubia_frontier
			}
		}

		# Main Objective Reward
		every_county_in_region = {
			region = RICE_nubia_frontier
			limit = { holder.top_liege = root }
			custom = RICE_every_county_completely_control_nobatia
			change_development_level = RICE_red_sea_al_umari_aspiration_dev_bonus	
		}
		RICE_upgrade_education_trait_effect = yes
		add_diplomacy_lifestyle_perk_points = 1
		# Bonus Objective Reward(s)
		if = {
			limit = {
				OR = {
					any_truce_holder = {
						religion = religion:islam_religion
					}
					any_ally = {
						religion = religion:islam_religion
					}
				}
			}
			spawn_army = {
				levies = 200
				# men_at_arms = {
				# 	type = bowmen
				# 	stacks = 1
				# }
				# men_at_arms = {
				# 	type = pikemen_unit
				# 	stacks = 1
				# }
				men_at_arms = {
					type = mubarizun
					stacks = 1
				}
				men_at_arms = {
					type = abudrar
					stacks = 1
				}
				men_at_arms = {
					type = mulaththamun
					stacks = 1
				}
				location = capital_province
				uses_supply = yes
				inheritable = yes
				name = RICE_sicily_norman_muslim_event_troops
			}
		}
		if = {
			limit = {
				prestige_level >= 3
			}
			add_intrigue_lifestyle_perk_points = 1
		}
	}

	option = { # Ok
		name = nubia.0127.a
	}

}



######################################################################################
# 
# EPARCH MARIANOS SLAVE FUGITIVE EVENT CHAIN
# 
# nubia.0140-nubia.0159
# 
######################################################################################


# Teniellasi reports the escaped slaves to Marianos
nubia.0140 = {
	type = character_event
	title = nubia.0140.t
	desc = nubia.0140.desc
	theme = martial_authority_focus
	override_background = { reference = RICE_background_nubia_dongola_building }

	left_portrait = {
		character = scope:marianos
		animation = war_defender
	}

	right_portrait = {
		character = scope:teniellasi
		animation = stress # worry
	}

	lower_left_portrait = scope:mena
	lower_right_portrait = scope:aswan_governor

	trigger = {
		has_title = title:d_nobatia
		NOT = { has_title = title:c_qurta }
		exists = title:c_qurta.holder
		NOT = { has_title = title:c_aswan }
		exists = title:c_aswan.holder
		OR = {
			AND = {				
				game_start_date = 1066.9.15
				character:RICE_nubia_misc_007 ?= {
					is_alive = yes
				}
			}
			any_courtier = {
				is_available_ai_adult = yes
			}
		}
		character:RICE_nubia_misc_007 = {
			is_alive = yes
		}
	}

	immediate = {
		title:d_nobatia.holder = {
			save_scope_as = marianos
		}
		title:c_qurta.holder = {
			save_scope_as = mena
		}
		title:c_aswan.holder = {
			save_scope_as = aswan_governor
		}
		if = {
			limit = {
				game_start_date = 1066.9.15
				character:RICE_nubia_misc_007 ?= {
					is_alive = yes
				}
			}
			character:RICE_nubia_misc_007 = {
				save_scope_as = teniellasi
			}
		}
		# Randomly choose a courtier
		else = {
			random_courtier = {
				limit = {
					is_available_ai_adult = yes
				}
				save_scope_as = teniellasi
			}
		}
	}

	option = { # I'll take on the case
		name = nubia.0140.a
		stress_impact = {
			lazy = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = relieved_opinion
				target = scope:marianos
				opinion = 10
			}
		}
		custom_tooltip = nubia.0140.a.tooltip
		trigger_event = nubia.0141
	}

	option = { # I have no time for this
		name = nubia.0140.b
		stress_impact = {
			diligent = minor_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			just = miniscule_stress_impact_gain
		}
		add_prestige = medium_prestige_loss
		scope:teniellasi = {
			add_opinion = {
				modifier = angry_opinion
				target = scope:marianos
				opinion = -40
			}
		}
		add_character_modifier = {
			modifier = RICE_nubia_marianos_focused_on_other_work
			years = 5
		}
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0140.info
		}
	}

}


# Marianos decides who to send to Mena to notify him of the situation
nubia.0141 = {
	type = character_event
	title = nubia.0141.t
	desc = nubia.0141.desc
	theme = stewardship_domain_focus
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = scope:marianos
		animation = war_over_tie
	}

	right_portrait = {
		character = scope:angelosinkouda
		animation = obsequious_bow
	}

	lower_left_portrait = scope:teniellasi
	lower_right_portrait = scope:mena

	immediate = {
		# Find Angelosinkouda, the historical writer of the letter
		if = {
			limit = {
				character:RICE_nubia_misc_008 ?= {
					is_alive = yes
					is_courtier_of = scope:marianos
				}
			}
			character:RICE_nubia_misc_008 = {
				save_scope_as = angelosinkouda
			}
		}
		# If Angelosinkouda doesn't exist, create a new equivalent official
		else = {
			add_character_flag = {
				flag = RICE_had_to_create_scribe
				days = 365
			}
			create_character = {
				template = administrator_character
				gender_female_chance = root_faith_dominant_gender_adjusted_female_chance
				dynasty = none
				location = root.location
				faith = root.location.faith
				culture = root.location.culture
				save_scope_as = angelosinkouda
			}
		}
		title:c_qurta.holder.capital_province = {
			save_scope_as = target_province
		}
	}

	option = { # Send a low-ranking official
		name = nubia.0141.a
		custom_tooltip = nubia.0141.a.tooltip
		trigger_event = {
			id = nubia.0142
			days = { 20 40 }
		}
	}

	option = { # Send Angelosinkouda
		name = nubia.0141.b
		if = {
			limit = {
				scope:angelosinkouda = {
					NOT = { is_courtier_of = root }
				}
			}
			add_courtier = scope:angelosinkouda
		}
		scope:angelosinkouda = {
			start_travel_plan = { 
				destination = scope:target_province
				return_trip = yes
				on_arrival_event = nubia.0142
			}
		}
		custom_tooltip = nubia.0141.b.tooltip
	}

	after = {
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}			
			custom_tooltip = nubia.0141.info
		}
	}

}



# Mena receives the letter from Marianos through Angelosinkouda
# Ping event
nubia.0142 = {
	type = character_event
	hidden = yes

	immediate = {
		if = {
			limit = {
				title:c_qurta.holder.top_liege = scope:marianos.top_liege
			}
			title:c_qurta.holder = {
				trigger_event = nubia.0144
			}
		}
		# Letter was unable to arrive for some reason
		else = {
			scope:marianos = {
				trigger_event = nubia.0143
			}
		}
	}
}

# Marianos is notified that Mena was unable to receive the letter properly and the slaves have escaped
nubia.0143 = {
	type = character_event
	title = nubia.0143.t
	desc = nubia.0143.desc
	theme = stewardship_domain_focus

	left_portrait = {
		character = scope:marianos
		animation = shame
	}

	right_portrait = {
		character = scope:teniellasi
		animation = disappointed
	}

	lower_right_portrait = scope:mena

	option = {
		name = nubia.0143.a
		stress_impact = {
			diligent = miniscule_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			just = miniscule_stress_impact_gain
		}
		add_prestige = minor_prestige_loss
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -20
			}
		}
	}

}

# Mena receives Angelosinkouda
nubia.0144 = {
	type = character_event
	title = nubia.0144.t
	desc = nubia.0144.desc
	theme = stewardship_domain_focus
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = scope:mena
		animation = war_over_tie
	}

	# If scope:angelosinkouda doesn't exist, such as if it was a lower-ranked official choice, then don't add him in the scene
	right_portrait = {
		character = scope:angelosinkouda
		animation = obsequious_bow
		trigger = {
			exists = scope:angelosinkouda
		}
	}

	lower_left_portrait = scope:teniellasi
	lower_right_portrait = scope:marianos

	immediate = {
		save_scope_as = mena # Re-save scope in case the ruler has changed		
	}

	option = { # Read the letter
		name = nubia.0144.a
		custom_tooltip = nubia.0144.a.tooltip
		trigger_event = nubia.0145
	}

}


# Read the letter
nubia.0145 = {
	type = letter_event
	opening = {
		desc = nubia.0145.opening
	}
	desc = nubia.0145.desc
	sender = scope:marianos

	option = { # Mena is not interested in helping
		name = nubia.0145.a
		custom_tooltip = nubia.0145.a.tooltip
		add_character_modifier = {
			modifier = RICE_nubia_marianos_focused_on_other_work
			years = 5
		}
		scope:marianos = {
			stress_impact = {
				diligent = miniscule_stress_impact_gain
				ambitious = miniscule_stress_impact_gain
				just = miniscule_stress_impact_gain
			}
			add_prestige = minor_prestige_loss
			trigger_event = nubia.0146
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -10
			}
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -40
			}
		}
		ai_chance = {
			base = 20
		}
	}

	option = { # Mena will help
		name = nubia.0145.a
		custom_tooltip = nubia.0145.a.tooltip
		scope:marianos = {
			trigger_event = nubia.0147
		}
		trigger_event = nubia.0148
		ai_chance = {
			base = 80
		}
	}

}


# Marianos receives Mena's response - negative
nubia.0146 = {
	type = letter_event
	opening = {
		desc = nubia.0146.opening
	}
	desc = nubia.0146.desc
	sender = scope:mena

	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_character_modifier = {
					modifier = RICE_nubia_marianos_focused_on_other_work
					years = 5
				}
			}
			scope:marianos = {
				stress_impact = {
					diligent = miniscule_stress_impact_gain
					ambitious = miniscule_stress_impact_gain
					just = miniscule_stress_impact_gain
				}
				add_prestige = minor_prestige_loss
				trigger_event = nubia.0146
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = disappointed_opinion
					target = scope:marianos
					opinion = -10
				}
				add_opinion = {
					modifier = angry_opinion
					target = scope:mena
					opinion = -40
				}
			}			
		}		
	}

	# What?
	option = { 
		name = nubia.0146.a
	}

}


# Marianos receives Mena's response - positive
nubia.0147 = {
	type = letter_event
	opening = {
		desc = nubia.0147.opening
	}
	desc = nubia.0147.desc
	sender = scope:mena

	# What?
	option = { 
		name = nubia.0146.a
		custom_tooltip = nubia.0147.a.tooltip
	}

}


# Mena decides how to proceed
nubia.0148 = {
	type = character_event
	title = nubia.0148.t
	desc = nubia.0148.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = scope:mena
		animation = thinking
	}

	lower_left_portrait = scope:teniellasi
	lower_right_portrait = scope:marianos

	option = { # Dedicate normal resources
		name = nubia.0148.a
		stress_impact = {
			diligent = miniscule_stress_impact_gain
			paranoid = miniscule_stress_impact_gain
		}
		duel = {
			skills = { diplomacy martial stewardship intrigue learning }
			value = mediocre_skill_rating
			10 = {
				custom_tooltip = nubia.0148.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.9
				}
				trigger_event = nubia.0149
			}
			10 = {
				custom_tooltip = nubia.0148.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.9
				}
				trigger_event = nubia.0151
			}
		}
	}

	option = { # Dedicate extra resources
		name = nubia.0148.b
		trigger = {
			OR = {
				gold >= 30
				is_ai = no
			}
		}
		remove_short_term_gold = 30
		stress_impact = {
			base = miniscule_stress_impact_gain
			lazy = miniscule_stress_impact_gain
			greedy = miniscule_stress_impact_gain
		}
		duel = {
			skills = { diplomacy martial stewardship intrigue learning }
			value = mediocre_skill_rating
			8 = {
				custom_tooltip = nubia.0148.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.9
				}
				trigger_event = nubia.0149
			}
			12 = {
				custom_tooltip = nubia.0148.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.9
				}
				trigger_event = nubia.0152
			}
		}
	}

}



# Mena fails to catch the slaves
nubia.0149 = {
	type = character_event
	title = nubia.0149.t
	desc = nubia.0149.desc
	theme = martial
	override_background = { reference = RICE_background_nile_private_courtyard }

	right_portrait = {
		character = scope:mena
		animation = sadness
	}

	lower_left_portrait = scope:teniellasi
	lower_right_portrait = scope:marianos


	option = { # Take the blame
		name = nubia.0149.a
		add_prestige = medium_prestige_loss
		add_legitimacy = miniscule_legitimacy_loss
		stress_impact = {
			arrogant = miniscule_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			arbitrary = miniscule_stress_impact_gain
			brave = miniscule_stress_impact_gain
		}
		scope:marianos = {
			stress_impact = {
				diligent = miniscule_stress_impact_gain
				ambitious = miniscule_stress_impact_gain
				just = miniscule_stress_impact_gain
			}
			add_prestige = minor_prestige_loss
			trigger_event = nubia.0150
			add_opinion = {
				modifier = failure_opinion
				target = scope:mena
				opinion = -20
			}
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -10
			}
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -40
			}
		}	
	}

	option = { # Blame subordinates
		name = nubia.0148.b
		stress_impact = {
			humble = miniscule_stress_impact_gain
			just = miniscule_stress_impact_gain
			craven = miniscule_stress_impact_gain
			calm = miniscule_stress_impact_gain
		}
		scope:marianos = {
			stress_impact = {
				diligent = miniscule_stress_impact_gain
				ambitious = miniscule_stress_impact_gain
				just = miniscule_stress_impact_gain
			}
			add_prestige = minor_prestige_loss
			trigger_event = nubia.0151
			add_opinion = {
				modifier = failure_opinion
				target = scope:mena
				opinion = -5
			}
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -10
			}
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -20
			}
		}
		add_character_modifier = {
			modifier = RICE_nubia_blames_subordinates
			years = 10
		}
	}

}




# Mena fails to catch the slaves and blames himself - Marianos takes note
nubia.0150 = {
	type = character_event
	title = nubia.0150.t
	desc = nubia.0150.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = scope:teniellasi
		animation = anger
	}

	right_portrait = {
		character = scope:mena
		animation = shame
	}

	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_prestige = medium_prestige_loss
				add_legitimacy = miniscule_legitimacy_loss
				stress_impact = {
					arrogant = miniscule_stress_impact_gain
					ambitious = miniscule_stress_impact_gain
					arbitrary = miniscule_stress_impact_gain
					brave = miniscule_stress_impact_gain
				}
			}
			scope:marianos = {
				stress_impact = {
					diligent = miniscule_stress_impact_gain
					ambitious = miniscule_stress_impact_gain
					just = miniscule_stress_impact_gain
				}
				add_prestige = minor_prestige_loss
				trigger_event = nubia.0150
				add_opinion = {
					modifier = failure_opinion
					target = scope:mena
					opinion = -20
				}
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = disappointed_opinion
					target = scope:marianos
					opinion = -10
				}
				add_opinion = {
					modifier = angry_opinion
					target = scope:mena
					opinion = -40
				}
			}	
		}
	}

	option = { # Oh well
		name = nubia.0150.a
	}

	option = { # Compensate Teniellasi
		name = nubia.0150.b
		trigger = {
			OR = {
				is_ai = no
				gold >= 50
			}
		}
		remove_short_term_gold = 50
		add_prestige = minor_prestige_gain
		pay_short_term_gold = {
			target = scope:teniellasi
			gold = 50
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = RICE_opinion_compensated_for_lost_slaves
				target = scope:marianos
			}
		}	
	}

}


# Mena fails to catch the slaves and blames subordinates - Marianos takes note
nubia.0151 = {
	type = character_event
	title = nubia.0151.t
	desc = nubia.0151.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_private_courtyard }

	left_portrait = {
		character = scope:teniellasi
		animation = anger
	}

	right_portrait = {
		character = scope:mena
		animation = shame
	}

	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_character_modifier = {
					modifier = RICE_nubia_blames_subordinates
					years = 10
				}
				stress_impact = {
					humble = miniscule_stress_impact_gain
					just = miniscule_stress_impact_gain
					craven = miniscule_stress_impact_gain
					calm = miniscule_stress_impact_gain
				}
			}
			scope:marianos = {
				stress_impact = {
					diligent = miniscule_stress_impact_gain
					ambitious = miniscule_stress_impact_gain
					just = miniscule_stress_impact_gain
				}
				add_prestige = minor_prestige_loss
				trigger_event = nubia.0151
				add_opinion = {
					modifier = failure_opinion
					target = scope:mena
					opinion = -5
				}
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = disappointed_opinion
					target = scope:marianos
					opinion = -10
				}
				add_opinion = {
					modifier = angry_opinion
					target = scope:mena
					opinion = -20
				}
			}
		}
	}

	option = { # Oh well
		name = nubia.0151.a
	}

	option = { # Compensate Teniellasi
		name = nubia.0151.b
		trigger = {
			OR = {
				is_ai = no
				gold >= 50
			}
		}
		remove_short_term_gold = 50
		add_prestige = minor_prestige_gain
		pay_short_term_gold = {
			target = scope:teniellasi
			gold = 50
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = RICE_opinion_compensated_for_lost_slaves
				target = scope:marianos
			}
		}	
	}

}


# Mena catches the slaves... let them go, buy their freedom, or capture them?
nubia.0152 = {
	type = character_event
	title = nubia.0152.t
	desc = nubia.0152.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_valley }

	left_portrait = {
		character = scope:slave_1
		animation = delirium
		camera = camera_event_very_left
	}

	right_portrait = {
		character = scope:slave_2
		animation = beg
		camera = camera_event_very_left
	}

	immediate = {
		random_list = {
			15 = {
				random_county_in_region = {
					region = world_africa_east
					save_scope_as = county
				}
			}
			5 = {
				random_county_in_region = {
					region = RICE_greater_darfur
					save_scope_as = county
				}
			}
		}
		random_list = {
			20 = {
				scope:county.culture = {
					save_scope_as = culture
				}
				scope:county.faith = {
					save_scope_as = faith
				}
			}
			5 = {
				faith:dinka_pagan = {
					save_scope_as = faith
				}
				culture:luo = {
					save_scope_as = culture
				}
			}
			5 = {
				faith:south_omotic_pagan = {
					save_scope_as = faith
				}
				random_list = {
					10 = {
						culture:oropom = {
							save_scope_as = culture
						}
					}
					10 = {
						culture:aari = {
							save_scope_as = culture
						}
					}
				}
			}
			5 = {
				faith:turkana_pagan = {
					save_scope_as = faith
				}
				random_list = {
					10 = {
						culture:sirikwa = {
							save_scope_as = culture
						}
					}
					10 = {
						culture:kalenjin = {
							save_scope_as = culture
						}					
					}
					10 = {
						culture:bari = {
							save_scope_as = culture
						}				
					}
					10 = {
						culture:maasai = {
							save_scope_as = culture
						}					
					}
					10 = {
						culture:ateker = {
							save_scope_as = culture
						}					
					}
				}
			}
		}	
		create_character = {
			location = root.location
			template = RICE_slave_generic_template
			save_scope_as = slave_1
			culture = scope:culture
			faith = scope:faith
		}
		create_character = {
			location = root.location
			template = RICE_slave_generic_template
			save_scope_as = slave_2
			culture = scope:culture
			faith = scope:faith
		}
	}

	option = { # Let them go
		name = nubia.0152.a
		add_prestige = medium_prestige_loss
		add_legitimacy = miniscule_legitimacy_loss
		scope:marianos = {
			stress_impact = {
				diligent = miniscule_stress_impact_gain
				ambitious = miniscule_stress_impact_gain
				just = miniscule_stress_impact_gain
			}
			add_prestige = minor_prestige_loss
			trigger_event = nubia.0153
			add_opinion = {
				modifier = failure_opinion
				target = scope:mena
				opinion = -20
			}
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = disappointed_opinion
				target = scope:marianos
				opinion = -10
			}
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -40
			}
		}
		stress_impact = {
			callous = minor_stress_impact_gain
			just = minor_stress_impact_gain
			wrathful = minor_stress_impact_gain
			diligent = minor_stress_impact_gain
		}
		scope:slave_1 = {
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 100
			}
			add_character_modifier = {
				modifier = former_slave_npc_modifier
			}
		}
		scope:slave_2 = {
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 100
			}
			add_character_modifier = {
				modifier = former_slave_npc_modifier
			}
		}
		hidden_effect = {
			scope:slave_1 = {
				death = {
					death_reason = death_vanished
				}
			}
			scope:slave_2 = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				has_trait = compassionate
				add = 5
			}
			modifier = {
				has_trait = forgiving
				add = 1
			}
			modifier = {
				has_trait = callous
				add = -4
			}
			modifier = {
				has_trait = just
				add = -4
			}
			modifier = {
				has_trait = wrathful
				add = -2
			}
			modifier = {
				has_trait = diligent
				add = -2
			}
		}
	}

	option = { # Purchase their freedom
		name = nubia.0152.b
		trigger = {
			OR = {
				gold >= 100
				is_ai = no
			}
		}
		if = {
			limit = {
				scope:teniellasi = {
					is_alive = yes
				}
			}
			pay_short_term_gold = {
				target = scope:teniellasi
				gold = 100
			}
		}
		else = {
			remove_short_term_gold = 100
		}
		scope:marianos = {
			RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			trigger_event = nubia.0154
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = annoyed_opinion
				target = scope:mena
				opinion = -10
			}
		}
		add_courtier = scope:slave_1
		scope:slave_1 = {
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 100
			}
			add_character_modifier = {
				modifier = former_slave_npc_modifier
			}
		}
		add_courtier = scope:slave_2
		scope:slave_2 = {
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 100
			}
			add_character_modifier = {
				modifier = former_slave_npc_modifier
			}
		}
		if = {
			limit = {
				can_add_hook = {
					target = scope:slave_1
					type = loyalty_hook
				}
			}
			add_hook = {
				target = scope:slave_1
				type = loyalty_hook
			}
		}
		if = {
			limit = {
				can_add_hook = {
					target = scope:slave_2
					type = loyalty_hook
				}
			}
			add_hook = {
				target = scope:slave_2
				type = loyalty_hook
			}
		}
		stress_impact = {
			callous = minor_stress_impact_gain
			greedy = minor_stress_impact_gain
			lazy = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
			paranoid = minor_stress_impact_gain
		}

		ai_chance = {
			factor = 10
			modifier = {
				has_trait = compassionate
				add = 5
			}
			modifier = {
				has_trait = forgiving
				add = 2
			}
			modifier = {
				has_trait = callous
				add = -4
			}
			modifier = {
				has_trait = paranoid
				add = -3
			}
			modifier = {
				has_trait = arrogant
				add = -3
			}
			modifier = {
				has_trait = diligent
				add = -2
			}
		}
	}

	option = { # Return them
		name = nubia.0152.c
		add_prestige = medium_prestige_gain
		add_legitimacy = miniscule_legitimacy_gain
		RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
		scope:marianos = {
			RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			add_prestige = medium_prestige_gain
			trigger_event = nubia.0155
			add_opinion = {
				modifier = pleased_opinion
				target = scope:mena
				opinion = 25
			}
		}
		scope:teniellasi = {
			add_opinion = {
				modifier = pleased_opinion
				target = scope:marianos
				opinion = 20
			}
			add_opinion = {
				modifier = grateful_opinion
				target = scope:mena
				opinion = 20
			}
		}
		scope:slave_1 = {
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -100
			}
		}
		scope:slave_2 = {
			add_opinion = {
				modifier = angry_opinion
				target = scope:mena
				opinion = -100
			}
		}
		hidden_effect = {
			scope:slave_1 = {
				death = {
					death_reason = death_vanished
				}
			}
			scope:slave_2 = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		stress_impact = {
			compassionate = minor_stress_impact_gain
		}

		ai_chance = {
			factor = 25
			modifier = {
				has_trait = diligent
				add = 3
			}
			modifier = {
				has_trait = just
				add = 2
			}
			modifier = {
				has_trait = ambitious
				add = 2
			}
			modifier = {
				has_trait = compassionate
				add = 2
			}
		}
	}

}




# Mena lets the slaves go - Marianos learns what happened
nubia.0153 = {
	type = character_event
	title = nubia.0153.t
	desc = nubia.0153.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:marianos
		animation = worry
	}
	
	right_portrait = {
		character = scope:teniellasi
		animation = anger
	}

	lower_right_portrait = scope:mena
	
	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_prestige = medium_prestige_loss
				add_legitimacy = miniscule_legitimacy_loss
				stress_impact = {
					callous = minor_stress_impact_gain
					just = minor_stress_impact_gain
					wrathful = minor_stress_impact_gain
					diligent = minor_stress_impact_gain
				}	
			}
			scope:marianos = {
				stress_impact = {
					diligent = miniscule_stress_impact_gain
					ambitious = miniscule_stress_impact_gain
					just = miniscule_stress_impact_gain
				}
				add_prestige = minor_prestige_loss
				add_opinion = {
					modifier = failure_opinion
					target = scope:mena
					opinion = -20
				}
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = disappointed_opinion
					target = scope:marianos
					opinion = -10
				}
				add_opinion = {
					modifier = angry_opinion
					target = scope:mena
					opinion = -40
				}
			}	
		}		
	}

	option = { # Ok
		name = nubia.0153.a
	}
}

# Mena buys the slaves' freedom - Marianos learns what happened
nubia.0154 = {
	type = character_event
	title = nubia.0154.t
	desc = nubia.0154.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:marianos
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:teniellasi
		animation = personality_irrational
	}

	lower_right_portrait = scope:mena
	
	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_courtier = scope:slave_1
				add_courtier = scope:slave_2
				stress_impact = {
					callous = minor_stress_impact_gain
					greedy = minor_stress_impact_gain
					lazy = minor_stress_impact_gain
					arrogant = minor_stress_impact_gain
					paranoid = minor_stress_impact_gain
				}
				if = {
					limit = {
						scope:teniellasi = {
							is_alive = yes
						}
					}
					pay_short_term_gold = {
						target = scope:teniellasi
						gold = 100
					}
				}
				else = {
					remove_short_term_gold = 100
				}
			}
			scope:marianos = {
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = annoyed_opinion
					target = scope:mena
					opinion = -10
				}
			}
			scope:slave_1 = {
				add_opinion = {
					modifier = grateful_opinion
					target = scope:mena
					opinion = 100
				}
				add_character_modifier = {
					modifier = former_slave_npc_modifier
				}
			}
			scope:slave_2 = {
				add_opinion = {
					modifier = grateful_opinion
					target = scope:mena
					opinion = 100
				}
				add_character_modifier = {
					modifier = former_slave_npc_modifier
				}
			}	
		}		
	}

	option = { # Ok
		name = nubia.0154.a
	}
}

# Mena returns the slaves - Marianos learns what happened
nubia.0155 = {
	type = character_event
	title = nubia.0155.t
	desc = nubia.0155.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:marianos
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:teniellasi
		animation = personality_content
	}

	lower_right_portrait = scope:mena
	
	immediate = {
		show_as_tooltip = {
			scope:mena = {
				add_prestige = medium_prestige_gain
				add_legitimacy = miniscule_legitimacy_gain
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			}
			scope:marianos = {
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				add_prestige = medium_prestige_gain
				trigger_event = nubia.0155
				add_opinion = {
					modifier = pleased_opinion
					target = scope:mena
					opinion = 25
				}
			}
			scope:teniellasi = {
				add_opinion = {
					modifier = pleased_opinion
					target = scope:marianos
					opinion = 20
				}
				add_opinion = {
					modifier = grateful_opinion
					target = scope:mena
					opinion = 20
				}
			}
		}		
	}

	option = { # Ok
		name = nubia.0154.a
	}
}



######################################################################################
# 
# BAQT FRONTIER ADMINISTRATION DECISION
# 
# nubia.0160-nubia.0179
# 
######################################################################################


# Diplomacy: Correspond with Counterpart
# Decide what to send to the other party
nubia.0160 = {
	type = character_event
	title = nubia.0160.t
	desc = nubia.0160.desc
	theme = diplomacy_foreign_affairs_focus
	# override_background = {
	# 	trigger = { has_title = title:d_nobatia }
	# 	reference = RICE_background_nile_private_courtyard
	# }
	# override_background = {
	# 	trigger = { NOT = { has_title = title:d_nobatia } }
	# 	reference = RICE_background_nile_private_courtyard
	# }
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	left_portrait = {
		character = scope:giver
		animation = chancellor
	}

	lower_center_portrait = scope:receiver

	immediate = {
		save_scope_as = giver
		if = {
			limit = {				
				has_title = title:d_nobatia
				exists = title:c_aswan.holder
			}
			title:c_aswan.holder = {
				save_scope_as = receiver
			}
		}
		else_if = {
			limit = {				
				has_title = title:c_aswan
				exists = title:d_nobatia.holder
			}
			title:d_nobatia.holder = {
				save_scope_as = receiver
			}
		}
	}

	# Ordinary message
	option = {
		name = nubia.0160.a
	}

	# Send a gift
	# Amount depends on the title tier of the other party
	option = {
		name = nubia.0160.b
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_frontier_gift_amount
			}
		}
		remove_short_term_gold = RICE_egypt_nubia_frontier_gift_amount
		show_as_tooltip = {
			scope:receiver = {
				add_gold = RICE_egypt_nubia_frontier_gift_amount_receiver
			}
		}
		add_character_flag = {
			flag = RICE_nubia_correspondence_give_gift
			days = 1
		}
		custom_tooltip = nubia.0160.b.tooltip
	}

	after = {
		custom_tooltip = RICE_baqt_frontier_correpsondence_effect_1_tt
		scope:receiver = {
			trigger_event = nubia.0161
		}
	}

}



# Read the letter
nubia.0161 = {
	type = character_event
	title = nubia.0161.t
	desc = nubia.0161.desc
	theme = diplomacy_foreign_affairs_focus
	# override_background = {
	# 	trigger = { has_title = title:d_nobatia }
	# 	reference = RICE_background_nile_private_courtyard
	# }
	# override_background = {
	# 	trigger = { NOT = { has_title = title:d_nobatia } }
	# 	reference = RICE_background_nile_private_courtyard
	# }
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	left_portrait = {
		character = scope:receiver
		animation = chancellor
	}

	lower_center_portrait = scope:giver

	# Send positive message back
	option = {
		name = nubia.0161.a
		custom_tooltip = nubia.0161.a.tooltip
		ai_chance = {
			base = 50
			modifier = {
				add = 50
				scope:giver = {
					has_character_flag = RICE_nubia_correspondence_give_gift
				}
			}
			modifier = {
				add = 10
				has_trait = gregarious
			}
			modifier = {
				add = 10
				has_trait = diligent
			}
			modifier = {
				add = 10
				has_trait = trusting
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = gregarious
				}
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = compassionate
				}
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = generous
				}
			}
			modifier = {
				add = 25
				scope:giver = {
					diplomacy >= high_skill_rating
				}
			}
			modifier = {
				add = 25
				scope:giver = {
					diplomacy >= medium_skill_rating
				}
			}
		}
		scope:giver = {
			RICE_baqt_frontier_decision_trait_gain_tooltip_effect = yes
			custom_tooltip = RICE_baqt_frontier_correpsondence_success_1_tt
			custom_tooltip = RICE_baqt_frontier_correpsondence_success_2_tt
			custom_tooltip = RICE_baqt_frontier_correpsondence_success_3_tt
			trigger_event = nubia.0162
		}
	}

	# Send positive message with a gift

	# Send negative message back
	option = {
		name = nubia.0161.b
		custom_tooltip = nubia.0161.a.tooltip
		ai_chance = {
			base = 50
			modifier = {
				add = 10
				has_trait = arbitrary
			}
			modifier = {
				add = 10
				has_trait = paranoid
			}
			modifier = {
				add = 10
				has_trait = eccentric
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = shy
				}
			}
			modifier = {
				add = 10
				scope:giver = {
					OR = {
						has_trait = sadistic
						has_trait = callous
					}
				}
			}
			modifier = {
				add = 10
				scope:giver = {
					has_trait = arbitrary
				}
			}
			modifier = {
				add = 25
				scope:giver = {
					diplomacy <= mediocre_skill_rating
				}
			}
			modifier = {
				add = 25
				scope:giver = {
					diplomacy <= low_skill_rating
				}
			}
		}
		scope:giver = {
			RICE_baqt_frontier_decision_trait_gain_tooltip_effect = yes
			custom_tooltip = RICE_baqt_frontier_correpsondence_failure_1_tt
			custom_tooltip = RICE_baqt_frontier_correpsondence_failure_2_tt
			custom_tooltip = RICE_baqt_frontier_correpsondence_failure_3_tt
			trigger_event = nubia.0163
		}
	}

	after = {
		RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
		if = {
			limit = {
				scope:giver = {
					has_character_flag = RICE_nubia_correspondence_give_gift
				}
			}
			add_gold = RICE_egypt_nubia_frontier_gift_amount_receiver
		}
	}

}

# The receiver likes the correspondence
nubia.0162 = {
	type = character_event
	title = nubia.0162.t
	desc = nubia.0162.desc
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:receiver
		animation = personality_compassionate
	}
	
	right_portrait = {
		character = scope:giver
		animation = personality_content
	}

	immediate = {
		scope:receiver = {
			show_as_tooltip = {
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			}
		}
	}

	# Determine how much success
	option = {
		name = nubia.0162.a
		duel = {
			skill = diplomacy
			value = mediocre_skill_rating
			10 = {
				custom_tooltip = nubia.0162.a.small_success
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.9
				}
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = ROOT
					title = nubia.0162.a.small_success
					add_prestige = minor_prestige_gain
					RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
					scope:giver = {
						add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_good
							target = scope:receiver
							opinion = 5
						}
						reverse_add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_good
							target = scope:receiver
							opinion = 5
						}
					}
				}	
			}
			10 = {
				custom_tooltip = nubia.0162.a.large_success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.9
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = ROOT
					title = nubia.0162.a.large_success
					add_prestige = minor_prestige_gain
					RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
					scope:giver = {
						add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_good
							target = scope:receiver
							opinion = 10
						}
						reverse_add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_good
							target = scope:receiver
							opinion = 10
						}
						progress_towards_friend_effect = {
							CHARACTER = scope:receiver
							OPINION = default_friend_opinion
							REASON = RICE_nubia_egypt_border_governors_reason_good
						}
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_correspondence_give_gift
			}
			remove_character_flag = RICE_nubia_correspondence_give_gift
		}
	}

}

# The receiver doesn't like the correspondence
nubia.0163 = {
	type = character_event
	title = nubia.0163.t
	desc = nubia.0163.desc
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_background_nile_valley }
	
	left_portrait = {
		character = scope:receiver
		animation = sadness
	}
	
	right_portrait = {
		character = scope:giver
		animation = disapproval
	}

	immediate = {
		scope:receiver = {
			show_as_tooltip = {
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
			}
		}
	}

	# Determine how much failure
	option = {
		name = nubia.0163.a
		duel = {
			skill = diplomacy
			value = mediocre_skill_rating
			10 = {
				custom_tooltip = nubia.0163.a.large_failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.9
				}
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = ROOT
					title = nubia.0163.a.large_failure
					add_prestige = medium_prestige_loss
					RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
					scope:giver = {
						add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_bad
							target = scope:receiver
							opinion = -10
						}
						reverse_add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_bad
							target = scope:receiver
							opinion = -10
						}
						random = {
							chance = 25
							progress_towards_rival_effect = {
								CHARACTER = scope:receiver
								OPINION = default_rival_opinion
								REASON = RICE_nubia_egypt_border_governors_reason_bad
							}
						}
					}
				}	
			}
			10 = {
				custom_tooltip = nubia.0163.a.small_failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.9
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = ROOT
					title = nubia.0163.a.small_failure
					add_prestige = minor_prestige_loss
					RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
					scope:giver = {
						add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_bad
							target = scope:receiver
							opinion = -5
						}
						reverse_add_opinion = {
							modifier = RICE_opinion_baqt_correspondence_bad
							target = scope:receiver
							opinion = -5
						}
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_correspondence_give_gift
			}
			remove_character_flag = RICE_nubia_correspondence_give_gift
		}
	}

}


# Fortify borders - spend extra money?
nubia.0164 = {
	type = character_event
	title = nubia.0164.t
	desc = nubia.0164.desc
	theme = martial
	override_background = { reference = RICE_background_nile_travel }
	
	right_portrait = {
		character = root
		animation = survey
	}
	
	option = { # Ok
		name = nubia.0164.a
		#hidden_effect = {
			duel = {
				skills = { martial }
				value = mediocre_skill_rating
				# Success.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					trigger_event = nubia.0165
				}
				# Failure.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					trigger_event = nubia.0166
				}
			}
		#}
	}
	
	option = { # Ok
		name = nubia.0164.b	
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_boost_cost_amount
			}
		}
		remove_short_term_gold = RICE_egypt_nubia_boost_cost_amount
		#hidden_effect = {
			duel = {
				skills = { martial }
				value = mediocre_skill_rating
				# Success.
				70 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					trigger_event = nubia.0165
				}
				# Failure.
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					trigger_event = nubia.0166
				}
			}
		#}
	}

}

# Fortify borders - success
nubia.0165 = {
	type = character_event
	title = nubia.0165.t
	desc = {
		desc = nubia.0165.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_fortify_major_success
				}
				desc = nubia.0165.desc.major
			}
			desc = nubia.0165.desc.minor
		}
	}
	theme = martial
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	right_portrait = {
		character = root
		animation = war_over_win
	}

	immediate = {
		# Determine how much success
		duel = {
			skills = { martial }
			value = mediocre_skill_rating
			# Great Success.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_fortify_major_success
					days = 1
				}
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_county_control = minor_county_control_gain
					add_county_modifier = {
						modifier = RICE_baqt_greatly_improved_defenses
						years = 10
					}	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_county_control = minor_county_control_gain
				# 	add_county_modifier = {
				# 		modifier = RICE_baqt_greatly_improved_defenses
				# 		years = 10
				# 	}	
				# }
			}
			# Minor Success
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_county_control = miniscule_county_control_gain
					add_county_modifier = {
						modifier = RICE_baqt_greatly_improved_defenses
						years = 10
					}	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_county_control = miniscule_county_control_gain
				# 	add_county_modifier = {
				# 		modifier = RICE_baqt_greatly_improved_defenses
				# 		years = 10
				# 	}	
				# }
			}
		}
	}
	
	option = { # Ok
		name = nubia.0165.a
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_fortify_major_success
			}
			remove_character_flag = RICE_nubia_fortify_major_success
		}
	}

}

# Fortify borders - mixed results
nubia.0166 = {
	type = character_event
	title = nubia.0166.t
	desc = {
		desc = nubia.0166.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_fortify_major_failure
				}
				desc = nubia.0166.desc.major
			}
			desc = nubia.0166.desc.minor
		}
	}
	theme = martial
	override_background = { reference = RICE_background_nile_private_courtyard }
	
	right_portrait = {
		character = root
		animation = war_over_win
	}

	immediate = {
		# Determine how much success
		duel = {
			skills = { martial }
			value = mediocre_skill_rating
			# Minor failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_county_control = miniscule_county_control_loss
					add_county_modifier = {
						modifier = RICE_baqt_mixed_result_defenses
						years = 10
					}	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_county_control = miniscule_county_control_loss
				# 	add_county_modifier = {
				# 		modifier = RICE_baqt_mixed_result_defenses
				# 		years = 10
				# 	}	
				# }
			}
			# Major failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_fortify_major_failure
					days = 1
				}
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_county_control = miniscule_county_control_loss
					add_county_modifier = {
						modifier = RICE_baqt_mixed_result_defenses
						years = 10
					}	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_county_control = minor_county_control_loss
				# 	add_county_modifier = {
				# 		modifier = RICE_baqt_mixed_result_defenses
				# 		years = 10
				# 	}	
				# }
			}
		}
	}

	option = { # Ok
		name = nubia.0166.a
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_fortify_major_failure
			}
			remove_character_flag = RICE_nubia_fortify_major_failure
		}
	}

}





# Oversee land sales - spend extra money?
nubia.0167 = {
	type = character_event
	title = nubia.0167.t
	desc = nubia.0167.desc
	theme = stewardship
	override_background = { reference = council_chamber }
	
	left_portrait = {
		character = root
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:witness
		animation = thinking
	}
	
	immediate = {
		every_courtier = {
			limit = {
				is_available_ai_adult = yes
			}
			add_to_list = candidate_characters
		}
		every_vassal = {
			limit = {
				is_available_ai_adult = yes
			}
			add_to_list = candidate_characters
		}
		random_in_list = {
			list = candidate_characters
			save_scope_as = witness
		}
	}
	
	option = { # Ok
		name = nubia.0167.a
		#hidden_effect = {
			duel = {
				skills = { stewardship }
				value = mediocre_skill_rating
				# Success.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					trigger_event = nubia.0168
				}
				# Failure.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					trigger_event = nubia.0169
				}
			}
		#}
	}
	
	option = { # Ok
		name = nubia.0167.b		
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_boost_cost_amount
			}
		}
		remove_short_term_gold = RICE_egypt_nubia_boost_cost_amount
		#hidden_effect = {
			duel = {
				skills = { stewardship }
				value = mediocre_skill_rating
				# Success.
				70 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					trigger_event = nubia.0168
				}
				# Failure.
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					trigger_event = nubia.0169
				}
			}
		#}
	}

}

# Oversee land sales - success
nubia.0168 = {
	type = character_event
	title = nubia.0168.t
	desc = {
		desc = nubia.0168.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_land_sale_major_success
				}
				desc = nubia.0168.desc.major
			}
			desc = nubia.0168.desc.minor
		}
	}
	theme = stewardship
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:witness
		animation = happiness
	}

	immediate = {
		# Determine how much success
		duel = {
			skills = { stewardship }
			value = mediocre_skill_rating
			# Great Success.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_land_sale_major_success
					days = 1
				}
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_development_progress_with_overflow = minor_development_progress_gain	
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_development_progress_with_overflow = minor_development_progress_gain	
				# }
				scope:witness = {
					add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_good
						target = root
						opinion = 10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_good
						target = root
						opinion = 10
					}
					progress_towards_friend_effect = {
						CHARACTER = root
						OPINION = default_friend_opinion
						REASON = RICE_nubia_egypt_land_sales_reason_good
					}
				}
			}
			# Minor Success
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_development_progress_with_overflow = minimal_development_progress_gain
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_development_progress_with_overflow = minimal_development_progress_gain
				# }
				scope:witness = {
					add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_good
						target = root
						opinion = 5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_good
						target = root
						opinion = 5
					}
					random = {
						chance = 25
						progress_towards_friend_effect = {
							CHARACTER = root
							OPINION = default_friend_opinion
							REASON = RICE_nubia_egypt_land_sales_reason_good
						}
					}
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0168.a
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_land_sale_major_success
			}
			remove_character_flag = RICE_nubia_land_sale_major_success
		}
	}

}

# Oversee land sales - mixed results
nubia.0169 = {
	type = character_event
	title = nubia.0169.t
	desc = {
		desc = nubia.0169.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_land_sale_major_failure
				}
				desc = nubia.0169.desc.major
			}
			desc = nubia.0169.desc.minor
		}
	}
	theme = stewardship
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = chancellor
	}
	
	right_portrait = {
		character = scope:witness
		animation = disapproval
	}

	immediate = {
		# Determine how much success
		duel = {
			skills = { stewardship }
			value = mediocre_skill_rating
			# Minor failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_development_progress_with_overflow = minimal_development_progress_loss
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_development_progress_with_overflow = minimal_development_progress_loss
				# }
				scope:witness = {
					add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_bad
						target = root
						opinion = -5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_bad
						target = root
						opinion = -5
					}
					random = {
						chance = 10
						progress_towards_rival_effect = {
							CHARACTER = root
							OPINION = default_rival_opinion
							REASON = RICE_nubia_egypt_land_sales_reason_good
						}
					}
				}
			}
			# Major failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_land_sale_major_failure
					days = 1
				}
				every_realm_county = {
					limit = {
						title_province = {
							geographical_region = RICE_egypt_and_nubia_frontier
						}						
					}
					custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
					change_development_progress_with_overflow = minor_development_progress_gain
				}
				# For some reason this doesn't work
				# every_county_in_region = {
				# 	region = RICE_egypt_and_nubia_frontier
				# 	limit = { holder.top_liege = root }
				# 	custom = RICE_every_county_you_completely_control_in_egypt_nubia_frontier
				# 	change_development_progress_with_overflow = minor_development_progress_gain	
				# }
				scope:witness = {
					add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_bad
						target = root
						opinion = -10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_land_sales_bad
						target = root
						opinion = -10
					}
					random = {
						chance = 25
						progress_towards_rival_effect = {
							CHARACTER = root
							OPINION = default_rival_opinion
							REASON = RICE_nubia_egypt_land_sales_reason_good
						}
					}
				}
			}
		}
	}

	option = { # Ok
		name = nubia.0169.a
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_land_sale_major_failure
			}
			remove_character_flag = RICE_nubia_land_sale_major_failure
		}
	}

}




# Scrutinize Travelers - spend extra money?
nubia.0170 = {
	type = character_event
	title = nubia.0170.t
	desc = nubia.0170.desc
	theme = intrigue
	override_background = { reference = RICE_background_nile_travel }
	
	right_portrait = {
		character = root
		animation = debating
	}
	
	# right_portrait = {
	# 	character = scope:neighbor
	# 	animation = thinking
	# }

	lower_right_portrait = scope:counterpart
	
	immediate = {
		save_scope_as = scrutinizer
		if = {
			limit = {				
				has_title = title:d_nobatia
				exists = title:c_aswan.holder
			}
			title:c_aswan.holder = {
				save_scope_as = counterpart
			}
		}
		else_if = {
			limit = {				
				has_title = title:c_aswan
				exists = title:d_nobatia.holder
			}
			title:d_nobatia.holder = {
				save_scope_as = counterpart
			}
		}
	}
	
	option = { # Ok
		name = nubia.0170.a
		#hidden_effect = {
			duel = {
				skills = { intrigue }
				value = mediocre_skill_rating
				# Success.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					trigger_event = nubia.0171
				}
				# Failure.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					trigger_event = nubia.0172
				}
			}
		#}
	}
	
	option = { # Ok
		name = nubia.0170.b		
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_boost_cost_amount
			}
		}
		remove_short_term_gold = RICE_egypt_nubia_boost_cost_amount
		#hidden_effect = {
			duel = {
				skills = { intrigue }
				value = mediocre_skill_rating
				# Success.
				70 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					trigger_event = nubia.0171
				}
				# Failure.
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					trigger_event = nubia.0172
				}
			}
		#}
	}

}


# Scrutinize Travelers - success
nubia.0171 = {
	type = character_event
	title = nubia.0171.t
	desc = {
		desc = nubia.0171.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_scrutinize_travelers_major_success
				}
				desc = nubia.0171.desc.major
			}
			desc = nubia.0171.desc.minor
		}
	}
	theme = intrigue
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = personality_callous
	}
	
	right_portrait = {
		character = scope:counterpart
		animation = personality_dishonorable
	}

	immediate = {
		# Determine how much success
		duel = {
			skills = { intrigue }
			value = mediocre_skill_rating
			# Great Success.
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_scrutinize_travelers_major_success
					days = 1
				}
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_major_5
							years = 10
						}
					}
				}
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = root
						opinion = 10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = root
						opinion = 10
					}
				}
			}
			# Minor Success
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_positive_5
							years = 10
						}
					}
				}
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = root
						opinion = 5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = root
						opinion = 5
					}
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0171.a
		# Notify counterpart
		scope:counterpart = {
			trigger_event = nubia.0173
		}
	}

}





# Scrutinize Travelers - failure
nubia.0172 = {
	type = character_event
	title = nubia.0172.t
	desc = {
		desc = nubia.0172.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_nubia_scrutinize_travelers_major_failure
				}
				desc = nubia.0172.desc.major
			}
			desc = nubia.0172.desc.minor
		}
	}
	theme = stewardship
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = shame
	}
	
	right_portrait = {
		character = scope:counterpart
		animation = disapproval
	}

	immediate = {
		# Determine how much failure
		duel = {
			skills = { intrigue }
			value = mediocre_skill_rating
			# Minor failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.5
					min = -49
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 25
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 25
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 50
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 50
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 75
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 75
							}
						}
					}
				}
				modifier = {
					add = 2
					OR = {
						AND = {
							has_trait = RICE_lord_of_the_mountain								
							has_trait_xp = {
								trait = RICE_lord_of_the_mountain
								value >= 100
							}
						}
						AND = {
							has_trait = RICE_governor_of_aswan								
							has_trait_xp = {
								trait = RICE_governor_of_aswan
								value >= 100
							}
						}
					}
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_5
							years = 10
						}
					}
				}				
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = root
						opinion = -5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = root
						opinion = -5
					}
				}
			}
			# Major failure
			50 = {
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.5
					min = -49
				}
				RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
				add_character_flag = {
					flag = RICE_nubia_scrutinize_travelers_major_failure
					days = 1
				}
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_1
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_2
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_3
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_4
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_baqt_border_intelligence_negative_major_5
							years = 10
						}
					}
				}				
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = root
						opinion = -10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = root
						opinion = -10
					}
				}
			}
		}
	}

	option = { # Ok
		name = nubia.0172.a
		# Notify counterpart
		scope:counterpart = {
			trigger_event = nubia.0174
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_nubia_scrutinize_travelers_major_failure
			}
			remove_character_flag = RICE_nubia_scrutinize_travelers_major_failure
		}
	}

}


# Counterpart is notified about success
nubia.0173 = {
	type = letter_event
	opening = {
		desc = nubia.0173.opening
	}
	desc = nubia.0173.desc
	sender = scope:scrutinizer

	immediate = {
		show_as_tooltip = {
			if = {
				limit = {
					scope:scrutinizer = {
						has_character_flag = RICE_nubia_scrutinize_travelers_major_success
					}
				}
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = scope:scrutinizer
						opinion = 10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = scope:scrutinizer
						opinion = 10
					}
				}
			}
			else = {
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = scope:scrutinizer
						opinion = 5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_caught_fugitives
						target = scope:scrutinizer
						opinion = 5
					}
				}
			}
			if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_1
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_1
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_2
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_2
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_3
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_3
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_4
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_4
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_5
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_5
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_1
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_1
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_2
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_2
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_3
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_3
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_4
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_4
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_positive_major_5
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_positive_major_5
						years = 10
					}
				}	
			}
		}
	}

	option = {
		name = nubia.0173.a
	}

	after = {
		if = {
			limit = {
				scope:scrutinizer = {
					has_character_flag = RICE_nubia_scrutinize_travelers_major_success
				}					
			}
			scope:scrutinizer = {
				remove_character_flag = RICE_nubia_scrutinize_travelers_major_success
			}	
		}
	}
	
}



# Counterpart is notified about failure
nubia.0174 = {
	type = letter_event
	opening = {
		desc = nubia.0174.opening
	}
	desc = nubia.0174.desc
	sender = scope:scrutinizer

	immediate = {
		show_as_tooltip = {
			if = {
				limit = {
					scope:scrutinizer = {
						has_character_flag = RICE_nubia_scrutinize_travelers_major_failure
					}
				}
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = scope:scrutinizer
						opinion = -10
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = scope:scrutinizer
						opinion = -10
					}
				}
			}
			else = {
				scope:counterpart = {
					add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = scope:scrutinizer
						opinion = -5
					}
					reverse_add_opinion = {
						modifier = RICE_opinion_baqt_did_not_catch_fugitives
						target = scope:scrutinizer
						opinion = -5
					}
				}
			}
			if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_1
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_1
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_2
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_2
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_3
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_3
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_4
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_4
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_5
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_5
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_1
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_1
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_2
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_2
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_3
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_3
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_4
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_4
						years = 10
					}
				}	
			}
			else_if = {
				limit = {
					scope:scrutinizer = {
						has_character_modifier = RICE_baqt_border_intelligence_negative_major_5
					}					
				}
				scope:scrutinizer = {
					add_character_modifier = {
						modifier = RICE_baqt_border_intelligence_negative_major_5
						years = 10
					}
				}	
			}
		}
	}

	option = {
		name = nubia.0174.a
	}

	after = {
		if = {
			limit = {
				scope:scrutinizer = {
					has_character_flag = RICE_nubia_scrutinize_travelers_major_failure
				}					
			}
			scope:scrutinizer = {
				remove_character_flag = RICE_nubia_scrutinize_travelers_major_failure
			}	
		}
	}
	
}




# Report to Superiors - spend extra money?
nubia.0175 = {
	type = character_event
	title = nubia.0175.t
	desc = nubia.0175.desc
	theme = learning
	override_background = { reference = council_chamber }
	
	right_portrait = {
		character = root
		animation = writing
	}

	lower_right_portrait = scope:liege
	
	immediate = {
		save_scope_as = reporter
		liege = {
			save_scope_as = liege
		}
	}
	
	option = { # Ok
		name = nubia.0175.a
		#hidden_effect = {
			duel = {
				skills = { learning }
				value = mediocre_skill_rating
				# Success.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					scope:liege = {
						trigger_event = nubia.0176
					}
				}
				# Failure.
				50 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					scope:liege = {
						trigger_event = nubia.0177
					}
				}
			}
		#}
	}
	
	option = { # Ok
		name = nubia.0175.b		
		trigger = {
			OR = {
				is_ai = no
				gold >= RICE_egypt_nubia_boost_cost_amount
			}
		}
		remove_short_term_gold = RICE_egypt_nubia_boost_cost_amount
		#hidden_effect = {
			duel = {
				skills = { learning }
				value = mediocre_skill_rating
				# Success.
				70 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = 1.5
						min = -49
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 25
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 25
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 50
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 50
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 75
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 75
								}
							}
						}
					}
					modifier = {
						add = 2
						OR = {
							AND = {
								has_trait = RICE_lord_of_the_mountain								
								has_trait_xp = {
									trait = RICE_lord_of_the_mountain
									value >= 100
								}
							}
							AND = {
								has_trait = RICE_governor_of_aswan								
								has_trait_xp = {
									trait = RICE_governor_of_aswan
									value >= 100
								}
							}
						}
					}
					scope:liege = {
						trigger_event = nubia.0176
					}
				}
				# Failure.
				30 = {
					compare_modifier = {
						value = scope:duel_value
						multiplier = -1.5
						min = -49
					}
					scope:liege = {
						trigger_event = nubia.0177
					}
				}
			}
		#}
	}

}

# Report to Superiors - success
nubia.0176 = {
	type = character_event
	title = nubia.0176.t
	desc = nubia.0176.desc
	theme = learning
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = scope:liege
		animation = war_defender
	}

	right_portrait = {
		character = scope:reporter
		animation = throne_room_bow_1
	}
	
	option = { # Ok
		name = nubia.0176.a
		add_opinion = {
			target = scope:reporter
			modifier = RICE_opinion_baqt_frontier_good_job
		}
		reverse_add_opinion = {
			target = scope:reporter
			modifier = grateful_opinion
			opinion = 10
		}
		scope:reporter = {
			add_legitimacy = miniscule_legitimacy_gain
			RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
		}
		hidden_effect = {
			scope:reporter = {
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:liege
					title = nubia.0176.a.toast
					show_as_tooltip = {
						scope:liege = {
							add_opinion = {
								target = scope:reporter
								modifier = RICE_opinion_baqt_frontier_good_job
							}
							reverse_add_opinion = {
								target = scope:reporter
								modifier = grateful_opinion
								opinion = 10
							}
						}
						scope:reporter = {
							add_legitimacy = miniscule_legitimacy_gain
							RICE_nubia_egypt_frontier_trait_medium_xp_gain = yes
						}						
					}
				}			
			}
		}
		ai_chance = {
			base = 70
			modifier = {
				add = 10
				has_trait = greedy
			}
			modifier = {
				add = 10
				has_trait = ambitious
			}
			modifier = {
				add = 10
				has_trait = paranoid
			}
			modifier = {
				add = 5
				has_trait = arbitrary
			}
			modifier = {
				add = 5
				has_trait = lunatic
			}
			modifier = {
				add = 30
				has_relation_rival = scope:reporter
			}
			modifier = {
				add = 50				
				has_relation_nemesis = scope:reporter
			}
			modifier = {
				add = 10
				opinion = {
					target = scope:reporter
					value <= low_negative_opinion
				}
			}
			modifier = {
				add = 25
				opinion = {
					target = scope:reporter
					value <= medium_negative_opinion
				}
			}
		}
	}
	
	option = { # Send a gift back
		name = nubia.0176.b
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= minor_gold_value			
			}
		}
		add_opinion = {
			target = scope:reporter
			modifier = RICE_opinion_baqt_frontier_good_job
		}
		reverse_add_opinion = {
			target = scope:reporter
			modifier = grateful_opinion
			opinion = 20
		}
		scope:reporter = {
			add_legitimacy = minor_legitimacy_gain
			RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
		}
		pay_short_term_gold = {
			target = scope:reporter
			gold = minor_gold_value
		}
		hidden_effect = {
			scope:reporter = {
				send_interface_toast = {
					type = event_toast_effect_good
					left_icon = scope:liege
					title = nubia.0176.b.toast
					show_as_tooltip = {
						scope:liege = {
							add_opinion = {
								target = scope:reporter
								modifier = RICE_opinion_baqt_frontier_good_job
							}
							reverse_add_opinion = {
								target = scope:reporter
								modifier = grateful_opinion
								opinion = 20
							}
							pay_short_term_gold = {
								target = scope:reporter
								gold = minor_gold_value
							}								
						}
						scope:reporter = {
							add_legitimacy = minor_legitimacy_gain
							RICE_nubia_egypt_frontier_trait_large_xp_gain = yes
						}					
					}
				}			
			}
		}
		ai_chance = {
			base = 30
			modifier = {
				add = 10
				has_trait = generous
			}
			modifier = {
				add = 10
				has_trait = just
			}
			modifier = {
				add = 10
				has_trait = trusting
			}

			modifier = {
				add = 30
				has_relation_friend = scope:reporter
			}
			modifier = {
				add = 50
				has_relation_best_friend = scope:reporter
			}
			modifier = {
				add = 50
				has_relation_lover = scope:reporter
			}
			modifier = {
				add = 50
				has_relation_soulmate = scope:reporter
			}
			modifier = {
				add = 10
				opinion = {
					target = scope:reporter
					value >= low_positive_opinion
				}
			}
			modifier = {
				add = 25
				opinion = {
					target = scope:reporter
					value >= medium_positive_opinion
				}
			}
		}
	}

}

# Report to Superiors - failure
nubia.0177 = {
	type = character_event
	title = nubia.0177.t
	desc = nubia.0177.desc
	theme = learning
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = scope:liege
		animation = war_defender
	}

	right_portrait = {
		character = scope:reporter
		animation = shame
	}
	
	option = { # Ok
		name = nubia.0177.a
		add_opinion = {
			target = scope:reporter
			modifier = RICE_opinion_baqt_frontier_bad_job
		}
		reverse_add_opinion = {
			target = scope:reporter
			modifier = frustrated_opinion
			opinion = -5
		}
		scope:reporter = {
			RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
		}
		hidden_effect = {
			scope:reporter = {
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:liege
					title = nubia.0177.a.toast
					show_as_tooltip = {
						scope:liege = {
							add_opinion = {
								target = scope:reporter
								modifier = RICE_opinion_baqt_frontier_bad_job
							}
							reverse_add_opinion = {
								target = scope:reporter
								modifier = frustrated_opinion
								opinion = -5
							}
						}
						scope:reporter = {
							RICE_nubia_egypt_frontier_trait_small_xp_gain = yes
						}					
					}
				}			
			}
		}
	}
	
	option = { # Send a reprimand back
		name = nubia.0177.b
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= minor_gold_value			
			}
		}
		add_opinion = {
			target = scope:reporter
			modifier = RICE_opinion_baqt_frontier_terrible_job
		}
		reverse_add_opinion = {
			target = scope:reporter
			modifier = frustrated_opinion
			opinion = -15
		}
		scope:reporter = {
			add_legitimacy = miniscule_legitimacy_loss
		}
		hidden_effect = {
			scope:reporter = {
				send_interface_toast = {
					type = event_toast_effect_bad
					left_icon = scope:liege
					title = nubia.0177.b.toast
					show_as_tooltip = {
						scope:liege = {
							add_opinion = {
								target = scope:reporter
								modifier = RICE_opinion_baqt_frontier_terrible_job
							}
							reverse_add_opinion = {
								target = scope:reporter
								modifier = frustrated_opinion
								opinion = -15
							}
						}
						scope:reporter = {
							add_legitimacy = miniscule_legitimacy_loss
						}					
					}
				}			
			}
		}
	}

}

# Process complaints and requests
nubia.0178 = {
	type = character_event
	title = nubia.0178.t
	desc = nubia.0178.desc
	theme = administrative
	override_background = { reference = RICE_background_nile_travel }
	
	right_portrait = {
		character = root
		animation = worry
	}
	
	option = { # Ok
		name = nubia.0178.a
		RICE_baqt_process_complaints_and_requests_effect = yes
	}

}




##################################################################
# 
# PILGRIMAGE TO BANGANARTI
# nubia.0180-0189 reserved
# 
##################################################################

# Make preparations to begin the pilgrimage
nubia.0180 = {
	type = character_event
	title = nubia.0180.t
	desc = nubia.0180.desc
	theme = travel_pilgrimage
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = holding_staff
	}

	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = {
			has_activity_type = activity_RICE_nubia_banganarti_pilgrimage
		}
	}
	
	immediate = {
		religion:christianity_religion = { save_scope_as = christian }
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = nubia.0180.a
	}
}


# Arrive in Banganarti, settle in the guesthouses
nubia.0181 = {
	type = activity_event
	title = nubia.0181.t
	desc = nubia.0181.desc
	theme = faith
	override_background = {
		reference = RICE_background_nubia_dongola_building
	}
	
	right_portrait = {
		character = root
		animation = survey_staff
	}

	immediate = {
		title:b_old_dongola = {
			save_scope_as = dongola
		}
		faith = {
			save_scope_as = faith
		}
	}
	
	option = { # Ok
		name = nubia.0181.a
		trigger_event = {
			id = nubia.0182
			days = { 3 8 }
		}
	}
}


# Go to Banganarti church
nubia.0182 = {
	type = activity_event
	title = nubia.0182.t
	desc = nubia.0182.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_dongola_building }
	
	left_portrait = {
		character = root
		animation = personality_zealous
	}
	
	immediate = {
		culture:greek = {
			save_scope_as = greek
		}
		culture:nubian = {
			save_scope_as = nubian
		}
	}

	option = { # Ok
		name = nubia.0182.a
		trigger_event = {
			id = nubia.0183
			days = { 3 8 }
		}
	}
}

# Pray at Banganarti church
nubia.0183 = {
	type = activity_event
	title = nubia.0183.t
	desc = {
		desc = nubia.0183.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					NOT = {
						scope:activity = {
							has_activity_option = {
								category = RICE_nubia_banganarti_pilgrimage_dream_incubation_type
								option = RICE_nubia_banganarti_pilgrimage_dream_incubation_type_none
							}
						}
					}	
				}
				desc = nubia.0183.desc.dreaming
			}
			desc = nubia.0183.desc.no_dreaming
		}
	}
	theme = RICE_theme_nubia_church_interior
	
	right_portrait = {
		character = root
		animation = prayer
	}
	
	option = { # Ok
		name = nubia.0183.a
	}

	after = {
		if = {
			limit = {
				NOT = {
					scope:activity = {
						has_activity_option = {
							category = RICE_nubia_banganarti_pilgrimage_dream_incubation_type
							option = RICE_nubia_banganarti_pilgrimage_dream_incubation_type_none
						}
					}
				}				
			}
			trigger_event = {
				id = nubia.0185
				days = { 3 8 }
			}
		}
		else = {
			trigger_event = {
				id = nubia.0184
				days = { 3 8 }
			}
		}
	}

}

# Pilgrimage concludes
nubia.0184 = {
	type = activity_event
	title = nubia.0184.t
	desc = nubia.0184.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_dongola_building }
	
	right_portrait = {
		character = root
		animation = personality_content
	}
	
	option = { # Ok
		name = nubia.0184.a
		RICE_nubia_banganarti_pilgrimage_completed_log_entry_effect = yes
	}

	after = {
		hidden_effect = {
			scope:activity = {
				hidden_effect = { skip_activity_phase = yes }
			}
		}
	}
}

# Staying at guesthouses for over a month; trying to see if you get a dream
nubia.0185 = {
	type = activity_event
	title = nubia.0185.t
	desc = nubia.0185.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_dongola_building }
	
	right_portrait = {
		character = root
		animation = personality_bold
	}
	
	option = { # Ok
		name = nubia.0185.a
	}

	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = RICE_nubia_banganarti_pilgrimage_dream_incubation_type
						option = RICE_nubia_banganarti_pilgrimage_dream_incubation_type_large
					}
				}			
			}
			custom_tooltip = nubia.0185.a.long_stay
			trigger_event = {
				id = nubia.0186
				months = 3
			}
		}
		else = {
			custom_tooltip = nubia.0185.a.short_stay
			trigger_event = {
				id = nubia.0186
				months = 1
			}
		}
	}
}

# Results of the dream incubation
nubia.0186 = {
	type = activity_event
	title = nubia.0186.t
	desc = {
		desc = nubia.0186.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:host = {
						OR = {
							has_character_modifier = RICE_banganarti_health_dream
							has_character_modifier = RICE_banganarti_prophetic_dream
							has_character_modifier = RICE_banganarti_inspiring_dream
							has_character_modifier = RICE_banganarti_advice_dream
						}
					}
				}
				desc = nubia.0186.desc.success
			}
			desc = nubia.0186.desc.no_success
		}
	}
	theme = faith
	override_background = { reference = RICE_background_nubia_dongola_building }
	
	right_portrait = {
		character = scope:host
		animation = personality_bold
	}

	immediate = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = RICE_nubia_banganarti_pilgrimage_dream_incubation_type
						option = RICE_nubia_banganarti_pilgrimage_dream_incubation_type_large
					}
				}			
			}
			random = {
				chance = RICE_banganarti_pilgrimage_dream_incubation_large_chance
				random_list = {
					10 = {
						modifier = {
							add = 5
							has_any_illness = yes
						}
						modifier = {
							add = 10
							has_any_debilitating_illness = yes
						}
						modifier = {
							add = 10
							has_permanent_physical_injury = yes
						}
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_health_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_prophetic_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_inspiring_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_advice_dream
										years = 10
									}
								}
							}
						}
					}
				}
			}
		}
		else = {
			random = {
				chance = RICE_banganarti_pilgrimage_dream_incubation_small_chance
				random_list = {
					10 = {
						modifier = {
							add = 5
							has_any_illness = yes
						}
						modifier = {
							add = 10
							has_any_debilitating_illness = yes
						}
						modifier = {
							add = 10
							has_permanent_physical_injury = yes
						}
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_health_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_prophetic_dream
										years = 10
									}
								}
							}
						}
					}
					10 = {
						scope:activity = {
							add_activity_log_entry = {
								key = RICE_nubia_banganarti_dream_success_log
								tags = { good }
								# this line below adds the entry to the Effects section of the conclusion UI
								show_in_conclusion = yes
								character = root
								scope:host = {
									add_character_modifier = {
										modifier = RICE_banganarti_inspiring_dream
										years = 10
									}
								}
							}
						}
					}
				}
			}
		}	
		if = {
			limit = {
				NOR = {
					has_character_modifier = RICE_banganarti_health_dream
					has_character_modifier = RICE_banganarti_prophetic_dream
					has_character_modifier = RICE_banganarti_inspiring_dream
					has_character_modifier = RICE_banganarti_advice_dream
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_nubia_banganarti_dream_failure_log
					tags = { bad }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = root
					# scope:host = {
					# 	custom_tooltip = nubia.0186.a.failure
					# }
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0186.a
	}

	after = {
		trigger_event = {
			id = nubia.0184
			days = { 3 8 }
		}
	}
}




##################################################################
# 
# PILGRIMAGE TO SAINT CATHERINE'S MONASTERY
# nubia.0190-0199 reserved
# 
##################################################################

# Make preparations to begin the pilgrimage
nubia.0190 = {
	type = character_event
	title = nubia.0190.t
	desc = nubia.0190.desc
	theme = travel_pilgrimage
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = holding_staff
	}

	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = {
			has_activity_type = activity_RICE_coptic_saint_catherine_pilgrimage
		}
	}
	
	immediate = {
		faith = {
			save_scope_as = faith
		}
		religion:christianity_religion = { save_scope_as = christian }
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = nubia.0190.a
	}
}




# Arrive in Saint Catherine's Monastery
nubia.0191 = {
	type = activity_event
	title = nubia.0191.t
	desc = nubia.0191.desc
	theme = RICE_theme_saint_catherines_monastery
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = nubia.0191.a
		trigger_event = {
			id = nubia.0192
			days = { 4 12 }
		}
	}
}

# Praying in Saint Catherine's Monastery
nubia.0192 = {
	type = activity_event
	title = nubia.0192.t
	desc = nubia.0192.desc
	theme = faith
	
	right_portrait = {
		character = root
		animation = prayer
	}
	
	option = { # Ok
		name = nubia.0192.a
		trigger_event = {
			id = nubia.0193
			days = { 4 12 }
		}
	}
}

# Inspired by something in Saint Catherine's Monastery
nubia.0193 = {
	type = activity_event
	title = nubia.0193.t
	desc = nubia.0193.desc
	theme = RICE_theme_saint_catherines_monastery
	
	right_portrait = {
		character = root
		animation = admiration
	}

	immediate = {
		hidden_effect = {
			scope:host = {
				random_list = {
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_ashtiname_of_muhammad
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_bedouin_guards
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_burning_bush
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_collection_of_icons
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_monasterys_library
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_path_of_moses
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_relics_of_saint_catherine
							years = 10
						}
					}
					10 = {
						add_character_modifier = {
							modifier = RICE_saint_catherine_monastery_inspired_well_of_moses
							years = 10
						}
					}
				}				
			}
		}
	}
	
	option = { # Ok
		name = nubia.0193.a
		if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_ashtiname_of_muhammad
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_ashtiname_of_muhammad
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_bedouin_guards
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_bedouin_guards
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_burning_bush
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_burning_bush
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_collection_of_icons
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_collection_of_icons
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_monasterys_library
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_monasterys_library
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_path_of_moses
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_path_of_moses
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_relics_of_saint_catherine
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_relics_of_saint_catherine
								years = 10
							}							
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:host = {
					has_character_modifier = RICE_saint_catherine_monastery_inspired_well_of_moses
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_catherine_pilgrimage_inspired_log
					tags = { good }
					show_in_conclusion = yes
					character = root
					scope:host = {
						show_as_tooltip = {
							add_character_modifier = {
								modifier = RICE_saint_catherine_monastery_inspired_well_of_moses
								years = 10
							}							
						}
					}
				}
			}
		}
		trigger_event = {
			id = nubia.0194
			days = { 4 12 }
		}
	}
}





# Pilgrimage concludes
nubia.0194 = {
	type = activity_event
	title = nubia.0194.t
	desc = nubia.0194.desc
	theme = RICE_theme_saint_catherines_monastery
	
	right_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Ok
		name = nubia.0194.a
		RICE_coptic_saint_catherine_pilgrimage_completed_log_entry_effect = yes
	}


	after = {
		hidden_effect = {
			scope:activity = {
				hidden_effect = { skip_activity_phase = yes }
			}
		}
	}

}



##################################################################
# 
# PILGRIMAGE TO SAINT ANTHONY'S MONASTERY
# nubia.0200-0209 reserved
# 
##################################################################

# Make preparations to begin the pilgrimage
nubia.0200 = {
	type = character_event
	title = nubia.0200.t
	desc = nubia.0200.desc
	theme = travel_pilgrimage
	override_background = { reference = RICE_background_nile_travel }
	
	left_portrait = {
		character = root
		animation = holding_staff
	}

	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = {
			has_activity_type = activity_RICE_coptic_saint_anthony_pilgrimage
		}
	}
	
	immediate = {
		# faith = {
		# 	save_scope_as = faith
		# }
		religion:christianity_religion = { save_scope_as = christian }
		play_music_cue = "mx_cue_epic_sacral_moment"
	}
	
	option = { # Ok
		name = nubia.0200.a
	}
}




# Arrive in Saint Anthony's Monastery
nubia.0201 = {
	type = activity_event
	title = nubia.0201.t
	desc = nubia.0201.desc
	theme = RICE_theme_saint_anthony_monastery
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}
	
	option = { # Ok
		name = nubia.0201.a
		trigger_event = {
			id = nubia.0202
			days = { 4 12 }
		}
	}
}

# Praying in Saint Anthony's Monastery - learning about the hermits and monasteries
nubia.0202 = {
	type = activity_event
	title = nubia.0202.t
	desc = nubia.0202.desc
	theme = faith
	
	right_portrait = {
		character = root
		animation = prayer
	}
	
	option = { # Visit the gardens
		name = nubia.0202.a
		random = {
			chance = 25
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_gardens_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_character_modifier = {
							modifier = RICE_coptic_saint_anthony_pilgrimage_garden_inspired
							years = 5
						}
					}
				}
			}
		}
	}
	
	option = { # Visit Mount Colzim
		name = nubia.0202.b
		trigger = {
			is_healthy = yes
		}
		if = {
			limit = {
				NOR = {
					has_trait = athletic
					has_trait = strong
					has_trait = physique_good
					has_trait = zealous
					has_trait = lifestyle_mystic
				}
			}
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_mount_colzim_climb_bad_log
					tags = { bad }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_piety = 50
						stress_impact = {
							base = miniscule_stress_impact_gain
							cynical = miniscule_stress_impact_gain
							lazy = minor_stress_impact_gain
						}
					}
				}
			}
		}
		else = {
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_mount_colzim_climb_good_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_piety = 50
						stress_impact = {
							athletic = miniscule_stress_impact_loss
							strong = miniscule_stress_impact_loss
							physique_good_1 = miniscule_stress_impact_loss
							physique_good_2 = miniscule_stress_impact_loss
							physique_good_3 = miniscule_stress_impact_loss
							zealous = miniscule_stress_impact_loss
							lifestyle_mystic = miniscule_stress_impact_loss
						}
					}
				}
			}
		}
		random = {
			chance = 25
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_mount_colzim_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_character_modifier = {
							modifier = RICE_coptic_saint_anthony_pilgrimage_mount_colzim_inspired
							years = 5
						}
					}
				}
			}
		}
	}
	
	option = { # Observe the ascetics
		name = nubia.0202.c
		random = {
			chance = 25
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_coptic_saint_anthony_pilgrimage_ascetics_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					scope:host = {	
						add_character_modifier = {
							modifier = RICE_coptic_saint_anthony_pilgrimage_ascetics_inspired
							years = 5
						}
					}
				}
			}
		}
	}
	
	option = { # Focus on Prayer
		name = nubia.0202.d
		scope:activity = {
			add_activity_log_entry = {
				key = RICE_coptic_saint_anthony_pilgrimage_prayer_log
				tags = { good }
				# this line below adds the entry to the Effects section of the conclusion UI
				show_in_conclusion = yes
				character = scope:host
				scope:host = {
					add_piety = 25
					stress_impact = {
						base = miniscule_stress_impact_loss
						zealous = miniscule_stress_impact_loss
					}
				}
			}
		}
	}

	after = {		
		trigger_event = {
			id = nubia.0203
			days = { 4 12 }
		}
	}

}



# Pilgrimage concludes
nubia.0203 = {
	type = activity_event
	title = nubia.0203.t
	desc = nubia.0203.desc
	theme = RICE_theme_saint_anthony_monastery
	
	right_portrait = {
		character = root
		animation = happiness
	}
	
	option = { # Ok
		name = nubia.0203.a
		RICE_coptic_saint_anthony_pilgrimage_completed_log_entry_effect = yes
	}


	after = {
		hidden_effect = {
			scope:activity = {
				hidden_effect = { skip_activity_phase = yes }
			}
		}
	}

}





######################################################################################
# 
# BULL SACRIFICE
# 
# nubia.0210-nubia.0219
# 
######################################################################################



# Bull Sacrifice Prep
nubia.0210 = {
	type = activity_event
	title = nubia.0210.t
	desc = nubia.0210.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	right_portrait = {
		character = root
		animation = personality_zealous
	}

	immediate = {
		faith = { save_scope_as = faith }
		scope:activity.activity_location = {
			save_scope_as = location
		}
	}
	
	option = { # Ok
		name = nubia.0210.a
		custom_tooltip = nubia.0210.a.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:diplomacy
			days = 1
		}
	}
	
	option = { # Ok
		name = nubia.0210.b
		custom_tooltip = nubia.0210.b.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:martial
			days = 1
		}
	}
	
	option = { # Ok
		name = nubia.0210.c
		custom_tooltip = nubia.0210.c.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:stewardship
			days = 1
		}
	}
	
	option = { # Ok
		name = nubia.0210.d
		custom_tooltip = nubia.0210.d.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:intrigue
			days = 1
		}
	}
	
	option = { # Ok
		name = nubia.0210.e
		custom_tooltip = nubia.0210.e.tooltip
		set_variable = {
			name = RICE_nilotic_sacrifice_type
			value = flag:learning
			days = 1
		}
	}

	after = {
		trigger_event = {
			id = nubia.0211
			days = { 5 10 }
		}
	}
}


# Bovine Sacrifice done
nubia.0211 = {
	type = activity_event
	title = nubia.0211.t
	desc = {
		desc = nubia.0211.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_5
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_martial_5
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_5
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_5
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_1
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_2
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_3
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_4
						has_character_modifier = RICE_nubia_bovine_sacrifice_learning_5
					}
				}
				desc = nubia.0211.desc.good
			}
			desc = nubia.0211.desc.bad
		}
	}
	theme = faith
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = wedding_priest # prayer
	}

	right_portrait = {
		character = scope:chaplain
		animation = throne_room_two_handed_passive_1
		trigger = {
			exists = scope:chaplain
		}
	}	

	immediate = {
		if = {
			limit = {
				exists = cp:councillor_court_chaplain
			}
			cp:councillor_court_chaplain ?= { save_scope_as = chaplain }
		}
		hidden_effect = {
			if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:diplomacy
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_diplomacy_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_diplomacy_5
								years = 10
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:martial
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_martial_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_martial_5
								years = 10
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:stewardship
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_stewardship_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_stewardship_5
								years = 10
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:intrigue
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_intrigue_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_intrigue_5
								years = 10
							}
						}
					}
				}
			}
			else_if = {
				limit = {
					var:RICE_nilotic_sacrifice_type ?= flag:learning
				}
				random = {
					chance = RICE_nubia_bovine_sacrifice_learning_chance
					random_list = {
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_1
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_2
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_3
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_4
								years = 10
							}
						}
						10 = {
							add_character_modifier = {
								modifier = RICE_nubia_bovine_sacrifice_learning_5
								years = 10
							}
						}
					}
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0211.a
		if = {
			limit = {
				scope:activity.activity_host = {
					has_activity_intent = RICE_nubia_nilotic_bovine_sacrifice_honor_the_ancestors_intent
				}
			}
			add_piety = { 25 200 }
		}
		else_if = {
			limit = {
				scope:activity.activity_host = {
					has_activity_intent = RICE_nubia_nilotic_bovine_sacrifice_communion_intent
				}
			}
			add_prestige = { 25 200 }
		}
		scope:activity = {
			add_activity_log_entry = {
				key = RICE_nubia_nilotic_bovine_sacrifice_modifier_log
				tags = { good }
				# this line below adds the entry to the Effects section of the conclusion UI
				show_in_conclusion = yes
				character = root
				scope:host = {
					if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_diplomacy_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_diplomacy_5
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_martial_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_martial_5
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_stewardship_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_stewardship_5
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_intrigue_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_intrigue_5
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_1
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_1
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_2
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_2
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_3
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_3
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_4
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_4
							years = 10
						}
					}
					else_if = {
						limit = {
							has_character_modifier = RICE_nubia_bovine_sacrifice_learning_5
						}
						add_character_modifier = {
							modifier = RICE_nubia_bovine_sacrifice_learning_5
							years = 10
						}
					}
				}
			}
		}
	}

	after = {
		# Needs to be displayed at the end so we don't have two instances of piety/prestige, one vague and one specific
		#RICE_nubia_nilotic_bovine_sacrifice_completed_log_entry_effect = yes
		if = {
			limit = { has_variable = RICE_nilotic_sacrifice_type }
			remove_variable = RICE_nilotic_sacrifice_type
		}
		scope:activity = {
			hidden_effect = { skip_activity_phase = yes }
		}
	}
}




######################################################################################
# 
# NILE EMPIRE AND LEGENDS
# 
# nubia.0220-nubia.0239
# 
######################################################################################


# First, choose a name
nubia.0220 = {
	type = character_event
	title = nubia.0220.t
	desc = nubia.0220.desc
	theme = RICE_theme_nile_valley
	
	right_portrait = {
		character = root
		animation = thinking
	}
	
	option = { # Default
		name = nubia.0220.a
	}
	
	option = { # Egypt
		name = nubia.0220.b
		title:e_RICE_nile = {
			set_title_name = e_RICE_greater_egypt
		}
	}
	
	option = { # Nubia
		name = nubia.0220.c
		title:e_RICE_nile = {
			set_title_name = e_RICE_greater_nubia
		}
	}
	
	option = { # Kemet
		name = nubia.0220.d
		title:e_RICE_nile = {
			set_title_name = e_RICE_greater_kemet
		}
	}
	
	option = { # Kush
		name = nubia.0220.e
		title:e_RICE_nile = {
			set_title_name = e_RICE_greater_kush
		}
	}

	after = {
		trigger_event = nubia.0221
	}
}

# Second, choose a legend
nubia.0221 = {
	type = character_event
	window = big_event_window
	title = nubia.0221.t
	desc = nubia.0221.desc
	theme = RICE_theme_nile_valley
	
	left_portrait = {
		character = root
		animation = war_over_win
	}
	
	option = { # Abbasids
		name = nubia.0221.a
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_abbasids_legend
			properties = {
				reviver = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 300
				OR = {
					religion = religion:islam_religion
					culture = { has_cultural_pillar = heritage_arabic }
					culture = { has_cultural_pillar = heritage_berber }
				}
			}
		}
	}
	
	option = { # Alexander the Great
		name = nubia.0221.b
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_alexander_legend
			properties = {
				reviver = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 100
				OR = {
					religion = religion:hellenism_religion
					culture = { has_cultural_pillar = heritage_byzantine }
				}
			}
		}
	}
	
	option = { # Candace (Kushite Queens)
		name = nubia.0221.c
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_candace_legend
			properties = {
				reviver = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				OR = {
					religion = religion:kushitism_religion
					culture = { has_cultural_pillar = heritage_east_african }
					culture = { has_cultural_pillar = heritage_somalian }
				}
			}
		}
	}
	
	option = { # Cleopatra the Scholar
		name = nubia.0221.d
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_cleopatra_scholar_legend
			properties = {
				reviver = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				OR = {
					religion = religion:kushitism_religion
					culture = { has_cultural_pillar = heritage_east_african }
					culture = { has_cultural_pillar = heritage_egyptian }
					culture = { has_cultural_pillar = heritage_arabic }
					culture = { has_cultural_pillar = heritage_berber }
				}
			}
		}
	}
	
	option = { # Cleopatra the Seducer
		name = nubia.0221.e
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_cleopatra_scholar_legend
			properties = {
				reviver = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				OR = {
					religion = religion:hellenism_religion
					culture_has_european_heritage_pillar_trigger = yes
				}
			}
		}
	}
	
	option = { # Hermes Trismegistus
		name = nubia.0221.f
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_hermes_legend
			properties = {
				reviver = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				RICE_is_greco_roman_religion_group_trigger = yes
			}
		}
	}
	
	option = { # Sesostris
		name = nubia.0221.g
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_sesostris_legend
			properties = {
				reviver = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				OR = {
					RICE_is_greco_roman_religion_group_trigger = yes
					faith = faith:coptic
					culture = { has_cultural_pillar = heritage_egyptian }
				}
			}
		}
	}
	
	option = { # Surid Ibn Salhouk
		name = nubia.0221.g
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_surid_legend
			properties = {
				reviver = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 100
			modifier = {
				add = 50
				OR = {
					religion = religion:kushitism_religion
					religion = religion:islam_religion
					faith = faith:coptic
					culture = { has_cultural_pillar = heritage_egyptian }
					culture_has_mena_heritage_pillar_trigger = yes
				}
			}
		}
	}
	
	option = { # Umayyads
		name = nubia.0221.h
		create_legend_seed = {
			type = legitimizing
			quality = famed
			chronicle = RICE_nile_cleopatra_scholar_legend
			properties = {
				reviver = root
				faith = root.faith
				culture = root.culture
			}
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 300
				OR = {
					religion = religion:islam_religion
					culture = { has_cultural_pillar = heritage_arabic }
					culture = { has_cultural_pillar = heritage_berber }
				}
			}
		}
	}

	after = {
		every_ruler = {
			limit = {
				is_playable_character = yes
				OR = {
					this = scope:nile_conqueror
					any_vassal_or_below = {
						this = scope:nile_conqueror
					}
					domicile.domicile_location ?= {					
						OR = {
							geographical_region = world_middle_east
							geographical_region = world_africa
							geographical_region = world_europe
							geographical_region = world_india
							geographical_region = world_steppe_west
							geographical_region = world_steppe_central
						}
					}
					any_held_county = {
						any_county_province = {
							OR = {
								geographical_region = world_middle_east
								geographical_region = world_africa
								geographical_region = world_europe
								geographical_region = world_india
								geographical_region = world_steppe_west
								geographical_region = world_steppe_central
							}
						}
					}
				}
			}
			trigger_event = nubia.0222
		}
	}
}






# Notification event
nubia.0222 = {
	type = character_event
	window = fullscreen_event
	title = nubia.0222.t
	desc = nubia.0222.desc
	theme = diplomacy_majesty_focus
	override_background = { reference = RICE_nile_river_fullscreen_intro }

	immediate = {
		show_as_tooltip = {
			scope:nile_conqueror = {
				RICE_nile_empire_decision_effect = yes
			}			
		}
	}
	
	option = { # Ok
		name = nubia.0222.a	
	}

}




######################################################################################
# 
# SIBIR FESTIVAL
# 
# nubia.0240-nubia.0259
# 
######################################################################################



# Prepare for the Sibir
nubia.0240 = {
	type = activity_event
	title = nubia.0240.t
	desc = nubia.0240.desc
	theme = friendly
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	right_portrait = {
		character = root
		animation = personality_content
	}

	immediate = {
		culture = { save_scope_as = culture }
		scope:activity.activity_location = {
			save_scope_as = location
		}
	}
	
	option = { # Ok
		name = nubia.0240.a
	}

	after = {
		trigger_event = {
			id = nubia.0241
			days = { 5 10 }
		}
	}
}

# Sibir starts, sacrifice the cattle
nubia.0241 = {
	type = activity_event
	title = nubia.0241.t
	desc = nubia.0241.desc
	theme = faith
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = throne_room_applaud_1
	}

	right_portrait = {
		character = scope:chaplain
		animation = throne_room_two_handed_passive_1
		trigger = {
			exists = scope:chaplain
		}
	}	

	immediate = {
		if = {
			limit = {
				exists = cp:councillor_court_chaplain
			}
			cp:councillor_court_chaplain ?= { save_scope_as = chaplain }
		}
	}
	
	option = { # Ok
		name = nubia.0241.a
	}

	after = {
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = RICE_nubia_sibir_festival_sports_competition_type_none
					}
				}
			}
			trigger_event = {
				id = nubia.0242
				days = { 3 5 }
			}
		}
		else = {			
			trigger_event = {
				id = nubia.0243
				days = { 3 5 }
			}
		}
	}
}

# Sibir concludes
nubia.0242 = {
	type = activity_event
	title = nubia.0242.t
	desc = nubia.0242.desc
	theme = feast_activity
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = toast
	}

	right_portrait = {
		character = scope:drinker
		animation = drink
		trigger = {
			exists = scope:drinker
		}
	}	

	immediate = {
		if = {
			limit = {
				scope:activity = {
					any_attending_character = {
						RICE_activity_participant_trigger = yes
					}
				}				
			}
			scope:activity = {
				random_attending_character = {
					limit = {
						RICE_activity_participant_trigger = yes
					}
					save_scope_as = drinker
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0242.a
		RICE_nubia_sibir_festival_completed_log_entry_effect = yes
	}

	after = {
		scope:activity = {
			hidden_effect = { skip_activity_phase = yes }
		}
	}
}

# Observe the wrestling or stick fighting match, if one has been scheduled
nubia.0243 = {
	type = activity_event
	title = nubia.0243.t
	desc = nubia.0243.desc
	theme = martial
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = throne_room_cheer_1
	}

	right_portrait = {
		character = scope:participant
		animation = throne_room_cheer_2
		trigger = {
			exists = scope:participant
		}
	}	

	immediate = {
		if = {
			limit = {
				scope:activity = {
					any_attending_character = {
						RICE_activity_participant_trigger = yes
					}
				}				
			}
			scope:activity = {
				random_attending_character = {
					limit = {
						RICE_activity_participant_trigger = yes
					}
					save_scope_as = participant
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0243.a
	}

	after = {
		hidden_effect = {
			random_list = {
				# Nothing ever happens
				20 = {
					trigger_event = {
						id = nubia.0242
						days = { 3 5 }
					}
				}
				# Recruit a courtier
				10 = {
					modifier = {
						add = 10
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = RICE_nubia_sibir_festival_sports_competition_type_stick_fighting
							}
						}
					}
					trigger_event = nubia.0244
				}
				# Gain a character modifier or county modifier
				10 = {
					modifier = {
						add = 10
						scope:activity = {
							has_activity_option = {
								category = special_type
								option = RICE_nubia_sibir_festival_sports_competition_type_wrestling
							}
						}
					}
					trigger_event = nubia.0245
				}
			}
		}
	}
}

# Recruit one of the winning youths?
nubia.0244 = {
	type = activity_event
	title = nubia.0244.t
	desc = nubia.0244.desc
	theme = martial
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	left_portrait = {
		character = root
		animation = thinking
	}

	right_portrait = {
		character = scope:youth
		animation = throne_room_bow_1
	}	

	immediate = {
		create_character = {
			location = root.capital_province
			template = RICE_nuba_young_warrior_template
			save_scope_as = youth			
		}	
	}
	
	option = { # Ok
		name = nubia.0244.a
		trigger = {
			OR = {
				is_ai = no
				short_term_gold >= 50			
			}
		}
		scope:activity = {
			add_activity_log_entry = {
				key = RICE_nubia_sibir_festival_recruit_youth_log
				tags = { good }
				# this line below adds the entry to the Effects section of the conclusion UI
				show_in_conclusion = yes
				character = scope:host
				scope:host = {
					remove_short_term_gold = 50
					add_courtier = scope:youth
					if = {
						limit = {
							can_add_hook = {
								target = scope:youth
								type = loyalty_hook
							}
						}
						add_hook = {
							target = scope:youth
							type = loyalty_hook
						}
					}							
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0244.b
		hidden_effect = {
			scope:youth = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

	after = {
		trigger_event = {
			id = nubia.0242
			days = { 3 5 }
		}
	}
}

# Recruit one of the winning youths?
nubia.0245 = {
	type = activity_event
	title = nubia.0245.t
	desc = nubia.0245.desc
	theme = martial
	override_background = { reference = RICE_background_nubia_nuba_savanna_village }
	
	right_portrait = {
		character = root
		animation = personality_greedy
	}

	immediate = {
		scope:activity.activity_location = {
			save_scope_as = target_province			
		}
		random_list = {
			10 = {
				scope:target_province = {
					add_province_modifier = {
						modifier = RICE_nubia_sibir_province_modifier_1
						years = 10
					}
				}
			}
			10 = {
				scope:target_province = {
					add_province_modifier = {
						modifier = RICE_nubia_sibir_province_modifier_2
						years = 10
					}
				}
			}
			10 = {
				scope:target_province = {
					add_province_modifier = {
						modifier = RICE_nubia_sibir_province_modifier_3
						years = 10
					}
				}
			}
			10 = {
				add_character_modifier = {
					modifier = RICE_nubia_sibir_character_modifier_1
					years = 10
				}
			}
			10 = {
				add_character_modifier = {
					modifier = RICE_nubia_sibir_character_modifier_2
					years = 10
				}
			}
			10 = {
				add_character_modifier = {
					modifier = RICE_nubia_sibir_character_modifier_3
					years = 10
				}
			}
		}
	}
	
	option = { # Ok
		name = nubia.0245.a
		hidden_effect = {
			scope:activity = {
				add_activity_log_entry = {
					key = RICE_nubia_sibir_festival_gain_modifier_log
					tags = { good }
					# this line below adds the entry to the Effects section of the conclusion UI
					show_in_conclusion = yes
					character = scope:host
					show_as_tooltip = {
						if = {
							limit = {
								scope:target_province = { has_province_modifier = RICE_nubia_sibir_province_modifier_1 }
							}
							scope:target_province = {
								add_province_modifier = {
									modifier = RICE_nubia_sibir_province_modifier_1
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:target_province = { has_province_modifier = RICE_nubia_sibir_province_modifier_2 }
							}
							scope:target_province = {
								add_province_modifier = {
									modifier = RICE_nubia_sibir_province_modifier_2
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:target_province = { has_province_modifier = RICE_nubia_sibir_province_modifier_3 }
							}
							scope:target_province = {
								add_province_modifier = {
									modifier = RICE_nubia_sibir_province_modifier_3
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:host = { has_character_modifier = RICE_nubia_sibir_character_modifier_1 }
							}
							scope:host = {
								add_character_modifier = {
									modifier = RICE_nubia_sibir_character_modifier_1
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:host = { has_character_modifier = RICE_nubia_sibir_character_modifier_2 }
							}
							scope:host = {
								add_character_modifier = {
									modifier = RICE_nubia_sibir_character_modifier_2
									years = 10
								}
							}
						}						
						if = {
							limit = {
								scope:host = { has_character_modifier = RICE_nubia_sibir_character_modifier_3 }
							}
							scope:host = {
								add_character_modifier = {
									modifier = RICE_nubia_sibir_character_modifier_3
									years = 10
								}
							}
						}						
					}
				}
			}			
		}
	}

	after = {
		trigger_event = {
			id = nubia.0242
			days = { 3 5 }
		}
	}
}



######################################################################################
# 
# GENERIC FLAVOR EVENTS
# 
# nubia.0270-nubia.0299
# 
######################################################################################


# Recent anchorite passes away
# nubia.0270 = {
# 	type = character_event
# 	title = nubia.0270.t
# 	desc = nubia.0270.desc
# 	theme = faith
# 	override_background = { reference = RICE_background_egypt_desert }

# 	right_portrait = {
# 		character = root
# 		animation = thinking
# 	}
		
# 	trigger = {
# 		religion = religion:christianity_religion
# 		any_held_county = {
# 			any_county_province = {
# 				OR = {
# 					geographical_region = RICE_nile_river_valley_without_ethiopia
# 					geographical_region = RICE_southern_egypt_and_northern_nubia
# 				}
# 			}
# 		}
# 	}

# 	weight_multiplier = {
# 		base = 1
# 		modifier = {
# 			add = 0.2
# 			has_trait = zealous
# 		}
# 		modifier = {
# 			add = -0.2
# 			has_trait = cynical
# 		}
# 		modifier = {
# 			add = 0.2
# 			has_trait = generous
# 		}
# 		modifier = {
# 			add = -0.2
# 			has_trait = greedy
# 		}
# 		modifier = {
# 			add = 0.2
# 			has_trait = content
# 		}
# 		modifier = {
# 			add = -0.2
# 			has_trait = ambitious
# 		}
# 	}

# 	immediate = {
# 		random_held_county = {
# 			limit = {
# 				any_county_province = {
# 					OR = {
# 						geographical_region = RICE_nile_river_valley_without_ethiopia
# 						geographical_region = RICE_southern_egypt_and_northern_nubia
# 					}
# 				}				
# 			}
# 			save_scope_as = county
# 		}
# 		scope:county = {
# 			add_county_modifier = {
# 				modifier = RICE_nubia_recent_anchorite_death
# 				years = 10
# 			}
# 		}
# 	}

# 	option = { # Ok
# 		name = nubia.0270.a
# 		stress_impact = {
# 			zealous = minor_stress_impact_gain
# 		}
# 	}

# 	option = { # Ok
# 		name = nubia.0270.b
# 		trigger = {
# 			OR = {
# 				gold >= 20
# 				is_ai = no
# 			}
# 		}
# 		remove_short_term_gold = 20
# 		add_piety = 50
# 		stress_impact = {
# 			greedy = miniscule_stress_impact_gain
# 			cynical = miniscule_stress_impact_gain
# 		}
# 		add_character_modifier = {
# 			modifier = RICE_manichean_supports_books
# 			years = 10
# 		}
# 	}

# 	option = { # Ok
# 		name = nubia.0270.c
# 		trigger = {
# 			OR = {
# 				gold >= 75
# 				is_ai = no
# 			}
# 		}
# 		remove_short_term_gold = 75
# 		add_piety = 100
# 		scope:county = {
# 			remove_county_modifier = RICE_nubia_hermits_in_pharaonic_tombs
# 			add_county_modifier = {
# 				modifier = RICE_nubia_hermits_in_pharaonic_tombs_upgraded
# 				years = 10
# 			}
# 		}
# 		stress_impact = {
# 			greedy = minor_stress_impact_gain
# 			cynical = minor_stress_impact_gain
# 		}
# 		add_character_modifier = {
# 			modifier = RICE_manichean_supports_books
# 			years = 10
# 		}
# 	}

# 	after = {
# 		if = {
# 			limit = {
# 				has_game_rule = RICE_historical_context_on
# 			}
# 			custom_tooltip = nubia.0270.info
# 		}
# 	}

# }

# Local hermits inhabit a local ancient Pharaonic-era tomb
# nubia.0251 = {
# 	type = character_event
# 	title = nubia.0251.t
# 	desc = nubia.0251.desc
# 	theme = faith
# 	override_background = { reference = RICE_background_egypt_desert }

# 	right_portrait = {
# 		character = root
# 		animation = thinking
# 	}
		
# 	trigger = {
# 		religion = religion:christianity_religion
# 		any_held_county = {
# 			any_county_province = {
# 				OR = {
# 					geographical_region = RICE_nile_river_valley_without_ethiopia
# 					geographical_region = RICE_southern_egypt_and_northern_nubia
# 				}
# 			}
# 		}
# 	}

# 	weight_multiplier = {
# 		base = 1
# 		modifier = {
# 			add = 0.2
# 			has_trait = zealous
# 		}
# 		modifier = {
# 			add = -0.2
# 			has_trait = cynical
# 		}
# 		modifier = {
# 			add = 0.2
# 			has_trait = generous
# 		}
# 		modifier = {
# 			add = -0.2
# 			has_trait = greedy
# 		}
# 		modifier = {
# 			add = 0.2
# 			has_trait = content
# 		}
# 		modifier = {
# 			add = -0.2
# 			has_trait = ambitious
# 		}
# 	}

# 	immediate = {
# 		random_held_county = {
# 			limit = {
# 				any_county_province = {
# 					OR = {
# 						geographical_region = RICE_nile_river_valley_without_ethiopia
# 						geographical_region = RICE_southern_egypt_and_northern_nubia
# 					}
# 				}				
# 			}
# 			save_scope_as = county
# 		}
# 		scope:county = {
# 			add_county_modifier = {
# 				modifier = RICE_nubia_hermits_in_pharaonic_tombs
# 				years = 10
# 			}
# 		}
# 	}

# 	option = { # Ok
# 		name = nubia.0251.a
# 		stress_impact = {
# 			zealous = minor_stress_impact_gain
# 		}
# 	}

# 	option = { # Ok
# 		name = nubia.0251.b
# 		trigger = {
# 			OR = {
# 				gold >= 20
# 				is_ai = no
# 			}
# 		}
# 		remove_short_term_gold = 20
# 		add_piety = 50
# 		stress_impact = {
# 			greedy = miniscule_stress_impact_gain
# 			cynical = miniscule_stress_impact_gain
# 		}
# 		add_character_modifier = {
# 			modifier = RICE_manichean_supports_books
# 			years = 10
# 		}
# 	}

# 	option = { # Ok
# 		name = nubia.0251.c
# 		trigger = {
# 			OR = {
# 				gold >= 75
# 				is_ai = no
# 			}
# 		}
# 		remove_short_term_gold = 75
# 		add_piety = 100
# 		scope:county = {
# 			remove_county_modifier = RICE_nubia_hermits_in_pharaonic_tombs
# 			add_county_modifier = {
# 				modifier = RICE_nubia_hermits_in_pharaonic_tombs_upgraded
# 				years = 10
# 			}
# 		}
# 		stress_impact = {
# 			greedy = minor_stress_impact_gain
# 			cynical = minor_stress_impact_gain
# 		}
# 		add_character_modifier = {
# 			modifier = RICE_manichean_supports_books
# 			years = 10
# 		}
# 	}

# 	after = {
# 		if = {
# 			limit = {
# 				has_game_rule = RICE_historical_context_on
# 			}
# 			custom_tooltip = nubia.0270.info
# 		}
# 	}

# }
