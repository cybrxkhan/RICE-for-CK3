###############################################################################
# 
# Niger Delta
# 
# north_atlantic.0000-north_atlantic.0019			Setup events, history events, miscellaneous events and decisions
# north_atlantic.0020-north_atlantic.0029			Misc decisions
# north_atlantic.0030-north_atlantic.0089			Minor Expeditions
# north_atlantic.0090-north_atlantic.0099			Courtier Spawn
# north_atlantic.0100-north_atlantic.0109			Support Greenland
# north_atlantic.0110-north_atlantic.0119			Support Vinland
# north_atlantic.0120-north_atlantic.0139			Nordsetur Hunt
# north_atlantic.0140-north_atlantic.0159			Vinland Outposts and Settlements
# north_atlantic.0160-north_atlantic.0169			Discovering Greenland/Vinland
# north_atlantic.0170-north_atlantic.0179			Greenland Struggle Ending Decisions
# north_atlantic.0180-north_atlantic.0199			Whaling
# north_atlantic.0200-north_atlantic.0249			Generic flavor events
# north_atlantic.0250-north_atlantic.0269			Exile/send to Greenland/Vinland
# 
# 
###############################################################################

namespace = north_atlantic

######################################################################################
# 
# SETUP EVENTS, HISTORY EVENTS, MISC DECISIONS
# 
# north_atlantic.0000-north_atlantic.0029
# 
######################################################################################


# GREENLAND INTRO 
north_atlantic.0001 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0001.t
	desc = {
		desc = north_atlantic.0001.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					any_character_struggle = {
						involvement = involved
						is_struggle_type = RICE_greenland_struggle
					}
				}
				desc = north_atlantic.0001.desc.involved
			}
			triggered_desc = {
				trigger = {
					any_character_struggle = {
						involvement = interloper
						is_struggle_type = RICE_greenland_struggle
					}
				}
				desc = north_atlantic.0001.desc.interloper
			}
		}
	}
	theme = diplomacy_foreign_affairs_focus
	trigger = { # we need to prevent this from firing for all players when a new player joins in MP
		is_ai = no
		NOT = { has_character_flag = RICE_greenland_struggle_intro_event_flag }
		OR = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
			any_character_struggle = {
				involvement = interloper
				is_struggle_type = RICE_greenland_struggle
			}
		}
 	}
	override_background = { reference = RICE_greenland_struggle_start }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	widgets = {
		widget = {
 			gui = "event_window_widget_struggle_info"
 			container = "dynamic_content_widget"
 			controller = struggle_info
 			setup_scope = { struggle:RICE_greenland_struggle = { save_scope_as = struggle } }
		}
		# widget = {
		# 	gui = "event_window_widget_RICE_north_atlantic_struggle_resources_info"
		# 	container = "dynamic_content_widget"
		# }
	}
	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_integration"
		add_character_flag = RICE_greenland_struggle_intro_event_flag
		save_scope_value_as = {
			name = start
			value = yes
		}
		ordered_in_global_list = {
			variable = RICE_north_atlantic_erik_the_red
			save_scope_as = erik
		}
	}

	option = {
		name = north_atlantic.0001.a
		trigger = {
			any_character_struggle = {
				involvement = involved
				is_struggle_type = RICE_greenland_struggle
			}
		}
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}

	option = {
		name = north_atlantic.0001.b
		trigger = {
			any_character_struggle = {
				involvement = interloper
				is_struggle_type = RICE_greenland_struggle
			}			
		}
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}

	option = {
		name = north_atlantic.0001.c
		custom_tooltip = north_atlantic.0001.c.tooltip
		trigger_event = north_atlantic.0003
		#clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}

}





north_atlantic.0002 = {
	hidden = yes
	scope = none
	scope = struggle
	orphan = yes

	trigger = { # Should not need this, but, redundancy check! -h
		exists = struggle:RICE_greenland_struggle
	}

	immediate = {

		# Go through the characters to notify them
		struggle:RICE_greenland_struggle = {
			every_involved_ruler = {
				limit = {
					is_alive = yes
					is_ai = no
				}
				trigger_event = north_atlantic.0001
			}
			every_interloper_ruler = {
				limit = {
					is_alive = yes
					is_ai = no
				}
				trigger_event = north_atlantic.0001
			}
		}
	}
}




# Greenland concepts tutorial
north_atlantic.0003 = {
	type = character_event
	title = north_atlantic.0003.t
	desc = north_atlantic.0003.desc
	theme = RICE_theme_north_atlantic_port

	left_portrait = root
	right_portrait = scope:guide

	immediate = {
		# Generate the guide
		create_character = {
			location = root.capital_province
			template = random_barrel_character
			save_scope_as = guide
		}
	}

	widgets = {
		widget = {
			gui = "event_window_widget_RICE_north_atlantic_struggle_concepts_info"
			container = "custom_widgets_container" #container = "dynamic_content_widget"
		}
	}

	option = {
		name = north_atlantic.0003.a
		hidden_effect = {
			scope:guide = {
				death = {
					death_reason = death_RICE_north_atlantic_greenland
				}
			}			
		}
	}

	option = {
		name = north_atlantic.0003.b
		trigger_event = north_atlantic.0004
	}

}



# Greenland resources/pressures tutorial
north_atlantic.0004 = {
	type = character_event
	title = north_atlantic.0004.t
	desc = north_atlantic.0004.desc
	theme = RICE_theme_north_atlantic_port

	left_portrait = root
	right_portrait = scope:guide

	widgets = {
		widget = {
			gui = "event_window_widget_RICE_north_atlantic_struggle_resources_info"
			container = "custom_widgets_container" #container = "dynamic_content_widget"
		}
	}

	option = {
		name = north_atlantic.0004.a
		hidden_effect = {
			scope:guide = {
				death = {
					death_reason = death_RICE_north_atlantic_greenland
				}
			}			
		}
	}

}

# Year change catalyst
north_atlantic.0005 = {
	hidden = yes
	scope = none
	scope = struggle

	trigger = {
		exists = struggle:RICE_greenland_struggle
	}

	immediate = {
		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
			}
			# Activate the catalyst
			# If *both* Socio-Economic and Environmental Pressures are ongoing
			if = {
				limit = {
					has_global_variable = RICE_greenland_environmental_change_warning
					has_global_variable = RICE_greenland_socio_economic_change_warning
				}
				activate_struggle_catalyst = catalyst_RICE_greenland_passing_of_time_4
			}
			# Environmental pressures but not socio-economic pressures
			else_if = {
				limit = {
					has_global_variable = RICE_greenland_environmental_change_warning
					NOT = { has_global_variable = RICE_greenland_socio_economic_change_warning }
				}
				activate_struggle_catalyst = catalyst_RICE_greenland_passing_of_time_3
			}
			# Socio-economic pressures are active but not environmental pressures
			else_if = {
				limit = {
					has_global_variable = RICE_greenland_socio_economic_change_warning
					NOT = { has_global_variable = RICE_greenland_environmental_change_warning }
				}
				activate_struggle_catalyst = catalyst_RICE_greenland_passing_of_time_2
			}
			# Normal year before the pressures start
			else = {
				activate_struggle_catalyst = catalyst_RICE_greenland_passing_of_time_1
			}
			# Then queue the event up against for a year hence.
			trigger_event = {
				id = north_atlantic.0005
				years = 1
			}
		}
	}
}



# Environmental Climate Changes notification
north_atlantic.0006 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0006.t
	desc = north_atlantic.0006.desc
	theme = death
	# trigger = {
	# 	is_ai = no
	# 	has_global_variable = RICE_greenland_environmental_change_warning
 	# }
	override_background = { reference = RICE_greenland_icebergs }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	# widgets = {
	# 	widget = {
 	# 		gui = "event_window_widget_RICE_north_atlantic_environmental_info"
 	# 		container = "dynamic_content_widget"
	# 	}
	# }
	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_abandonment"
	}
	option = {
		name = north_atlantic.0006.a
		custom_description_no_bullet = {
			text = north_atlantic.0006.tooltip
		}
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}
}



# Global Economic Changes notification
north_atlantic.0007 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0007.t
	desc = north_atlantic.0007.desc
	theme = death
	# trigger = {
	# 	is_ai = no
	# 	has_global_variable = RICE_greenland_socio_economic_change_warning
 	# }
	override_background = { reference = RICE_greenland_icebergs }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_abandonment"
	}
	option = {
		name = north_atlantic.0007.a
		custom_description_no_bullet = {
			text = north_atlantic.0007.tooltip
		}
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}
}




# GREENLAND INTRO for people who aren't in the struggle region
north_atlantic.0008 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0008.t
	desc = north_atlantic.0008.desc
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_greenland_struggle_start }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_integration"
		ordered_in_global_list = {
			variable = RICE_north_atlantic_erik_the_red
			save_scope_as = erik
		}
	}

	option = {
		name = north_atlantic.0008.a
		custom_tooltip = north_atlantic.0008.tooltip
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}

}



# Greenland collapses
north_atlantic.0009 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0009.t
	desc = north_atlantic.0009.desc
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_greenland_icebergs }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_abandonment"
		ordered_in_global_list = {
			variable = RICE_north_atlantic_erik_the_red
			save_scope_as = erik
		}
	}

	option = {
		name = north_atlantic.0009.a
		custom_tooltip = north_atlantic.0009.tooltip
		RICE_greenland_struggle_collapse_ending_tooltip_effect = yes
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_view_close"
	}

	after = {
		hidden_effect = {
			RICE_greenland_struggle_abandonment_ending_compensation_effect = yes
		}
	}

}



# Vinland discovery notification
north_atlantic.0010 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0010.t
	desc = north_atlantic.0010.desc
	theme = realm
	override_background = { reference = RICE_greenland_struggle_vinland }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_integration"
		ordered_in_global_list = {
			variable = RICE_north_atlantic_leif_erikson_equivalent
			save_scope_as = leif
		}
		# create_character = {
		# 	location = root.capital_province
		# 	template = random_barrel_character
		# 	save_scope_as = leif
		# }
	}
	option = {
		name = north_atlantic.0010.a

		custom_tooltip = north_atlantic.0010.tooltip.1

		if = {
			limit = {
				struggle:RICE_greenland_struggle = { is_struggle_phase = struggle_RICE_greenland_phase_settlement }
			}
			custom_tooltip = north_atlantic.0010.tooltip.2
		}
		else_if = {
			limit = {
				struggle:RICE_greenland_struggle = { is_struggle_phase = struggle_RICE_greenland_phase_integration }
			}
			custom_tooltip = north_atlantic.0010.tooltip.2
		}
		else_if = {
			limit = {
				struggle:RICE_greenland_struggle = { is_struggle_phase = struggle_RICE_greenland_phase_subsistence }
			}
			custom_tooltip = north_atlantic.0010.tooltip.3
		}

		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}
}




# Western Settlement is abandoned
north_atlantic.0011 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0011.t
	desc = north_atlantic.0011.desc
	theme = death
	# trigger = {
	# 	is_ai = no
	# 	has_global_variable = RICE_greenland_eastern_settlement_abandoned
 	# }
	override_background = { reference = RICE_greenland_icebergs }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_abandonment"
	}
	option = {
		name = north_atlantic.0011.a
		custom_tooltip = north_atlantic.0011.tooltip.resilience
		custom_tooltip = north_atlantic.0011.tooltip.networks
		custom_tooltip = north_atlantic.0011.tooltip.exile_send_courtier
		custom_description_no_bullet = {
			text = north_atlantic.0011.tooltip
		}
		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}
}



# Give the yearly resources since it doesn't work in effects for some reason
north_atlantic.0012 = {
	type = character_event
	hidden = yes

	immediate = {
		# Need to preset the values, or else the interface message won't display correctly for whatever reason
		set_variable = {
			name = RICE_north_atlantic_add_gold_value
			value = {
				value = 1
				add = {
					integer_range = {
						min = 0
						max = RICE_greenland_annual_gold_max_value
					}
				}
			}
		}
		set_variable = {
			name = RICE_north_atlantic_add_prestige_value
			value = {
				value = 0
				add = {
					integer_range = {
						min = 0
						max = RICE_greenland_annual_prestige_max_value
					}
				}
			}
		}
		set_variable = {
			name = RICE_north_atlantic_add_piety_value
			value = {
				value = 0
				add = {
					integer_range = {
						min = 0
						max = RICE_greenland_annual_piety_max_value
					}
				}
			}
		}
		set_variable = {
			name = RICE_north_atlantic_subtract_gold_value
			value = {
				value = 0
				add = {
					integer_range = {
						min = 0
						max = RICE_greenland_annual_gold_min_value
					}
				}
			}
		}
		set_variable = {
			name = RICE_north_atlantic_subtract_prestige_value
			value = {
				value = 0
				add = {
					integer_range = {
						min = RICE_greenland_annual_prestige_min_value
						max = 0
					}
				}
			}
		}
		set_variable = {
			name = RICE_north_atlantic_subtract_piety_value
			value = {
				value = 0
				add = {
					integer_range = {
						min = RICE_greenland_annual_piety_min_value
						max = 0
					}
				}
			}
		}
		send_interface_message = {
			type = event_generic_neutral
			title = RICE_greenland_values_notification.title
			if = {
				limit = {
					NOT = { has_global_variable = RICE_north_atlantic_vinland_discovered }
				}
				custom_description_no_bullet = {
					text = RICE_greenland_values_notification.no_vinland.tooltip
				}
			}
			else = {
				custom_description_no_bullet = {
					text = RICE_greenland_values_notification.tooltip
				}				
			}
			if = {
				limit = {						
					exists = house
					house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
				}
				custom_description_no_bullet = {
					text = RICE_greenland_values_notification.estate.tooltip
				}
				# VALUES ARE NOT DISPLAYING CORRECTLY FOR SOME REASON
				# Chance of gold loss depending on phase and Greenland's Networks
				# Resilience affects how much is actually lost
				random_list = {
					10 = {
						modifier = {
							add = {
								value = RICE_greenland_resilience_min_calc_value
								multiply = -0.1
							}
						}
						modifier = {
							exists = struggle:RICE_greenland_struggle
							struggle:RICE_greenland_struggle = {
								is_struggle_phase = struggle_RICE_greenland_phase_subsistence
							}	
							add = 50							
						}
						modifier = {
							exists = struggle:RICE_greenland_struggle
							struggle:RICE_greenland_struggle = {
								is_struggle_phase = struggle_RICE_greenland_phase_marginalization
							}	
							add = 100							
						}
						remove_short_term_gold = var:RICE_north_atlantic_subtract_gold_value
					}
					90 = {
						modifier = {
							OR = {
								AND = {
									exists = struggle:RICE_greenland_struggle
									struggle:RICE_greenland_struggle = {
										is_struggle_phase = struggle_RICE_greenland_phase_integration
									}
								}
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
							add = 250							
						}
						modifier = {
							exists = struggle:RICE_greenland_struggle
							struggle:RICE_greenland_struggle = {
								is_struggle_phase = struggle_RICE_greenland_phase_settlement
							}	
							add = 150							
						}
						add_gold = var:RICE_north_atlantic_add_gold_value
					}
				}
				random_list = {
					20 = {
						modifier = {
							add = {
								value = RICE_greenland_resilience_min_calc_value
								multiply = -0.1
							}
						}
						modifier = {
							exists = struggle:RICE_greenland_struggle
							struggle:RICE_greenland_struggle = {
								is_struggle_phase = struggle_RICE_greenland_phase_subsistence
							}	
							add = 50							
						}
						modifier = {
							exists = struggle:RICE_greenland_struggle
							struggle:RICE_greenland_struggle = {
								is_struggle_phase = struggle_RICE_greenland_phase_marginalization
							}	
							add = 100							
						}
						add_prestige = var:RICE_north_atlantic_subtract_prestige_value
					}
					80 = {
						modifier = {
							OR = {
								AND = {
									exists = struggle:RICE_greenland_struggle
									struggle:RICE_greenland_struggle = {
										is_struggle_phase = struggle_RICE_greenland_phase_integration
									}
								}
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
							add = 250							
						}
						modifier = {
							exists = struggle:RICE_greenland_struggle
							struggle:RICE_greenland_struggle = {
								is_struggle_phase = struggle_RICE_greenland_phase_settlement
							}	
							add = 150							
						}
						add_prestige = var:RICE_north_atlantic_add_prestige_value
					}					
				}
				random_list = {
					20 = {
						modifier = {
							add = {
								value = RICE_greenland_resilience_min_calc_value
								multiply = -0.1
							}
						}
						modifier = {
							exists = struggle:RICE_greenland_struggle
							struggle:RICE_greenland_struggle = {
								is_struggle_phase = struggle_RICE_greenland_phase_subsistence
							}	
							add = 50							
						}
						modifier = {
							exists = struggle:RICE_greenland_struggle
							struggle:RICE_greenland_struggle = {
								is_struggle_phase = struggle_RICE_greenland_phase_marginalization
							}	
							add = 100							
						}
						add_piety = var:RICE_north_atlantic_subtract_piety_value
					}
					80 = {
						modifier = {
							OR = {
								AND = {
									exists = struggle:RICE_greenland_struggle
									struggle:RICE_greenland_struggle = {
										is_struggle_phase = struggle_RICE_greenland_phase_integration
									}
								}
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
							add = 250							
						}
						modifier = {
							exists = struggle:RICE_greenland_struggle
							struggle:RICE_greenland_struggle = {
								is_struggle_phase = struggle_RICE_greenland_phase_settlement
							}	
							add = 150							
						}
						add_piety = var:RICE_north_atlantic_add_piety_value
					}					
				}
			}
		}
		if = {
			limit = { has_variable = RICE_north_atlantic_add_gold_value }
			remove_variable = RICE_north_atlantic_add_gold_value
		}	
		if = {
			limit = { has_variable = RICE_north_atlantic_add_prestige_value }
			remove_variable = RICE_north_atlantic_add_prestige_value
		}	
		if = {
			limit = { has_variable = RICE_north_atlantic_add_piety_value }
			remove_variable = RICE_north_atlantic_add_piety_value
		}	
		if = {
			limit = { has_variable = RICE_north_atlantic_subtract_gold_value }
			remove_variable = RICE_north_atlantic_subtract_gold_value
		}	
		if = {
			limit = { has_variable = RICE_north_atlantic_subtract_prestige_value }
			remove_variable = RICE_north_atlantic_subtract_prestige_value
		}	
		if = {
			limit = { has_variable = RICE_north_atlantic_subtract_piety_value }
			remove_variable = RICE_north_atlantic_subtract_piety_value
		}	
	}
}



# Phase change behind the scenes stuff
north_atlantic.0013 = {
	hidden = yes
	scope = none
	scope = struggle

	trigger = { # Should not need this, but, redundancy check! -h
		exists = struggle:RICE_greenland_struggle
	}

	immediate = {
		
		if = {
			limit = { root = { is_struggle_phase = struggle_RICE_greenland_phase_marginalization } }
			# Remove walrus hunt modifiers
			random_county_in_region = {
				region = RICE_greenland_struggle_region
				limit = {
					has_county_modifier = RICE_north_atlantic_walrus_carving_workshop_inside_region
				}
				save_scope_as = inside_county
				remove_county_modifier = RICE_north_atlantic_walrus_carving_workshop_inside_region
				remove_list_global_variable = {
					name = unavailable_unique_decisions
					target = flag:RICE_north_atlantic_walrus_scandinavia_flag
				}
				holder = {
					trigger_event = north_atlantic.0025
				}
			}
		}
		
		if = {
			limit = { root = { is_struggle_phase = struggle_RICE_greenland_phase_marginalization } }
			# Remove walrus hunt modifiers
			random_county_in_region = {
				region = world_europe
				limit = {
					has_county_modifier = RICE_north_atlantic_walrus_carving_workshop_outside_region
				}
				save_scope_as = outside_county
				remove_county_modifier = RICE_north_atlantic_walrus_carving_workshop_outside_region
				remove_list_global_variable = {
					name = unavailable_unique_decisions
					target = flag:RICE_north_atlantic_walrus_europe_flag
				}
				holder = {
					trigger_event = north_atlantic.0026
				}
			}
		}

	}

}

# The Arrival of the Inuit
north_atlantic.0014 = {
	type = character_event
	title = north_atlantic.0014.t
	desc = north_atlantic.0014.desc
	theme = RICE_theme_north_atlantic_greenland

	# trigger = {
	# 	NOT = { has_global_variable = RICE_greenland_inuit_are_here }
	# }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_integration"
		# Save scopes
		culture:inuit = {
			save_scope_as = inuit
		}
		culture:dorset = {
			save_scope_as = dorset
		}
		title:d_iceland = {
			save_scope_as = iceland
		}
	}

	option = {
		name = north_atlantic.0014.a
		custom_tooltip = north_atlantic.0014.a.tooltip
	}

}

# Vinland outposts fail
north_atlantic.0015 = {
	scope = none
	hidden = yes

	immediate = {
		# Reset the number of outposts in Vinland
		set_global_variable = {
			name = RICE_north_atlantic_vinland_outposts
			value = 0
		}
		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
			}
			struggle:RICE_greenland_struggle = {
				activate_struggle_catalyst = catalyst_RICE_vinland_settlements_abandoned
			}
		}
		# Reduce Viability
		random_list = {
			10 = {
				change_global_variable = {
					name = RICE_vinland_viability
					subtract = 8
				}
				set_global_variable = {
					name = RICE_viability_vinland_fail_value_temp
					value = 8
					days = 1
				}
			}
			10 = {
				change_global_variable = {
					name = RICE_vinland_viability
					subtract = 10
				}
				set_global_variable = {
					name = RICE_viability_vinland_fail_value_temp
					value = 10
					days = 1
				}
			}
			10 = {
				change_global_variable = {
					name = RICE_vinland_viability
					subtract = 12
				}
				set_global_variable = {
					name = RICE_viability_vinland_fail_value_temp
					value = 12
					days = 1
				}
			}
			10 = {
				change_global_variable = {
					name = RICE_vinland_viability
					subtract = 16
				}
				set_global_variable = {
					name = RICE_viability_vinland_fail_value_temp
					value = 16
					days = 1
				}
			}
			10 = {
				change_global_variable = {
					name = RICE_vinland_viability
					subtract = 20
				}
				set_global_variable = {
					name = RICE_viability_vinland_fail_value_temp
					value = 20
					days = 1
				}
			}
		}
		every_ruler = {
			limit = {
				exists = dynasty
				is_dynast = yes
				dynasty = {					
					#OR = {
						has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
					#	has_dynasty_modifier = RICE_north_atlantic_vinland_settlement
					#}	
					#has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
					#has_dynasty_modifier = RICE_north_atlantic_vinland_settlement	
				}
			}
			dynasty = {
				remove_dynasty_modifier = RICE_north_atlantic_vinland_outpost
			}
			if = {
				limit = {
					is_ai = no
				}
				trigger_event = north_atlantic.0016
			}
			# This is removed normally per above
			else_if = {
				limit = {
					any_owned_story = { story_type = RICE_story_cycle_north_atlantic_support_vinland }
				}
				random_owned_story = {
					limit = {
						story_type = RICE_story_cycle_north_atlantic_support_vinland
					}
					end_story = yes
				}
			}
			# every_dynasty_member = {
			# 	limit = {
			# 		is_ai = no
			# 	}
			# 	trigger_event = north_atlantic.0016
			# }
			# # For AI dynasty members currently supporting Vinland - if they are not AI, the event triggered for non-AI players takes care of it
			# every_dynasty_member = {
			# 	limit = {
			# 		is_ai = yes
			# 		any_owned_story = { story_type = RICE_story_cycle_north_atlantic_support_vinland }
			# 	}
			# 	random_owned_story = {
			# 		limit = {
			# 			story_type = RICE_story_cycle_north_atlantic_support_vinland
			# 		}
			# 		end_story = yes
			# 	}
			# }
		}		
	}

	after = {
		# Technically global variable will self-destruct after a day, but have to put this here or else error log will hate me
		if = {
			limit = {
				has_global_variable = RICE_viability_vinland_fail_value_temp
			}
			remove_global_variable = RICE_viability_vinland_fail_value_temp
		}
	}
}


# Vinland fails
north_atlantic.0016 = {
	type = character_event
	title = north_atlantic.0016.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					any_owned_story = { story_type = RICE_story_cycle_north_atlantic_support_vinland }
				}
				desc = north_atlantic.0016.desc.intro.support
			}
			desc = north_atlantic.0016.desc.intro
		}
		desc = north_atlantic.0016.desc
	}
	theme = RICE_theme_north_atlantic_vinland_outpost

	right_portrait = {
		character = root
		animation = sadness
	}

	immediate = {
		custom_tooltip = north_atlantic.0016.tooltip
		show_as_tooltip = {
			dynasty = {
				remove_dynasty_modifier = RICE_north_atlantic_vinland_outpost
			}
		}		
		if = {
			limit = {
				# If you're in the middle of sending support to Vinland, the ships return home
				any_owned_story = { story_type = RICE_story_cycle_north_atlantic_support_vinland }
			}
			custom_tooltip = north_atlantic.0016.support.tooltip
		}
	}

	option = {
		name = north_atlantic.0016.a
	}

	after = {		
		if = {
			limit = {
				# If you're in the middle of sending support to Vinland, the ships return home
				any_owned_story = { story_type = RICE_story_cycle_north_atlantic_support_vinland }
			}
			random_owned_story = {
				limit = {
					story_type = RICE_story_cycle_north_atlantic_support_vinland
				}
				end_story = yes
			}
		}
	}

}




# Inuit incorporation of ideas notification
north_atlantic.0017 = {
	type = character_event
	title = north_atlantic.0017.t
	desc = north_atlantic.0017.desc
	theme = RICE_theme_north_atlantic_greenland

	right_portrait = {
		character = scope:adopter
		animation = personality_bold
	}

	immediate = {
		show_as_tooltip = {
			scope:adopter = {
				RICE_north_atlantic_incorporate_inuit_ideas_effect = yes
			}
		}
		custom_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_effect_tooltip_1
		custom_tooltip = RICE_north_atlantic_incorporate_inuit_ideas_effect_tooltip_2
	}

	option = {
		name = north_atlantic.0017.a
	}

}




# Arrive at the Icelandic hot springs
north_atlantic.0018 = {
	type = activity_event
	title = north_atlantic.0018.t
	desc = north_atlantic.0018.desc
	theme = RICE_theme_north_atlantic_iceland
	
	right_portrait = {
		character = root
		animation = personality_content
	}

	immediate = {
		add_character_flag = is_naked
		scope:activity = {
			activity_location = { save_scope_as = location }
		}
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = RICE_hot_springs_visit_type_public
					}
				}
			}
			set_variable = {
				name = RICE_hot_springs_visit_special_type
				value = flag:public
				days = 1
			}
		}
		else = {			
			set_variable = {
				name = RICE_hot_springs_visit_special_type
				value = flag:private
				days = 1
			}
		}
	}
	
	option = { # Ok
		name = north_atlantic.0018.a
		if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = RICE_hot_springs_visit_type_private
					}
				}
			}
			stress_impact = {
				base = medium_stress_impact_loss
				lazy = minor_stress_impact_loss
				calm = minor_stress_impact_loss
			}	
		}
		else_if = {
			limit = {
				scope:activity = {
					has_activity_option = {
						category = special_type
						option = RICE_hot_springs_visit_type_public
					}
				}
			}
			stress_impact = {
				base = minor_stress_impact_loss
				lazy = minor_stress_impact_loss
				calm = minor_stress_impact_loss
			}
			add_prestige = 50
		}
		if = {
			limit = {
				NOT = {
					scope:activity.activity_location = root.capital_province
				}
			}
			set_variable = {
				name = RICE_hot_springs_visit_iceland_non_capital
				days = 1
			}
			add_prestige = 50
		}
	}
	
	after = {
		# RICE_hot_springs_memory_effect = yes
		set_variable = {
			name = RICE_hot_springs_visit_special_location
			value = flag:iceland
			days = 1
		}
		if = {
			limit = { has_character_flag = is_naked }
			remove_character_flag = is_naked
		}
		scope:activity = {
			every_attending_character = {
				limit = { NOT = { this = scope:host } }
				custom = EVERY_ACTIVITY_PARTICIPANT_EFFECT
				stress_impact = {
					base = minor_stress_impact_loss
				}
			}
			hidden_effect = { skip_activity_phase = yes }
		}
	}	
}





# Start travel - Icelandic Hot Springs
north_atlantic.0019 = {
	type = character_event
	title = north_atlantic.0019.t
	desc = north_atlantic.0019.desc
	theme = travel
	override_background = { reference = RICE_background_north_atlantic_iceland }
	
	left_portrait = {
		character = root
		animation = personality_content
	}

	trigger = {
		is_available_travelling = yes
		is_landed = yes
		exists = involved_activity
		involved_activity = {
			has_activity_type = activity_RICE_hot_springs_visit
			activity_location = { geographical_region = custom_iceland }
		}
	}
	
	option = { # Ok
		name = north_atlantic.0019.a
	}	
}





######################################################################################
# 
# MISC DECISIONS
# 
# north_atlantic.0020-north_atlantic.0029
# 
######################################################################################


# Establishing an Estate
north_atlantic.0020 = {
	type = character_event
	title = north_atlantic.0020.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = scope:establisher
				}
				desc = north_atlantic.0020.desc.establisher
			}
			desc = north_atlantic.0020.desc.relative
		}
	}
	theme = RICE_theme_north_atlantic_greenland_farm

	left_portrait = {
		character = scope:establisher
		animation = personality_bold
	}
	right_portrait = {
		character = root
		trigger = { NOT = { root = scope:establisher } }
	}

	immediate = {
		#play_music_cue = "mx_RICE_greenland_struggle_integration"
		play_music_cue = "mx_cue_low_key_positive"
		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
			}	
			struggle:RICE_greenland_struggle = {
				activate_struggle_catalyst = {
					catalyst = catalyst_RICE_establish_estate_greenland
					character = root
				}
			}
		}	
		show_as_tooltip = {
			house = {
				add_house_modifier = {
					modifier = RICE_north_atlantic_greenland_family_estate
				}
			}
			dynasty = {
				add_dynasty_prestige = 100
			}
			scope:establisher = {
				add_prestige = 200
			}
		}
	}

	widget = {
		gui = "event_window_widget_RICE_progressbars_greenland"
		container = "custom_widgets_container"
	}

	option = {
		name = north_atlantic.0020.a
		#custom_description_no_bullet = {
		#	text = RICE_socotra_indian_ocean_legacy_2_effect_1
		#}
	}

}


# Attracting Greenland immigrants
north_atlantic.0021 = {
	type = character_event
	title = north_atlantic.0021.t
	desc = {
		desc = north_atlantic.0021.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					exists = scope:immigrant
				}
				desc = north_atlantic.0021.desc.immigrant
			}
		}
	}
	theme = RICE_theme_north_atlantic_port

	left_portrait = {
		character = root
		animation = personality_forgiving
	}
	right_portrait = {
		character = scope:immigrant
		animation = throne_room_bow_1		
		trigger = { exists = scope:immigrant }
	}

	immediate = {
		
		character:RICE_greenlandic_deity_001 = {
			culture = {
				save_scope_as = greenlandic
			}
		}
		RICE_north_atlantic_attract_greenland_immigrants_effect = yes
		random = {
			chance = 70
			random_held_title = {
				limit = { tier = tier_county }
				save_scope_as = county
			}
			create_character = {
				location = root.capital_province
				template = RICE_greenland_immigrant_template
				save_scope_as = immigrant
			}	
		}
	}

	option = {
		name = north_atlantic.0021.a
		trigger = {
			NOT = { exists = scope:immigrant }
		}
	}

	option = {
		name = north_atlantic.0021.b
		trigger = {
			exists = scope:immigrant
		}
		add_courtier = scope:immigrant
		add_prestige = 50
		pay_short_term_gold = {
			target = scope:immigrant
			gold = 50
		}
	}

	option = {
		name = north_atlantic.0021.c
		trigger = {
			exists = scope:immigrant
		}
		hidden_effect = {
			scope:immigrant = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

}






# Iceland is here to stay
north_atlantic.0022 = {
	type = character_event
	title = north_atlantic.0022.t
	desc = {
		desc = north_atlantic.0022.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					root = scope:althing_convener
				}
				desc = north_atlantic.0022.desc.convener
			}
			desc = north_atlantic.0022.desc.not_convener
		}
		desc = north_atlantic.0022.desc.ending
	}
	theme = RICE_theme_north_atlantic_iceland

	left_portrait = {
		character = scope:althing_convener
		animation = personality_honorable
	}
	right_portrait = {
		character = root
		trigger = { NOT = { root = scope:althing_convener } }
	}

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_integration"
		custom_tooltip = RICE_north_atlantic_form_iceland_effect_tooltip_1
		custom_tooltip = north_atlantic.0022.vassal.tooltip
		if = {
			limit = {
				root = scope:althing_convener
			}
			culture:icelandic = {
				reset_culture_creation_date = yes
			}
			RICE_iceland_decision_effect = yes
		}
		else = {
			show_as_tooltip = {
				scope:althing_convener = {
					RICE_iceland_decision_effect = yes
				}
			}
		}
		add_character_flag = RICE_icelandic_notification
	}

	option = {
		name = north_atlantic.0022.a
		
		every_ruler = {
			limit = {
				is_ai = no
				NOT = { root = scope:althing_convener }
				NOT = { has_character_flag = RICE_icelandic_notification }
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = custom_iceland
					}
				}
			}
			trigger_event = north_atlantic.0022
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_icelandic_notification
			}
			remove_character_flag = RICE_icelandic_notification
		}
	}

}




# Walrus carving center in Scandinavia
north_atlantic.0023 = {
	type = character_event
	title = north_atlantic.0023.t
	desc = north_atlantic.0023.desc
	theme = stewardship_wealth_focus
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = scope:walrus_person

	immediate = {
		scope:walrus_person = {
			show_as_tooltip = {
				RICE_north_atlantic_establish_walrus_workshop_inside_effect = yes
			}
		}
	}

	option = {
		name = north_atlantic.0023.a
	}

}


# Walrus carving center in Europe
north_atlantic.0024 = {
	type = character_event
	title = north_atlantic.0024.t
	desc = north_atlantic.0024.desc
	theme = stewardship_wealth_focus
	override_background = { reference = market }

	right_portrait = scope:walrus_person

	immediate = {
		scope:walrus_person = {
			show_as_tooltip = {
				RICE_north_atlantic_establish_walrus_workshop_outside_effect = yes
			}
		}
	}

	option = {
		name = north_atlantic.0024.a
	}

}



# Walrus carving center in Scandinavia disappears because of Marginalization phase
north_atlantic.0025 = {
	type = character_event
	title = north_atlantic.0025.t
	desc = north_atlantic.0025.desc
	theme = stewardship_wealth_focus
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = {
		character = root
		animation = sadness
	}

	immediate = {
		scope:inside_county = {
			show_as_tooltip = {
				remove_county_modifier = RICE_north_atlantic_walrus_carving_workshop_inside_region
			}
		}
	}

	option = {
		name = north_atlantic.0025.a
		custom_tooltip = north_atlantic.0025.tooltip
	}

}


# Walrus carving center in Europe
north_atlantic.0026 = {
	type = character_event
	title = north_atlantic.0026.t
	desc = north_atlantic.0026.desc
	theme = stewardship_wealth_focus
	override_background = { reference = market }

	right_portrait = {
		character = root
		animation = sadness
	}

	immediate = {
		scope:outside_county = {
			show_as_tooltip = {
				remove_county_modifier = RICE_north_atlantic_walrus_carving_workshop_outside_region
			}
		}
	}

	option = {
		name = north_atlantic.0026.a
		custom_tooltip = north_atlantic.0026.tooltip
	}

}

# Establish the school at Skalholt
north_atlantic.0027 = {
	type = character_event
	title = north_atlantic.0027.t
	desc = north_atlantic.0027.desc
	theme = faith
	override_background = { reference = RICE_background_north_atlantic_iceland }

	right_portrait = {
		character = scope:isleifur
		animation = personality_zealous
	}

	immediate = {
		scope:isleifur = {
			show_as_tooltip = {
				RICE_skalholt_school_decision_effect = yes
			}
		}		
		add_character_flag = RICE_icelandic_notification_skalholt
	}

	option = {
		name = north_atlantic.0027.a
		
		every_ruler = {
			limit = {
				is_ai = no
				NOT = { root = scope:isleifur }
				NOT = { has_character_flag = RICE_icelandic_notification_skalholt }
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = custom_iceland
					}
				}
			}
			trigger_event = north_atlantic.0027
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_icelandic_notification_skalholt
			}
			remove_character_flag = RICE_icelandic_notification_skalholt
		}
	}

}



# Culture becomes involved in Greenland notification
north_atlantic.0028 = {
	type = character_event
	title = north_atlantic.0028.t
	desc = north_atlantic.0028.desc
	theme = RICE_theme_north_atlantic_greenland
	
	right_portrait = {
		character = root
		animation = personality_honorable
	}

	immediate = {
		if = {
			limit = {
				root = scope:greenland_colonizer
			}
			RICE_greenland_new_culture_involvement_effect = yes
		}
		else = {
			show_as_tooltip = {
				RICE_greenland_new_culture_involvement_effect = yes
			}
		}
	}

	option = { # ok
		name = north_atlantic.0028.a
	}
}


# Faith becomes involved in Greenland notification
north_atlantic.0029 = {
	type = character_event
	title = north_atlantic.0029.t
	desc = north_atlantic.0029.desc
	theme = RICE_theme_north_atlantic_greenland_farm
	override_icon = { reference = "gfx/interface/icons/event_types/type_faith.dds" }
	
	right_portrait = {
		character = root
		animation = personality_honorable
	}

	immediate = {
		if = {
			limit = {
				root = scope:greenland_colonizer
			}
			RICE_greenland_new_faith_involvement_effect = yes
		}
		else = {
			show_as_tooltip = {
				RICE_greenland_new_faith_involvement_effect = yes
			}
		}
	}

	option = { # ok
		name = north_atlantic.0029.a
	}
}



######################################################################################
# 
# MINOR EXPEDITIONS
# 
# north_atlantic.0030-north_atlantic.0089
# 
######################################################################################


# Choose someone to lead the expedition
north_atlantic.0030 = {
	type = character_event
	title = north_atlantic.0030.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_expedition_destination_pick = flag:helluland
				}
				desc = north_atlantic.0030.desc.helluland
			}
			triggered_desc = {
				trigger = {
					var:RICE_expedition_destination_pick = flag:markland
				}
				desc = north_atlantic.0030.desc.markland
			}
			triggered_desc = {
				trigger = {
					var:RICE_expedition_destination_pick = flag:vinland
				}
				desc = north_atlantic.0030.desc.vinland
			}
		}
		desc = north_atlantic.0030.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						exists = scope:candidate_1
						exists = scope:candidate_2
						exists = scope:candidate_3
					}
				}
				desc = north_atlantic.0030.desc.some_courtiers
			}
			desc = north_atlantic.0030.desc.no_courtiers
		}
	}
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = {
		character = root
		animation = personality_rational
	}
	lower_left_portrait = {
		character = scope:candidate_1
		trigger = { exists = scope:candidate_1 }
	}
	lower_center_portrait = {
		character = scope:candidate_2
		trigger = { exists = scope:candidate_2 }
	}
	lower_right_portrait = {
		character = scope:candidate_3
		trigger = { exists = scope:candidate_3 }
	}

	immediate = {
		add_character_flag = RICE_north_atlantic_ongoing_expedition

		if = { # Helluland
			limit = { var:RICE_expedition_destination_pick = flag:helluland }
			remove_short_term_gold = global_var:RICE_global_helluland_expedition_cost
		}

		else_if = { # Markland
			limit = { var:RICE_expedition_destination_pick = flag:markland }
			remove_short_term_gold = global_var:RICE_global_markland_expedition_cost
		}

		else_if = { # Vinland
			limit = { var:RICE_expedition_destination_pick = flag:vinland }
			remove_short_term_gold = global_var:RICE_global_vinland_expedition_cost
		}

		# See scripted_trigger valid_scandinavian_adventurer just in case
		every_courtier = {
			limit = {
				is_available_healthy_ai_adult = yes
				age <= 55 # Don't want someone too old who could die on the journey
				is_alive = yes
				is_ruler = no
				NOT = { is_councillor_of = root }
				# Will not inherit anything anytime soon
				OR = {					
					any_heir_title = { count = 0 }
					AND = {
						save_temporary_scope_as = potential
						any_heir_title = {
							place_in_line_of_succession = {
								target = scope:potential
								value >= 3
							}
						}
					}
				}
			}
			add_to_list = expedition_leader_candidates
		}

		if = {
			limit = {
				any_in_list = {
					list = expedition_leader_candidates
					count >= 1
					opinion = {
						target = root
						value > -25
					}
				}
			}
			random_in_list = {
				list = expedition_leader_candidates
				weight = {
					base = 10
					modifier = {
						has_trait = RICE_explorer
						add = 20
					}
					modifier = {
						has_trait = ambitious
						add = 5
					}
					modifier = {
						has_trait = content
						add = -5
					}
					modifier = {
						has_trait = brave
						add = 5
					}
					modifier = {
						has_trait = craven
						add = -5
					}
					modifier = {
						has_trait = diligent
						add = 5
					}
					modifier = {
						has_trait = lazy
						add = -5
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
				}
				save_scope_as = candidate_1
				add_character_flag = {
					flag = RICE_recent_expedition_candidate
					days = 120
				}
			}
		}

		if = {
			limit = {
				any_in_list = {
					list = expedition_leader_candidates
					count >= 2
				}
			}
			random_in_list = {
				list = expedition_leader_candidates
				limit = {
					exists = scope:candidate_1
					NOT = { this = scope:candidate_1 }
				}
				weight = {
					base = 10
					modifier = {
						has_trait = RICE_explorer
						add = 20
					}
					modifier = {
						has_trait = ambitious
						add = 5
					}
					modifier = {
						has_trait = content
						add = -5
					}
					modifier = {
						has_trait = brave
						add = 5
					}
					modifier = {
						has_trait = craven
						add = -5
					}
					modifier = {
						has_trait = diligent
						add = 5
					}
					modifier = {
						has_trait = lazy
						add = -5
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
				}
				save_scope_as = candidate_2
				add_character_flag = {
					flag = RICE_recent_expedition_candidate
					days = 120
				}
			}
		}

		if = {
			limit = {
				any_in_list = {
					list = expedition_leader_candidates
					count >= 3
				}
			}
			random_in_list = {
				list = expedition_leader_candidates
				limit = {
					exists = scope:candidate_1
					exists = scope:candidate_2
					NOT = { this = scope:candidate_1 }
					NOT = { this = scope:candidate_2 }
				}
				weight = {
					base = 10
					modifier = {
						has_trait = RICE_explorer
						add = 20
					}
					modifier = {
						has_trait = ambitious
						add = 5
					}
					modifier = {
						has_trait = content
						add = -5
					}
					modifier = {
						has_trait = brave
						add = 5
					}
					modifier = {
						has_trait = craven
						add = -5
					}
					modifier = {
						has_trait = diligent
						add = 5
					}
					modifier = {
						has_trait = lazy
						add = -5
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
				}
				save_scope_as = candidate_3
				add_character_flag = {
					flag = RICE_recent_expedition_candidate
					days = 120
				}
			}
		}

	}

	option = {
		name = north_atlantic.0030.a
		trigger = {
			exists = scope:candidate_1
		}
		scope:candidate_1 = {
			#save_scope_as = RICE_expedition_leader_choice
			add_prestige = 100
			add_character_flag = {
				flag = planning_an_activity
				days = 180
			}
			add_character_flag = {
				flag = blocked_from_leaving
				years = 4 # Little extra buffer just in case
			}
		}
		set_variable = { # For use in the Story
			name = RICE_expedition_leader_choice
			value = scope:candidate_1
		}
	}

	option = {
		name = north_atlantic.0030.b
		trigger = {
			exists = scope:candidate_2
		}
		scope:candidate_2 = {
			#save_scope_as = RICE_expedition_leader_choice
			add_prestige = 100
			add_character_flag = {
				flag = planning_an_activity
				days = 180
			}
			add_character_flag = {
				flag = blocked_from_leaving
				years = 4 # Little extra buffer just in case
			}
		}
		set_variable = { # For use in the Story
			name = RICE_expedition_leader_choice
			value = scope:candidate_2
		}
	}

	option = {
		name = north_atlantic.0030.c
		trigger = {
			exists = scope:candidate_3
		}
		scope:candidate_3 = {
			#save_scope_as = RICE_expedition_leader_choice
			add_prestige = 100
			add_character_flag = {
				flag = planning_an_activity
				days = 180
			}
			add_character_flag = {
				flag = blocked_from_leaving
				years = 4 # Little extra buffer just in case
			}
		}
		set_variable = { # For use in the Story
			name = RICE_expedition_leader_choice
			value = scope:candidate_3
		}
	}

	option = {
		name = north_atlantic.0030.d
		trigger = {
			is_ai = no
		}
		custom_tooltip = north_atlantic.0030.d.tooltip
	}

	after = {		
		create_story = RICE_story_cycle_north_atlantic_expedition
	}

}


# Accept the offer
north_atlantic.0031 = {
	type = letter_event
	opening = {
		desc = north_atlantic.0031.opening
	}
	desc = north_atlantic.0031.desc
	sender = scope:recipient
	
	immediate = {
		scope:recipient = {
			add_prestige = 100
		}
	}

	option = { # Great
		name = north_atlantic.0031.a
		custom_tooltip = north_atlantic.0031.tooltip
	}
}


# Refuse the offer
north_atlantic.0032 = {
	type = letter_event
	opening = {
		desc = north_atlantic.0032.opening
	}
	desc = north_atlantic.0032.desc
	sender = scope:recipient
	
	immediate = {
		add_prestige = -50
		scope:recipient = {
			reverse_add_opinion = {
				target = scope:actor
				modifier = rejected_opinion
			}
		}
	}

	option = { # Oh no
		name = north_atlantic.0032.a
		custom_tooltip = north_atlantic.0032.tooltip
	}
}




# Expedition begins
north_atlantic.0033 = {
	type = character_event
	title = north_atlantic.0033.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.0033.desc.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.0033.desc.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.0033.desc.vinland
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_expedition_leader_generated
				}
				desc = north_atlantic.0033.desc.custom_leader
			}
			desc = north_atlantic.0033.desc.picked_leader
		}
		desc = north_atlantic.0033.desc		
	}
	theme = RICE_theme_north_atlantic_port

	left_portrait = root
	right_portrait = {
		character = scope:leader
		animation = personality_honorable
	}

	immediate = {
		#add_character_flag = RICE_expedition_underway
		if = {
			limit = {
				scope:story = {
					NOT = { exists = var:RICE_expedition_leader }
				}
			}
			# Generate the expedition leader if none exists
			create_character = {
				employer = root
				template = RICE_expedition_crew_member_template
				save_scope_as = leader
			}
			add_character_flag = RICE_expedition_leader_generated
			scope:story = {
				set_variable = {
					name = RICE_expedition_leader
					value = scope:leader
				}
			}
		}
		# Prioritize capital if it is coastal
		if = {
			limit = {
				capital_county = {
					is_coastal_county = yes
				}
			}
			capital_province = { save_scope_as = province }
		}
		# If capital isn't coastal, find a county/province that does
		else_if = {
			limit = {
				any_realm_province = {
					is_coastal = yes
				}
			}
			random_realm_province = {
				limit = {
					is_coastal = yes
				}
				save_scope_as = province
			}
		}
		# Failsafe in case nothing is found that is coastal
		else = {
			capital_province = { save_scope_as = province }
		}
	}

	option = {
		name = north_atlantic.0033.a
		custom_tooltip = north_atlantic.0033.tooltip
		scope:leader = {
			add_trait = RICE_exploring_western_seas
			add_character_flag = {
				flag = planning_an_activity
				days = 180 # Failsafe in case the flag doesn't get removed later for some reason
			}
		}
		# show_as_tooltip = {
		# 	scope:leader = {
		# 		add_trait = RICE_exploring_western_seas
		# 	}
		# }
		# scope:province = {	
		# 	spawn_activity = {
		# 		owner = scope:leader
		# 		type = activity_north_atlantic_greenland_expedition
		# 	}	
		# }
	}

	after = {		
		if = {
			limit = {
				has_character_flag = RICE_expedition_leader_generated
			}
			remove_character_flag = RICE_expedition_leader_generated
		}
		# if = {
		# 	limit = {
		# 		has_character_flag = RICE_expedition_underway
		# 	}
		# 	remove_character_flag = RICE_expedition_underway
		# }
	}

}


# Expedition ends
north_atlantic.0034 = {
	type = character_event
	title = north_atlantic.0034.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.0034.desc.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.0034.desc.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.0034.desc.vinland
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:leader = {
						is_alive = no
					}
				}
				desc = north_atlantic.0034.desc.leader_dead
			}
			desc = north_atlantic.0034.desc.leader_not_dead
		}	
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_expedition_result = flag:success
				}
				desc = north_atlantic.0034.desc.success
			}
			triggered_desc = {
				trigger = {
					var:RICE_expedition_result = flag:failure
				}
				desc = north_atlantic.0034.desc.failure
			}
		}	
	}
	theme = RICE_theme_north_atlantic_port

	left_portrait = {
		character = root
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_expedition_result = flag:failure
				}
			}
			animation = disapproval
		}
		animation = happiness
	}
	right_portrait = {
		character = scope:leader
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_expedition_result = flag:failure
				}
			}
			animation = shame
		}
		animation = personality_bold
	}
	artifact = { # To display the artifact in the event-window
		target = scope:native_american_artifact
		position = lower_center_portrait
		trigger = { exists = scope:native_american_artifact }
	}

	immediate = {
		RICE_display_america_expedition_success_view_count_effect = yes
		# Expedition is considered a failure
		if = {
			limit = {
				scope:story = {
					var:RICE_expedition_failure > var:RICE_expedition_success
				}
			}
			play_music_cue = "mx_cue_negative"
			set_variable = {
				name = RICE_expedition_result
				value = flag:failure
			}	
			add_prestige = 50		
		}
		# Expedition is considered a success
		else = {
			play_music_cue = "mx_cue_positive_effect"
			set_variable = {
				name = RICE_expedition_result
				value = flag:success
			}	
			add_prestige = 200
		}
		if = {
			limit = {
				scope:leader = {
					is_alive = yes
				}
			}
			if = {
				limit = {
					scope:leader = {
						has_trait = RICE_exploring_western_seas
					}
				}
				scope:leader = {
					remove_trait = RICE_exploring_western_seas					
				}
			}
			if = {
				limit = {
					scope:leader = {
						has_character_flag = planning_an_activity						
					}
				}
				scope:leader = {
					remove_character_flag = planning_an_activity						
				}
			}
			scope:leader = {
				RICE_north_atlantic_explorer_trait_or_experience_effect = yes
				add_prestige = 100
				# Maybe trigger event after?
			}
			# scope:leader.activity = {
			# 	complete_activity = yes
			# }
			if = {
				limit = {
					scope:leader = {
						has_character_flag = blocked_from_leaving
					}
				}
				scope:leader = {
					remove_character_flag = blocked_from_leaving
				}
			}
		}
		if = {
			limit = {
				scope:story.var:RICE_expedition_artifact_count >= 1
			}
			if = {
				limit = {
					NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					var:RICE_expedition_result = flag:success
				}
				RICE_create_arctic_artifact_effect = yes
			}
			else_if = {
				limit = {
					scope:story.var:RICE_expedition_destination = flag:vinland
					var:RICE_expedition_result = flag:success
				}
				RICE_create_native_american_artifact_effect = yes
			}
		}
		if = {
			limit = {
				exists = scope:story.var:RICE_resilience_increases
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				add = scope:story.var:RICE_expedition_random_resilience_number
			}
			set_variable = {
				name = RICE_resilience_value_temp
				value = scope:story.var:RICE_expedition_random_resilience_number
			}
			#custom_tooltip = north_atlantic.0034.tooltip.increase.resilience
		}
		else_if = {
			limit = {
				exists = scope:story.var:RICE_resilience_decreases
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				subtract = scope:story.var:RICE_expedition_random_resilience_number
			}
			set_variable = {
				name = RICE_resilience_value_temp
				value = scope:story.var:RICE_expedition_random_resilience_number
			}
			#custom_tooltip = north_atlantic.0034.tooltip.decrease.resilience
		}
		if = {
			limit = {
				exists = scope:story.var:RICE_networks_increases
			}
			change_global_variable = {
				name = RICE_greenland_networks
				add = scope:story.var:RICE_expedition_random_networks_number
			}
			set_variable = {
				name = RICE_networks_value_temp
				value = scope:story.var:RICE_expedition_random_networks_number
			}
			#custom_tooltip = north_atlantic.0034.tooltip.increase.networks
		}
		else_if = {
			limit = {
				exists = scope:story.var:RICE_networks_decreases
			}
			change_global_variable = {
				name = RICE_greenland_networks
				subtract = scope:story.var:RICE_expedition_random_networks_number
			}
			set_variable = {
				name = RICE_networks_value_temp
				value = scope:story.var:RICE_expedition_random_networks_number
			}
			#custom_tooltip = north_atlantic.0034.tooltip.decrease.networks
		}
		if = {
			limit = {
				exists = scope:story.var:RICE_viability_increases
			}
			change_global_variable = {
				name = RICE_vinland_viability
				add = scope:story.var:RICE_expedition_random_viability_number
			}
			set_variable = {
				name = RICE_viability_value_temp
				value = scope:story.var:RICE_expedition_random_viability_number
			}
			#custom_tooltip = north_atlantic.0034.tooltip.increase.viability
		}
		else_if = {
			limit = {
				exists = scope:story.var:RICE_viability_decreases
			}
			change_global_variable = {
				name = RICE_vinland_viability
				subtract = scope:story.var:RICE_expedition_random_viability_number
			}
			set_variable = {
				name = RICE_viability_value_temp
				value = scope:story.var:RICE_expedition_random_viability_number
			}
			#custom_tooltip = north_atlantic.0034.tooltip.decrease.viability
		}
	}

	option = {
		name = {
			trigger = { var:RICE_expedition_result = flag:failure }
			text = north_atlantic.0034.a.failure
		}
		name = {
			trigger = { var:RICE_expedition_result = flag:success }
			text = north_atlantic.0034.a.success
		}
		if = {
			limit = {
				var:RICE_expedition_result = flag:success
			}
			custom_tooltip = north_atlantic.0034.tooltip.success
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				if = {
					limit = {
						scope:story.var:RICE_expedition_destination = flag:helluland
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_successful_expedition_to_helluland
							character = root
						}
					}
				}
				else_if = {
					limit = {
						scope:story.var:RICE_expedition_destination = flag:markland
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_successful_expedition_to_markland
							character = root
						}
					}
				}
				else_if = {
					limit = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_successful_expedition_to_vinland
							character = root
						}
					}
				}
			}
		}
		else_if = {
			limit = {
				var:RICE_expedition_result = flag:failure
			}
			custom_tooltip = north_atlantic.0034.tooltip.failure
			stress_impact = {
				ambitious = miniscule_stress_impact_gain
				diligent = miniscule_stress_impact_gain
				greedy = miniscule_stress_impact_gain
			}
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				if = {
					limit = {
						scope:story.var:RICE_expedition_destination = flag:helluland
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_failed_expedition_to_helluland
							character = root
						}
					}
				}
				else_if = {
					limit = {
						scope:story.var:RICE_expedition_destination = flag:markland
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_failed_expedition_to_markland
							character = root
						}
					}
				}
				else_if = {
					limit = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_failed_expedition_to_vinland
							character = root
						}
					}
				}
			}
		}
		# Artifact
		if = {
			limit = {
				scope:story.var:RICE_expedition_artifact_count >= 1
			}
			show_as_tooltip = {
				scope:native_american_artifact = {
					set_owner = {
						target = root
					}
				}
			}			
		}
		# Modifiers
		if = {
			limit = {
				scope:story = {
					has_variable_list = RICE_expedition_modifiers
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:native_contacts
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_native_contacts
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:native_legends
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_native_legends
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:native_info
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_native_info
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:western_herbs
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_western_herbs
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:glorious_battle_americas
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_glorious_battle_americas
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:vinland_grapes_small
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_vinland_grapes_small
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:vinland_grapes_large
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_vinland_grapes_large
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:seal_meat
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_seal_meat
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:seal_blubber
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_seal_blubber
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:americas_fauna_knowledge
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_americas_fauna_knowledge
					years = 10
				}
			}
			if = {
				limit = {
					scope:story = {						
						is_target_in_variable_list = {
							name = RICE_expedition_modifiers
							target = flag:americas_flora_knowledge
						}
					}
				}
				add_character_modifier = {
					modifier = RICE_north_atlantic_expedition_americas_flora_knowledge
					years = 10
				}
			}
		}
		# Gold, Prestige, Piety
		if = {
			limit = {
				scope:story.var:RICE_expedition_gold_count >= 1
				#scope:story.var:RICE_expedition_gold_count >= scope:story.var:RICE_expedition_gold_loss_count
			}
			add_gold = { 25 RICE_expedition_gold_gain_max_value }
		}
		else_if = {
			limit = {
				scope:story.var:RICE_expedition_gold_loss_count >= 1
				#scope:story.var:RICE_expedition_gold_count < scope:story.var:RICE_expedition_gold_loss_count
			}
			remove_short_term_gold = { 1 RICE_expedition_gold_loss_max_value }
		}
		if = {
			limit = {
				scope:story.var:RICE_expedition_prestige_count >= 1
				scope:story.var:RICE_expedition_prestige_count >= scope:story.var:RICE_expedition_prestige_loss_count
			}
			if = {
				limit = {
					scope:story.var:RICE_expedition_prestige_count >= 3
				}
				add_prestige = { 25 300 }
			}
			else_if = {
				limit = {
					scope:story.var:RICE_expedition_prestige_count >= 2
				}
				add_prestige = { 25 200 }
			}
			else_if = {
				limit = {
					scope:story.var:RICE_expedition_prestige_count >= 1
				}
				add_prestige = { 25 100 }
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_expedition_prestige_loss_count >= 1
				scope:story.var:RICE_expedition_prestige_count < scope:story.var:RICE_expedition_prestige_loss_count
			}
			if = {
				limit = {
					scope:story.var:RICE_expedition_prestige_count >= 3
				}
				add_prestige = { -25 -250 }
			}
			else_if = {
				limit = {
					scope:story.var:RICE_expedition_prestige_count >= 2
				}
				add_prestige = { -25 -150 }
			}
			else_if = {
				limit = {
					scope:story.var:RICE_expedition_prestige_count >= 1
				}
				add_prestige = { -25 -50 }
			}
		}
		if = {
			limit = {
				scope:story.var:RICE_expedition_piety_count >= 1
				scope:story.var:RICE_expedition_piety_count >= scope:story.var:RICE_expedition_piety_loss_count
			}
			if = {
				limit = {
					scope:story.var:RICE_expedition_piety_count >= 3
				}
				add_piety = { 25 300 }
			}
			else_if = {
				limit = {
					scope:story.var:RICE_expedition_piety_count >= 2
				}
				add_piety = { 25 200 }
			}
			else_if = {
				limit = {
					scope:story.var:RICE_expedition_piety_count >= 1
				}
				add_piety = { 25 100 }
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_expedition_piety_loss_count >= 1
				scope:story.var:RICE_expedition_piety_count < scope:story.var:RICE_expedition_piety_loss_count
			}
			if = {
				limit = {
					scope:story.var:RICE_expedition_piety_count >= 3
				}
				add_piety = { -25 -250 }
			}
			else_if = {
				limit = {
					scope:story.var:RICE_expedition_piety_count >= 2
				}
				add_piety = { -25 -150 }
			}
			else_if = {
				limit = {
					scope:story.var:RICE_expedition_piety_count >= 1
				}
				add_piety = { -25 -50 }
			}
		}
		if = {
			limit = {
				exists = scope:story.var:RICE_resilience_increases
			}
			custom_tooltip = north_atlantic.0034.tooltip.increase.resilience
		}
		else_if = {
			limit = {
				exists = scope:story.var:RICE_resilience_decreases
			}
			custom_tooltip = north_atlantic.0034.tooltip.decrease.resilience
		}
		if = {
			limit = {
				exists = scope:story.var:RICE_networks_increases
			}
			custom_tooltip = north_atlantic.0034.tooltip.increase.networks
		}
		else_if = {
			limit = {
				exists = scope:story.var:RICE_networks_decreases
			}
			custom_tooltip = north_atlantic.0034.tooltip.decrease.networks
		}
		if = {
			limit = {
				exists = scope:story.var:RICE_viability_increases
			}
			custom_tooltip = north_atlantic.0034.tooltip.increase.viability
		}
		else_if = {
			limit = {
				exists = scope:story.var:RICE_viability_decreases
			}
			custom_tooltip = north_atlantic.0034.tooltip.decrease.viability
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		if = {
			limit = { has_variable = RICE_expedition_result }
			remove_variable = RICE_expedition_result
		}
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_expedition
			}
			end_story = yes
		}
	}

}





# Encounter a peaceful Native tribe
north_atlantic.0040 = {
	type = character_event
	title = north_atlantic.0040.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0040.desc
	}
	theme = diplomacy_foreign_affairs_focus
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = scope:leader
	right_portrait = scope:native_leader

	weight_multiplier = {
		base = 1		
		modifier = {
			factor = 1.5
			scope:story.var:RICE_expedition_destination = flag:helluland
		}
	}

	immediate = {
		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = RICE_native_chief_template
			save_scope_as = native_leader
			faith = root.faith
			random_culture = {
				culture:inuit = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						has_global_variable = RICE_greenland_inuit_are_here
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						NOT = { has_global_variable = RICE_greenland_inuit_are_here }
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 20 }
				}
				culture:innu = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 30 }
				}
				culture:east_cree = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:markland
					}
					weight = { base = 10 }
				}
				culture:mikmaq = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 20 }
				}
				culture:maliseet = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:passamaquoddy = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:penobscot = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:abenaki = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:beothuk = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 40 }
				}
				culture:laurentian = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 10 }
				}
			}
			after_creation = {
				# Set religion
				if = {
					limit = {
						OR = {
							culture = { has_cultural_pillar = heritage_inuit }
							culture = { has_cultural_pillar = heritage_paleo_inuit }
						}
					}
					set_character_faith = faith:inuit_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_iroquoian }
					}
					set_character_faith = faith:iroquoian_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_algonquian }
					}
					set_character_faith = faith:algonquian_pagan
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = { # Attempt to trade
		name = north_atlantic.0040.a
		custom_tooltip = north_atlantic.expedition.success_failure_counter_preview
		scope:leader = {
			duel = {
				skill = diplomacy
				value = 8
				10 = { # Failure
					#show_chance = no
					custom_tooltip = north_atlantic.0040.a.failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.75
					}
				}
				10 = { # Success
					#show_chance = no
					custom_tooltip = north_atlantic.0040.a.success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.75
					}
					root = {
						add_character_flag = RICE_expedition_event_success_flag
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		trigger_event = north_atlantic.0041
		custom_tooltip = north_atlantic.expedition.skill.diplomacy
	}
	option = {
		name = north_atlantic.0040.b
		custom_tooltip = north_atlantic.expedition.result.neutral
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
	}
	option = { # Try to steal and kidnap
		name = north_atlantic.0040.c
		custom_tooltip = north_atlantic.expedition.success_failure_counter_preview
		scope:leader = {
			duel = {
				skill = intrigue
				target = scope:native_leader
				#desc = north_atlantic.0040.c.failure
				3 = { # Failure
					#show_chance = no
					custom_tooltip = north_atlantic.0040.c.failure.battle
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.75
					}
					root = {
						add_character_flag = RICE_expedition_event_failure_flag_battle
					}
				}
				7 = { # Failure
					#show_chance = no
					custom_tooltip = north_atlantic.0040.c.failure.get_away
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.75
					}
					root = {
						add_character_flag = RICE_expedition_event_failure_flag_get_away
					}
				}
				7 = { # Success
					#show_chance = no
					custom_tooltip = north_atlantic.0040.c.success.steal
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.75
					}
					root = {
						add_character_flag = RICE_expedition_event_success_flag_steal
					}
				}
				3 = { # Success
					#show_chance = no
					custom_tooltip = north_atlantic.0040.c.success.kidnap
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.75
					}
					modifier = {
						add = 2
						has_game_rule = RICE_native_american_moderate
					}
					modifier = {
						add = 5
						has_game_rule = RICE_native_american_high
					}
					modifier = {
						add = 8
						has_game_rule = RICE_native_american_very_high
					}
					root = {
						add_character_flag = RICE_expedition_event_success_flag_kidnap
					}
				}
				# 1 = { # Success
				# 	#show_chance = no
				# 	custom_tooltip = north_atlantic.0040.c.success.kidnap_big
				# 	compare_modifier = {
				# 		value = scope:duel_value
				# 		multiplier = 1.1
				# 	}
				# 	add_character_flag = RICE_expedition_event_success_flag_kidnap_big
				# }
			}
		}
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		trigger_event = north_atlantic.0042
		custom_tooltip = north_atlantic.expedition.skill.intrigue
	}
}


# Trade with the native tribe
north_atlantic.0041 = {
	type = character_event
	title = north_atlantic.0041.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_expedition_event_success_flag
				}
				desc = north_atlantic.0041.desc.success
			}
			desc = north_atlantic.0041.desc.failure
		}
	}
	theme = diplomacy_foreign_affairs_focus
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		triggered_animation = {
			trigger = { root = { has_character_flag = RICE_expedition_event_success_flag } }
			animation = personality_greedy
		}
		triggered_animation = {
			trigger = { NOT = { root = { has_character_flag = RICE_expedition_event_success_flag } } }
			animation = anger
		}
	}
	right_portrait = {
		character = scope:native_leader
		triggered_animation = {
			trigger = { root = { has_character_flag = RICE_expedition_event_success_flag } }
			animation = personality_compassionate
		}
		triggered_animation = {
			trigger = { NOT = { root = { has_character_flag = RICE_expedition_event_success_flag } } }
			animation = disapproval
		}
	}

	immediate = {
		if = {
			limit = {
				root = { has_character_flag = RICE_expedition_event_success_flag }
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {
				NOT = { root = { has_character_flag = RICE_expedition_event_success_flag } }
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0041.a
		trigger = {
			has_character_flag = RICE_expedition_event_success_flag
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.artifact
		custom_tooltip = north_atlantic.expedition.result.modifiers
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_contacts
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}
	option = {
		name = north_atlantic.0041.b
		trigger = {
			NOT = { has_character_flag = RICE_expedition_event_success_flag }
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		# custom_tooltip = north_atlantic.expedition.success_failure_counter
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
		if = {
			limit = {
				has_character_flag = RICE_expedition_event_success_flag
			}
			remove_character_flag = RICE_expedition_event_success_flag
		}
	}

}

# Steal/kidnap from the native tribe
north_atlantic.0042 = {
	type = character_event
	window = duel_event
	title = north_atlantic.0042.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_expedition_event_failure_flag_battle
				}
				desc = north_atlantic.0042.desc.battle
			}
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_expedition_event_failure_flag_get_away
				}
				desc = north_atlantic.0042.desc.get_away
			}
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_expedition_event_success_flag_steal
				}
				desc = north_atlantic.0042.desc.steal
			}
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_expedition_event_success_flag_kidnap
				}
				desc = north_atlantic.0042.desc.kidnap
			}
		}
	}
	theme = battle
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		animation = aggressive_spear
	}
	right_portrait = {
		character = scope:native_leader
		triggered_animation = {
			trigger = {
				root = {
					NOT = {
						has_character_flag = RICE_expedition_event_failure_flag_battle
					}
				}
			}
			animation = shock
		}
		triggered_animation = {
			trigger = { root = { has_character_flag = RICE_expedition_event_failure_flag_battle } }
			animation = aggressive_spear
		}
	}
	# lower_center_portrait = {
	# 	character = scope:captive
	# 	trigger = { exists = scope:captive }
	# }
	immediate = {
		if = {
			limit = {
				OR = {
					has_character_flag = RICE_expedition_event_success_flag_steal
					has_character_flag = RICE_expedition_event_success_flag_kidnap
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {			
				OR = {
					has_character_flag = RICE_expedition_event_failure_flag_battle
					has_character_flag = RICE_expedition_event_failure_flag_get_away
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}	
		if = {
			limit = {
				has_character_flag = RICE_expedition_event_success_flag_kidnap
			}
			random_list = {
				35 = {
					create_character = {
						location = root.location
						template = RICE_native_child_generic_template
						faith = scope:native_leader.faith
						culture = scope:native_leader.culture
						save_scope_as = captive
					}
				}
				65 = {
					create_character = {
						location = root.location
						template = RICE_native_generic_template
						faith = scope:native_leader.faith
						culture = scope:native_leader.culture
						save_scope_as = captive
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes

	}

	option = {
		name = north_atlantic.0042.a
		trigger = {
			NOR = {
				has_trait = compassionate
				has_trait = just
				has_trait = generous
			}
			OR = {
				has_character_flag = RICE_expedition_event_success_flag_steal
				has_character_flag = RICE_expedition_event_success_flag_kidnap
			}
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.artifact
		custom_tooltip = north_atlantic.expedition.result.modifiers
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		if = {
			limit = {
				has_character_flag = RICE_expedition_event_success_flag_kidnap
			}
			add_courtier = scope:captive
		}
		# if = {
		# 	limit = {
		# 		has_character_flag = RICE_expedition_event_success_flag_kidnap
		# 	}
		# 	custom_tooltip = north_atlantic.expedition.result.courtier
		# }
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:glorious_battle_americas
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = {}
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}
	option = {
		name = north_atlantic.0042.b
		trigger = {
			OR = {
				has_trait = compassionate
				has_trait = just
				has_trait = generous
			}
			OR = {
				has_character_flag = RICE_expedition_event_success_flag_steal
				has_character_flag = RICE_expedition_event_success_flag_kidnap
			}
		}
		trait = compassionate
		trait = just
		trait = generous
		stress_impact = {
			compassionate = minor_stress_impact_gain
			just = minor_stress_impact_gain
			generous = minor_stress_impact_gain
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.artifact
		custom_tooltip = north_atlantic.expedition.result.modifiers
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		# if = {
		# 	limit = {
		# 		has_character_flag = RICE_expedition_event_success_flag_kidnap
		# 	}
		# 	custom_tooltip = north_atlantic.expedition.result.courtier
		# }
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:glorious_battle_americas
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = {}
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
		# custom_tooltip = north_atlantic.expedition.success_failure_counter
	}
	option = {
		name = north_atlantic.0042.c
		trigger = {
			OR = {
				has_character_flag = RICE_expedition_event_failure_flag_battle
				has_character_flag = RICE_expedition_event_failure_flag_get_away
			}
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		custom_tooltip = north_atlantic.expedition.result.piety.loss
		# custom_tooltip = north_atlantic.expedition.success_failure_counter
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
		if = {
			limit = {
				has_character_flag = RICE_expedition_event_success_flag_steal
			}
			remove_character_flag = RICE_expedition_event_success_flag_steal
		}
		if = {
			limit = {
				has_character_flag = RICE_expedition_event_success_flag_kidnap
			}
			remove_character_flag = RICE_expedition_event_success_flag_kidnap
		}
		if = {
			limit = {
				has_character_flag = RICE_expedition_event_failure_flag_battle
			}
			remove_character_flag = RICE_expedition_event_failure_flag_battle
		}
		if = {
			limit = {
				has_character_flag = RICE_expedition_event_failure_flag_get_away
			}
			remove_character_flag = RICE_expedition_event_failure_flag_get_away
		}
	}

}




# Encounter a lost Native who is alone
north_atlantic.0043 = {
	type = character_event
	title = north_atlantic.0043.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0043.desc
	}
	theme = stewardship_duty_focus
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = scope:leader
	right_portrait = {
		character = scope:native
		animation = sick
	}

	weight_multiplier = {
		base = 1		
		modifier = {
			factor = 1.5
			scope:story.var:RICE_expedition_destination = flag:helluland
		}
	}

	immediate = {
		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = RICE_native_generic_template
			save_scope_as = native
			faith = root.faith
			random_culture = {
				culture:inuit = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						has_global_variable = RICE_greenland_inuit_are_here
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						NOT = { has_global_variable = RICE_greenland_inuit_are_here }
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 20 }
				}
				culture:innu = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 30 }
				}
				culture:east_cree = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:markland
					}
					weight = { base = 10 }
				}
				culture:mikmaq = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 20 }
				}
				culture:maliseet = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:passamaquoddy = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:penobscot = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:abenaki = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:beothuk = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 40 }
				}
				culture:laurentian = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 10 }
				}
			}
			after_creation = {
				# Set religion
				if = {
					limit = {
						OR = {
							culture = { has_cultural_pillar = heritage_inuit }
							culture = { has_cultural_pillar = heritage_paleo_inuit }
						}
					}
					set_character_faith = faith:inuit_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_iroquoian }
					}
					set_character_faith = faith:iroquoian_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_algonquian }
					}
					set_character_faith = faith:algonquian_pagan
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = { # Attempt to help them
		name = north_atlantic.0043.a
		custom_tooltip = north_atlantic.expedition.success_failure_counter_preview
		scope:leader = {
			duel = {
				skill = diplomacy
				target = scope:native
				10 = { # Failure - they refuse help
					#show_chance = no
					custom_tooltip = north_atlantic.0043.a.failure.refuse
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.5
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_refuse
						}
					}
				}
				5 = { # Failure - they're not alone
					#show_chance = no
					custom_tooltip = north_atlantic.0043.a.failure.not_alone
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.5
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_not_alone
						}
					}
				}
				8 = { # Success - they accept help
					#show_chance = no
					custom_tooltip = north_atlantic.0043.a.success.accept
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.5
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_accept
						}
					}
				}
				5 = { # Success - they're not alone
					#show_chance = no
					custom_tooltip = north_atlantic.0043.a.success.not_alone
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.5
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_not_alone
						}
					}
				}
				2 = { # Success - they join you
					#show_chance = no
					custom_tooltip = north_atlantic.0043.a.success.join
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.5
					}
					modifier = {
						add = 2
						has_game_rule = RICE_native_american_moderate
					}
					modifier = {
						add = 5
						has_game_rule = RICE_native_american_high
					}
					modifier = {
						add = 8
						has_game_rule = RICE_native_american_very_high
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_join
						}
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		trigger_event = north_atlantic.0044
		custom_tooltip = north_atlantic.expedition.skill.diplomacy
	}

	option = { # Attempt to kidnap them
		name = north_atlantic.0043.b
		custom_tooltip = north_atlantic.expedition.success_failure_counter_preview
		scope:leader = {
			duel = {
				skill = intrigue
				target = scope:native
				10 = { # Failure - they escape
					#show_chance = no
					custom_tooltip = north_atlantic.0043.b.failure.escape
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.5
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_escape
						}
					}
				}
				5 = { # Failure - they're not alone
					#show_chance = no
					custom_tooltip = north_atlantic.0043.b.failure.not_alone
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.5
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_not_alone
						}
					}
				}
				12 = { # Success - local flees, but you loot their belongings
					#show_chance = no
					custom_tooltip = north_atlantic.0043.b.success.loot
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.5
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_loot
						}
					}
				}
				3 = { # Success - you capture them
					#show_chance = no
					custom_tooltip = north_atlantic.0043.b.success.capture
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.5
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_capture
						}
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		trigger_event = north_atlantic.0045
		custom_tooltip = north_atlantic.expedition.skill.intrigue
	}
	option = {
		name = north_atlantic.0043.c
		custom_tooltip = north_atlantic.expedition.result.neutral
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
	}
}



# Help the native
north_atlantic.0044 = {
	type = character_event
	title = north_atlantic.0044.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_refuse
				}
				desc = north_atlantic.0044.desc.refuse
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_not_alone
				}
				desc = north_atlantic.0044.desc.not_alone_bad
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_accept
				}
				desc = north_atlantic.0044.desc.accept
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_not_alone
				}
				desc = north_atlantic.0044.desc.not_alone_good
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_join
				}
				desc = north_atlantic.0044.desc.join
			}
		}
	}
	theme = friendly
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_refuse
				}
			}
			animation = sadness
		}
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_not_alone
				}
			}
			animation = shock
		}
		triggered_animation = {
			trigger = {
				root = {
					OR = {
						var:RICE_north_atlantic_episode_result = flag:success_accept
						var:RICE_north_atlantic_episode_result = flag:success_not_alone
						var:RICE_north_atlantic_episode_result = flag:success_join
					}
				}
			}
			animation = personality_forgiving
		}
	}
	right_portrait = {
		character = scope:native
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_refuse
				}
			}
			animation = disapproval
		}
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_not_alone
				}
			}
			animation = paranoid
		}
		triggered_animation = {
			trigger = {
				root = {
					OR = {
						var:RICE_north_atlantic_episode_result = flag:success_accept
						var:RICE_north_atlantic_episode_result = flag:success_not_alone
						var:RICE_north_atlantic_episode_result = flag:success_join
					}
				}
			}
			animation = personality_compassionate
		}
	}

	# GENERATE CAPTIVE AT END OF JOURNEY
	immediate = {

		if = {
			limit = {	
				OR = {
					var:RICE_north_atlantic_episode_result = flag:success_accept
					var:RICE_north_atlantic_episode_result = flag:success_not_alone
					var:RICE_north_atlantic_episode_result = flag:success_join
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					var:RICE_north_atlantic_episode_result = flag:failure_refuse
					var:RICE_north_atlantic_episode_result = flag:failure_not_alone
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}	
		RICE_display_america_expedition_success_view_count_effect = yes

	# 	if = {
	# 		limit = {
	# 			has_character_flag = RICE_expedition_event_success_flag_kidnap
	# 		}
	# 		create_character = {
	#			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
	# 			save_scope_as = native_captive
	# 			culture = scope:native_leader.culture
	# 			faith = scope:native_leader.faith
	# 			gender_female_chance = 50
	# 			random_traits = yes
	# 		}
	# 		hidden_effect = {
	# 			# To prevent them from doing weird stuff before the trip is over
	# 			scope:native_captive = {
	# 				add_trait = RICE_exploring_western_seas
	# 			}			
	# 		}
	# 	}

	}

	option = {
		name = north_atlantic.0044.a
		trigger = {
			OR = {
				var:RICE_north_atlantic_episode_result = flag:failure_refuse
				var:RICE_north_atlantic_episode_result = flag:failure_not_alone
			}
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
		# custom_tooltip = north_atlantic.expedition.success_failure_counter
	}

	option = {
		name = north_atlantic.0044.b
		trigger = {
			OR = {
				var:RICE_north_atlantic_episode_result = flag:success_accept
				var:RICE_north_atlantic_episode_result = flag:success_not_alone
			}
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.modifiers
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.piety
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_contacts
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}
	option = {
		name = north_atlantic.0044.c
		trigger = {
			NOR = {
				has_trait = paranoid
				has_trait = callous
				has_trait = arrogant
			}
			var:RICE_north_atlantic_episode_result = flag:success_join
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		add_courtier = scope:native		
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}
	option = {
		name = north_atlantic.0044.d
		trigger = {
			OR = {
				has_trait = paranoid
				has_trait = callous
				has_trait = arrogant
			}
			var:RICE_north_atlantic_episode_result = flag:success_join
		}
		trait = paranoid
		trait = callous
		trait = arrogant
		stress_impact = {
			paranoid = minor_stress_impact_gain
			callous = minor_stress_impact_gain
			arrogant = minor_stress_impact_gain
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		add_courtier = scope:native
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		if = {
			limit = {
				NOT = { var:RICE_north_atlantic_episode_result = flag:success_join }
			}
			hidden_effect = {
				scope:native = {
					death = {
						death_reason = death_vanished
					}
				}			
			}
		}
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}

}


# Steal from or kidnap the native
north_atlantic.0045 = {
	type = character_event
	title = north_atlantic.0045.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_escape
				}
				desc = north_atlantic.0045.desc.escape
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_not_alone
				}
				desc = north_atlantic.0045.desc.not_alone
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_loot
				}
				desc = north_atlantic.0045.desc.loot
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_capture
				}
				desc = north_atlantic.0045.desc.capture
			}
		}
	}
	theme = abduct_scheme
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_escape
				}
			}
			animation = personality_vengeful
		}
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_not_alone
				}
			}
			animation = shock
		}
		triggered_animation = {
			trigger = {
				root = {
					OR = {
						var:RICE_north_atlantic_episode_result = flag:success_loot
						var:RICE_north_atlantic_episode_result = flag:success_capture
					}
				}
			}
			animation = personality_callous
		}
	}
	right_portrait = {
		character = scope:native
		triggered_animation = {
			trigger = {
				root = {
					NOT = { var:RICE_north_atlantic_episode_result = flag:success_capture }
				}
			}
			animation = anger
		}
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:success_capture
				}
			}
			animation = grief
		}
	}

	# GENERATE CAPTIVE AT END OF JOURNEY
	immediate = {

		if = {
			limit = {
				OR = {
					var:RICE_north_atlantic_episode_result = flag:success_loot
					var:RICE_north_atlantic_episode_result = flag:success_capture
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {	
				OR = {
					var:RICE_north_atlantic_episode_result = flag:failure_escape
					var:RICE_north_atlantic_episode_result = flag:failure_not_alone
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes

	# 	if = {
	# 		limit = {
	# 			has_character_flag = RICE_expedition_event_success_flag_kidnap
	# 		}
	# 		create_character = {
	#			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
	# 			save_scope_as = native_captive
	# 			culture = scope:native_leader.culture
	# 			faith = scope:native_leader.faith
	# 			gender_female_chance = 50
	# 			random_traits = yes
	# 		}
	# 		hidden_effect = {
	# 			# To prevent them from doing weird stuff before the trip is over
	# 			scope:native_captive = {
	# 				add_trait = RICE_exploring_western_seas
	# 			}			
	# 		}
	# 	}

	}

	option = {
		name = north_atlantic.0045.a
		trigger = {
			OR = {
				var:RICE_north_atlantic_episode_result = flag:failure_escape
				var:RICE_north_atlantic_episode_result = flag:failure_not_alone
			}
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		custom_tooltip = north_atlantic.expedition.result.piety.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0045.b
		trigger = {
			NOR = {
				has_trait = compassionate
				has_trait = just
				has_trait = generous
			}
			OR = {
				var:RICE_north_atlantic_episode_result = flag:success_loot
				var:RICE_north_atlantic_episode_result = flag:success_capture
			}
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success_loot
			}
			custom_tooltip = north_atlantic.expedition.result.artifact
			custom_tooltip = north_atlantic.expedition.result.modifiers
		}
		else = {
			add_courtier = scope:native
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:glorious_battle_americas
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0045.c
		trigger = {
			OR = {
				has_trait = compassionate
				has_trait = just
				has_trait = generous
			}
			OR = {
				var:RICE_north_atlantic_episode_result = flag:success_loot
				var:RICE_north_atlantic_episode_result = flag:success_capture
			}
		}
		trait = compassionate
		trait = just
		trait = generous
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success_loot
			}
			custom_tooltip = north_atlantic.expedition.result.artifact
			custom_tooltip = north_atlantic.expedition.result.modifiers
		}
		else = {
			add_courtier = scope:native
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:glorious_battle_americas
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		if = {
			limit = {
				NOT = { var:RICE_north_atlantic_episode_result = flag:success_capture }
			}
			hidden_effect = {
				scope:native_leader = {
					death = {
						death_reason = death_vanished
					}
				}			
			}
		}
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}

}


# Shipwrecked sailors
north_atlantic.0046 = {
	type = character_event
	title = north_atlantic.0046.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0046.desc
	}
	theme = stewardship_wealth_focus
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		animation = personality_compassionate
	}
	right_portrait = {
		character = scope:sailor
		animation = beg
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_success
				add = 1
			}
		}
		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = random_barrel_character
			save_scope_as = sailor
		}	
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0046.a
		#custom_tooltip = north_atlantic.expedition.skill.stewardship
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.piety
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:sailor = {
				death = {
					death_reason = death_disappearance
				}
			}
		}
	}

}

# Caught in a storm
north_atlantic.0047 = {
	type = character_event
	title = north_atlantic.0047.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0047.desc
	}
	theme = death
	override_background = {
		reference = fp1_ocean
	}
	# override_background = {
	# 	trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
	# 	reference = RICE_background_north_atlantic_baffin_island
	# }
	# override_background = {
	# 	trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
	# 	reference = RICE_background_north_atlantic_markland
	# }
	# override_background = {
	# 	trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
	# 	reference = RICE_background_north_atlantic_vinland
	# }

	left_portrait = {
		character = scope:leader
		animation = stress
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_failure
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0047.a
		#custom_tooltip = north_atlantic.expedition.skill.stewardship
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}




# Find grapes in Vinland
north_atlantic.0048 = {
	type = character_event
	title = north_atlantic.0048.t
	desc = {
		desc = north_atlantic.expedition.intro.vinland
		desc = north_atlantic.0048.desc
	}
	theme = love
	override_background = {
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		animation = worry
	}

	lower_center_portrait = {
		character = scope:tyrker
	}

	trigger = {
		scope:story.var:RICE_expedition_destination = flag:vinland
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = RICE_expedition_crew_member_template
			save_scope_as = tyrker
		}	
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = { # Search for them
		name = north_atlantic.0048.a
		custom_tooltip = north_atlantic.expedition.success_failure_counter_preview
		scope:leader = {
			duel = {
				skill = intrigue
				target = scope:tyrker
				10 = { # Failure
					#show_chance = no
					custom_tooltip = north_atlantic.0048.a.failure
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.75
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure
						}
					}
				}
				10 = { # Success
					#show_chance = no
					custom_tooltip = north_atlantic.0048.a.success
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.75
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success
						}
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		trigger_event = north_atlantic.0049
		custom_tooltip = north_atlantic.expedition.skill.intrigue
	}

	# Give up
	option = {
		name = north_atlantic.0048.b
		custom_tooltip = north_atlantic.expedition.result.neutral
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:tyrker = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
	}
}


# Find grapes in Vinland - result
north_atlantic.0049 = {
	type = character_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { var:RICE_north_atlantic_episode_result = flag:success }
				}
				desc = north_atlantic.0049.t.found
			}
			desc = north_atlantic.0049.t.lost
		}
	}
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { var:RICE_north_atlantic_episode_result = flag:success }
				}
				desc = north_atlantic.0049.desc.found
			}
			triggered_desc = {
				trigger = {
					root = { var:RICE_north_atlantic_episode_result = flag:failure }
				}
				desc = north_atlantic.0049.desc.lost
			}
		}
	}
	theme = love
	override_background = {
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		triggered_animation = {
			trigger = { root = { var:RICE_north_atlantic_episode_result = flag:success }  }
			animation = personality_forgiving
		}
		triggered_animation = {
			trigger = { root = { var:RICE_north_atlantic_episode_result = flag:failure } }
			animation = sadness
		}
	}
	right_portrait = {
		character = scope:tyrker
		animation = drink
		trigger = { root = { var:RICE_north_atlantic_episode_result = flag:success } }
	}

	immediate = {
		ordered_in_global_list = {
			variable = RICE_north_atlantic_leif_erikson_equivalent
			save_scope_as = leif
		}
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {	
				var:RICE_north_atlantic_episode_result = flag:failure
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0049.a
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:success
		}
		#custom_tooltip = north_atlantic.expedition.skill.stewardship
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.modifiers
		custom_tooltip = north_atlantic.expedition.result.viability.increase
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:vinland_grapes_small
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:vinland_grapes_large
								}
							}
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0049.b
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:failure
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.piety
		custom_tooltip = north_atlantic.expedition.result.viability.decrease
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:tyrker = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}
	

}




# Driftwood
north_atlantic.0050 = {
	type = character_event
	title = north_atlantic.0050.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0050.desc
	}
	theme = realm
	override_background = { reference = fp1_ocean }
	# override_background = {
	# 	trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
	# 	reference = RICE_background_north_atlantic_baffin_island
	# }
	# override_background = {
	# 	trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
	# 	reference = RICE_background_north_atlantic_markland
	# }
	# override_background = {
	# 	trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
	# 	reference = RICE_background_north_atlantic_vinland
	# }

	left_portrait = {
		character = scope:leader
		animation = happiness
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_success
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0050.a
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}



# Discovering skeletons
north_atlantic.0051 = {
	type = character_event
	title = north_atlantic.0051.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0051.desc
	}
	theme = realm
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		animation = personality_cynical
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_success
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0051.a
		#custom_tooltip = north_atlantic.expedition.skill.stewardship
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.piety
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}




# Bears!
north_atlantic.0052 = {
	type = character_event
	title = north_atlantic.0052.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0052.desc
	}
	theme = death
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	right_portrait = {
		character = scope:leader
		animation = shock
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_failure
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0052.a
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		custom_tooltip = north_atlantic.expedition.result.piety.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}


# Ambush by mysterious, possibly one-legged people
north_atlantic.0053 = {
	type = character_event
	title = north_atlantic.0053.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0053.desc
	}
	theme = battle
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	right_portrait = {
		character = scope:leader
		animation = shock
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_failure
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0053.a
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}




# Seal hunting
north_atlantic.0054 = {
	type = character_event
	title = north_atlantic.0054.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0054.desc
	}
	theme = hunt_activity
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		animation = personality_greedy
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_success
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0054.a
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.modifiers
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:seal_meat
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:seal_blubber
								}
							}
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}



# One of the ships sinks
north_atlantic.0055 = {
	type = character_event
	title = north_atlantic.0055.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0055.desc
	}
	theme = death
	override_background = {
		reference = fp1_ocean
	}
	# override_background = {
	# 	trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
	# 	reference = RICE_background_north_atlantic_baffin_island
	# }
	# override_background = {
	# 	trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
	# 	reference = RICE_background_north_atlantic_markland
	# }
	# override_background = {
	# 	trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
	# 	reference = RICE_background_north_atlantic_vinland
	# }

	left_portrait = {
		character = scope:leader
		animation = stress
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_failure
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0055.a
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.piety.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}





# Finding the camp site of a previous explorer
north_atlantic.0056 = {
	type = character_event
	title = north_atlantic.0056.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0056.desc
	}
	theme = stewardship_duty_focus
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	right_portrait = {
		character = scope:leader
		animation = personality_zealous
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_success
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0056.a
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.piety
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}



# Eating strange whale meat
north_atlantic.0057 = {
	type = character_event
	title = north_atlantic.0057.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0057.desc
	}
	theme = feast_activity
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		animation = severelywounded
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_failure
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0057.a
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		custom_tooltip = north_atlantic.expedition.result.piety.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}




# Studying wildlife and plants
north_atlantic.0058 = {
	type = character_event
	title = north_atlantic.0058.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0058.desc
	}
	theme = love
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	right_portrait = {
		character = scope:leader
		animation = chancellor
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_success
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0058.a
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.piety
		custom_tooltip = north_atlantic.expedition.result.modifiers
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:americas_fauna_knowledge
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:americas_flora_knowledge
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}



# Crew members claim to be ambushed, but no attackers come
north_atlantic.0059 = {
	type = character_event
	title = north_atlantic.0059.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0059.desc
	}
	theme = battle
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	right_portrait = {
		character = scope:leader
		animation = paranoia
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_failure
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0059.a
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		custom_tooltip = north_atlantic.expedition.result.piety.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

}





#Encounter a hostile Native tribe
north_atlantic.0060 = {
	type = character_event
	window = duel_event
	title = north_atlantic.0060.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0060.desc
	}
	theme = battle
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		animation = aggressive_spear
	}
	right_portrait = {
		character = scope:native_leader
		animation = aggressive_spear
	}

	weight_multiplier = {
		base = 1		
		modifier = {
			factor = 1.5
			scope:story.var:RICE_expedition_destination = flag:helluland
		}
	}

	immediate = {
		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = RICE_native_chief_template
			save_scope_as = native_leader
			faith = root.faith
			random_culture = {
				culture:inuit = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						has_global_variable = RICE_greenland_inuit_are_here
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						NOT = { has_global_variable = RICE_greenland_inuit_are_here }
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 20 }
				}
				culture:innu = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 30 }
				}
				culture:east_cree = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:markland
					}
					weight = { base = 10 }
				}
				culture:mikmaq = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 20 }
				}
				culture:maliseet = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:passamaquoddy = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:penobscot = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:abenaki = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:beothuk = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 40 }
				}
				culture:laurentian = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 10 }
				}
			}
			after_creation = {
				# Set religion
				if = {
					limit = {
						OR = {
							culture = { has_cultural_pillar = heritage_inuit }
							culture = { has_cultural_pillar = heritage_paleo_inuit }
						}
					}
					set_character_faith = faith:inuit_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_iroquoian }
					}
					set_character_faith = faith:iroquoian_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_algonquian }
					}
					set_character_faith = faith:algonquian_pagan
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	# Attempt to resolve the situation with diplomacy
	option = {
		name = north_atlantic.0060.a
		scope:leader = {
			duel = {
				skill = diplomacy
				target = scope:native_leader
				8 = { # Failure - they refuse to negotiate, and battle ensues
					#show_chance = no
					custom_tooltip = north_atlantic.0060.a.failure.no_peace
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_no_peace
						}
					}
				}
				8 = { # Failure - they refuse to negotiate, but leave the expedition alone otherwise
					#show_chance = no
					custom_tooltip = north_atlantic.0060.a.failure.tension
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_tension
						}
					}
				}
				16 = { # Success - diplomatically resolve the situation
					#show_chance = no
					custom_tooltip = north_atlantic.0060.a.success.peace
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_peace
						}
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		trigger_event = north_atlantic.0061
		custom_tooltip = north_atlantic.expedition.skill.diplomacy
	}
	# Retreat from the area
	option = {
		name = north_atlantic.0060.b		
		custom_tooltip = north_atlantic.expedition.result.neutral
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
	}
	# Prepare for battle
	option = {
		name = north_atlantic.0060.c
		scope:leader = {
			duel = {
				skill = martial
				target = scope:native_leader
				15 = { # Failure - lose the battle
					#show_chance = no
					custom_tooltip = north_atlantic.0060.c.failure.defeat
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_defeat
						}
					}
				}
				15 = { # Neutral - nothing happens
					#show_chance = no
					custom_tooltip = north_atlantic.0060.c.neutral.no_battle
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.3
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:neutral_no_battle
						}
					}
				}
				13 = { # Success - loot after battle
					#show_chance = no
					custom_tooltip = north_atlantic.0060.c.success.loot_battle
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_loot_battle
						}
					}
				}
				2 = { # Success - kidnap one of the native people
					#show_chance = no
					custom_tooltip = north_atlantic.0060.c.success.kidnap_battle
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.7
					}
					modifier = {
						add = 4
						has_game_rule = RICE_native_american_moderate
					}
					modifier = {
						add = 8
						has_game_rule = RICE_native_american_high
					}
					modifier = {
						add = 12
						has_game_rule = RICE_native_american_very_high
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_kidnap_battle
						}
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		trigger_event = north_atlantic.0062
		custom_tooltip = north_atlantic.expedition.skill.martial
	}
	# Raid their camp
	option = {
		name = north_atlantic.0060.d
		scope:leader = {
			duel = {
				skill = intrigue
				target = scope:native_leader
				6 = { # Failure - counterambush
					#show_chance = no
					custom_tooltip = north_atlantic.0060.d.failure.counterambush
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_counterambush
						}
					}
				}
				9 = { # Failure - caught
					#show_chance = no
					custom_tooltip = north_atlantic.0060.d.failure.caught
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_caught
						}
					}
				}
				15 = { # Neutral - nothing happens
					#show_chance = no
					custom_tooltip = north_atlantic.0060.d.neutral.abandoned
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.3
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:neutral_abandoned
						}
					}
				}
				13 = { # Success - loot after raid
					#show_chance = no
					custom_tooltip = north_atlantic.0060.d.success.loot_raid
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_loot_raid
						}
					}
				}
				2 = { # Success - kidnap after the raid
					#show_chance = no
					custom_tooltip = north_atlantic.0060.d.success.kidnap_raid
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_kidnap_raid
						}
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		trigger_event = north_atlantic.0063
		custom_tooltip = north_atlantic.expedition.skill.intrigue
	}
}





# Attempt a diplomatic situation with the hostile ntaives
north_atlantic.0061 = {
	type = character_event
	title = north_atlantic.0061.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_no_peace
				}
				desc = north_atlantic.0061.desc.no_peace
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_tension
				}
				desc = north_atlantic.0061.desc.tension
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_peace
				}
				desc = north_atlantic.0061.desc.peace
			}
		}
	}
	theme = diplomacy_foreign_affairs_focus
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland_village
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland_village
	}

	left_portrait = {
		character = scope:leader
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_no_peace
				}
			}
			animation = shock
		}
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_tension
				}
			}
			animation = sadness
		}
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:success_peace
				}
			}
			animation = personality_greedy
		}
	}
	right_portrait = {
		character = scope:native_leader
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_no_peace
				}
			}
			animation = celebrate_spear
		}
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:failure_tension
				}
			}
			animation = personality_callous
		}
		triggered_animation = {
			trigger = {
				root = {
					var:RICE_north_atlantic_episode_result = flag:success_peace
				}
			}
			animation = personality_forgiving
		}
	}
	

	immediate = {

		if = {
			limit = {	
				var:RICE_north_atlantic_episode_result = flag:success_peace
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					var:RICE_north_atlantic_episode_result = flag:failure_tension
					var:RICE_north_atlantic_episode_result = flag:failure_no_peace
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}	
		RICE_display_america_expedition_success_view_count_effect = yes

	}


	option = {
		name = north_atlantic.0061.a
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:success_peace
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.modifiers
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.piety
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_contacts
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_piety_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0061.b
		trigger = {
			OR = {
				var:RICE_north_atlantic_episode_result = flag:failure_tension
				var:RICE_north_atlantic_episode_result = flag:failure_no_peace
			}
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:failure_no_peace
			}
			custom_tooltip = north_atlantic.expedition.result.gold.loss
		}
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					trigger = {
						var:RICE_north_atlantic_episode_result = flag:failure_no_peace
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}


	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}

}


# Battle the hostile ntaives
north_atlantic.0062 = {
	type = character_event
	window = duel_event
	title = north_atlantic.0062.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_defeat
				}
				desc = north_atlantic.0062.desc.defeat
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:neutral_no_battle
				}
				desc = north_atlantic.0062.desc.no_battle
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_loot_battle
				}
				desc = north_atlantic.0062.desc.loot_battle
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_kidnap_battle
				}
				desc = north_atlantic.0062.desc.kidnap_battle
			}
		}
	}
	theme = battle
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	left_portrait = {
		character = scope:leader
		animation = aggressive_spear
	}
	right_portrait = {
		trigger = {
			NOT = { root = { var:RICE_north_atlantic_episode_result = flag:neutral_no_battle } }
		}
		character = scope:native_leader
		animation = aggressive_spear
	}

	lower_center_portrait = {
		character = scope:captive
		trigger = { exists = scope:captive }
	}

	immediate = {

		if = {
			limit = {	
				OR = {
					var:RICE_north_atlantic_episode_result = flag:success_kidnap_battle
					var:RICE_north_atlantic_episode_result = flag:success_loot_battle
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:failure_defeat
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}	
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success_kidnap_battle
			}
			random_list = {
				35 = {
					create_character = {
						location = root.location
						template = RICE_native_child_generic_template
						faith = scope:native_leader.faith
						culture = scope:native_leader.culture
						save_scope_as = captive
					}
				}
				65 = {
					create_character = {
						location = root.location
						template = RICE_native_generic_template
						faith = scope:native_leader.faith
						culture = scope:native_leader.culture
						save_scope_as = captive
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes

	}


	option = {
		name = north_atlantic.0062.a
		trigger = {
			OR = {
				var:RICE_north_atlantic_episode_result = flag:success_kidnap_battle
				var:RICE_north_atlantic_episode_result = flag:success_loot_battle
			}
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.artifact
		custom_tooltip = north_atlantic.expedition.result.modifiers
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success_kidnap_battle
			}
			add_courtier = scope:captive
		}
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:glorious_battle_americas
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0062.b
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:neutral_no_battle
		}
		custom_tooltip = north_atlantic.expedition.result.neutral
	}

	option = {
		name = north_atlantic.0062.c
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:failure_defeat
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}


	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}

}


# Raid the hostile ntaives
north_atlantic.0063 = {
	type = character_event
	window = duel_event
	title = north_atlantic.0063.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_counterambush
				}
				desc = north_atlantic.0063.desc.counterambush
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_caught
				}
				desc = north_atlantic.0063.desc.caught
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:neutral_abandoned
				}
				desc = north_atlantic.0063.desc.abandoned
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_loot_raid
				}
				desc = north_atlantic.0063.desc.loot_raid
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_kidnap_raid
				}
				desc = north_atlantic.0063.desc.kidnap_raid
			}
		}
	}
	theme = battle
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland_village
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland_village
	}

	left_portrait = {
		character = scope:leader
		animation = aggressive_spear
	}
	right_portrait = {
		trigger = {
			NOT = { root = { var:RICE_north_atlantic_episode_result = flag:neutral_abandoned } }
		}
		character = scope:native_leader
		animation = aggressive_spear
	}

	# lower_center_portrait = {
	# 	character = scope:captive
	# 	trigger = { exists = scope:captive }
	# }

	immediate = {

		if = {
			limit = {	
				OR = {
					var:RICE_north_atlantic_episode_result = flag:success_kidnap_raid
					var:RICE_north_atlantic_episode_result = flag:success_loot_raid
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					var:RICE_north_atlantic_episode_result = flag:failure_caught
					var:RICE_north_atlantic_episode_result = flag:failure_counterambush
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}	
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success_kidnap_raid
			}
			random_list = {
				35 = {
					create_character = {
						location = root.location
						template = RICE_native_child_generic_template
						faith = scope:native_leader.faith
						culture = scope:native_leader.culture
						save_scope_as = captive
					}
				}
				65 = {
					create_character = {
						location = root.location
						template = RICE_native_generic_template
						faith = scope:native_leader.faith
						culture = scope:native_leader.culture
						save_scope_as = captive
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes

	}


	option = {
		name = north_atlantic.0063.a
		trigger = {
			OR = {
				var:RICE_north_atlantic_episode_result = flag:success_kidnap_raid
				var:RICE_north_atlantic_episode_result = flag:success_loot_raid
			}
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.artifact
		custom_tooltip = north_atlantic.expedition.result.modifiers
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success_kidnap_raid
			}
			add_courtier = scope:captive
		}
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:glorious_battle_americas
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0063.b
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:neutral_abandoned
		}
		custom_tooltip = north_atlantic.expedition.result.neutral
	}

	option = {
		name = north_atlantic.0063.c
		trigger = {
			OR = {
				var:RICE_north_atlantic_episode_result = flag:failure_caught
				var:RICE_north_atlantic_episode_result = flag:failure_counterambush
			}
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}


	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}

}




# Abandoned village of Native Americans
north_atlantic.0064 = {
	type = character_event
	title = north_atlantic.0064.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0064.desc
	}
	theme = realm
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland_village
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland_village
	}

	right_portrait = {
		character = scope:leader
		animation = personality_rational
	}

	weight_multiplier = {
		base = 1		
		modifier = {
			factor = 1.5
			scope:story.var:RICE_expedition_destination = flag:helluland
		}
	}

	immediate = {
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0064.a
		custom_tooltip = north_atlantic.expedition.result.neutral
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

	# Loot the place
	option = {
		name = north_atlantic.0064.b
		random_list = {
			50 = {
				desc = north_atlantic.0064.return
				scope:leader = {
					duel = {
						skill = martial
						value = 8
						10 = { # Failure - lose battle
							#show_chance = no
							custom_tooltip = north_atlantic.0064.b.failure.battle_defeat
							compare_modifier = {
								value = scope:duel_value
								multiplier = -0.7
							}
							root = {
								set_variable = {
									name = RICE_north_atlantic_episode_result
									value = flag:failure_battle_defeat
								}
							}
						}
						10 = { # Success - win battle
							#show_chance = no
							custom_tooltip = north_atlantic.0064.b.success.battle_victory
							compare_modifier = {
								value = scope:duel_value
								multiplier = 0.7
							}
							root = {
								set_variable = {
									name = RICE_north_atlantic_episode_result
									value = flag:success_battle_victory
								}
							}
						}
					}
				}
				RICE_display_america_expedition_success_view_count_cleanup_effect = yes
				trigger_event = north_atlantic.0065
				custom_tooltip = north_atlantic.expedition.skill.martial
			}
			50 = {
				desc = north_atlantic.0064.empty
				scope:leader = {
					duel = {
						skill = stewardship
						value = 8
						10 = { # Failure - useless stuff
							#show_chance = no
							custom_tooltip = north_atlantic.0064.b.success.useful
							compare_modifier = {
								value = scope:duel_value
								multiplier = -0.7
							}
							root = {
								set_variable = {
									name = RICE_north_atlantic_episode_result
									value = flag:failure_useless_no_wait
								}
							}
						}
						10 = { # Success - useful stuff
							#show_chance = no
							custom_tooltip = north_atlantic.0064.b.failure.useless
							compare_modifier = {
								value = scope:duel_value
								multiplier = 0.7
							}
							root = {
								set_variable = {
									name = RICE_north_atlantic_episode_result
									value = flag:success_useful_no_wait
								}
							}
						}
					}
				}
				RICE_display_america_expedition_success_view_count_cleanup_effect = yes
				trigger_event = north_atlantic.0066
				custom_tooltip = north_atlantic.expedition.skill.stewardship				
			}
		}
	}

	# Wait for the villagers to return
	option = {
		name = north_atlantic.0064.c
		random_list = {
			50 = {
				desc = north_atlantic.0064.return
				scope:leader = {
					duel = {
						skill = diplomacy
						value = 8
						10 = { # Failure - not interested in trade
							#show_chance = no
							custom_tooltip = north_atlantic.0064.c.failure.no_trade
							compare_modifier = {
								value = scope:duel_value
								multiplier = -0.7
							}
							root = {
								set_variable = {
									name = RICE_north_atlantic_episode_result
									value = flag:failure_no_trade
								}
							}
						}
						10 = { # Success - interested in trade
							#show_chance = no
							custom_tooltip = north_atlantic.0064.c.success.trade
							compare_modifier = {
								value = scope:duel_value
								multiplier = 0.7
							}
							root = {
								set_variable = {
									name = RICE_north_atlantic_episode_result
									value = flag:success_trade
								}
							}
						}
					}
				}
				RICE_display_america_expedition_success_view_count_cleanup_effect = yes
				trigger_event = north_atlantic.0067
				custom_tooltip = north_atlantic.expedition.skill.diplomacy
			}
			50 = {
				desc = north_atlantic.0064.empty
				scope:leader = {
					duel = {
						skill = stewardship
						value = 8
						10 = { # Failure - useless stuff
							#show_chance = no
							custom_tooltip = north_atlantic.0064.c.failure.useless
							compare_modifier = {
								value = scope:duel_value
								multiplier = -0.7
							}
							root = {
								set_variable = {
									name = RICE_north_atlantic_episode_result
									value = flag:failure_useless_wait
								}
							}
						}
						10 = { # Success - useful stuff
							#show_chance = no
							custom_tooltip = north_atlantic.0064.c.success.useful
							compare_modifier = {
								value = scope:duel_value
								multiplier = 0.7
							}
							root = {
								set_variable = {
									name = RICE_north_atlantic_episode_result
									value = flag:success_useful_wait
								}
							}
						}
					}
				}
				RICE_display_america_expedition_success_view_count_cleanup_effect = yes
				trigger_event = north_atlantic.0066
				custom_tooltip = north_atlantic.expedition.skill.stewardship				
			}
		}
	}

}



# Battle the hostile natives
north_atlantic.0065 = {
	type = character_event
	window = duel_event
	title = north_atlantic.0065.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_battle_defeat
				}
				desc = north_atlantic.0065.desc.battle_defeat
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_battle_victory
				}
				desc = north_atlantic.0065.desc.battle_victory
			}

		}
	}
	theme = battle
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland_village
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland_village
	}

	left_portrait = {
		character = scope:leader
		animation = aggressive_spear
	}
	right_portrait = {
		character = scope:native_leader
		animation = aggressive_spear
	}

	immediate = {

		if = {
			limit = {	
				var:RICE_north_atlantic_episode_result = flag:success_battle_victory
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:failure_battle_defeat
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}	

		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = RICE_native_chief_template
			save_scope_as = native_leader
			faith = root.faith
			random_culture = {
				culture:inuit = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						has_global_variable = RICE_greenland_inuit_are_here
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						NOT = { has_global_variable = RICE_greenland_inuit_are_here }
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 20 }
				}
				culture:innu = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 30 }
				}
				culture:east_cree = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:markland
					}
					weight = { base = 10 }
				}
				culture:mikmaq = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 20 }
				}
				culture:maliseet = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:passamaquoddy = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:penobscot = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:abenaki = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:beothuk = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 40 }
				}
				culture:laurentian = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 10 }
				}
			}
			after_creation = {
				# Set religion
				if = {
					limit = {
						OR = {
							culture = { has_cultural_pillar = heritage_inuit }
							culture = { has_cultural_pillar = heritage_paleo_inuit }
						}
					}
					set_character_faith = faith:inuit_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_iroquoian }
					}
					set_character_faith = faith:iroquoian_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_algonquian }
					}
					set_character_faith = faith:algonquian_pagan
				}
			}
		}

		RICE_display_america_expedition_success_view_count_effect = yes

	}


	option = {
		name = north_atlantic.0065.a
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:success_battle_victory
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.artifact
		custom_tooltip = north_atlantic.expedition.result.modifiers
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success_kidnap_battle
			}
			add_courtier = scope:captive
		}
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:glorious_battle_americas
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0065.b
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:failure_battle_defeat
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}


	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}

}

# The village is indeed abandoned
north_atlantic.0066 = {
	type = character_event
	title = north_atlantic.0066.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_useless_no_wait
				}
				desc = north_atlantic.0066.desc.useless_no_wait
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_useless_wait
				}
				desc = north_atlantic.0066.desc.useless_wait
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_useful_no_wait
				}
				desc = north_atlantic.0066.desc.useful_no_wait
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_useful_wait
				}
				desc = north_atlantic.0066.desc.useful_wait
			}
		}
	}
	theme = corruption
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland_village
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland_village
	}

	right_portrait = {
		character = scope:leader
		triggered_animation = {
			trigger = {
				root = {
					OR = {
						var:RICE_north_atlantic_episode_result = flag:failure_useless_no_wait
						var:RICE_north_atlantic_episode_result = flag:failure_useless_wait
					}
				}
			}
			animation = personality_irrational
		}
		triggered_animation = {
			trigger = {
				root = {
					OR = {
						var:RICE_north_atlantic_episode_result = flag:success_useful_no_wait
						var:RICE_north_atlantic_episode_result = flag:success_useful_wait
					}
				}
			}
			animation = personality_greedy
		}
	}

	immediate = {

		if = {
			limit = {	
				OR = {
					var:RICE_north_atlantic_episode_result = flag:success_useful_no_wait
					var:RICE_north_atlantic_episode_result = flag:success_useful_wait
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {
				OR = {
					var:RICE_north_atlantic_episode_result = flag:failure_useless_no_wait
					var:RICE_north_atlantic_episode_result = flag:failure_useless_wait
				}
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}	

		RICE_display_america_expedition_success_view_count_effect = yes

	}


	option = {
		name = north_atlantic.0066.a
		trigger = {	
			OR = {
				var:RICE_north_atlantic_episode_result = flag:success_useful_no_wait
				var:RICE_north_atlantic_episode_result = flag:success_useful_wait
			}
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.artifact
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0066.b
		trigger = {
			OR = {
				var:RICE_north_atlantic_episode_result = flag:failure_useless_no_wait
				var:RICE_north_atlantic_episode_result = flag:failure_useless_wait
			}
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}


	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}

}





# The village is not abandoned, and a peaceful encounter ensues
north_atlantic.0067 = {
	type = character_event
	title = north_atlantic.0067.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:failure_no_trade
				}
				desc = north_atlantic.0067.desc.no_trade
			}
			triggered_desc = {
				trigger = {
					var:RICE_north_atlantic_episode_result = flag:success_trade
				}
				desc = north_atlantic.0067.desc.trade
			}

		}
	}
	theme = diplomacy_foreign_affairs_focus
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland_village
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland_village
	}

	left_portrait = {
		character = scope:leader
		triggered_animation = {
			trigger = { root = {var:RICE_north_atlantic_episode_result = flag:failure_no_trade } }
			animation = personality_coward
		}
		triggered_animation = {
			trigger = { root = {var:RICE_north_atlantic_episode_result = flag:success_trade } }
			animation = personality_greedy
		}
	}
	right_portrait = {
		character = scope:native_leader
		triggered_animation = {
			trigger = { root = {var:RICE_north_atlantic_episode_result = flag:failure_no_trade } }
			animation = dismissal
		}
		triggered_animation = {
			trigger = { root = {var:RICE_north_atlantic_episode_result = flag:success_trade } }
			animation = personality_honorable
		}
	}

	immediate = {

		if = {
			limit = {	
				var:RICE_north_atlantic_episode_result = flag:success_trade
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:failure_no_trade
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}	

		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = RICE_native_chief_template
			save_scope_as = native_leader
			faith = root.faith
			random_culture = {
				culture:inuit = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						has_global_variable = RICE_greenland_inuit_are_here
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:helluland
						NOT = { has_global_variable = RICE_greenland_inuit_are_here }
					}
					weight = { base = 10 }
				}
				culture:dorset = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 20 }
				}
				culture:innu = {
					trigger = {
						OR = {
							scope:story.var:RICE_expedition_destination = flag:markland
							scope:story.var:RICE_expedition_destination = flag:vinland
						}
					}
					weight = { base = 30 }
				}
				culture:east_cree = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:markland
					}
					weight = { base = 10 }
				}
				culture:mikmaq = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 20 }
				}
				culture:maliseet = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:passamaquoddy = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:penobscot = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:abenaki = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 5 }
				}
				culture:beothuk = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 40 }
				}
				culture:laurentian = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					weight = { base = 10 }
				}
			}
			after_creation = {
				# Set religion
				if = {
					limit = {
						OR = {
							culture = { has_cultural_pillar = heritage_inuit }
							culture = { has_cultural_pillar = heritage_paleo_inuit }
						}
					}
					set_character_faith = faith:inuit_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_iroquoian }
					}
					set_character_faith = faith:iroquoian_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_algonquian }
					}
					set_character_faith = faith:algonquian_pagan
				}
			}
		}

		RICE_display_america_expedition_success_view_count_effect = yes

	}


	option = {
		name = north_atlantic.0067.a
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:success_trade
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.prestige
		custom_tooltip = north_atlantic.expedition.result.artifact
		custom_tooltip = north_atlantic.expedition.result.modifiers
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success_kidnap_battle
			}
			add_courtier = scope:captive
		}
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						random_list = {
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_contacts
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_legends
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:native_info
								}
							}
							10 = {
								add_to_variable_list = {
									name = RICE_expedition_modifiers
									target = flag:western_herbs
								}
							}
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_artifact_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
			}
			random_list = {
				10 = { }
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0067.b
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:failure_no_trade
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.prestige.loss
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}


	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_vanished
				}
			}			
		}
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}

}







# Timber in Markland (good)
north_atlantic.0068 = {
	type = character_event
	title = north_atlantic.0068.t
	desc = {
		desc = north_atlantic.expedition.intro.markland
		desc = north_atlantic.0068.desc
	}
	theme = love
	override_background = {
		reference = RICE_background_north_atlantic_markland
	}

	left_portrait = {
		character = scope:leader
		animation = personality_greedy
	}

	trigger = {
		scope:story.var:RICE_expedition_destination = flag:markland
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_success
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0068.a
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.resilience.increase
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}
}




# Timber in Markland (bad)
north_atlantic.0069 = {
	type = character_event
	title = north_atlantic.0069.t
	desc = {
		desc = north_atlantic.expedition.intro.markland
		desc = north_atlantic.0069.desc
	}
	theme = love
	override_background = {
		reference = RICE_background_north_atlantic_markland
	}

	right_portrait = {
		character = scope:leader
		animation = disapproval
	}

	trigger = {
		scope:story.var:RICE_expedition_destination = flag:markland
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_failure
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0069.a
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}
}




# Discover logging camp of a previous Markland expedition
north_atlantic.0070 = {
	type = character_event
	title = north_atlantic.0070.t
	desc = {
		desc = north_atlantic.expedition.intro.markland
		desc = north_atlantic.0070.desc
	}
	theme = love
	override_background = {
		reference = RICE_background_north_atlantic_markland
	}

	right_portrait = {
		character = scope:leader
		animation = happiness
	}

	trigger = {
		scope:story.var:RICE_expedition_destination = flag:markland
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_success
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0070.a
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.resilience.increase
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}
}




# Accident happens during a logging expedition in Markland
north_atlantic.0071 = {
	type = character_event
	title = north_atlantic.0071.t
	desc = {
		desc = north_atlantic.expedition.intro.markland
		desc = north_atlantic.0071.desc
	}
	theme = love
	override_background = {
		reference = RICE_background_north_atlantic_markland
	}

	right_portrait = {
		character = scope:leader
		animation = disapproval
	}

	trigger = {
		scope:story.var:RICE_expedition_destination = flag:markland
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_failure
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0071.a
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}
}


# Markland logging instructions are good
north_atlantic.0072 = {
	type = character_event
	title = north_atlantic.0072.t
	desc = {
		desc = north_atlantic.expedition.intro.markland
		desc = north_atlantic.0072.desc
	}
	theme = love
	override_background = {
		reference = RICE_background_north_atlantic_markland
	}

	right_portrait = {
		character = scope:leader
		animation = happiness
	}

	trigger = {
		scope:story.var:RICE_expedition_destination = flag:markland
	}

	weight_multiplier = {
		base = 1
		modifier = {
			factor = 1.25
			has_character_modifier = RICE_north_atlantic_built_shielings
		}
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_success
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0072.a
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold
		custom_tooltip = north_atlantic.expedition.result.resilience.increase
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}
}




# Markland logging instructions are bad
north_atlantic.0073 = {
	type = character_event
	title = north_atlantic.0073.t
	desc = {
		desc = north_atlantic.expedition.intro.markland
		desc = north_atlantic.0073.desc
	}
	theme = love
	override_background = {
		reference = RICE_background_north_atlantic_markland
	}

	right_portrait = {
		character = scope:leader
		animation = disapproval
	}

	trigger = {
		scope:story.var:RICE_expedition_destination = flag:markland
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		scope:story = {
			change_variable = {
				name = RICE_expedition_failure
				add = 1
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0073.a
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.gold.loss
		custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_gold_loss_count
							add = 1
						}
					}
				}
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}
}





# Come across an area mentioned in a legend
north_atlantic.0074 = {
	type = character_event
	title = north_atlantic.0074.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:helluland
				}
				desc = north_atlantic.expedition.intro.helluland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:markland
				}
				desc = north_atlantic.expedition.intro.markland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_expedition_destination = flag:vinland
				}
				desc = north_atlantic.expedition.intro.vinland
			}
		}
		desc = north_atlantic.0074.desc
	}
	theme = love
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:helluland }
		reference = RICE_background_north_atlantic_baffin_island
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:markland }
		reference = RICE_background_north_atlantic_markland
	}
	override_background = {
		trigger = { scope:story.var:RICE_expedition_destination = flag:vinland }
		reference = RICE_background_north_atlantic_vinland
	}

	right_portrait = {
		character = scope:leader
		animation = personality_rational
	}

	weight_multiplier = {
		base = 1
	}

	immediate = {
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0074.a
		custom_tooltip = north_atlantic.expedition.result.neutral
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
	}

	# Investigate the area
	option = {
		name = north_atlantic.0074.b
		scope:leader = {
			duel = {
				skill = learning
				value = 8
				10 = { # Failure - no info
					#show_chance = no
					custom_tooltip = north_atlantic.0074.b.failure.no_info
					compare_modifier = {
						value = scope:duel_value
						multiplier = -0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:failure_no_info
						}
					}
				}
				10 = { # Success - new info
					#show_chance = no
					custom_tooltip = north_atlantic.0074.b.success.new_info
					compare_modifier = {
						value = scope:duel_value
						multiplier = 0.7
					}
					root = {
						set_variable = {
							name = RICE_north_atlantic_episode_result
							value = flag:success_new_info
						}
					}
				}
			}
		}
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		trigger_event = north_atlantic.0075
		custom_tooltip = north_atlantic.expedition.skill.learning
	}

}







# Find grapes in Vinland - result
north_atlantic.0075 = {
	type = character_event
	title = north_atlantic.0075.t
	desc = {
		desc = north_atlantic.expedition.intro.continue
		first_valid = {
			triggered_desc = {
				trigger = {
					root = { var:RICE_north_atlantic_episode_result = flag:success_new_info }
				}
				desc = north_atlantic.0075.desc.new_info
			}
			triggered_desc = {
				trigger = {
					root = { var:RICE_north_atlantic_episode_result = flag:failure_no_info }
				}
				desc = north_atlantic.0075.desc.no_info
			}
		}
	}
	theme = love
	override_background = {
		reference = RICE_background_north_atlantic_vinland
	}

	right_portrait = {
		character = scope:leader
		triggered_animation = {
			trigger = { root = { var:RICE_north_atlantic_episode_result = flag:success_new_info }  }
			animation = chancellor
		}
		triggered_animation = {
			trigger = { root = { var:RICE_north_atlantic_episode_result = flag:failure_no_info } }
			animation = personality_irrational
		}
	}

	immediate = {
		if = {
			limit = {
				var:RICE_north_atlantic_episode_result = flag:success_new_info
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_success
					add = 1
				}
			}
		}
		else_if = {
			limit = {	
				var:RICE_north_atlantic_episode_result = flag:failure
			}
			scope:story = {
				change_variable = {
					name = RICE_expedition_failure
					add = 1
				}
			}
		}
		RICE_display_america_expedition_success_view_count_effect = yes
	}

	option = {
		name = north_atlantic.0075.a
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:success_new_info
		}
		custom_tooltip = north_atlantic.expedition.result.good
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.increase
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.networks.increase
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_networks_increase_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_increase_count
							add = 1
						}
					}
				}
			}
		}
	}

	option = {
		name = north_atlantic.0075.b
		trigger = {
			var:RICE_north_atlantic_episode_result = flag:failure_no_info
		}
		custom_tooltip = north_atlantic.expedition.result.bad
		custom_description_no_bullet = {
			text = north_atlantic.expedition.result.intro
		}
		custom_tooltip = north_atlantic.expedition.result.prestige
		if = {
			limit = {
				scope:story.var:RICE_expedition_destination = flag:vinland
			}
			custom_tooltip = north_atlantic.expedition.result.viability.decrease
		}
		else = {
			custom_tooltip = north_atlantic.expedition.result.resilience.decrease
		}
		hidden_effect = {
			random_list = {
				10 = {
					scope:story = {
						change_variable = {
							name = RICE_expedition_prestige_loss_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						NOT = { scope:story.var:RICE_expedition_destination = flag:vinland }
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_resilience_decrease_count
							add = 1
						}
					}
				}
				10 = {
					trigger = {
						scope:story.var:RICE_expedition_destination = flag:vinland
					}
					scope:story = {
						change_variable = {
							name = RICE_expedition_viability_decrease_count
							add = 1
						}
					}
				}
			}
		}
	}

	after = {
		RICE_display_america_expedition_success_view_count_cleanup_effect = yes
		if = {
			limit = { has_variable = RICE_north_atlantic_episode_result }
			remove_variable = RICE_north_atlantic_episode_result
		}
	}
	

}








######################################################################################
# 
# COURTIER SPAWN
# 
# north_atlantic.0090-north_atlantic.0099
# 
######################################################################################





# European/Gaelic servant/slave is noticed for abilities
north_atlantic.0090 = {
	type = character_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_north_atlantic_thrall_event
				}
				desc = north_atlantic.0090.t.thrall
			}
			desc = north_atlantic.0090.t.free
		}
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_north_atlantic_thrall_event
				}
				desc = north_atlantic.0090.desc.thrall
			}
			desc = north_atlantic.0090.desc.free
		}
	}
	theme = stewardship_duty_focus
	override_background = { reference = throne_room }

	left_portrait = root
	right_portrait = {
		character = scope:thrall
		triggered_animation = {
			trigger = { has_character_flag = RICE_north_atlantic_thrall_event }
			animation = throne_room_bow_2
		}
		triggered_animation = {
			trigger = { NOT = { has_character_flag = RICE_north_atlantic_thrall_event } }
			animation = personality_content
		}
		triggered_outfit = {
			trigger = { has_character_flag = RICE_north_atlantic_thrall_event }
			outfit_tags = { beggar_rags }
		}
	}

	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_norse_frontier_region		
			}
		}
		OR = {
			culture = {
				has_cultural_pillar = heritage_north_germanic
			}
			faith.religion = { rice_religion_trigger_germanic_religion = yes }
		}
	}

	immediate = {
		random = {
			chance = 70
			add_character_flag = RICE_north_atlantic_thrall_event
		}

		random_list = {
			# Small chance they're from somewhere from non-Mediterranean Europe in general
			5 = {
				trigger = {
					any_county_in_region = {
						region = graphical_western
						NOT = { culture = { has_cultural_pillar = heritage_north_germanic } }
						NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
					}
				}
				every_county_in_region = {
					region = graphical_western
					limit = {
						NOT = { culture = { has_cultural_pillar = heritage_north_germanic } }
						NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
					}
					add_to_list = thrall_counties
				}
				random_in_list = {
					list = thrall_counties
					save_scope_as = county
				}
				create_character = {
					location = root.location
					template = RICE_gaelic_thrall_template
					save_scope_as = thrall
					culture = scope:county.culture
					faith = scope:county.faith
				}
			}
			# They're Gaelics from the British Isles
			70 = {
				trigger = {
					any_county_in_region = {
						region = world_europe_west_britannia
						culture = {
							has_cultural_pillar = heritage_goidelic
						}
						NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
					}
				}
				every_county_in_region = {
					region = world_europe_west_britannia
					limit = {
						culture = {
							has_cultural_pillar = heritage_goidelic
						}
						NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
					}
					add_to_list = thrall_counties
				}
				random_in_list = {
					list = thrall_counties
					save_scope_as = county
				}
				create_character = {
					location = root.location
					template = RICE_gaelic_thrall_template
					save_scope_as = thrall
					culture = scope:county.culture
					faith = scope:county.faith
				}
			}
			# They're from British Isles otherwise
			25 = {
				# Find an appropriate county in the British Isles
				if = {
					limit = {
						any_county_in_region = {
							region = world_europe_west_britannia
							culture = {
								OR = {
									has_cultural_pillar = heritage_brythonic
									has_cultural_pillar = heritage_goidelic
									has_cultural_pillar = heritage_west_germanic
								}
							}
							NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
						}
					}
					every_county_in_region = {
						region = world_europe_west_britannia
						limit = {
							culture = {
								OR = {
									has_cultural_pillar = heritage_brythonic
									has_cultural_pillar = heritage_goidelic
									has_cultural_pillar = heritage_west_germanic
								}
							}
							NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
						}
						add_to_list = thrall_counties
					}
					random_in_list = {
						list = thrall_counties
						save_scope_as = county
					}
					create_character = {
						location = root.location
						template = RICE_gaelic_thrall_template
						save_scope_as = thrall
						culture = scope:county.culture
						faith = scope:county.faith
					}
				}
				# Backup in case no such county can be found
				else = {
					random_list = {
						# Irish
						# Gaelic
						# Welsh
						# Anglo-Saxon
						# English
						40 = {
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								save_scope_as = thrall
								culture = culture:irish
								faith = faith:insular_celtic
							}				
						}
						30 = {
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								save_scope_as = thrall
								culture = culture:gaelic
								faith = faith:catholic
							}				
						}
						10 = {
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								save_scope_as = thrall
								culture = culture:welsh
								faith = faith:catholic
							}				
						}
						10 = {
							trigger = {
								NOT = {
									is_target_in_global_variable_list = {
										name = unavailable_unique_decisions
										target = flag:embrace_english_culture_decision
									}
								}
							}
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								save_scope_as = thrall
								culture = culture:anglo_saxon
								faith = faith:catholic
							}				
						}
						10 = {
							trigger = {
								is_target_in_global_variable_list = {
									name = unavailable_unique_decisions
									target = flag:embrace_english_culture_decision
								}
							}
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								save_scope_as = thrall
								culture = culture:english
								faith = { rice_faith_trigger_catholic = yes }
							}				
						}
					}
				}
			}
		}

	}

	# Welcome them to your court
	option = {
		name = north_atlantic.0090.a
		add_prestige = -100
		add_courtier = scope:thrall
		if = {
			limit = {
				can_add_hook = {
					target = scope:thrall
					type = loyalty_hook
				}
			}
			add_hook = {
				target = scope:thrall
				type = loyalty_hook
			}
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_description_no_bullet = {
				text = north_atlantic.0090.info
			}
		}
	}

	# No
	option = {
		name = north_atlantic.0090.b
		hidden_effect = {
			scope:thrall = {
				death = {
					death_reason = death_vanished
				}
			}
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_description_no_bullet = {
				text = north_atlantic.0090.info
			}
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_north_atlantic_thrall_event
			}
			remove_character_flag = RICE_north_atlantic_thrall_event
		}
	}

}


# Courtier marries or takes as a concubine a European/Gaelic servant/slave
north_atlantic.0091 = {
	type = character_event
	title = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_north_atlantic_thrall_event
				}
				desc = north_atlantic.0091.t.thrall
			}
			desc = north_atlantic.0091.t.free
		}
	}
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_north_atlantic_thrall_event
				}
				desc = north_atlantic.0091.desc.thrall
			}
			desc = north_atlantic.0091.desc.free
		}
		desc = north_atlantic.0091.desc.marriage
		# first_valid = {
		# 	triggered_desc = {
		# 		trigger = {
		# 			scope:thrall = { is_spouse_of = scope:courtier }
		# 		}
		# 		desc = north_atlantic.0091.desc.marriage
		# 	}
		# 	desc = north_atlantic.0091.desc.concubinage
		# }
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_north_atlantic_thrall_event
				}
				desc = north_atlantic.0091.desc.conclusion.thrall
			}
			desc = north_atlantic.0091.desc.conclusion.free
		}
	}
	theme = marriage
	override_background = { reference = relaxing_room }

	left_portrait = {
		character = scope:courtier
		animation = personality_content
	}
	right_portrait = {
		character = scope:thrall
		triggered_animation = {
			trigger = { has_character_flag = RICE_north_atlantic_thrall_event }
			animation = throne_room_bow_2
		}
		triggered_animation = {
			trigger = { NOT = { has_character_flag = RICE_north_atlantic_thrall_event } }
			animation = personality_content
		}
		triggered_outfit = {
			trigger = { has_character_flag = RICE_north_atlantic_thrall_event }
			outfit_tags = { beggar_rags }
		}
	}

	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_norse_frontier_region		
			}
		}
		OR = {
			culture = {
				has_cultural_pillar = heritage_north_germanic
			}
			faith.religion = { rice_religion_trigger_germanic_religion = yes }
		}
		OR = {
			any_courtier = {
				is_available_ai_adult = yes
				can_marry_trigger = yes
				is_married = no
				is_female = no
				NOR = {
					has_sexuality = asexual
					has_sexuality = homosexual
					has_trait = celibate
					has_trait = eunuch
					has_trait = devoted
				}
				NOT = { has_council_position = councillor_court_chaplain }
			}
			any_vassal = {
				is_available_ai_adult = yes
				can_marry_trigger = yes
				is_married = no
				is_female = no
				NOR = {
					has_sexuality = asexual
					has_sexuality = homosexual
					has_trait = celibate
					has_trait = eunuch
					has_trait = devoted
				}
				NOT = { has_council_position = councillor_court_chaplain }
			}
		}
	}

	immediate = {
		random = {
			chance = 70
			add_character_flag = RICE_north_atlantic_thrall_event
		}

		random_courtier = {
			limit = {
				is_available_ai_adult = yes
				can_marry_trigger = yes
				is_married = no
				is_female = no
				NOR = {
					has_sexuality = asexual
					has_sexuality = homosexual
					has_trait = celibate
					has_trait = eunuch
					has_trait = devoted
				}
				NOT = { has_council_position = councillor_court_chaplain }
			}
			weight = {
				base = 10
				# Try to pick someone young
				modifier = {
					age <= 45
					add = 15
				}
				# Try to pick someone horny
				modifier = {
					has_trait = lustful
					add = 5
				}
				modifier = {
					has_trait = chaste
					add = -5
				}
				# Try to avoid someone in your dynasty
				modifier = {
					dynasty = root.dynasty
					add = -8
				}
			}
			add_to_list = marriage_candidate	
		}
		random_vassal = {
			limit = {
				is_available_ai_adult = yes
				can_marry_trigger = yes
				is_married = no
				is_female = no
				NOR = {
					has_sexuality = asexual
					has_sexuality = homosexual
					has_trait = celibate
					has_trait = eunuch
					has_trait = devoted
				}
				NOT = { has_council_position = councillor_court_chaplain }
			}
			weight = {
				base = 10
				# Try to pick someone young
				modifier = {
					age <= 45
					add = 15
				}
				# Try to pick someone horny
				modifier = {
					has_trait = lustful
					add = 5
				}
				modifier = {
					has_trait = chaste
					add = -5
				}
				# Try to avoid someone in your dynasty
				modifier = {
					dynasty = root.dynasty
					add = -8
				}
			}
			add_to_list = marriage_candidate	
		}

		random_in_list = {
			list = marriage_candidate
			save_scope_as = courtier
		}

		random_list = {
			# Small chance they're from somewhere from non-Mediterranean Europe in general
			5 = {
				trigger = {
					any_county_in_region = {
						region = graphical_western
						NOT = { culture = { has_cultural_pillar = heritage_north_germanic } }
						NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
					}
				}
				every_county_in_region = {
					region = graphical_western
					limit = {
						NOT = { culture = { has_cultural_pillar = heritage_north_germanic } }
						NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
					}
					add_to_list = thrall_counties
				}
				random_in_list = {
					list = thrall_counties
					save_scope_as = county
				}
				create_character = {
					location = root.location
					template = RICE_gaelic_thrall_template
					gender_female_chance = 100
					save_scope_as = thrall
					culture = scope:county.culture
					faith = scope:county.faith
				}
			}
			# They're Gaelics from the British Isles
			70 = {
				trigger = {
					any_county_in_region = {
						region = world_europe_west_britannia
						culture = {
							has_cultural_pillar = heritage_goidelic
						}
						NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
					}
				}
				every_county_in_region = {
					region = world_europe_west_britannia
					limit = {
						culture = {
							has_cultural_pillar = heritage_goidelic
						}
						NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
					}
					add_to_list = thrall_counties
				}
				random_in_list = {
					list = thrall_counties
					save_scope_as = county
				}
				create_character = {
					location = root.location
					template = RICE_gaelic_thrall_template
					gender_female_chance = 100
					save_scope_as = thrall
					culture = scope:county.culture
					faith = scope:county.faith
				}
			}
			# They're from British Isles otherwise
			25 = {
				# Find an appropriate county in the British Isles
				if = {
					limit = {
						any_county_in_region = {
							region = world_europe_west_britannia
							culture = {
								OR = {
									has_cultural_pillar = heritage_brythonic
									has_cultural_pillar = heritage_goidelic
									has_cultural_pillar = heritage_west_germanic
								}
							}
							NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
						}
					}
					every_county_in_region = {
						region = world_europe_west_britannia
						limit = {
							culture = {
								OR = {
									has_cultural_pillar = heritage_brythonic
									has_cultural_pillar = heritage_goidelic
									has_cultural_pillar = heritage_west_germanic
								}
							}
							NOT = { faith.religion = { rice_religion_trigger_germanic_religion = yes } }
						}
						add_to_list = thrall_counties
					}
					random_in_list = {
						list = thrall_counties
						save_scope_as = county
					}
					create_character = {
						location = root.location
						template = RICE_gaelic_thrall_template
						gender_female_chance = 100
						save_scope_as = thrall
						culture = scope:county.culture
						faith = scope:county.faith
					}
				}
				# Backup in case no such county can be found
				else = {
					random_list = {
						# Irish
						# Gaelic
						# Welsh
						# Anglo-Saxon
						# English
						40 = {
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								gender_female_chance = 100
								save_scope_as = thrall
								culture = culture:irish
								faith = faith:insular_celtic
							}				
						}
						30 = {
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								gender_female_chance = 100
								save_scope_as = thrall
								culture = culture:gaelic
								faith = faith:catholic
							}				
						}
						10 = {
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								gender_female_chance = 100
								save_scope_as = thrall
								culture = culture:welsh
								faith = faith:catholic
							}				
						}
						10 = {
							trigger = {
								NOT = {
									is_target_in_global_variable_list = {
										name = unavailable_unique_decisions
										target = flag:embrace_english_culture_decision
									}
								}
							}
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								gender_female_chance = 100
								save_scope_as = thrall
								culture = culture:anglo_saxon
								faith = faith:catholic
							}				
						}
						10 = {
							trigger = {
								is_target_in_global_variable_list = {
									name = unavailable_unique_decisions
									target = flag:embrace_english_culture_decision
								}
							}
							create_character = {
								location = root.location
								template = RICE_gaelic_thrall_template
								gender_female_chance = 100
								save_scope_as = thrall
								culture = culture:english
								faith = faith:catholic
							}				
						}
					}
				}
			}
		}

		hidden_effect = {
			scope:thrall = {
				random_list = {
					40 = { }
					30 = {
						add_trait = beauty_good_1
					}
					20 = {
						add_trait = beauty_good_2
					}
					10 = {
						add_trait = beauty_good_3
					}
				}
			}
		}

		# If concubinage is allowed
		# if = {
		# 	limit = {
		# 		scope:thrall = {
		# 			can_become_concubine_of_character_trigger = { CHARACTER = scope:courtier }
		# 		}
		# 		OR = {
		# 			scope:courtier.culture = { has_cultural_tradition = tradition_concubines }
		# 			scope:courtier.faith = { has_doctrine = doctrine_concubines }
		# 		}
		# 	}
		# 	random_list = {
		# 		20 = {
		# 			scope:thrall = {
		# 				make_concubine = scope:courtier
		# 			}
		# 		}
		# 		10 = {
		# 			scope:courtier = {
		# 				marry = scope:thrall
		# 			}
		# 		}
		# 	}
		# }
		# else = {
		# 	scope:courtier = {
		# 		marry = scope:thrall
		# 	}
		# }

		# Because concubinage is not shown for courtiers
		scope:courtier = {
			marry = scope:thrall
		}

		# Small chance
		hidden_effect = {
			random = {
				chance = 10
				# modifier = {
				# 	add = -15
				# 	scope:thrall = {
				# 		opinion = {
				# 			target = scope:courtier
				# 			value < 0
				# 		}
				# 	}
				# }
				# modifier = {
				# 	add = 10
				# 	scope:thrall = {
				# 		opinion = {
				# 			target = scope:courtier
				# 			value > 25
				# 		}
				# 	}
				# }
				# modifier = {
				# 	add = 10
				# 	scope:thrall = {
				# 		opinion = {
				# 			target = scope:courtier
				# 			value > 50
				# 		}
				# 	}
				# }
				# modifier = {
				# 	add = 10
				# 	scope:thrall = {
				# 		opinion = {
				# 			target = scope:courtier
				# 			value > 75
				# 		}
				# 	}
				# }
				modifier = {
					scope:courtier = { has_trait = sadistic }
					add = -5
				}
				modifier = {
					scope:courtier = { has_trait = compassionate }
					add = 5
				}
				modifier = {
					scope:courtier = { has_trait = callous }
					add = -5
				}
				modifier = {
					scope:courtier = { has_trait = gregarious }
					add = 5
				}
				modifier = {
					scope:courtier = {
						OR = {
							has_trait = beauty_good_1
							has_trait = beauty_good_2
							has_trait = beauty_good_3
						}
					}
					add = 5
				}
				scope:courtier = {
					set_random_lover_reason = { TARGET = scope:thrall }
				}
			}
		}

		# if = {
		# 	limit = {
		# 		scope:courtier = {
		# 			is_landed = yes
		# 		}
		# 	}
		# 	scope:courtier = {				
		# 		add_courtier = scope:thrall
		# 	}
		# }
		# else = {		
		# 	add_courtier = scope:thrall
		# }

	}

	# Ok
	option = {
		name = north_atlantic.0091.a
		trigger = {
			has_character_flag = RICE_north_atlantic_thrall_event
		}
		stress_impact = {
			callous = miniscule_stress_impact_gain
			arrogant = miniscule_stress_impact_gain
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_description_no_bullet = {
				text = north_atlantic.0090.info
			}
		}
	}
	# Ok
	option = {
		name = north_atlantic.0091.b
		trigger = {
			NOT = { has_character_flag = RICE_north_atlantic_thrall_event }
		}
		stress_impact = {
			callous = miniscule_stress_impact_gain
			arrogant = miniscule_stress_impact_gain
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_description_no_bullet = {
				text = north_atlantic.0090.info
			}
		}
	}
	# Ok
	option = {
		name = north_atlantic.0091.c
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_description_no_bullet = {
				text = north_atlantic.0090.info
			}
		}
	}

	# # Let the girl choose
	# option = {
	# 	name = north_atlantic.0090.b
	# 	random_list = {
	# 		desc = north_atlantic.0090.b.tooltip
	# 		50 = {
	# 			show_chance = no
	# 			desc = north_atlantic.0090.b.tooltip.yes
	# 			# She has to be at least neutral in opinion towards him
	# 			trigger = {
	# 				scope:thrall = {
	# 					opinion = {
	# 						target = scope:courtier
	# 						value > -20
	# 					}
	# 				}
	# 			}
	# 			# He's good looking
	# 			modifier = {
	# 				add = 5
	# 				scope:courtier = {
	# 					has_trait = beauty_good_1
	# 				}
	# 			}
	# 			modifier = {
	# 				add = 10
	# 				scope:courtier = {
	# 					has_trait = beauty_good_2
	# 				}
	# 			}
	# 			modifier = {
	# 				add = 15
	# 				scope:courtier = {
	# 					has_trait = beauty_good_3
	# 				}
	# 			}
	# 			# The girl is a gold digger or power hungry
	# 			modifier = {
	# 				add = 15
	# 				scope:thrall = {
	# 					OR = {
	# 						ai_greed >= medium_positive_ai_value
	# 						has_trait = greedy
	# 						has_trait = ambitious
	# 					}
	# 				}
	# 				scope:courtier = {
	# 					is_landed = yes
	# 				}
	# 			}
	# 			# The guy has a reputation for being nice
	# 			modifier = {
	# 				add = 10
	# 				scope:courtier = {
	# 					has_trait_benevolent_trigger = yes
	# 				}
	# 			}
	# 			# The guy is good at charming women
	# 			modifier = {
	# 				add = 10
	# 				scope:courtier = {
	# 					OR = {
	# 						has_trait = gallant
	# 						has_trait = seducer
	# 						has_trait = gregarious
	# 					}
	# 				}
	# 			}							
	# 			send_interface_toast = {
	# 				left_icon = ROOT
	# 				title = north_atlantic.0090.b.toast.yes
	# 				# If concubinage is allowed
	# 				if = {
	# 					limit = {
	# 						scope:thrall = {
	# 							can_become_concubine_of_character_trigger = { CHARACTER = scope:courtier }
	# 						}
	# 						OR = {
	# 							scope:courtier.culture = { has_cultural_tradition = tradition_concubines }
	# 							scope:courtier.faith = { has_doctrine = doctrine_concubines }
	# 						}
	# 					}
	# 					random_list = {
	# 						20 = {
	# 							scope:thrall = {
	# 								make_concubine = scope:courtier
	# 							}
	# 						}
	# 						10 = {
	# 							scope:courtier = {
	# 								marry = scope:thrall
	# 							}
	# 						}
	# 					}
	# 				}
	# 				else = {
	# 					scope:courtier = {
	# 						marry = scope:thrall
	# 					}
	# 				}					
	# 			}
	# 		}
	# 		# She is not interested
	# 		50 = {
	# 			show_chance = no
	# 			desc = north_atlantic.0090.b.tooltip.no
	# 			# He's ugly
	# 			modifier = {
	# 				add = 5
	# 				scope:courtier = {
	# 					has_trait = beauty_bad_1
	# 				}
	# 			}
	# 			modifier = {
	# 				add = 10
	# 				scope:courtier = {
	# 					has_trait = beauty_bad_2
	# 				}
	# 			}
	# 			modifier = {
	# 				add = 15
	# 				scope:courtier = {
	# 					has_trait = beauty_bad_3
	# 				}
	# 			}
	# 			# The girl looks down on the guy
	# 			modifier = {
	# 				add = 5
	# 				scope:thrall = {
	# 					has_trait = arrogant
	# 				}
	# 			}
	# 			# The girl is worried
	# 			modifier = {
	# 				add = 5
	# 				scope:thrall = {
	# 					has_trait = paranoid
	# 				}
	# 			}
	# 			# The guy has a reputation for being an asshole
	# 			modifier = {
	# 				add = 25
	# 				scope:courtier = {
	# 					OR = {
	# 						has_trait = sadistic
	# 						has_trait = wrathful
	# 						has_trait = arrogant
	# 						has_trait = callous
	# 						has_trait = vengeful
	# 					}
	# 				}
	# 			}
	# 			send_interface_toast = {
	# 				left_icon = ROOT
	# 				title = north_atlantic.0090.b.toast.no	
	# 				scope:courtier = {
	# 					add_prestige = -100
	# 				}			
	# 			}
	# 			hidden_effect = {
	# 				scope:thrall = {
	# 					death = {
	# 						death_reason = death_vanished
	# 					}
	# 				}		
	# 			}
	# 		}
	# 	}
	# }

	# # Do not give permission
	# option = {
	# 	name = north_atlantic.0090.c
	# 	hidden_effect = {
	# 		scope:thrall = {
	# 			death = {
	# 				death_reason = death_vanished
	# 			}
	# 		}
	# 	}
	# }

	
	after = {
		if = {
			limit = {
				has_character_flag = RICE_north_atlantic_thrall_event
			}
			remove_character_flag = RICE_north_atlantic_thrall_event
		}
	}

}




# Captured Native American arrives with crew
north_atlantic.0092 = {
	type = character_event
	title = north_atlantic.0092.t
	desc = {
		desc = north_atlantic.0092.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_native_american_child
				}
				desc = north_atlantic.0092.desc.child
			}
			desc = north_atlantic.0092.desc.adult
		}
		desc = north_atlantic.0092.desc.conclusion
	}
	theme = realm
	
	left_portrait = {
		character = root
		animation = personality_cynical
	}

	right_portrait = {
		character = scope:native
		animation = throne_room_bow_1
	}

	trigger = {
		OR = {	
			AND = {
				exists = struggle:RICE_greenland_struggle		
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_northern_islands		
					}
				}
			}
			AND = {		
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
			AND = {
				OR = {
					exists = struggle:RICE_greenland_struggle	
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
				OR = {
					has_game_rule = RICE_native_american_high
					has_game_rule = RICE_native_american_very_high
				}
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = world_europe	
					}
				}
			}
		}
		# NAND = {			
		# 	exists = struggle:RICE_greenland_struggle
		# 	any_character_struggle = {
		# 		is_struggle_type = RICE_greenland_struggle
		# 		OR = {
		# 			is_struggle_phase = struggle_RICE_greenland_phase_subsistence
		# 			is_struggle_phase = struggle_RICE_greenland_phase_marginalization
		# 		}
		# 	}
		# }
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = -0.5
			has_game_rule = RICE_native_american_high			
		}
		modifier = {
			add = 0.5
			has_global_variable = RICE_north_atlantic_vinland_colonized_done
		}
		modifier = {
			add = -0.8
			NOR = {
				has_global_variable = RICE_greenland_ending_integration
				has_global_variable = RICE_greenland_ending_indigenous
			}
		}
		modifier = {
			add = -0.5
			exists = house
			NOT = {
				house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
			}
		}
		modifier = {
			add = 0.5
			has_game_rule = RICE_native_american_moderate
		}
		modifier = {
			add = 1
			has_game_rule = RICE_native_american_high
		}
		modifier = {
			add = 1.5
			has_game_rule = RICE_native_american_very_high
		}
		# modifier = {
		# 	add = 1.5
		# 	has_global_variable = RICE_greenland_ending_indigenous
		# }
	}

	immediate = {
		random_list = {
			35 = {
				add_character_flag = RICE_native_american_child
				create_character = {
					location = root.location
					template = RICE_native_child_generic_template
					save_scope_as = native
					faith = root.faith
					random_culture = {
						culture:inuit = {
							trigger = {
								has_global_variable = RICE_greenland_inuit_are_here
							}
							weight = { base = 120 }
						}
						culture:dorset = {
							weight = { base = 120 }
						}
						culture:innu = {
							weight = {
								base = 25
								modifier = {
									add = 45
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:beothuk = {
							weight = {
								base = 25
								modifier = {
									add = 45
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:mikmaq = {
							weight = {
								base = 25
								modifier = {
									add = 55
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:east_cree = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:maliseet = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:passamaquoddy = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:penobscot = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:abenaki = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:laurentian = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
					}
					after_creation = {
						# Set religion
						if = {
							limit = {
								OR = {
									culture = { has_cultural_pillar = heritage_inuit }
									culture = { has_cultural_pillar = heritage_paleo_inuit }
								}
							}
							set_character_faith = faith:inuit_pagan
						}
						else_if = {
							limit = {
								culture = { has_cultural_pillar = heritage_iroquoian }
							}
							set_character_faith = faith:iroquoian_pagan
						}
						else_if = {
							limit = {
								culture = { has_cultural_pillar = heritage_algonquian }
							}
							set_character_faith = faith:algonquian_pagan
						}
					}
				}
			}
			65 = {
				create_character = {
					location = root.location
					template = RICE_native_generic_template
					save_scope_as = native
					faith = root.faith
					random_culture = {
						culture:inuit = {
							trigger = {
								has_global_variable = RICE_greenland_inuit_are_here
							}
							weight = { base = 120 }
						}
						culture:dorset = {
							weight = {
								base = 120
								modifier = {
									add = -60
									has_global_variable = RICE_greenland_inuit_are_here
								}
							}
						}
						culture:innu = {
							weight = {
								base = 25
								modifier = {
									add = 45
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:beothuk = {
							weight = {
								base = 25
								modifier = {
									add = 45
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:mikmaq = {
							weight = {
								base = 25
								modifier = {
									add = 55
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:east_cree = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:maliseet = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:passamaquoddy = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:penobscot = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:abenaki = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
						culture:laurentian = {
							weight = {
								base = 5
								modifier = {
									add = 35
									OR = {
										has_global_variable = RICE_greenland_ending_integration
										has_global_variable = RICE_greenland_ending_indigenous
									}
								}
							}
						}
					}
					after_creation = {
						# Set religion
						if = {
							limit = {
								OR = {
									culture = { has_cultural_pillar = heritage_inuit }
									culture = { has_cultural_pillar = heritage_paleo_inuit }
								}
							}
							set_character_faith = faith:inuit_pagan
						}
						else_if = {
							limit = {
								culture = { has_cultural_pillar = heritage_iroquoian }
							}
							set_character_faith = faith:iroquoian_pagan
						}
						else_if = {
							limit = {
								culture = { has_cultural_pillar = heritage_algonquian }
							}
							set_character_faith = faith:algonquian_pagan
						}
						add_character_flag = {
							flag = blocked_from_leaving
							years = 20 # Extra buffer so they don't run off to random places
						}
					}
				}
			}
		}
	}
	
	# Ok
	option = {
		name = north_atlantic.0092.a
		trigger = {
			OR = {
				gold >= 50
				is_ai = no
			}
		}
		remove_short_term_gold = 50
		add_courtier = scope:native
		stress_impact = {
			paranoid = minor_stress_impact_gain
		}
	}

	# No
	option = {
		name = north_atlantic.0092.b
		hidden_effect = {
			scope:native = {
				death = {
					death_reason = death_disappearance
				}			
			}
		}
	}

	# Help them get back home
	option = {
		name = north_atlantic.0092.c
		trigger = {
			OR = {
				gold >= 100
				is_ai = no
			}
			OR = {
				has_trait = compassionate
				has_trait = just
				has_trait = humble
			}
		}
		trait = compassionate
		trait = just
		trait = humble
		remove_short_term_gold = 100
		add_prestige = 100
		stress_impact = {
			compassionate = medium_stress_impact_loss
			just = minor_stress_impact_loss
			humble = minor_stress_impact_loss
		}
		hidden_effect = {
			scope:native = {
				death = {
					death_reason = death_disappearance
				}			
			}
		}
	}

	after = {		
		if = {
			limit = {
				has_character_flag = RICE_native_american_child
			}
			remove_character_flag = RICE_native_american_child
		}
	}
}



# Native American travels to your court
north_atlantic.0093 = {
	type = character_event
	title = north_atlantic.0093.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_native_american_spawn_vinland_colony
				}
				desc = north_atlantic.0093.desc.vinland_colony
			}
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_native_american_spawn_vinland_outpost
				}
				desc = north_atlantic.0093.desc.vinland_outpost
			}
			desc = north_atlantic.0093.desc.greenland
		}
		desc = north_atlantic.0093.desc.conclusion
	}
	theme = realm
	
	left_portrait = {
		character = root
		animation = personality_rational
	}

	right_portrait = {
		character = scope:native
		animation = throne_room_bow_1
	}

	trigger = {
		OR = {	
			AND = {
				exists = struggle:RICE_greenland_struggle		
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_northern_islands		
					}
				}
			}
			AND = {		
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region		
					}
				}
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
			AND = {
				OR = {
					exists = struggle:RICE_greenland_struggle	
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
				OR = {
					has_game_rule = RICE_native_american_high
					has_game_rule = RICE_native_american_very_high
				}
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = world_europe	
					}
				}
			}
		}
		# NAND = {			
		# 	exists = struggle:RICE_greenland_struggle
		# 	any_character_struggle = {
		# 		is_struggle_type = RICE_greenland_struggle
		# 		OR = {
		# 			is_struggle_phase = struggle_RICE_greenland_phase_subsistence
		# 			is_struggle_phase = struggle_RICE_greenland_phase_marginalization
		# 		}
		# 	}
		# }
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = -0.5
			has_game_rule = RICE_native_american_high			
		}
		modifier = {
			add = 0.5
			has_global_variable = RICE_north_atlantic_vinland_colonized_done
		}
		modifier = {
			add = -0.8
			NOR = {
				has_global_variable = RICE_greenland_ending_integration
				has_global_variable = RICE_greenland_ending_indigenous
			}
		}
		modifier = {
			add = -0.5
			exists = house
			NOT = {
				house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
			}
		}
		modifier = {
			add = 0.5
			has_game_rule = RICE_native_american_moderate
		}
		modifier = {
			add = 1
			has_game_rule = RICE_native_american_high
		}
		modifier = {
			add = 1.5
			has_game_rule = RICE_native_american_very_high
		}
		# modifier = {
		# 	add = 1.5
		# 	has_global_variable = RICE_greenland_ending_indigenous
		# }
	}

	immediate = {

		random_list = {
			10 = {
				trigger = {
					exists = house
					house = { has_house_modifier = RICE_north_atlantic_greenland_family_estate }
				}
			}
			5 = {
				trigger = {
					exists = dynasty				
					dynasty = {
						has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
					}
				}
				add_character_flag = RICE_native_american_spawn_vinland_outpost
			}
			5 = {
				trigger = {
					exists = dynasty				
					dynasty = {
						has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
					}
					has_global_variable = RICE_north_atlantic_vinland_colonized_done
				}
				add_character_flag = RICE_native_american_spawn_vinland_colony
			}
		}
		
		create_character = {
			location = root.location
			template = RICE_native_generic_template
			save_scope_as = native
			faith = root.faith
			random_culture = {
				culture:inuit = {
					trigger = {
						NOR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
						has_global_variable = RICE_greenland_inuit_are_here
					}
					weight = { base = 100 }
				}
				culture:dorset = {
					#trigger = {
					#	OR = {
					#		has_character_flag = RICE_native_american_spawn_vinland_outpost
					#		has_character_flag = RICE_native_american_spawn_vinland_colony							
					#	}
					#}
					weight = {
						base = 150
						modifier = {
							add = -110
							has_global_variable = RICE_greenland_inuit_are_here
						}
					}
				}
				culture:innu = {
					trigger = {
						OR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
					}
					weight = {
						base = 100
						modifier = {
							add = 50
							OR = {
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
						}
					}
				}
				culture:beothuk = {
					trigger = {
						OR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
					}
					weight = {
						base = 100
						modifier = {
							add = 50
							OR = {
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
						}
					}
				}
				culture:mikmaq = {
					trigger = {
						OR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
					}
					weight = {
						base = 50
						modifier = {
							add = 100
							OR = {
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
						}
					}
				}
				culture:east_cree = {
					trigger = {
						OR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
					}
					weight = {
						base = 50
						modifier = {
							add = 25
							OR = {
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
						}
					}
				}
				culture:maliseet = {
					trigger = {
						OR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
					}
					weight = {
						base = 50
						modifier = {
							add = 25
							OR = {
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
						}
					}
				}
				culture:passamaquoddy = {
					trigger = {
						OR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
					}
					weight = {
						base = 50
						modifier = {
							add = 25
							OR = {
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
						}
					}
				}
				culture:penobscot = {
					trigger = {
						OR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
					}
					weight = {
						base = 50
						modifier = {
							add = 25
							OR = {
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
						}
					}
				}
				culture:abenaki = {
					trigger = {
						OR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
					}
					weight = {
						base = 50
						modifier = {
							add = 25
							OR = {
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
						}
					}
				}
				culture:laurentian = {
					trigger = {
						OR = {
							has_character_flag = RICE_native_american_spawn_vinland_outpost
							has_character_flag = RICE_native_american_spawn_vinland_colony							
						}
					}
					weight = {
						base = 50
						modifier = {
							add = 25
							OR = {
								has_global_variable = RICE_greenland_ending_integration
								has_global_variable = RICE_greenland_ending_indigenous
							}
						}
					}
				}
			}
			after_creation = {
				# Set religion
				if = {
					limit = {
						OR = {
							culture = { has_cultural_pillar = heritage_inuit }
							culture = { has_cultural_pillar = heritage_paleo_inuit }
						}
					}
					set_character_faith = faith:inuit_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_iroquoian }
					}
					set_character_faith = faith:iroquoian_pagan
				}
				else_if = {
					limit = {
						culture = { has_cultural_pillar = heritage_algonquian }
					}
					set_character_faith = faith:algonquian_pagan
				}
				add_character_flag = {
					flag = blocked_from_leaving
					years = 20 # Extra buffer so they don't run off to random places
				}
			}
		}
	}
	
	# Ok
	option = {
		name = north_atlantic.0093.a
		duel = {
			skill = diplomacy
			value = 14
			30 = {
				desc = north_atlantic.0093.a.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.5
				}
				modifier = {
					scope:native = {
						opinion = {
							target = root
							value >= 40
						}
					}
					factor = 2
				}
				modifier = {
					scope:native = {
						opinion = {
							target = root
							value >= 80
						}
					}
					factor = 2
				}
				send_interface_toast = {
					title = north_atlantic.0093.a.success
					left_icon = scope:native
					add_courtier = scope:native
				}
			}
			70 = {
				desc = north_atlantic.0093.a.failure
				send_interface_toast = {
					title = north_atlantic.0093.a.failure
					left_icon = scope:native
					custom_tooltip = north_atlantic.0093.a.failure.tooltip
					hidden_effect = {
						scope:native = {
							death = {
								death_reason = death_disappearance
							}
						}
					}
				}
			}
		}
		stress_impact = {
			paranoid = minor_stress_impact_gain
		}
	}

	# Pay them
	option = {
		name = north_atlantic.0093.c
		random_list = {
			50 = {
				desc = north_atlantic.0093.a.success
				modifier = {
					scope:native = {
						has_trait = greedy
					}
					add = 10
				}
				modifier = {
					scope:native = {
						has_trait = ambitious
					}
					add = 10
				}
				modifier = {
					scope:native = {
						has_trait = content
					}
					add = -10
				}
				modifier = {
					add = {
						value = ai_boldness
						multiply = 0.25
					}
					NOT = { ai_boldness = 0 }
				}
				modifier = {
					add = {
						value = ai_energy
						multiply = 0.25
					}
					NOT = { ai_energy = 0 }
				}
				modifier = {
					add = {
						value = ai_greed
						multiply = 0.5
					}
					NOT = { ai_greed = 0 }
				}
				pay_short_term_gold = {
					target = scope:native
					gold = 50
				}
				send_interface_toast = {
					title = north_atlantic.0093.a.success
					left_icon = scope:native
					add_courtier = scope:native
				}
			}
			50 = {
				desc = north_atlantic.0093.a.failure
				modifier = {
					scope:native = {
						has_trait = craven
					}
					add = 10
				}
				modifier = {
					scope:native = {
						has_trait = paranoid
					}
					add = 10
				}
				modifier = {
					scope:native = {
						has_trait = content
					}
					add = 10
				}
				modifier = {
					add = {
						value = ai_zeal
						multiply = 0.25
					}
					NOT = { ai_zeal = 0 }
				}
				send_interface_toast = {
					title = north_atlantic.0093.a.failure
					left_icon = scope:native
					custom_tooltip = north_atlantic.0093.a.failure.tooltip
					hidden_effect = {
						scope:native = {
							death = {
								death_reason = death_disappearance
							}
						}
					}
				}
			}
		}
	}

	# No
	option = {
		name = north_atlantic.0093.b
		hidden_effect = {
			scope:native = {
				death = {
					death_reason = death_disappearance
				}			
			}
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_native_american_spawn_vinland_outpost 
			}
			remove_character_flag = RICE_native_american_spawn_vinland_outpost
		}
		if = {
			limit = {
				has_character_flag = RICE_native_american_spawn_vinland_colony 
			}
			remove_character_flag = RICE_native_american_spawn_vinland_colony
		}
	} 

}



# Greenlander arrives at your court
north_atlantic.0094 = {
	type = character_event
	title = north_atlantic.0094.t
	desc = north_atlantic.0094.desc
	theme = diplomacy_foreign_affairs_focus

	left_portrait = root
	right_portrait = {
		character = scope:greenlander
		animation = throne_room_bow_1
	}

	trigger = {
		OR = {
			has_global_variable = RICE_greenland_ending_integration
			has_global_variable = RICE_greenland_ending_indigenous
			AND = {
				exists = struggle:RICE_greenland_struggle	
				OR = {			
					any_character_struggle = {
						involvement = involved
						is_struggle_type = RICE_greenland_struggle
					}
					any_character_struggle = {
						involvement = interloper
						is_struggle_type = RICE_greenland_struggle
					}
				}
			}
		}
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greenland_struggle_region
			}
		}
		NOT = { has_character_modifier = RICE_north_atlantic_new_greenland_courtier }
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.5
			exists = house
			house = {
				has_house_modifier = RICE_north_atlantic_greenland_family_estate
			}
		}
	}

	immediate = {
		ordered_in_global_list = {
			variable = RICE_north_atlantic_erik_the_red
			save_scope_as = erik
		}
		character:RICE_greenlandic_deity_001 = {
			culture = {
				save_scope_as = greenlandic
			}
		}
		create_character = {
			location = root.capital_province
			template = RICE_greenlandic_generic_template
			save_scope_as = greenlander			
		}
		scope:greenlander = {
			add_character_flag = RICE_no_americas_possible
		}
	}

	# Hire them
	option = {
		name = north_atlantic.0094.a
		add_courtier = scope:greenlander
		pay_short_term_gold = {
			target = scope:greenlander
			gold = 50
		}
		add_character_modifier = {
			modifier = RICE_north_atlantic_new_greenland_courtier
			years = 20
		}
	}

	# Don't hire them
	option = {
		name = north_atlantic.0094.b
		hidden_effect = {
			scope:greenlander = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

}

# Vinlander arrives at your court
north_atlantic.0095 = {
	type = character_event
	title = north_atlantic.0095.t
	desc = north_atlantic.0095.desc
	theme = diplomacy_foreign_affairs_focus

	left_portrait = root
	right_portrait = {
		character = scope:vinlander
		animation = throne_room_bow_1
	}

	trigger = {
		has_global_variable = RICE_north_atlantic_vinland_colonized_done
		exists = dynasty
		dynasty = {
			OR = {
				has_dynasty_modifier = RICE_north_atlantic_vinland_outpost
				has_dynasty_modifier = RICE_north_atlantic_vinland_settlement
			}	
		}
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greenland_struggle_region
			}
		}
		NOT = { has_character_modifier = RICE_north_atlantic_new_vinland_courtier }
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.5
			exists = house
			house = {
				has_house_modifier = RICE_north_atlantic_greenland_family_estate
			}
		}
	}

	immediate = {
		ordered_in_global_list = {
			variable = RICE_north_atlantic_leif_erikson_equivalent
			save_scope_as = leif
		}
		character:RICE_greenlandic_deity_002 = {
			culture = {
				save_scope_as = vinlandic
			}
		}
		create_character = {
			location = root.capital_province
			template = RICE_vinlandic_generic_template
			save_scope_as = vinlander
		}
		scope:greenlander = {
			add_character_flag = RICE_no_americas_possible
		}
	}

	# Hire them
	option = {
		name = north_atlantic.0095.a
		add_courtier = scope:vinlander
		pay_short_term_gold = {
			target = scope:vinlander
			gold = 50
		}
		add_character_modifier = {
			modifier = RICE_north_atlantic_new_vinland_courtier
			years = 20
		}
	}

	# Don't hire them
	option = {
		name = north_atlantic.0095.b
		hidden_effect = {
			scope:vinlander = {
				death = {
					death_reason = death_vanished
				}
			}
		}
	}

}


######################################################################################
# 
# SUPPORT GREENLAND
# 
# north_atlantic.0100-north_atlantic.0109
# 
######################################################################################


# Aid sails off
north_atlantic.0100 = {
	type = character_event
	title = north_atlantic.0100.t
	desc = {
		desc = north_atlantic.0100.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_greenland_aid = flag:basic_supplies
				}
				desc = north_atlantic.0100.desc.basic_supplies
			}
			triggered_desc = {
				trigger = {
					var:RICE_greenland_aid = flag:settlers
				}
				desc = north_atlantic.0100.desc.settlers
			}
			triggered_desc = {
				trigger = {
					var:RICE_greenland_aid = flag:food
				}
				desc = north_atlantic.0100.desc.food
			}
			triggered_desc = {
				trigger = {
					var:RICE_greenland_aid = flag:materials
				}
				desc = north_atlantic.0100.desc.materials
			}
			triggered_desc = {
				trigger = {
					var:RICE_greenland_aid = flag:clergy
				}
				desc = north_atlantic.0100.desc.clergy
			}
			triggered_desc = {
				trigger = {
					var:RICE_greenland_aid = flag:hunting_stations
				}
				desc = north_atlantic.0100.desc.hunting_stations
			}
			triggered_desc = {
				trigger = {
					var:RICE_greenland_aid = flag:shielings
				}
				desc = north_atlantic.0100.desc.shielings
			}
			triggered_desc = {
				trigger = {
					var:RICE_greenland_aid = flag:temples
				}
				desc = north_atlantic.0100.desc.temples
			}
		}
	}
	theme = stewardship_domain_focus
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = {
		character = root
		animation = war_defender
	}

	immediate = {
		if = {
			limit = {
				var:RICE_greenland_aid = flag:basic_supplies
			}
			remove_short_term_gold = RICE_greenland_support_small_cost
		}
		else_if = {
			limit = {
				OR = {
					var:RICE_greenland_aid = flag:settlers
					var:RICE_greenland_aid = flag:food
					var:RICE_greenland_aid = flag:materials
					var:RICE_greenland_aid = flag:clergy
				}
			}
			remove_short_term_gold = RICE_greenland_support_medium_cost
		}
		else_if = {
			limit = {
				OR = {
					var:RICE_greenland_aid = flag:hunting_stations
					var:RICE_greenland_aid = flag:shielings
					var:RICE_greenland_aid = flag:temples
				}
			}
			remove_short_term_gold = RICE_greenland_support_large_cost
		}
	}

	option = {
		name = north_atlantic.0100.a
		custom_tooltip = north_atlantic.0100.a.tooltip
	}

	after = {		
		create_story = RICE_story_cycle_north_atlantic_support_greenland
	}

}




# Aid arrives in Greenland safely
north_atlantic.0101 = {
	type = character_event
	title = north_atlantic.0101.t
	desc = {
		desc = north_atlantic.0101.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:basic_supplies
				}
				desc = north_atlantic.0101.desc.basic_supplies
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:settlers
				}
				desc = north_atlantic.0101.desc.settlers
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:food
				}
				desc = north_atlantic.0101.desc.food
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:materials
				}
				desc = north_atlantic.0101.desc.materials
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:clergy
				}
				desc = north_atlantic.0101.desc.clergy
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:hunting_stations
				}
				desc = north_atlantic.0101.desc.hunting_stations
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:shielings
				}
				desc = north_atlantic.0101.desc.shielings
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:temples
				}
				desc = north_atlantic.0101.desc.temples
			}
		}
	}
	theme = RICE_theme_north_atlantic_greenland_farm

	right_portrait = root

	immediate = {
		random_owned_story = {
			limit = { story_type = RICE_story_cycle_north_atlantic_support_greenland }
			save_scope_as = story
		}
		if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:basic_supplies
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				add = scope:story.var:RICE_support_primary_resource_increase
			}
			change_global_variable = {
				name = RICE_greenland_networks
				add = scope:story.var:RICE_support_secondary_resource_increase
			}
			set_variable = {
				name = RICE_primary_resource_value_temp
				value = scope:story.var:RICE_support_primary_resource_increase
			}
			set_variable = {
				name = RICE_secondary_resource_value_temp
				value = scope:story.var:RICE_support_secondary_resource_increase
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:settlers
			}
			change_global_variable = {
				name = RICE_greenland_networks
				add = scope:story.var:RICE_support_primary_resource_increase
			}
			set_variable = {
				name = RICE_primary_resource_value_temp
				value = scope:story.var:RICE_support_primary_resource_increase
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:food
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				add = scope:story.var:RICE_support_primary_resource_increase
			}
			set_variable = {
				name = RICE_primary_resource_value_temp
				value = scope:story.var:RICE_support_primary_resource_increase
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:materials
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				add = scope:story.var:RICE_support_primary_resource_increase
			}
			set_variable = {
				name = RICE_primary_resource_value_temp
				value = scope:story.var:RICE_support_primary_resource_increase
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:clergy
			}
			change_global_variable = {
				name = RICE_greenland_networks
				add = scope:story.var:RICE_support_primary_resource_increase
			}
			set_variable = {
				name = RICE_primary_resource_value_temp
				value = scope:story.var:RICE_support_primary_resource_increase
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:hunting_stations
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				add = scope:story.var:RICE_support_primary_resource_increase
			}
			change_global_variable = {
				name = RICE_greenland_networks
				add = scope:story.var:RICE_support_secondary_resource_increase
			}
			set_variable = {
				name = RICE_primary_resource_value_temp
				value = scope:story.var:RICE_support_primary_resource_increase
			}
			set_variable = {
				name = RICE_secondary_resource_value_temp
				value = scope:story.var:RICE_support_secondary_resource_increase
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:shielings
			}
			change_global_variable = {
				name = RICE_greenland_networks
				add = scope:story.var:RICE_support_primary_resource_increase
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				add = scope:story.var:RICE_support_secondary_resource_increase
			}
			set_variable = {
				name = RICE_primary_resource_value_temp
				value = scope:story.var:RICE_support_primary_resource_increase
			}
			set_variable = {
				name = RICE_secondary_resource_value_temp
				value = scope:story.var:RICE_support_secondary_resource_increase
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:temples
			}
			change_global_variable = {
				name = RICE_greenland_networks
				add = scope:story.var:RICE_support_primary_resource_increase
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				add = scope:story.var:RICE_support_secondary_resource_increase
			}
			set_variable = {
				name = RICE_primary_resource_value_temp
				value = scope:story.var:RICE_support_primary_resource_increase
			}
			set_variable = {
				name = RICE_secondary_resource_value_temp
				value = scope:story.var:RICE_support_secondary_resource_increase
			}
		}
	}

	widget = {
		gui = "event_window_widget_RICE_progressbars_greenland"
		container = "custom_widgets_container"
	}

	option = {
		name = north_atlantic.0101.a
		if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:basic_supplies
			}
			add_piety = 50
			add_prestige = 50
			custom_tooltip = north_atlantic.0101.tooltip.basic_supplies	
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}	
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_greenland_basic_supplies
						character = root
					}
				}
			}	
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:settlers
			}
			add_piety = 100
			custom_tooltip = north_atlantic.0101.tooltip.settlers	
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_greenland_settlers
						character = root
					}
				}
			}	
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:food
			}
			add_prestige = 100
			custom_tooltip = north_atlantic.0101.tooltip.food
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_greenland_food
						character = root
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:materials
			}
			add_prestige = 100
			custom_tooltip = north_atlantic.0101.tooltip.materials
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_greenland_materials
						character = root
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:clergy
			}
			add_piety = 100
			custom_tooltip = north_atlantic.0101.tooltip.clergy
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_greenland_clergy
						character = root
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:hunting_stations
			}
			add_prestige = 150
			add_character_modifier = {
				modifier = RICE_north_atlantic_built_hunting_stations
				years = 10
			}
			custom_tooltip = north_atlantic.0101.tooltip.hunting_stations
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_greenland_hunting_stations
						character = root
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:shielings
			}
			add_piety = 75
			add_prestige = 75
			add_character_modifier = {
				modifier = RICE_north_atlantic_built_shielings
				years = 10
			}
			custom_tooltip = north_atlantic.0101.tooltip.shielings
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_greenland_shielings
						character = root
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_greenland_aid_type = flag:temples
			}
			add_piety = 150
			add_character_modifier = {
				modifier = RICE_north_atlantic_built_temples
				years = 10
			}
			custom_tooltip = north_atlantic.0101.tooltip.temples
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_greenland_temples
						character = root
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = { has_variable = RICE_support_primary_resource_increase }
			remove_variable = RICE_support_primary_resource_increase
		}
		if = {
			limit = { has_variable = RICE_support_secondary_resource_increase }
			remove_variable = RICE_support_secondary_resource_increase
		}
		if = {
			limit = { has_variable = RICE_primary_resource_value_temp }
			remove_variable = RICE_primary_resource_value_temp
		}
		if = {
			limit = { has_variable = RICE_secondary_resource_value_temp }
			remove_variable = RICE_secondary_resource_value_temp
		}
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_support_greenland
			}
			end_story = yes
		}
	}

}



# Aid fails to arrive in Greenland safely
north_atlantic.0102 = {
	type = character_event
	title = north_atlantic.0102.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:basic_supplies
				}
				desc = north_atlantic.0102.desc.basic_supplies
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:settlers
				}
				desc = north_atlantic.0102.desc.settlers
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:food
				}
				desc = north_atlantic.0102.desc.food
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:materials
				}
				desc = north_atlantic.0102.desc.materials
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:clergy
				}
				desc = north_atlantic.0102.desc.clergy
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:hunting_stations
				}
				desc = north_atlantic.0102.desc.hunting_stations
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:shielings
				}
				desc = north_atlantic.0102.desc.shielings
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_greenland_aid_type = flag:temples
				}
				desc = north_atlantic.0102.desc.temples
			}
		}
		desc = north_atlantic.0102.desc
	}
	theme = RICE_theme_north_atlantic_port

	right_portrait = {
		character = root
		animation = stress
	}

	immediate = {

		play_music_cue = mx_cue_stress  

		random_owned_story = {
			limit = { story_type = RICE_story_cycle_north_atlantic_support_greenland }
			save_scope_as = story
		}

		if = {
			limit = {
				scope:story.var:RICE_support_resilience_decrease > 0
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				subtract = scope:story.var:RICE_support_resilience_decrease
			}
			set_variable = {
				name = RICE_resilience_value_temp
				value = scope:story.var:RICE_support_resilience_decrease
			}
		}
		if = {
			limit = {
				scope:story.var:RICE_support_networks_decrease > 0
			}
			change_global_variable = {
				name = RICE_greenland_networks
				subtract = scope:story.var:RICE_support_networks_decrease
			}
			set_variable = {
				name = RICE_networks_value_temp
				value = scope:story.var:RICE_support_networks_decrease
			}
		}

	}

	widget = {
		gui = "event_window_widget_RICE_progressbars_greenland"
		container = "custom_widgets_container"
	}

	option = {
		name = north_atlantic.0102.a
		if = {
			limit = {
				scope:story.var:RICE_support_resilience_decrease > 0
			}
			custom_tooltip = north_atlantic.0102.tooltip.decrease_resilience
		}
		if = {
			limit = {
				scope:story.var:RICE_support_networks_decrease > 0
			}
			custom_tooltip = north_atlantic.0102.tooltip.decrease_networks
		}
		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
			}
			if = {
				limit = {
					scope:story.var:RICE_greenland_aid_type = flag:basic_supplies
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_greenland_basic_supplies
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_greenland_aid_type = flag:settlers
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_greenland_settlers
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_greenland_aid_type = flag:food
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_greenland_food
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_greenland_aid_type = flag:materials
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_greenland_materials
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_greenland_aid_type = flag:clergy
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_greenland_clergy
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_greenland_aid_type = flag:hunting_stations
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_greenland_hunting_stations
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_greenland_aid_type = flag:shielings
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_greenland_shielings
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_greenland_aid_type = flag:temples
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_greenland_temples
						character = root
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = { has_variable = RICE_resilience_value_temp }
			remove_variable = RICE_resilience_value_temp
		}
		if = {
			limit = { has_variable = RICE_networks_value_temp }
			remove_variable = RICE_networks_value_temp
		}
		if = {
			limit = { has_variable = RICE_primary_resource_value_temp }
			remove_variable = RICE_primary_resource_value_temp
		}
		if = {
			limit = { has_variable = RICE_secondary_resource_value_temp }
			remove_variable = RICE_secondary_resource_value_temp
		}
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_support_greenland
			}
			end_story = yes
		}
	}

}





######################################################################################
# 
# SUPPORT VINLAND
# 
# north_atlantic.0110-north_atlantic.0119
# 
######################################################################################


# Aid sails off
north_atlantic.0110 = {
	type = character_event
	title = north_atlantic.0110.t
	desc = {
		desc = north_atlantic.0110.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid = flag:supplies
				}
				desc = north_atlantic.0110.desc.supplies
			}
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid = flag:settlers
				}
				desc = north_atlantic.0110.desc.settlers
			}
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid = flag:temples
				}
				desc = north_atlantic.0110.desc.temples
			}
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid = flag:base_camps
				}
				desc = north_atlantic.0110.desc.base_camps
			}
		}
		desc = north_atlantic.0110.desc
	}
	theme = stewardship_domain_focus
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = {
		character = root
		animation = war_defender
	}

	immediate = {
		remove_short_term_gold = RICE_vinland_cost
	}

	option = {
		name = north_atlantic.0110.a
		custom_tooltip = north_atlantic.0110.a.tooltip
	}

	after = {		
		create_story = RICE_story_cycle_north_atlantic_support_vinland
	}

}




# Aid arrives in Vinland safely
north_atlantic.0111 = {
	type = character_event
	title = north_atlantic.0111.t
	desc = {
		desc = north_atlantic.0111.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid_type = flag:supplies
				}
				desc = north_atlantic.0111.desc.supplies
			}
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid_type = flag:settlers
				}
				desc = north_atlantic.0111.desc.settlers
			}
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid_type = flag:temples
				}
				desc = north_atlantic.0111.desc.temples
			}
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid_type = flag:base_camps
				}
				desc = north_atlantic.0111.desc.base_camps
			}
		}
		desc = north_atlantic.0111.desc
	}
	theme = RICE_theme_north_atlantic_vinland_outpost

	right_portrait = root

	immediate = {
		random_owned_story = {
			limit = { story_type = RICE_story_cycle_north_atlantic_support_vinland }
			save_scope_as = story
		}
		change_global_variable = {
			name = RICE_greenland_resilience
			subtract = scope:story.var:RICE_support_resilience_decrease
		}
		change_global_variable = {
			name = RICE_greenland_networks
			subtract = scope:story.var:RICE_support_networks_decrease
		}
		change_global_variable = {
			name = RICE_vinland_viability
			add = scope:story.var:RICE_support_viability_increase
		}
		set_variable = {
			name = RICE_resilience_resource_value_temp
			value = scope:story.var:RICE_support_resilience_decrease
		}
		set_variable = {
			name = RICE_networks_resource_value_temp
			value = scope:story.var:RICE_support_networks_decrease
		}
		set_variable = {
			name = RICE_viability_resource_value_temp
			value = scope:story.var:RICE_support_viability_increase
		}
	}

	widget = {
		gui = "event_window_widget_RICE_progressbars_all"
		container = "custom_widgets_container"
	}

	option = {
		name = north_atlantic.0111.a
		custom_tooltip = north_atlantic.0111.tooltip.increase_viability
		custom_tooltip = north_atlantic.0111.tooltip.decrease_resilience
		custom_tooltip = north_atlantic.0111.tooltip.decrease_networks
		if = {
			limit = {
				scope:story.var:RICE_vinland_aid_type = flag:supplies
			}
			add_piety = 50	
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_vinland_supplies
						character = root
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_vinland_aid_type = flag:settlers
			}
			add_prestige = 50	
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_vinland_settlers
						character = root
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_vinland_aid_type = flag:base_camps
			}
			add_prestige = 100
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_vinland_base_camps
						character = root
					}
				}
			}
		}
		else_if = {
			limit = {
				scope:story.var:RICE_vinland_aid_type = flag:temples
			}
			add_piety = 100
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_vinland_temples
						character = root
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = { has_variable = RICE_resilience_resource_value_temp }
			remove_variable = RICE_resilience_resource_value_temp
		}
		if = {
			limit = { has_variable = RICE_networks_resource_value_temp }
			remove_variable = RICE_networks_resource_value_temp
		}
		if = {
			limit = { has_variable = RICE_viability_resource_value_temp }
			remove_variable = RICE_viability_resource_value_temp
		}
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_support_vinland
			}
			end_story = yes
		}
	}

}



# Aid fails to arrive in Vinland not safely
north_atlantic.0112 = {
	type = character_event
	title = north_atlantic.0112.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid_type = flag:supplies
				}
				desc = north_atlantic.0112.desc.supplies
			}
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid_type = flag:settlers
				}
				desc = north_atlantic.0112.desc.settlers
			}
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid_type = flag:temples
				}
				desc = north_atlantic.0112.desc.temples
			}
			triggered_desc = {
				trigger = {
					var:RICE_vinland_aid_type = flag:base_camps
				}
				desc = north_atlantic.0112.desc.base_camps
			}
		}
		desc = north_atlantic.0112.desc
	}
	theme = RICE_theme_north_atlantic_port

	right_portrait = {
		character = root
		animation = stress
	}

	immediate = {

		play_music_cue = mx_cue_stress  

		random_owned_story = {
			limit = { story_type = RICE_story_cycle_north_atlantic_support_vinland }
			save_scope_as = story
		}

		change_global_variable = {
			name = RICE_greenland_resilience
			subtract = scope:story.var:RICE_support_resilience_decrease
		}
		change_global_variable = {
			name = RICE_greenland_networks
			subtract = scope:story.var:RICE_support_networks_decrease
		}
		set_variable = {
			name = RICE_resilience_resource_value_temp
			value = scope:story.var:RICE_support_resilience_decrease
		}
		set_variable = {
			name = RICE_networks_resource_value_temp
			value = scope:story.var:RICE_support_resilience_decrease
		}

	}

	widget = {
		gui = "event_window_widget_RICE_progressbars_all"
		container = "custom_widgets_container"
	}

	option = {
		name = north_atlantic.0112.a
		custom_tooltip = north_atlantic.0112.tooltip.decrease_resilience
		custom_tooltip = north_atlantic.0112.tooltip.decrease_networks
		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
			}
			if = {
				limit = {
					scope:story.var:RICE_vinland_aid_type = flag:supplies
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_vinland_supplies
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_vinland_aid_type = flag:settlers
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_vinland_settlers
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_vinland_aid_type = flag:base_camps
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_vinland_base_camps
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_vinland_aid_type = flag:temples
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_support_fail_vinland_temples
						character = root
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = { has_variable = RICE_resilience_resource_value_temp }
			remove_variable = RICE_resilience_resource_value_temp
		}
		if = {
			limit = { has_variable = RICE_networks_resource_value_temp }
			remove_variable = RICE_networks_resource_value_temp
		}
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_support_vinland
			}
			end_story = yes
		}
	}

}





######################################################################################
# 
# NORDSETUR HUNT
# 
# north_atlantic.0120-north_atlantic.0139
# 
######################################################################################


# Preparing for the walrus hunt
north_atlantic.0120 = {
	type = character_event
	title = north_atlantic.0120.t
	desc = north_atlantic.0120.desc
	theme = hunt_activity
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = {
		character = root
		animation = war_attacker
	}

	immediate = {
		random_owned_story = {
			limit = { story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt }
			save_scope_as = story
		}
		scope:story = {
			set_variable = {
				name = RICE_walrus_hunt_started
				value = yes
			}
			set_variable = {
				name = RICE_walrus_hunt_timer
				days = 75
			}
		}
		
		random = {
			chance = 20 # Doesn't work as a scripted value for some frustratingly bizarre reason
			modifier = {				
				add = {
					value = global_var:RICE_greenland_resilience
					multiply = 0.05
				}
			}
			modifier = {				
				add = {
					value = diplomacy
					multiply = 0.5
					max = 15
				}
			}
			modifier = {				
				add = {
					value = stewardship
					multiply = 1.25
					max = 15
				}
			}
			modifier = {
				add = 15
				OR = {
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
					AND = {						
						exists = struggle:RICE_greenland_struggle
						struggle:RICE_greenland_struggle = {
							is_struggle_phase = struggle_RICE_greenland_phase_integration
						}
					}
				}	
			}
			modifier = {
				add = 10
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_settlement
				}	
			}
			modifier = {
				add = -10
				exists = struggle:RICE_greenland_struggle
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_marginalization
				}
			}
			modifier = {
				add = 10
				scope:story.var:RICE_nordsetur_hunt_type = flag:major
			}
			modifier = {
				add = 20
				scope:story.var:RICE_nordsetur_hunt_type = flag:great
			}
			modifier = {
				add = 10
				has_character_modifier = RICE_north_atlantic_built_hunting_stations
			}
			#story_owner = {
				add_character_flag = {
					flag = RICE_walrus_hunt_success_guaranteed
					days = 365
				}
				#add_character_flag = RICE_walrus_hunt_success_guaranteed
			#}
			# set_variable = {
			# 	name = RICE_walrus_hunt_success_guaranteed
			# 	value = yes
			# }
		}
	}

	option = {
		name = north_atlantic.0120.a
		custom_tooltip = north_atlantic.0120.a.tooltip
	}

}


# Hunting party does not make it back
north_atlantic.0121 = {
	type = character_event
	title = north_atlantic.0121.t
	desc = {
		desc = north_atlantic.0121.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_random_hunt_fail_variety = flag:attack
				}
				desc = north_atlantic.0121.desc.attack
			}
			triggered_desc = {
				trigger = {
					var:RICE_random_hunt_fail_variety = flag:heavy_storm
				}
				desc = north_atlantic.0121.desc.heavy_storm
			}
			triggered_desc = {
				trigger = {
					var:RICE_random_hunt_fail_variety = flag:mild_storm
				}
				desc = north_atlantic.0121.desc.mild_storm
			}
			triggered_desc = {
				trigger = {
					var:RICE_random_hunt_fail_variety = flag:rescue_storm
				}
				desc = north_atlantic.0121.desc.rescue_storm
			}
			triggered_desc = {
				trigger = {
					var:RICE_random_hunt_fail_variety = flag:kaboom
				}
				desc = north_atlantic.0121.desc.kaboom
			}
			triggered_desc = {
				trigger = {
					var:RICE_random_hunt_fail_variety = flag:supplies
				}
				desc = north_atlantic.0121.desc.supplies
			}
			triggered_desc = {
				trigger = {
					var:RICE_random_hunt_fail_variety = flag:deaths
				}
				desc = north_atlantic.0121.desc.deaths
			}
			triggered_desc = {
				trigger = {
					var:RICE_random_hunt_fail_variety = flag:fled
				}
				desc = north_atlantic.0121.desc.fled
			}
		}
	}
	theme = death
	override_background = { reference = RICE_background_north_atlantic_disko_bay }
	override_icon = { reference = "gfx/interface/icons/event_types/type_hunt.dds" }

	left_portrait = {
		character = scope:native_leader		
		trigger = {
			exists = scope:native_leader
		}
		animation = throne_room_two_handed_passive_1
		# triggered_animation = {
		# 	trigger = { var:RICE_random_hunt_fail_variety = flag:attack }
		# 	animation = throne_room_two_handed_passive_1
		# }
		# triggered_animation = {
		# 	trigger = { var:RICE_random_hunt_fail_variety = flag:rescue_storm }
		# 	animation = personality_compassionate
		# }
	}
	right_portrait = {
		character = root
		animation = stress		
		trigger = { NOT = { exists = scope:native_leader } }
	}

	immediate = {
		if = {
			limit = {
				scope:story.var:RICE_walrus_hunt_resilience_decrease > 0
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				subtract = scope:story.var:RICE_walrus_hunt_resilience_decrease
			}
			set_variable = {
				name = RICE_resilience_value_temp
				value = scope:story.var:RICE_walrus_hunt_resilience_decrease
			}
		}
		if = {
			limit = {
				scope:story.var:RICE_walrus_hunt_networks_decrease > 0
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				subtract = scope:story.var:RICE_walrus_hunt_networks_decrease
			}
			set_variable = {
				name = RICE_networks_value_temp
				value = scope:story.var:RICE_walrus_hunt_networks_decrease
			}
		}
		# Random variety
		random_list = {
			# Attacked by natives
			10 = {
				modifier = {
					add = 5
					has_global_variable = RICE_greenland_inuit_are_here
				}
				set_variable = {
					name = RICE_random_hunt_fail_variety
					value = flag:attack
				}
				if = {
					limit = {
						has_global_variable = RICE_greenland_inuit_are_here
					}					
					create_character = {
						location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
						template = RICE_native_chief_template
						save_scope_as = native_leader
						culture = culture:inuit
						faith = faith:inuit_pagan
					}
				}
				else = {				
					create_character = {
						location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
						template = RICE_native_chief_template
						save_scope_as = native_leader
						culture = culture:dorset
						faith = faith:inuit_pagan
					}
				}
			}
			# Caught in a storm - no survivors
			10 = {
				modifier = {
					add = 5
					has_global_variable = RICE_greenland_environmental_change_warning
				}
				set_variable = {
					name = RICE_random_hunt_fail_variety
					value = flag:heavy_storm
				}
			}
			# Caught in a storm - a few survivors
			10 = {
				modifier = {
					add = 5
					has_global_variable = RICE_greenland_environmental_change_warning
				}
				set_variable = {
					name = RICE_random_hunt_fail_variety
					value = flag:mild_storm
				}
			}
			# Caught in a storm but saved by locals
			10 = {
				modifier = {
					add = 5
					has_global_variable = RICE_greenland_environmental_change_warning
				}
				if = {
					limit = {
						has_global_variable = RICE_greenland_inuit_are_here
					}					
					create_character = {
						location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
						template = RICE_native_chief_template
						save_scope_as = native_leader
						culture = culture:inuit
						faith = faith:inuit_pagan
					}
				}
				else = {				
					create_character = {
						location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
						template = RICE_native_chief_template
						save_scope_as = native_leader
						culture = culture:dorset
						faith = faith:inuit_pagan
					}
				}
				set_variable = {
					name = RICE_random_hunt_fail_variety
					value = flag:rescue_storm
				}
			}
			# Ship went kaboom
			10 = {
				set_variable = {
					name = RICE_random_hunt_fail_variety
					value = flag:kaboom
				}
			}
			# Mismanaged supplies
			10 = {
				set_variable = {
					name = RICE_random_hunt_fail_variety
					value = flag:supplies
				}
			}
			# Too many died during the hunt
			10 = {
				set_variable = {
					name = RICE_random_hunt_fail_variety
					value = flag:deaths
				}
			}
			# Fled elsewhere
			10 = {
				set_variable = {
					name = RICE_random_hunt_fail_variety
					value = flag:fled
				}
			}
		}
	}

	option = {
		name = north_atlantic.0121.a
		custom_tooltip = north_atlantic.0121.tooltip.hunt_ends
		if = {
			limit = {
				scope:story.var:RICE_walrus_hunt_resilience_decrease > 0
			}
			custom_tooltip = north_atlantic.0121.tooltip.decrease_resilience
		}
		if = {
			limit = {
				scope:story.var:RICE_walrus_hunt_networks_decrease > 0
			}
			custom_tooltip = north_atlantic.0121.tooltip.decrease_networks
		}
		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
			}
			if = {
				limit = {
					scope:story.var:RICE_nordsetur_hunt_type = flag:minor
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_walrus_hunt_minor_fail
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_nordsetur_hunt_type = flag:major
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_walrus_hunt_major_fail
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_nordsetur_hunt_type = flag:great
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_walrus_hunt_great_fail
						character = root
					}
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				OR = {
					var:RICE_random_hunt_fail_variety = flag:attack
					var:RICE_random_hunt_fail_variety = flag:rescue_storm
				}
			}
			hidden_effect = {
				scope:native_leader = {
					death = {
						death_reason = death_disappearance
					}
				}
			}			
		}
		if = {
			limit = { has_variable = RICE_random_hunt_fail_variety }
			remove_variable = RICE_random_hunt_fail_variety
		}
		if = {
			limit = { has_variable = RICE_resilience_value_temp }
			remove_variable = RICE_resilience_value_temp
		}
		if = {
			limit = { has_variable = RICE_networks_value_temp }
			remove_variable = RICE_networks_value_temp
		}
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt
			}
			end_story = yes
		}
	}

}




# Hunting party returns
north_atlantic.0122 = {
	type = character_event
	title = north_atlantic.0122.t
	desc = {
		desc = north_atlantic.0122.desc
		# first_valid = {
		# 	triggered_desc = {
		# 		trigger = {
		# 			var:RICE_hunt_result = flag:poor
		# 		}
		# 		desc = north_atlantic.0122.desc.poor
		# 	}
		# 	triggered_desc = {
		# 		trigger = {
		# 			var:RICE_hunt_result = flag:fair
		# 		}
		# 		desc = north_atlantic.0122.desc.fair
		# 	}
		# 	triggered_desc = {
		# 		trigger = {
		# 			var:RICE_hunt_result = flag:good
		# 		}
		# 		desc = north_atlantic.0122.desc.good
		# 	}
		# 	triggered_desc = {
		# 		trigger = {
		# 			var:RICE_hunt_result = flag:excellent
		# 		}
		# 		desc = north_atlantic.0122.desc.excellent
		# 	}
		# }
		first_valid = {
			triggered_desc = {
				trigger = {
					NOT = { has_character_flag = RICE_north_atlantic_nordsetur_hunt_no_extras }
				}
				desc = north_atlantic.0122.desc.extras
			}
			desc = north_atlantic.0122.desc.no_extras
		}
	}
	theme = hunt_activity
	override_background = { reference = RICE_background_north_atlantic_disko_bay }
	override_icon = { reference = "gfx/interface/icons/event_types/type_hunt.dds" }


	right_portrait = root

	immediate = {
		if = {
			limit = {
				scope:story.var:RICE_walrus_hunt_resilience_decrease > 0
			}
			change_global_variable = {
				name = RICE_greenland_resilience
				subtract = scope:story.var:RICE_walrus_hunt_resilience_decrease
			}
			set_variable = {
				name = RICE_resilience_value_temp
				value = scope:story.var:RICE_walrus_hunt_resilience_decrease
			}
		}
		if = {
			limit = {
				scope:story.var:RICE_walrus_hunt_networks_decrease > 0
			}
			change_global_variable = {
				name = RICE_greenland_networks
				subtract = scope:story.var:RICE_walrus_hunt_networks_decrease
			}
			set_variable = {
				name = RICE_networks_value_temp
				value = scope:story.var:RICE_walrus_hunt_networks_decrease
			}
		}

		# Potential outcomes
		# random_list = {
		# 	# Poor
		# 	10 = {
		# 		set_variable = {
		# 			name = RICE_hunt_result
		# 			value = flag:poor
		# 		}
		# 	}
		# 	# Fair
		# 	10 = {
		# 		set_variable = {
		# 			name = RICE_hunt_result
		# 			value = flag:fair
		# 		}
		# 	}
		# 	# Good
		# 	10 = {
		# 		set_variable = {
		# 			name = RICE_hunt_result
		# 			value = flag:good
		# 		}
		# 	}
		# 	# Excellent
		# 	10 = {
		# 		# Phase modifiers
		# 		set_variable = {
		# 			name = RICE_hunt_result
		# 			value = flag:excellent
		# 		}
		# 	}
		# }

		set_variable = {
			name = RICE_walrus_hunt_gold_gain_value
			value = {
				value = 0
				if = {
					limit = {
						scope:story.var:RICE_nordsetur_hunt_type = flag:minor
					}
					add = {
						integer_range = {
							min = RICE_walrus_hunt_gold_gain_min_value
							max = RICE_walrus_hunt_gold_gain_max_base_value
						}
					}
				}
				else_if = {
					limit = {
						scope:story.var:RICE_nordsetur_hunt_type = flag:major
					}
					add = {
						integer_range = {
							min = RICE_walrus_hunt_gold_gain_min_value
							max = RICE_walrus_hunt_gold_gain_max_major_value
						}
					}
				}
				else_if = {
					limit = {
						scope:story.var:RICE_nordsetur_hunt_type = flag:great
					}
					add = {
						integer_range = {
							min = RICE_walrus_hunt_gold_gain_min_value
							max = RICE_walrus_hunt_gold_gain_max_great_value
						}
					}
				}
			}
		}

		# Potential extras
		random = {
			chance = 50
			add_character_flag = RICE_north_atlantic_nordsetur_hunt_no_extras
		}
	}

	option = {
		name = {
			trigger = { has_character_flag = RICE_north_atlantic_nordsetur_hunt_no_extras }
			text = north_atlantic.0122.a
		}
		name = {
			trigger = { NOT = { has_character_flag = RICE_north_atlantic_nordsetur_hunt_no_extras } }
			text = north_atlantic.0122.a.extra
		}

		add_gold = var:RICE_walrus_hunt_gold_gain_value

		if = {
			limit = {
				scope:story.var:RICE_walrus_hunt_resilience_decrease > 0
			}
			custom_tooltip = north_atlantic.0121.tooltip.decrease_resilience
		}
		if = {
			limit = {
				scope:story.var:RICE_walrus_hunt_networks_decrease > 0
			}
			custom_tooltip = north_atlantic.0121.tooltip.decrease_networks
		}
		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
			}
			if = {
				limit = {
					scope:story.var:RICE_nordsetur_hunt_type = flag:minor
				}
				#add_gold = { RICE_walrus_hunt_gold_gain_min_value RICE_walrus_hunt_gold_gain_max_base_value }
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_walrus_hunt_minor_success
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_nordsetur_hunt_type = flag:major
				}
				#add_gold = { RICE_walrus_hunt_gold_gain_min_value RICE_walrus_hunt_gold_gain_max_major_value }
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_walrus_hunt_major_success
						character = root
					}
				}
			}
			else_if = {
				limit = {
					scope:story.var:RICE_nordsetur_hunt_type = flag:great
				}
				#add_gold = { RICE_walrus_hunt_gold_gain_min_value RICE_walrus_hunt_gold_gain_max_great_value }
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_walrus_hunt_great_success
						character = root
					}
				}
			}
		}
		
		custom_tooltip = north_atlantic.0122.tooltip.hunt_ends
	}

	after = {
		# if = {
		# 	limit = { has_variable = RICE_hunt_result }
		# 	remove_variable = RICE_hunt_result
		# }
		if = {
			limit = { has_variable = RICE_resilience_value_temp }
			remove_variable = RICE_resilience_value_temp
		}
		if = {
			limit = { has_variable = RICE_networks_value_temp }
			remove_variable = RICE_networks_value_temp
		}
		if = {
			limit = { has_variable = RICE_walrus_hunt_gold_gain_value }
			remove_variable = RICE_walrus_hunt_gold_gain_value
		}
		if = {
			limit = {
				has_character_flag = RICE_north_atlantic_nordsetur_hunt_no_extras
			}
			remove_character_flag = RICE_north_atlantic_nordsetur_hunt_no_extras
			random_owned_story = {
				limit = {
					story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt
				}
				end_story = yes
			}
		}
		else = {
			hidden_effect = {
				# Potential random extras
				random_list = {
					# Native encounter - peaceful
					10 = {
						trigger_event = north_atlantic.0124
					}
					# Native encounter - hostile
					10 = {
						trigger_event = north_atlantic.0125
					}
					# Found remnants of another hunting party
					10 = {
						trigger_event = north_atlantic.0126
					}
					# Rescued another hunting party
					10 = {
						trigger_event = north_atlantic.0127
					}
					# Narwhal tusk
					10 = {
						trigger_event = north_atlantic.0128
					}
					# Polar Bear hunted
					10 = {
						trigger_event = north_atlantic.0129
					}
					# Native encounter - witch?
					#10 = {
					#	trigger_event = north_atlantic.0126
					#}
				}
			}
		}


	}

}




# Preparing for the hunt
north_atlantic.0123 = {
	type = character_event
	title = north_atlantic.0123.t
	desc = north_atlantic.0123.desc
	theme = hunt_activity
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = root

	option = {
		name = north_atlantic.0123.a
		custom_tooltip = north_atlantic.0123.a.tooltip
	}

	after = {		
		create_story = RICE_story_cycle_north_atlantic_nordsetur_hunt
	}

}




# Native encounter - peaceful
north_atlantic.0124 = {
	type = character_event
	title = north_atlantic.0124.t
	desc = north_atlantic.0124.desc
	theme = hunt_activity
	override_background = { reference = RICE_background_north_atlantic_disko_bay }

	right_portrait = {
		character = scope:native_leader
		animation = personality_forgiving		
	}
	artifact = { # To display the artifact in the event-window
		target = scope:native_american_artifact
		position = lower_center_portrait
		trigger = { exists = scope:native_american_artifact }
	}

	immediate = {
		if = {
			limit = {
				has_global_variable = RICE_greenland_inuit_are_here
			}					
			create_character = {
				location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
				template = RICE_native_chief_template
				save_scope_as = native_leader
				culture = culture:inuit
				faith = faith:inuit_pagan
			}
		}
		else = {				
			create_character = {
				location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
				template = RICE_native_chief_template
				save_scope_as = native_leader
				culture = culture:dorset
				faith = faith:inuit_pagan
			}
		}
		change_global_variable = {
			name = RICE_greenland_networks
			add = 1
		}
		random_list = {
			10 = {
				add_prestige = 25
			}
			10 = {
				add_prestige = 50
			}
			10 = {
				add_gold = { 0 50 }
			}
			100 = { #10
				add_character_modifier = {
					modifier = RICE_north_atlantic_nordsetur_trade_connections
					years = 10
				}
			}
			100 = { #10
				RICE_create_arctic_artifact_effect = yes
			}
		}
	}

	option = {
		name = north_atlantic.0124.a
		custom_tooltip = north_atlantic.0124.a.tooltip
	}

	after = {	
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_disappearance
				}
			}
		}	
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt
			}
			end_story = yes
		}
	}

}


# Native encounter - hostile
north_atlantic.0125 = {
	type = character_event
	title = north_atlantic.0125.t
	desc = north_atlantic.0125.desc
	theme = hunt_activity
	override_background = { reference = RICE_background_north_atlantic_disko_bay }

	right_portrait = {
		character = scope:native_leader
		animation = aggressive_spear		
	}

	immediate = {
		if = {
			limit = {
				has_global_variable = RICE_greenland_inuit_are_here
			}					
			create_character = {
				location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
				template = RICE_native_chief_template
				save_scope_as = native_leader
				culture = culture:inuit
				faith = faith:inuit_pagan
			}
		}
		else = {				
			create_character = {
				location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
				template = RICE_native_chief_template
				save_scope_as = native_leader
				culture = culture:dorset
				faith = faith:inuit_pagan
			}
		}
		change_global_variable = {
			name = RICE_greenland_networks
			subtract = 1
		}
		random_list = {
			10 = {
				remove_short_term_gold = { 0 50 }
			}
			10 = {
				add_prestige = -25
			}
			10 = {
				add_prestige = -50
			}
		}
	}

	option = {
		name = north_atlantic.0125.a
		custom_tooltip = north_atlantic.0125.a.tooltip
	}

	after = {	
		hidden_effect = {
			scope:native_leader = {
				death = {
					death_reason = death_disappearance
				}
			}
		}	
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt
			}
			end_story = yes
		}
	}

}

# Found remnants of another hunting party
north_atlantic.0126 = {
	type = character_event
	title = north_atlantic.0126.t
	desc = north_atlantic.0126.desc
	theme = death
	override_background = { reference = RICE_background_north_atlantic_disko_bay }

	immediate = {
		change_global_variable = {
			name = RICE_greenland_resilience
			subtract = 1
		}
		random_list = {
			10 = {
				add_gold = { 0 25 }
			}
			10 = {
				add_prestige = 25
			}
		}
		character:RICE_greenlandic_deity_001 = {
			culture = {
				save_scope_as = greenlandic
			}
		}
	}

	option = {
		name = north_atlantic.0126.a
		custom_tooltip = north_atlantic.0126.a.tooltip
	}

	after = {	
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt
			}
			end_story = yes
		}
	}

}

# Rescued another hunting party
north_atlantic.0127 = {
	type = character_event
	title = north_atlantic.0127.t
	desc = north_atlantic.0127.desc
	theme = friendly
	override_background = { reference = RICE_background_north_atlantic_disko_bay }

	right_portrait = scope:hunter

	immediate = {
		character:RICE_greenlandic_deity_001 = {
			culture = {
				save_scope_as = greenlandic
			}
		}
		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = RICE_greenland_hunter_template
			save_scope_as = hunter
		}
		random_list = {
			10 = {
				add_prestige = 25
			}
			10 = {
				add_prestige = 50
			}
			10 = {
				add_piety = 25
			}
			10 = {
				add_piety = 50
			}
		}
	}

	# Try to convince them to join your court
	option = {
		name = north_atlantic.0127.a
		add_prestige = -100
		duel = {
			skill = diplomacy
			target = scope:hunter
			30 = {
				desc = north_atlantic.0127.a.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.5
				}
				modifier = {
					scope:hunter = {
						opinion = {
							target = root
							value >= 40
						}
					}
					factor = 2
				}
				modifier = {
					scope:hunter = {
						opinion = {
							target = root
							value >= 80
						}
					}
					factor = 2
				}
				send_interface_toast = {
					title = north_atlantic.0127.a.success
					left_icon = scope:hunter
					add_courtier = scope:hunter
				}
			}
			70 = {
				desc = north_atlantic.0127.a.failure
				send_interface_toast = {
					title = north_atlantic.0127.a.failure
					left_icon = scope:hunter
					custom_tooltip = north_atlantic.0127.a.failure.tooltip
					hidden_effect = {
						scope:hunter = {
							death = {
								death_reason = death_disappearance
							}
						}
					}
				}
			}
		}
	}
	# Ok
	option = {
		name = north_atlantic.0127.b
		hidden_effect = {
			scope:hunter = {
				death = {
					death_reason = death_disappearance
				}
			}
		}	
	}

	after = {	
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt
			}
			end_story = yes
		}
	}

}

# Narwhal tusk
north_atlantic.0128 = {
	type = character_event
	title = north_atlantic.0128.t
	desc = north_atlantic.0128.desc
	theme = hunt_activity
	override_background = { reference = RICE_background_north_atlantic_disko_bay }

	right_portrait = {
		character = root
		animation = personality_rational
	}
	artifact = { # To display the artifact in the event-window
		target = scope:nordsetur_artifact
		position = lower_center_portrait
	}

	immediate = {
		RICE_create_nordsetur_narwhal_artifact_effect = yes
	}

	# Keep it
	option = {
		name = north_atlantic.0128.a
		show_as_tooltip = {
			scope:nordsetur_artifact = {
				set_owner = {
					target = root
				}
			}
		}
	}

	# Sell it
	option = {
		name = north_atlantic.0128.b
		if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					OR = {
						is_struggle_phase = struggle_RICE_greenland_phase_settlement
						is_struggle_phase = struggle_RICE_greenland_phase_integration
					}
				}				
			}
			add_gold = { 25 100 }
		}
		else_if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_subsistence
				}				
			}	
			add_gold = { 25 60 }		
		}
		else_if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_marginalization
				}				
			}	
			add_gold = { 10 40 }		
		}
		hidden_effect = {
			destroy_artifact = scope:nordsetur_artifact
		}
	}

	after = {	
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt
			}
			end_story = yes
		}
	}

}

# Polar bear hunted
north_atlantic.0129 = {
	type = character_event
	title = north_atlantic.0129.t
	desc = north_atlantic.0129.desc
	theme = hunt_activity
	override_background = { reference = RICE_background_north_atlantic_disko_bay }

	right_portrait = {
		character = root
		animation = happiness
	}
	artifact = { # To display the artifact in the event-window
		target = scope:nordsetur_artifact
		position = lower_center_portrait
	}

	immediate = {
		RICE_create_nordsetur_polar_bear_artifact_effect = yes
	}

	# Keep it
	option = {
		name = north_atlantic.0129.a
		show_as_tooltip = {
			scope:nordsetur_artifact = {
				set_owner = {
					target = root
				}
			}
		}
	}

	# Sell it
	option = {
		name = north_atlantic.0129.b
		if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					OR = {
						is_struggle_phase = struggle_RICE_greenland_phase_settlement
						is_struggle_phase = struggle_RICE_greenland_phase_integration
					}
				}				
			}
			add_gold = { 25 100 }
		}
		else_if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_subsistence
				}				
			}	
			add_gold = { 25 60 }		
		}
		else_if = {
			limit = {
				struggle:RICE_greenland_struggle = {
					is_struggle_phase = struggle_RICE_greenland_phase_marginalization
				}				
			}	
			add_gold = { 10 40 }		
		}
		hidden_effect = {
			destroy_artifact = scope:VIET_clutter_artifact
		}
	}

	after = {	
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_nordsetur_hunt
			}
			end_story = yes
		}
	}

}





######################################################################################
# 
# VINLAND OUTPOSTS AND SETTLEMENTS
# 
# north_atlantic.0140-north_atlantic.0159
# 
######################################################################################




# Set sail for Vinland - overseer or no?
north_atlantic.0140 = {
	type = character_event
	title = north_atlantic.0140.t
	desc = north_atlantic.0140.desc
	theme = hunt_activity
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = {
		character = root
		animation = war_defender
	}

	immediate = {
		add_character_flag = RICE_north_atlantic_ongoing_expedition
	}

	option = {
		name = north_atlantic.0140.a
		custom_tooltip = north_atlantic.0140.a.tooltip
		create_story = RICE_story_cycle_north_atlantic_vinland_outpost
	}
	# option = {
	# 	name = north_atlantic.0140.b
	# 	custom_tooltip = north_atlantic.0140.b.tooltip
	# 	create_story = RICE_story_cycle_north_atlantic_vinland_outpost
	# }

}

# Set sail for Vinland - pick an overseer
# north_atlantic.0141 = {
# 	type = character_event
# 	title = north_atlantic.0141.t
# 	desc = {
# 		first_valid = {
# 			triggered_desc = {
# 				trigger = {
# 					OR = {
# 						exists = scope:candidate_1
# 						exists = scope:candidate_2
# 					}
# 				}
# 				desc = north_atlantic.0141.desc.courtiers
# 			}
# 			desc = north_atlantic.0141.desc.no_courtiers
# 		}	
# 		desc = north_atlantic.0141.desc.local	
# 	}
# 	theme = hunt_activity
# 	override_background = { reference = RICE_background_north_atlantic_port }

# 	right_portrait = {
# 		character = root
# 		animation = war_defender
# 	}
# 	lower_left_portrait = {
# 		character = scope:candidate_1
# 		trigger = { exists = scope:candidate_1 }
# 	}
# 	lower_center_portrait = {
# 		character = scope:local
# 		trigger = { exists = scope:local }
# 	}
# 	lower_right_portrait = {
# 		character = scope:candidate_2
# 		trigger = { exists = scope:candidate_2 }
# 	}

	
# 	immediate = {		
# 		create_character = {
# 			location = root.capital_province
# 			template = random_barrel_character
# 			save_scope_as = local
# 		}
# 		# See scripted_trigger valid_scandinavian_adventurer just in case
# 		every_courtier = {
# 			limit = {
# 				is_available_healthy_ai_adult = yes
# 				age <= 55 # Don't want someone too old who could die on the journey
# 				is_alive = yes
# 				is_ruler = no
# 				NOT = { is_councillor_of = root }
# 				# Will not inherit anything anytime soon
# 				OR = {					
# 					any_heir_title = { count = 0 }
# 					AND = {
# 						save_temporary_scope_as = potential
# 						any_heir_title = {
# 							place_in_line_of_succession = {
# 								target = scope:potential
# 								value >= 3
# 							}
# 						}
# 					}
# 				}
# 			}
# 			add_to_list = expedition_leader_candidates
# 		}

# 		if = {
# 			limit = {
# 				any_in_list = {
# 					list = expedition_leader_candidates
# 					count >= 2
# 					opinion = {
# 						target = root
# 						value > -25
# 					}
# 				}
# 			}
# 			random_in_list = {
# 				list = expedition_leader_candidates
# 				weight = {
# 					base = 10
# 					modifier = {
# 						has_trait = RICE_explorer
# 						add = 20
# 					}
# 					modifier = {
# 						has_trait = ambitious
# 						add = 5
# 					}
# 					modifier = {
# 						has_trait = content
# 						add = -5
# 					}
# 					modifier = {
# 						has_trait = brave
# 						add = 5
# 					}
# 					modifier = {
# 						has_trait = craven
# 						add = -5
# 					}
# 					modifier = {
# 						has_trait = diligent
# 						add = 5
# 					}
# 					modifier = {
# 						has_trait = lazy
# 						add = -5
# 					}
# 				}
# 				save_scope_as = candidate_1
# 			}
# 		}

# 		if = {
# 			limit = {
# 				any_in_list = {
# 					list = expedition_leader_candidates
# 					count >= 1
# 				}
# 			}
# 			random_in_list = {
# 				list = expedition_leader_candidates
# 				limit = {
# 					NOT = { this = scope:candidate_1 }
# 				}
# 				weight = {
# 					base = 10
# 					modifier = {
# 						has_trait = RICE_explorer
# 						add = 20
# 					}
# 					modifier = {
# 						has_trait = ambitious
# 						add = 5
# 					}
# 					modifier = {
# 						has_trait = content
# 						add = -5
# 					}
# 					modifier = {
# 						has_trait = brave
# 						add = 5
# 					}
# 					modifier = {
# 						has_trait = craven
# 						add = -5
# 					}
# 					modifier = {
# 						has_trait = diligent
# 						add = 5
# 					}
# 					modifier = {
# 						has_trait = lazy
# 						add = -5
# 					}
# 				}
# 				save_scope_as = candidate_2
# 			}
# 		}

# 	}

# 	option = {
# 		name = north_atlantic.0141.a
# 		trigger = {
# 			exists = scope:candidate_1
# 		}
# 		scope:candidate_1 = {
# 			#save_scope_as = RICE_expedition_leader_choice
# 			add_prestige = 50
# 			add_trait = RICE_exploring_western_seas
# 			add_character_flag = {
# 				flag = blocked_from_leaving
# 				years = 4 # Little extra buffer just in case
# 			}
# 		}
# 		set_variable = { # For use in the Story
# 			name = RICE_vinland_outpost_overseer_choice
# 			value = scope:candidate_1
# 		}
# 		custom_tooltip = north_atlantic.0141.a.tooltip
# 	}

# 	option = {
# 		name = north_atlantic.0141.b
# 		trigger = {
# 			exists = scope:candidate_2
# 		}
# 		scope:candidate_2 = {
# 			#save_scope_as = RICE_expedition_leader_choice
# 			add_prestige = 50
# 			add_trait = RICE_exploring_western_seas
# 			add_character_flag = {
# 				flag = blocked_from_leaving
# 				years = 2 # Little extra buffer just in case
# 			}
# 		}
# 		set_variable = { # For use in the Story
# 			name = RICE_vinland_outpost_overseer_choice
# 			value = scope:candidate_2
# 		}
# 		custom_tooltip = north_atlantic.0141.b.tooltip
# 	}
# 	option = {
# 		name = north_atlantic.0141.c
# 		trigger = {
# 			exists = scope:local
# 		}
# 		hidden_effect = {
# 			add_courtier = scope:local
# 		}
# 		pay_short_term_gold = {
# 			target = scope:local
# 			gold = RICE_vinland_settlement_payment_value
# 		}
# 		scope:local = {
# 			#save_scope_as = RICE_expedition_leader_choice
# 			add_prestige = 50
# 			add_trait = RICE_exploring_western_seas
# 			add_character_flag = {
# 				flag = blocked_from_leaving
# 				years = 2 # Little extra buffer just in case
# 			}
# 		}
# 		set_variable = { # For use in the Story
# 			name = RICE_vinland_outpost_overseer_choice
# 			value = scope:local
# 		}
# 		custom_tooltip = north_atlantic.0141.c.tooltip
# 	}

# 	option = {
# 		name = north_atlantic.0141.d
# 		custom_tooltip = north_atlantic.0141.d.tooltip
# 	}

# 	after = {		
# 		if = {
# 			limit = {
# 				scope:local = {
# 					NOT = { has_trait = RICE_exploring_western_seas }
# 				}
# 			}
# 			hidden_effect = {
# 				scope:local = {
# 					death = {
# 						death_reason = death_disappearance
# 					}
# 				}
# 			}
# 		}
# 		create_story = RICE_story_cycle_north_atlantic_vinland_outpost
# 	}

# }





# Vinland outpost adventure ends
north_atlantic.0142 = {
	type = character_event
	title = north_atlantic.0142.t
	desc = {
		desc = north_atlantic.0142.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_vinland_success
				}
				desc = north_atlantic.0142.desc.success
			}
			desc = north_atlantic.0142.desc.fail
		}		
	}
	theme = RICE_theme_north_atlantic_vinland_outpost

	left_portrait = {
		character = scope:vinland_colonizer
		animation = happiness
	}
	# right_portrait = {
	# 	character = scope:overseer
	# 	animation = personality_honorable
	# 	trigger = {
	# 		exists = scope:overseer
	# 		scope:overseer = {
	# 			is_alive = yes
	# 		}
	# 	}
	# }

	immediate = {
		save_scope_as = vinland_colonizer
		random = {
			chance = RICE_north_atlantic_vinland_outpost_success_value
			# modifier = {
			# 	exists = scope:overseer
			# 	scope:overseer.stewardship < mediocre_skill_rating
			# 	add = 2
			# }
			# modifier = {
			# 	exists = scope:overseer
			# 	scope:overseer.stewardship >= mediocre_skill_rating 
			# 	add = 4
			# }
			# modifier = {
			# 	exists = scope:overseer
			# 	scope:overseer.stewardship >= decent_skill_rating 
			# 	add = 6
			# }
			# modifier = {
			# 	exists = scope:overseer
			# 	scope:overseer.stewardship >= high_skill_rating 
			# 	add = 8
			# }
			# modifier = {
			# 	exists = scope:overseer
			# 	scope:overseer.stewardship >= very_high_skill_rating 
			# 	add = 10
			# }
			add_character_flag = RICE_vinland_success # Somehow
			dynasty = {
				add_dynasty_modifier = {
					modifier = RICE_north_atlantic_vinland_outpost
				}
			}	
			hidden_effect = {
				change_global_variable = {
					name = RICE_north_atlantic_vinland_outposts
					add = 1
				}
			}
		}			
		# if = {
		# 	limit = {
		# 		scope:overseer = {
		# 			is_alive = yes
		# 		}
		# 	}
		# 	if = {
		# 		limit = {
		# 			scope:overseer = {
		# 				has_trait = RICE_exploring_western_seas
		# 			}
		# 		}
		# 		scope:overseer = {
		# 			remove_trait = RICE_exploring_western_seas					
		# 		}
		# 	}
		# 	if = {
		# 		limit = {
		# 			has_character_flag = RICE_vinland_success
		# 		}
		# 		scope:overseer = {
		# 			add_prestige = 100
		# 		}
		# 	}
		# 	# scope:overseer.activity = {
		# 	# 	complete_activity = yes
		# 	# }
		# 	if = {
		# 		limit = {
		# 			scope:overseer = {
		# 				has_character_flag = blocked_from_leaving
		# 			}
		# 		}
		# 		scope:overseer = {
		# 			remove_character_flag = blocked_from_leaving
		# 		}
		# 	}
		# }
	}

	widget = {
		gui = "event_window_widget_RICE_progressbars_all"
		container = "custom_widgets_container"
	}

	option = {
		name = north_atlantic.0142.a
		if = {
			limit = {
				has_character_flag = RICE_vinland_success
			}
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_successful_outpost_vinland
						character = root
					}
				}
			}
			dynasty = {
				every_dynasty_member = {
					limit = {
						is_ruler = yes
						is_ai = no
					}
					trigger_event = north_atlantic.0143
				}
			}
		}
		else_if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
			}
			struggle:RICE_greenland_struggle = {
				activate_struggle_catalyst = {
					catalyst = catalyst_RICE_failed_outpost_vinland
					character = root
				}
			}
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_vinland_success
			}
			remove_character_flag = RICE_vinland_success
		}
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_vinland_outpost
			}
			end_story = yes
		}
	}

}







# Notification to family
north_atlantic.0143 = {
	type = character_event
	title = north_atlantic.0143.t
	desc = north_atlantic.0143.desc
	theme = RICE_theme_north_atlantic_vinland_outpost

	right_portrait = {
		character = scope:vinland_colonizer
		animation = personality_bold
	}

	immediate = {
		show_as_tooltip = {
			dynasty = {
				add_dynasty_modifier = {
					modifier = RICE_north_atlantic_vinland_outpost
				}
			}
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_successful_outpost_vinland
						character = root
					}
				}
			}	
		}
	}

	widget = {
		gui = "event_window_widget_RICE_progressbars_all"
		container = "custom_widgets_container"
	}

	option = {
		name = north_atlantic.0143.a
	}

}




# Prepare to Colonize Vinland
north_atlantic.0144 = {
	type = character_event
	title = north_atlantic.0144.t
	desc = north_atlantic.0144.desc
	theme = realm
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = {
		character = root
		animation = war_defender
	}

	immediate = {		
		add_character_flag = RICE_north_atlantic_ongoing_expedition
		save_scope_as = vinland_person
		ordered_in_global_list = {
			variable = RICE_north_atlantic_leif_erikson_equivalent
			save_scope_as = leif
		}
	}

	widget = {
		gui = "event_window_widget_RICE_progressbars_all"
		container = "custom_widgets_container"
	}

	option = {
		name = north_atlantic.0144.a
		custom_tooltip = north_atlantic.0144.a.tooltip
		create_story = RICE_story_cycle_north_atlantic_vinland_colony
		every_ruler = {
			limit = {
				is_ai = no
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_greenland_struggle_region
					}
				}
			}
			trigger_event = north_atlantic.0147
		}
	}

}


# Vinland colony adventure ends
north_atlantic.0145 = {
	type = character_event
	title = north_atlantic.0145.t
	desc = north_atlantic.0145.desc
	theme = RICE_theme_north_atlantic_vinland
	override_icon = { reference = "gfx/interface/icons/event_types/type_domain.dds" }

	left_portrait = {
		character = root
		animation = personality_bold
	}

	immediate = {	
		save_scope_as = vinland_colonizer
		ordered_in_global_list = {
			variable = RICE_north_atlantic_leif_erikson_equivalent
			save_scope_as = leif
		}
		hidden_effect = {
			if = {
				limit = {
					has_dlc_feature = hybridize_culture
					scope:new_culture = {
						NOT = {
							has_cultural_tradition = tradition_culture_blending
						}
					}
				}
				scope:new_culture = {
					remove_random_culture_tradition = yes
					add_culture_tradition = tradition_culture_blending
					remove_variable = tradition_cooldown
				}
			}
			if = {
				limit = {
					scope:new_culture = {
						NOT = {
							has_cultural_tradition = tradition_forest_folk
						}
					}
				}
				scope:new_culture = {
					remove_random_culture_tradition = yes
					add_culture_tradition = tradition_forest_folk
					remove_variable = tradition_cooldown
				}
			}
		}

		# Remove traditions that don't make sense for Greenlandic
		# It is placed here on the off chance the Whalers or Hunters replaces them, then they aren't needed anymore
		RICE_vinlandic_remove_nonsensical_traditions_effect = yes
		RICE_establish_permanent_vinland_colony_effect = yes
		RICE_vinland_colony_tooltip_effect = yes		
	}

	widget = {
		gui = "event_window_widget_RICE_progressbars_all"
		container = "custom_widgets_container"
	}

	option = {
		name = north_atlantic.0145.a
	}

	after = {
		every_ruler = {
			limit = {
				is_ai = no
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_europe_and_mediterranean_region
					}
				}
			}
			trigger_event = north_atlantic.0146
		}
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_vinland_colony
			}
			end_story = yes
		}
	}

}


# Vinland colony notification
north_atlantic.0146 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0146.t
	desc = north_atlantic.0146.desc
	theme = realm
	override_background = { reference = RICE_greenland_struggle_vinland }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_integration"
		scope:vinland_colonizer = {			
			show_as_tooltip = {
				RICE_establish_permanent_vinland_colony_effect = yes
			}
		}
	}

	option = {
		name = north_atlantic.0146.a

		RICE_vinland_colony_tooltip_effect = yes

		clicksound = "event:/DLC/FP2/SFX/UI/fp2_struggle_start_select"
	}
}


# Vinland settlement notification to all rulers
north_atlantic.0147 = {
	type = character_event
	title = north_atlantic.0147.t
	desc = north_atlantic.0147.desc
	theme = RICE_theme_north_atlantic_port

	right_portrait = {
		character = scope:vinland_person
		animation = war_defender
	}

	option = {
		name = north_atlantic.0147.a
		custom_tooltip = north_atlantic.0147.tooltip
	}

}


# Create the new Vinlandic culture
north_atlantic.0148 = {
	type = character_event
	hidden = yes

	immediate = {
		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = random_barrel_character
			culture = root.culture
			save_scope_as = vinlandic_creator_deity
		}
		hidden_effect = {	
			scope:vinlandic_creator_deity = {
				create_divergent_culture = yes		
			}
		}
		scope:new_culture = {
			random_list = {
				35 = {
					modifier = {
						factor = 1.5
						root.culture = {
							has_cultural_pillar = ethos_communal
						}
					}
					set_culture_pillar = ethos_communal
				}
				35 = {
					modifier = {
						factor = 1.5
						root.culture = {
							has_cultural_pillar = ethos_egalitarian
						}
					}
					set_culture_pillar = ethos_egalitarian
				}
				15 = {	
					modifier = {
						factor = 1.5
						root.culture = {
							has_cultural_pillar = ethos_stoic
						}
					}				
					set_culture_pillar = ethos_stoic
				}
				15 = {
					modifier = {
						factor = 1.5
						root.culture = {
							has_cultural_pillar = ethos_spiritual
						}
					}					
					set_culture_pillar = ethos_spiritual
				}
			}
			set_culture_name = {
				noun = vinlandic
				collective_noun = vinlandic_collective_noun
				prefix = vinlandic_prefix
			}
			# For random variation and flavor
			add_random_valid_tradition_replace_if_necessary = scope:vinlandic_creator_deity
			random = {
				chance = 50
				add_random_valid_tradition_replace_if_necessary = scope:vinlandic_creator_deity
			}
			# For future reference
			character:RICE_greenlandic_deity_002 = {
				set_culture = scope:new_culture
			}
		}
		trigger_event = north_atlantic.0145
	}

}


######################################################################################
# 
# DISCOVERING GREENLAND/VINLAND
# 
# north_atlantic.0160-north_atlantic.0169
# 
######################################################################################

# Create the new Greenlandic culture
north_atlantic.0160 = {
	type = character_event
	hidden = yes

	immediate = {
		set_global_variable = {
			name = RICE_north_atlantic_greenland_struggle_started
			value = yes
		}
		RICE_enable_greenland_struggle_effect = yes
		create_character = {
			location = title:c_vestisland.holder.capital_province # Should be off-map, but have to give them a location somewhere or else it'll throw up errors
			template = random_barrel_character
			culture = root.culture
			save_scope_as = greenlandic_creator_deity
		}
		hidden_effect = {	
			scope:greenlandic_creator_deity = {
				create_divergent_culture = yes		
			}
		}
		scope:new_culture = {
			random_list = {
				50 = {
					modifier = {
						factor = 1.5
						root.culture = {
							has_cultural_pillar = ethos_stoic
						}
					}
					set_culture_pillar = ethos_stoic
				}
				35 = {	
					modifier = {
						factor = 1.5
						root.culture = {
							has_cultural_pillar = ethos_communal
						}
					}				
					set_culture_pillar = ethos_communal
				}
				15 = {
					modifier = {
						factor = 1.5
						root.culture = {
							has_cultural_pillar = ethos_spiritual
						}
					}					
					set_culture_pillar = ethos_spiritual
				}
			}
			set_culture_name = {
				noun = greenlandic
				collective_noun = greenlandic_collective_noun
				prefix = greenlandic_prefix
			}
			# For random variation and flavor
			add_random_valid_tradition_replace_if_necessary = scope:greenlandic_creator_deity
			random = {
				chance = 50
				add_random_valid_tradition_replace_if_necessary = scope:greenlandic_creator_deity
			}
			# For future reference
			character:RICE_greenlandic_deity_001 = {
				set_culture = scope:new_culture
			}
		}
		trigger_event = north_atlantic.0161	
	}

}


# Greenland adventure ends
north_atlantic.0161 = {
	type = character_event
	title = north_atlantic.0161.t
	desc = {
		desc = north_atlantic.0161.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:leader = {
						is_alive = no
					}
				}
				desc = north_atlantic.0161.desc.leader_dead
			}
			desc = north_atlantic.0161.desc.leader_not_dead
		}	
	}
	theme = RICE_theme_north_atlantic_port

	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:leader
		animation = personality_honorable
	}

	immediate = {
		add_to_global_variable_list = {
			name = RICE_north_atlantic_erik_the_red
			target = scope:leader
		}
		if = {
			limit = {
				scope:leader = {
					is_alive = no
				}
			}
			make_unprunable = yes
		}
		else = {
			if = {
				limit = {
					scope:leader = {
						has_trait = RICE_exploring_western_seas
					}
				}
				scope:leader = {
					remove_trait = RICE_exploring_western_seas					
				}
			}
			if = {
				limit = {
					scope:leader = {
						has_character_flag = planning_an_activity						
					}
				}
				scope:leader = {
					remove_character_flag = planning_an_activity						
				}
			}
			scope:leader = {
				RICE_north_atlantic_explorer_trait_or_experience_effect = yes
				add_prestige = 1000
				add_prestige_level = 1
				add_character_modifier = {
					modifier = RICE_north_atlantic_discoverer_of_greenland
				}
			}
			# scope:leader.activity = {
			# 	complete_activity = yes
			# }
			if = {
				limit = {
					scope:leader = {
						has_character_flag = blocked_from_leaving
					}
				}
				scope:leader = {
					remove_character_flag = blocked_from_leaving
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					scope:new_culture = {
						NOT = {
							has_cultural_tradition = tradition_hunters
						}
					}
				}
				scope:new_culture = {
					remove_random_culture_tradition = yes
					add_culture_tradition = tradition_hunters
					remove_variable = tradition_cooldown
				}
			}
			if = {
				limit = {
					scope:new_culture = {
						NOR = {
							has_cultural_tradition = tradition_RICE_whalers
							has_cultural_tradition = tradition_RICE_master_whalers
						}
					}
				}
				scope:new_culture = {
					remove_random_culture_tradition = yes
					add_culture_tradition = tradition_RICE_whalers
					remove_variable = tradition_cooldown
				}
			}

			# Remove traditions that don't make sense for Greenlandic
			# It is placed here on the off chance the Whalers or Hunters replaces them, then they aren't needed anymore
			RICE_greenlandic_remove_nonsensical_traditions_effect = yes

		}
		if = {
			limit = {
				NOT = { struggle:RICE_greenland_struggle = { is_culture_involved_in_struggle = root.culture } }
			}
			struggle:RICE_greenland_struggle = { set_culture_as_involved = root.culture }
		}
		if = {
			limit = {
				NOT = { struggle:RICE_greenland_struggle = { is_faith_involved_in_struggle = root.faith } }
			}
			struggle:RICE_greenland_struggle = { set_faith_as_involved = root.faith }
		}
		struggle:RICE_greenland_struggle = { set_culture_as_involved = scope:new_culture }
		custom_tooltip = RICE_greenland_struggle_starts_tooltip
		root.culture = {
			save_scope_as = root_culture
		}
		hidden_effect = {
			scope:greenlandic_creator_deity = {
				death = {
					death_reason = death_disappearance
				}
			}			
		}
		#set_culture = culture:root_culture
	}

	option = {
		name = north_atlantic.0161.a
		add_prestige = 500
		if = {
			limit = {
				exists = house
			}
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				struggle:RICE_greenland_struggle = {
					activate_struggle_catalyst = {
						catalyst = catalyst_RICE_establish_estate_greenland
						character = root
					}
				}
			}
			house = {
				add_house_modifier = {
					modifier = RICE_north_atlantic_greenland_family_estate
				}
			}
		}
		scope:new_culture = {
			#reset_culture_creation_date = yes
			set_language_from = root.culture
			#set_name_list = root.culture
			custom_tooltip = RICE_set_heritage_greenlandic_tooltip
			#custom_description = {
			#	text = RICE_set_heritage_greenlandic
				hidden_effect = {
					get_all_innovations_from = root.culture
					set_heritage_from = root.culture
				}
			#}
		}
	}

	after = {

		every_ruler = {
			limit = {
				is_ai = no
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_europe_and_mediterranean_region
					}
				}
				NOR = {
					any_character_struggle = {
						involvement = involved
						is_struggle_type = RICE_greenland_struggle
					}
					any_character_struggle = {
						involvement = interloper
						is_struggle_type = RICE_greenland_struggle
					}
				}
			}
			trigger_event = north_atlantic.0008
		}

		
		# scope:greenlandic_deity = {
		# 	make_unprunable = yes
		# 	death = {
		# 		death_reason = death_disappearance
		# 	}
		# }

		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_grand_expedition
			}
			end_story = yes
		}

	}

}





# Choose someone to lead the expedition
north_atlantic.0162 = {
	type = character_event
	title = north_atlantic.0162.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					var:RICE_grand_expedition_destination_pick = flag:greenland
				}
				desc = north_atlantic.0162.desc.greenland
			}
			triggered_desc = {
				trigger = {
					var:RICE_grand_expedition_destination_pick = flag:americas
				}
				desc = north_atlantic.0162.desc.americas
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					OR = {
						exists = scope:candidate_1
						exists = scope:candidate_2
					}
				}
				desc = north_atlantic.0162.desc.some_courtiers
			}
			desc = north_atlantic.0162.desc.no_courtiers
		}
	}
	theme = diplomacy_foreign_affairs_focus
	override_background = { reference = RICE_background_north_atlantic_port }

	right_portrait = {
		character = root
		animation = personality_rational
	}
	lower_left_portrait = {
		character = scope:candidate_1
		trigger = { exists = scope:candidate_1 }
	}
	lower_center_portrait = {
		character = scope:candidate_2
		trigger = { exists = scope:candidate_2 }
	}
	lower_right_portrait = {
		character = scope:local
		trigger = { exists = scope:local }
	}

	immediate = {
		add_character_flag = RICE_north_atlantic_ongoing_expedition
		save_scope_as = leif_sponsor
		if = {
			limit = {
				var:RICE_grand_expedition_destination_pick = flag:greenland
			}
			set_global_variable = {
				name = RICE_north_atlantic_greenland_discovery_in_progress
				value = yes
			}
		}
		else_if = {
			limit = {
				var:RICE_grand_expedition_destination_pick = flag:americas
			}
			set_global_variable = {
				name = RICE_north_atlantic_vinland_discovery_in_progress
				value = yes
			}
		}
		# See scripted_trigger valid_scandinavian_adventurer just in case
		every_courtier = {
			limit = {
				is_available_healthy_ai_adult = yes
				age <= 55 # Don't want someone too old who could die on the journey
				is_alive = yes
				is_ruler = no
				OR = {
					NOT = { is_councillor_of = root }
					has_trait = RICE_explorer
				}
				# Will not inherit anything anytime soon
				OR = {					
					any_heir_title = { count = 0 }
					AND = {
						save_temporary_scope_as = potential
						any_heir_title = {
							place_in_line_of_succession = {
								target = scope:potential
								value >= 3
							}
						}
					}
				}
			}
			add_to_list = expedition_leader_candidates
		}

		if = {
			limit = {
				any_in_list = {
					list = expedition_leader_candidates
					count >= 2
					opinion = {
						target = root
						value > -25
					}
				}
			}
			random_in_list = {
				list = expedition_leader_candidates
				weight = {
					base = 10
					modifier = {
						has_trait = RICE_explorer
						add = 50
					}
					modifier = {
						has_trait = ambitious
						add = 5
					}
					modifier = {
						has_trait = content
						add = -5
					}
					modifier = {
						has_trait = brave
						add = 5
					}
					modifier = {
						has_trait = craven
						add = -5
					}
					modifier = {
						has_trait = diligent
						add = 5
					}
					modifier = {
						has_trait = lazy
						add = -5
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
				}
				save_scope_as = candidate_1
				add_character_flag = {
					flag = RICE_recent_expedition_candidate
					days = 120
				}
			}
		}

		if = {
			limit = {
				any_in_list = {
					list = expedition_leader_candidates
					count >= 1
				}
			}
			random_in_list = {
				list = expedition_leader_candidates
				limit = {
					exists = scope:candidate_1
					NOT = { this = scope:candidate_1 }
				}
				weight = {
					base = 10
					modifier = {
						has_trait = RICE_explorer
						add = 50
					}
					modifier = {
						has_trait = ambitious
						add = 5
					}
					modifier = {
						has_trait = content
						add = -5
					}
					modifier = {
						has_trait = brave
						add = 5
					}
					modifier = {
						has_trait = craven
						add = -5
					}
					modifier = {
						has_trait = diligent
						add = 5
					}
					modifier = {
						has_trait = lazy
						add = -5
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = yes
						culture = { has_cultural_parameter = martial_custom_male_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						NOT = { culture = { has_cultural_parameter = has_access_to_shieldmaidens } }
						add = -30
					}
					modifier = {
						is_female = no
						culture = { has_cultural_parameter = martial_custom_female_only_combatant }
						culture = { has_cultural_parameter = has_access_to_shieldmaidens }
						add = -15
					}
				}
				save_scope_as = candidate_2
				add_character_flag = {
					flag = RICE_recent_expedition_candidate
					days = 120
				}
			}
		}

		create_character = {
			location = root.capital_province
			template = random_barrel_character
			save_scope_as = local
		}

	}

	option = {
		name = north_atlantic.0162.a
		trigger = {
			exists = scope:candidate_1
		}
		scope:candidate_1 = {
			#save_scope_as = RICE_expedition_leader_choice
			add_prestige = 100
			add_character_flag = {
				flag = planning_an_activity
				days = 180
			}
			add_character_flag = {
				flag = blocked_from_leaving
				years = 4 # Little extra buffer just in case
			}
			save_scope_as = leif_temp
		}
		set_variable = { # For use in the Story
			name = RICE_expedition_leader_choice
			value = scope:candidate_1
		}
		hidden_effect = {
			scope:local = {
				death = {
					death_reason = death_disappearance
				}
			}
		}
	}

	option = {
		name = north_atlantic.0162.b
		trigger = {
			exists = scope:candidate_2
		}
		scope:candidate_2 = {
			#save_scope_as = RICE_expedition_leader_choice
			add_prestige = 100
			add_character_flag = {
				flag = planning_an_activity
				days = 180
			}
			add_character_flag = {
				flag = blocked_from_leaving
				years = 4 # Little extra buffer just in case
			}
			save_scope_as = leif_temp
		}
		set_variable = { # For use in the Story
			name = RICE_expedition_leader_choice
			value = scope:candidate_2
		}
		hidden_effect = {
			scope:local = {
				death = {
					death_reason = death_disappearance
				}
			}
		}
	}

	option = {
		name = north_atlantic.0162.c
		#trigger = {
		#	exists = scope:local
		#}
		add_courtier = scope:local
		scope:local = {
			#save_scope_as = RICE_expedition_leader_choice
			add_prestige = 100
			add_character_flag = {
				flag = planning_an_activity
				days = 180
			}
			add_character_flag = {
				flag = blocked_from_leaving
				years = 4 # Little extra buffer just in case
			}
			save_scope_as = leif_temp
		}
		pay_short_term_gold = {
			target = scope:local
			gold = 50
		}
		set_variable = { # For use in the Story
			name = RICE_expedition_leader_choice
			value = scope:local
		}
	}

	after = {
		every_ruler = {
			limit = {
				#is_ai = no
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = world_europe
						#OR = {
						#	geographical_region = world_europe_west_britannia
						#	geographical_region = world_europe_west_germania
						#	geographical_region = world_europe_west_francia
						#	geographical_region = world_europe_north
						#}
					}
				}
			}
			trigger_event = north_atlantic.0167
		}
		create_story = RICE_story_cycle_north_atlantic_grand_expedition
	}

}






# Expedition begins
north_atlantic.0165 = {
	type = character_event
	title = north_atlantic.0165.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_grand_expedition_destination = flag:greenland
				}
				desc = north_atlantic.0165.desc.greenland
			}
			triggered_desc = {
				trigger = {
					scope:story.var:RICE_grand_expedition_destination = flag:americas
				}
				desc = north_atlantic.0165.desc.americas
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_expedition_leader_generated
				}
				desc = north_atlantic.0165.desc.leader_dead
			}
			desc = north_atlantic.0165.desc
		}	
	}
	theme = RICE_theme_north_atlantic_port

	left_portrait = root
	right_portrait = {
		character = scope:leader
		animation = personality_honorable
	}

	immediate = {
		if = {
			limit = {
				scope:story = {
					NOT = { exists = var:RICE_expedition_leader }
				}
			}
			# Generate the expedition leader if none exists
			create_character = {
				location = root.capital_province
				template = random_barrel_character
				save_scope_as = leader
			}
			add_courtier = scope:leader
			add_character_flag = RICE_expedition_leader_generated
			scope:story = {
				set_variable = {
					name = RICE_expedition_leader
					value = scope:leader
				}
			}
		}
		# Prioritize capital if it is coastal
		if = {
			limit = {
				capital_county = {
					is_coastal_county = yes
				}
			}
			capital_province = { save_scope_as = province }
		}
		# If capital isn't coastal, find a county/province that does
		else_if = {
			limit = {
				any_realm_province = {
					is_coastal = yes
				}
			}
			random_realm_province = {
				limit = {
					is_coastal = yes
				}
				save_scope_as = province
			}
		}
		# Failsafe in case nothing is found that is coastal
		else = {
			capital_province = { save_scope_as = province }
		}
	}

	option = {
		name = north_atlantic.0165.a
		scope:leader = {
			add_trait = RICE_exploring_western_seas
			add_character_flag = {
				flag = planning_an_activity
				days = 180 # Failsafe in case the flag doesn't get removed later for some reason
			}
			custom_tooltip = north_atlantic.0165.tooltip
		}
		# show_as_tooltip = {
		# 	scope:leader = {
		# 		add_trait = RICE_exploring_western_seas
		# 		custom_tooltip = north_atlantic.0165.tooltip
		# 	}
		# }
		# scope:province = {	
		# 	spawn_activity = {
		# 		owner = scope:leader
		# 		type = activity_north_atlantic_greenland_expedition
		# 	}	
		# }
	}

	after = {		
		if = {
			limit = {
				has_character_flag = RICE_expedition_leader_generated
			}
			remove_character_flag = RICE_expedition_leader_generated
		}
	}

}


# Vinland discovered
north_atlantic.0166 = {
	type = character_event
	title = north_atlantic.0166.t
	desc = {
		desc = north_atlantic.0166.desc.intro
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:leader = {
						is_alive = no
					}
				}
				desc = north_atlantic.0166.desc.leader_dead
			}
			desc = north_atlantic.0166.desc.leader_not_dead
		}	
		desc = north_atlantic.0166.desc
	}
	theme = RICE_theme_north_atlantic_port

	left_portrait = {
		character = root
		animation = happiness
	}
	right_portrait = {
		character = scope:leader
		animation = personality_honorable
	}

	immediate = {
		
		set_global_variable = {
			name = RICE_north_atlantic_vinland_discovered
			value = yes
		}
		add_prestige = 300
		add_to_global_variable_list = {
			name = RICE_north_atlantic_leif_erikson_equivalent
			target = scope:leader
		}
		if = {
			limit = {
				scope:leader = {
					is_alive = no
				}
			}
			make_unprunable = yes
		}
		else_if = {
			if = {
				limit = {
					scope:leader = {
						has_trait = RICE_exploring_western_seas
					}
				}
				scope:leader = {
					remove_trait = RICE_exploring_western_seas					
				}
			}
			if = {
				limit = {
					scope:leader = {
						has_character_flag = planning_an_activity						
					}
				}
				scope:leader = {
					remove_character_flag = planning_an_activity						
				}
			}
			scope:leader = {
				RICE_north_atlantic_explorer_trait_or_experience_effect = yes
				add_prestige = 1000
				add_prestige_level = 1
				add_character_modifier = {
					modifier = RICE_north_atlantic_discoverer_of_americas
				}
			}
			# scope:leader.activity = {
			# 	complete_activity = yes
			# }
			if = {
				limit = {
					scope:leader = {
						has_character_flag = blocked_from_leaving
					}
				}
				scope:leader = {
					remove_character_flag = blocked_from_leaving
				}
			}
		}
		if = {
			limit = {
				OR = {
					any_character_struggle = {
						is_struggle_type = RICE_greenland_struggle
						OR = {
							is_struggle_phase = struggle_RICE_greenland_phase_settlement
							is_struggle_phase = struggle_RICE_greenland_phase_integration
						}
					}					
					has_global_variable = RICE_greenland_ending_integration
					has_global_variable = RICE_greenland_ending_indigenous
				}
			}
			set_global_variable = {
				name = RICE_vinland_viability
				value = 20
			}
		}
		else_if = {
			limit = {
				any_character_struggle = {
					is_struggle_type = RICE_greenland_struggle
					is_struggle_phase = struggle_RICE_greenland_phase_subsistence
				}	
			}
			set_global_variable = {
				name = RICE_vinland_viability
				value = 10
			}
		}
		else = {			
			set_global_variable = {
				name = RICE_vinland_viability
				value = 0
			}
		}
	}

	option = {
		name = north_atlantic.0166.a
		if = {
			limit = {
				exists = struggle:RICE_greenland_struggle
			}
			struggle:RICE_greenland_struggle = {
				activate_struggle_catalyst = {
					catalyst = catalyst_RICE_americas_discovered
					character = root
				}
			}
		}

	}

	after = {
		every_ruler = {
			limit = {
				#is_ai = no
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = world_europe
						#OR = {
						#	geographical_region = world_europe_west_britannia
						#	geographical_region = world_europe_west_germania
						#	geographical_region = world_europe_west_francia
						#	geographical_region = world_europe_north
						#}
					}
				}
			}
			trigger_event = north_atlantic.0010
		}
		random_owned_story = {
			limit = {
				story_type = RICE_story_cycle_north_atlantic_expedition
			}
			end_story = yes
		}
	}

}



# Notification to other players that the journey is on-going
north_atlantic.0167 = {
	type = character_event
	title = north_atlantic.0167.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					NOT = { has_global_variable = RICE_north_atlantic_vinland_discovery_in_progress }
					
				}
				desc = north_atlantic.0167.desc.greenland
			}
			triggered_desc = {
				trigger = {
					has_global_variable = RICE_north_atlantic_vinland_discovery_in_progress
				}
				desc = north_atlantic.0167.desc.americas
			}
		}
	}
	theme = RICE_theme_north_atlantic_port

	left_portrait = {
		character = scope:leif_sponsor
		animation = personality_greedy
	}
	right_portrait = {
		character = scope:leif_temp
		animation = personality_bold
	}

	immediate = {
		if = {
			limit = {
				has_global_variable = RICE_north_atlantic_vinland_discovery_in_progress
			}
			ordered_in_global_list = {
				variable = RICE_north_atlantic_erik_the_red
				save_scope_as = erik
			}
		}
	}

	option = {
		name = north_atlantic.0167.a
		if = {
			limit = {
				NOT = { has_global_variable = RICE_north_atlantic_vinland_discovery_in_progress }
			}
			custom_tooltip = north_atlantic.0167.tooltip.no_greenland
		}
		if = {
			limit = {
				has_global_variable = RICE_north_atlantic_vinland_discovery_in_progress
			}
			custom_tooltip = north_atlantic.0167.tooltip.no_vinland
		}
	}

}



######################################################################################
# 
# GREENLAND STRUGGLE ENDINGS
# 
# north_atlantic.0170-north_atlantic.0179
# 
######################################################################################

# Integration Ending
north_atlantic.0170 = { 
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0170.t
	desc = north_atlantic.0170.desc
	theme = court
	override_background = { reference = RICE_greenland_struggle_vinland }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_end_animate" }

	immediate = {
		set_global_variable = {
			name = RICE_greenland_ending_integration
			value = yes
		}

		# Add all involved cultures with counties to a list, for marriage and holy war checks
		RICE_greenland_struggle_ending_culture_list_effect = yes

		# Change cultural acceptance
		RICE_greenland_struggle_integration_cultural_acceptance_effect = yes

		play_music_cue = "mx_RICE_greenland_struggle_integration"

		RICE_greenland_struggle_integration_ender_effect = yes
		RICE_greenland_struggle_integration_ending_tooltip_effect = yes

		save_scope_as = struggle_ender
	}

	# Cultural victory
	option = {
		name = north_atlantic.0170.a
		RICE_greenland_struggle_integration_cultural_ending_effect = yes
		stress_impact = {
			paranoid = minor_stress_impact_gain
			callous = minor_stress_impact_gain
		}
		set_global_variable = {
			name = RICE_greenland_integration_cultural_victory
			value = yes
			days = 15 # Clear out eventually, just in case
		}
	}

	# Economic victory
	option = {
		name = north_atlantic.0170.b
		RICE_greenland_struggle_integration_economic_ending_effect = yes
		stress_impact = {
			lazy = minor_stress_impact_gain
			generous = minor_stress_impact_gain
		}
		set_global_variable = {
			name = RICE_greenland_integration_economic_victory
			value = yes
			days = 15 # Clear out eventually, just in case
		}
	}

	# Community victory
	option = {
		name = north_atlantic.0170.c
		RICE_greenland_struggle_integration_community_ending_effect = yes
		stress_impact = {
			fickle = minor_stress_impact_gain
			content = minor_stress_impact_gain
		}
		set_global_variable = {
			name = RICE_greenland_integration_community_victory
			value = yes
			days = 15 # Clear out eventually, just in case
		}
	}

	after = {
		# End Struggle
		struggle:RICE_greenland_struggle = {
			end_struggle = RICE_greenland_struggle_ending_integration_decision
		}
		# Notify
		every_ruler = {
			limit = {
				is_ai = no
				# NOT = { scope:struggle_ender = root }
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_europe_and_mediterranean_region
						#OR = {
						#	geographical_region = world_europe_west_britannia
						#	geographical_region = world_europe_west_germania
						#	geographical_region = world_europe_west_francia
						#	geographical_region = world_europe_north
						#}
					}
				}
			}
			trigger_event = north_atlantic.0171
		}
	}
}




# Integration Ending notification
north_atlantic.0171 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0171.t
	desc = {
		desc = north_atlantic.0171.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_global_variable = RICE_greenland_integration_cultural_victory
				}
				desc = north_atlantic.0171.desc.closing.cultural
			}
			triggered_desc = {
				trigger = {
					has_global_variable = RICE_greenland_integration_economic_victory
				}
				desc = north_atlantic.0171.desc.closing.economic
			}
			triggered_desc = {
				trigger = {
					has_global_variable = RICE_greenland_integration_community_victory
				}
				desc = north_atlantic.0171.desc.closing.community
			}
		}
		desc = north_atlantic.0171.desc.closing
	}
	theme = court
	override_background = { reference = RICE_greenland_struggle_vinland }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_integration"
	}
	option = {
		name = north_atlantic.0171.a
		RICE_greenland_struggle_integration_ending_tooltip_effect = yes
		show_as_tooltip = {
			if = {
				limit = {
					has_global_variable = RICE_greenland_integration_cultural_victory
				}
				RICE_greenland_struggle_integration_cultural_ending_effect = yes
			}
			else_if = {
				limit = {
					has_global_variable = RICE_greenland_integration_economic_victory
				}
				RICE_greenland_struggle_integration_economic_ending_effect = yes
			}
			else_if = {
				limit = {
					has_global_variable = RICE_greenland_integration_community_victory
				}
				RICE_greenland_struggle_integration_community_ending_effect = yes
			}
		}
	}
}



# Indigenous Ending
north_atlantic.0172 = { 
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0172.t
	desc = north_atlantic.0172.desc
	theme = court
	override_background = { reference = RICE_sunset_invasion }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_end_animate" }

	immediate = {
		set_global_variable = {
			name = RICE_greenland_ending_indigenous
			value = yes
		}
		# Add all involved rulers to a list, for ping event
		play_music_cue = "mx_RICE_greenland_struggle_integration"
		RICE_greenland_struggle_indigenous_ender_effect = yes
		RICE_greenland_struggle_indigenous_ending_tooltip_effect = yes
		save_scope_as = struggle_ender
	}

	# Social victory
	option = {
		name = north_atlantic.0172.a
		RICE_greenland_struggle_indigenous_social_ending_effect = yes
		stress_impact = {
			wrathful = minor_stress_impact_gain
			sadistic = minor_stress_impact_gain
		}
		set_global_variable = {
			name = RICE_greenland_indigenous_social_victory
			value = yes
			days = 15 # Clear out eventually, just in case
		}
	}

	# Political victory
	option = {
		name = north_atlantic.0172.b
		RICE_greenland_struggle_indigenous_political_ending_effect = yes
		stress_impact = {
			impatient = minor_stress_impact_gain
			stubborn = minor_stress_impact_gain
		}
		set_global_variable = {
			name = RICE_greenland_indigenous_political_victory
			value = yes
			days = 15 # Clear out eventually, just in case
		}
	}

	# Military victory
	option = {
		name = north_atlantic.0172.c
		RICE_greenland_struggle_indigenous_military_ending_effect = yes
		stress_impact = {
			forgiving = minor_stress_impact_gain
			compassionate = minor_stress_impact_gain
		}
		set_global_variable = {
			name = RICE_greenland_indigenous_military_victory
			value = yes
			days = 15 # Clear out eventually, just in case
		}
	}

	after = {
		# End Struggle
		struggle:RICE_greenland_struggle = {
			end_struggle = RICE_greenland_struggle_ending_integration_decision
		}
		# Notify
		every_ruler = {
			limit = {
				is_ai = no
				# NOT = { scope:struggle_ender = root }
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_europe_and_mediterranean_region
						#OR = {
						#	geographical_region = world_europe_west_britannia
						#	geographical_region = world_europe_west_germania
						#	geographical_region = world_europe_west_francia
						#	geographical_region = world_europe_north
						#}
					}
				}
			}
			trigger_event = north_atlantic.0173
		}
	}
}




# Indigenous Ending notification
north_atlantic.0173 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0173.t
	desc = {
		desc = north_atlantic.0173.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_global_variable = RICE_greenland_indigenous_social_victory
				}
				desc = north_atlantic.0173.desc.closing.social
			}
			triggered_desc = {
				trigger = {
					has_global_variable = RICE_greenland_indigenous_political_victory
				}
				desc = north_atlantic.0173.desc.closing.political
			}
			triggered_desc = {
				trigger = {
					has_global_variable = RICE_greenland_indigenous_military_victory
				}
				desc = north_atlantic.0173.desc.closing.military
			}
		}
	}
	theme = court
	override_background = { reference = RICE_sunset_invasion }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_integration"
	}
	option = {
		name = north_atlantic.0173.a
		RICE_greenland_struggle_indigenous_ending_tooltip_effect = yes
		show_as_tooltip = {
			if = {
				limit = {
					has_global_variable = RICE_greenland_indigenous_social_victory
				}
				RICE_greenland_struggle_indigenous_social_ending_effect = yes
			}
			else_if = {
				limit = {
					has_global_variable = RICE_greenland_indigenous_political_victory
				}
				RICE_greenland_struggle_indigenous_political_ending_effect = yes
			}
			else_if = {
				limit = {
					has_global_variable = RICE_greenland_indigenous_military_victory
				}
				RICE_greenland_struggle_indigenous_military_ending_effect = yes
			}
		}
	}
}


# Abandonment Ending
north_atlantic.0174 = { 
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0174.t
	desc = north_atlantic.0174.desc
	theme = death
	override_background = { reference = RICE_greenland_icebergs }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_end_animate" }

	immediate = {
		set_global_variable = {
			name = RICE_greenland_ending_abandonment
			value = yes
		}
		# Add all involved rulers to a list, for ping event
		play_music_cue = "mx_RICE_greenland_struggle_abandonment"
		RICE_greenland_struggle_abandonment_ender_effect = yes
		RICE_greenland_struggle_abandonment_ending_tooltip_effect = yes
		save_scope_as = struggle_ender
	}

	# Ok
	option = {
		name = north_atlantic.0174.a
		add_gold = RICE_greenland_abandonment_compensation_initiater_value
		RICE_greenland_struggle_abandonment_ending_effect = yes
	}

	after = {
		# End Struggle
		struggle:RICE_greenland_struggle = {
			end_struggle = RICE_greenland_struggle_ending_integration_decision
		}
		# Do the secret thing for non-ai players
		hidden_effect = {
			every_ruler = {
				limit = {
					is_ai = yes
					exists = house
					house = {
						has_house_modifier = RICE_north_atlantic_greenland_family_estate
					}
				}
				add_gold = RICE_greenland_abandonment_compensation_value
			}
		}
		# Notify
		every_ruler = {
			limit = {
				is_ai = no
				# NOT = { scope:struggle_ender = root }
				any_held_title = {
					tier = tier_county
					any_county_province = {
						geographical_region = RICE_europe_and_mediterranean_region
						#OR = {
						#	geographical_region = world_europe_west_britannia
						#	geographical_region = world_europe_west_germania
						#	geographical_region = world_europe_west_francia
						#	geographical_region = world_europe_north
						#}
					}
				}
			}
			trigger_event = north_atlantic.0175
		}
	}
}




# Abandonment Ending notification
north_atlantic.0175 = { # Fullscreen Intro Event
	type = character_event
	window = fullscreen_event
	title = north_atlantic.0175.t
	desc = north_atlantic.0175.desc
	theme = death
	override_background = { reference = RICE_greenland_icebergs }
	override_sound = { reference = "event:/DLC/FP2/SFX/UI/fp2_struggle_ui_intro_animate" }

	immediate = {
		play_music_cue = "mx_RICE_greenland_struggle_abandonment"
	}
	option = {
		name = north_atlantic.0175.a
		RICE_greenland_struggle_abandonment_ending_tooltip_effect = yes
		show_as_tooltip = {
			RICE_greenland_struggle_abandonment_ending_effect = yes
		}
		if = {
			limit = {
				NOT = { scope:struggle_ender = root }
				exists = house
				house = {
					has_house_modifier = RICE_north_atlantic_greenland_family_estate
				}
			}
			add_gold = RICE_greenland_abandonment_compensation_value
		}
	}
}



######################################################################################
# 
# WHALING
# 
# north_atlantic.0180-north_atlantic.0189
# 
######################################################################################

# Whaling expedition sets out
north_atlantic.0180 = {
	type = character_event
	title = north_atlantic.0180.t
	desc = north_atlantic.0180.desc
	theme = hunt_activity
	override_background = { reference = docks }

	left_portrait = {
		character = root
		animation = personality_greedy
	}

	immediate = {
		random_held_title = {
			limit = {
				tier = tier_county
				is_coastal_county = yes
			}	
			save_scope_as = county
		}
	}

	option = {
		name = north_atlantic.0180.a
		trigger_event = {
			id = north_atlantic.0181
			days = { 7 21 }
		}
	}

}


# Whaling expedition returns
north_atlantic.0181 = {
	type = character_event
	title = north_atlantic.0181.t
	desc = {
		desc = north_atlantic.0181.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_whaling_success
				}
				desc = north_atlantic.0181.desc.success
			}
			desc = north_atlantic.0181.desc.fail
		}		
		first_valid = {
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_whaling_low
				}
				desc = north_atlantic.0181.desc.low
			}
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_whaling_medium
				}
				desc = north_atlantic.0181.desc.medium
			}
			triggered_desc = {
				trigger = {
					has_character_flag = RICE_whaling_high
				}
				desc = north_atlantic.0181.desc.high
			}
		}		
	}
	theme = hunt_activity
	override_background = { reference = docks }

	right_portrait = {
		character = root
		triggered_animation = {
			trigger = { has_character_flag = RICE_whaling_success }
			animation = happiness
		}
		triggered_animation = {
			trigger = { NOT = { has_character_flag = RICE_whaling_success } }
			animation = sadness
		}
	}

	immediate = {
		random = {
			chance = RICE_north_atlantic_whaling_success_chance
			add_character_flag = RICE_whaling_success
			random_list = {
				20 = {
					add_character_flag = RICE_whaling_low
				}
				20 = {
					modifier = {
						add = {
							value = stewardship
							multiply = 0.5
							max = 10
						}
					}
					add_character_flag = RICE_whaling_medium
				}
				15 = {
					modifier = {
						add = {
							value = stewardship
							multiply = 0.25
							max = 10
						}
					}
					add_character_flag = RICE_whaling_high
				}
			}
		}
	}

	option = {
		name = {
			trigger = { NOT = { has_character_flag = RICE_whaling_success } }
			text = north_atlantic.0181.a.failure
		}
		name = {
			trigger = { has_character_flag = RICE_whaling_low }
			text = north_atlantic.0181.a.low
		}
		name = {
			trigger = { has_character_flag = RICE_whaling_medium }
			text = north_atlantic.0181.a.medium
		}
		name = {
			trigger = { has_character_flag = RICE_whaling_high }
			text = north_atlantic.0181.a.high
		}
		if = {
			limit = {
				has_character_flag = RICE_whaling_success
			}
			add_gold = { RICE_north_atlantic_whaling_min_gold_gain_value RICE_north_atlantic_whaling_max_gold_gain_value }
		}
		if = {
			limit = {
				NOT = { has_character_flag = RICE_whaling_success }
			}
			stress_impact = {
				greedy = minor_stress_impact_gain
				ambitious = miniscule_stress_impact_gain
				wrathful = miniscule_stress_impact_gain
			}
		}
		if = {
			limit = {
				OR = {
					has_character_flag = RICE_whaling_medium
					has_character_flag = RICE_whaling_high
				}
			}
			stress_impact = {
				greedy = minor_stress_impact_loss
				ambitious = miniscule_stress_impact_loss
				diligent = miniscule_stress_impact_loss
			}
		}
	}

	after = {
		if = {
			limit = {
				has_character_flag = RICE_whaling_success
			}
			remove_character_flag = RICE_whaling_success
		}
		if = {
			limit = {
				has_character_flag = RICE_whaling_low
			}
			remove_character_flag = RICE_whaling_low
		}
		if = {
			limit = {
				has_character_flag = RICE_whaling_medium
			}
			remove_character_flag = RICE_whaling_medium
		}
		if = {
			limit = {
				has_character_flag = RICE_whaling_high
			}
			remove_character_flag = RICE_whaling_high
		}
	}

}



# Tax exemptions on whaling towns
north_atlantic.0182 = {
	type = character_event
	title = north_atlantic.0182.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					culture = {
						has_cultural_tradition = tradition_RICE_master_whalers
					}
				}
				desc = north_atlantic.0182.desc.culture
			}
			triggered_desc = {
				trigger = {
					NOT = {
						culture = {
							has_cultural_tradition = tradition_RICE_master_whalers
						}
					}
				}
				desc = north_atlantic.0182.desc.not_culture
			}
		}
		desc = north_atlantic.0182.desc
	}
	theme = stewardship_wealth_focus
	override_background = { reference = docks }

	right_portrait = {
		character = root
		animation = personality_compassionate
	}

	immediate = {
		hidden_effect = {			
			RICE_exempt_from_tax_whaling_towns_effect = yes
		}
		random_held_title = {
			limit = {
				tier = tier_county
				is_coastal_county = yes	
				culture = {
					has_cultural_tradition = tradition_RICE_master_whalers
				}				
			}
			save_scope_as = county
		}
		scope:county.culture = {
			save_scope_as = culture
		}
	}

	option = {
		name = north_atlantic.0182.a
		RICE_exempt_from_tax_whaling_towns_effect = yes
	}

}


# Levy extra taxes on whaling towns
north_atlantic.0183 = {
	type = character_event
	title = north_atlantic.0183.t
	desc = {
		first_valid = {
			triggered_desc = {
				trigger = {
					culture = {
						has_cultural_tradition = tradition_RICE_master_whalers
					}
				}
				desc = north_atlantic.0183.desc.culture
			}
			triggered_desc = {
				trigger = {
					NOT = {
						culture = {
							has_cultural_tradition = tradition_RICE_master_whalers
						}
					}
				}
				desc = north_atlantic.0183.desc.not_culture
			}
		}
		desc = north_atlantic.0183.desc
	}
	theme = stewardship_wealth_focus
	override_background = { reference = docks }

	right_portrait = {
		character = root
		animation = personality_callous
	}

	immediate = {
		hidden_effect = {			
			RICE_levy_extra_tax_whaling_towns_effect = yes
		}
		random_held_title = {
			limit = {
				tier = tier_county
				is_coastal_county = yes	
				culture = {
					has_cultural_tradition = tradition_RICE_master_whalers
				}				
			}
			save_scope_as = county
		}
		scope:county.culture = {
			save_scope_as = culture
		}
	}

	option = {
		name = north_atlantic.0183.a
		RICE_levy_extra_tax_whaling_towns_effect = yes
	}

}






######################################################################################
# 
# FLAVOR EVENTS
# 
# north_atlantic.0200-north_atlantic.0249 reserved
# 
######################################################################################


# Eating great auks
north_atlantic.0200 = {
	type = character_event
	title = north_atlantic.0200.t
	desc = north_atlantic.0200.desc
	theme = hunt_activity
	override_background = { reference = bp1_kitchen_western }
	
	right_portrait = {
		character = root
		animation = personality_greedy
	}
	
	trigger = {
		any_held_title = {
			tier = tier_county
			is_coastal_county = yes
			any_county_province = {
				OR = {
					geographical_region = world_europe_west_britannia
					geographical_region = world_europe_north
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
		modifier = {
			add = 0.2
			has_trait = gluttonous
		}
		modifier = {
			add = -0.2
			has_trait = temperate
		}
	}

	option = { # buy meat
		name = north_atlantic.0200.a
		trigger = {
			OR = {
				gold >= 20
				is_ai = no
			}
		}
		remove_short_term_gold = 20
		add_character_modifier = {
			modifier = RICE_north_atlantic_auk_meat
			years = 5
		}
		stress_impact = {
			greedy = miniscule_stress_impact_gain
			temperate = miniscule_stress_impact_gain
		}
	}

	option = { # buy eggs
		name = north_atlantic.0200.b
		trigger = {
			OR = {
				gold >= 20
				is_ai = no
			}
		}
		remove_short_term_gold = 20
		add_character_modifier = {
			modifier = RICE_north_atlantic_auk_eggs
			years = 5
		}
		stress_impact = {
			greedy = miniscule_stress_impact_gain
			temperate = miniscule_stress_impact_gain
		}
	}

	option = { # buy both
		name = north_atlantic.0200.c
		trigger = {
			OR = {
				gold >= 40
				is_ai = no
			}
		}
		remove_short_term_gold = 40
		add_character_modifier = {
			modifier = RICE_north_atlantic_auk_meat
			years = 5
		}
		add_character_modifier = {
			modifier = RICE_north_atlantic_auk_eggs
			years = 5
		}
		stress_impact = {
			greedy = minor_stress_impact_gain
			temperate = minor_stress_impact_gain
		}
	}

	option = { # buy neither
		name = north_atlantic.0200.d
		stress_impact = {
			gluttonous = miniscule_stress_impact_gain
		}
	}
}


# Horse fighting in Iceland - two courtiers fight fight fight
north_atlantic.0201 = {
	type = character_event
	title = north_atlantic.0201.t
	desc = north_atlantic.0201.desc
	theme = unfriendly
	override_background = { reference = RICE_background_north_atlantic_iceland }
	
	left_portrait = {
		character = scope:horse_1
		animation = dismissal
	}
	
	right_portrait = {
		character = scope:horse_2
		animation = rage
	}
	
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = custom_iceland
			}
		}
		any_courtier_or_guest = {
			count >= 2
			is_available_ai_adult = yes
			OR = {
				has_trait = arrogant
				has_trait = wrathful
				has_trait = vengeful
				has_trait = stubborn
				has_trait = ambitious
				has_trait = arbitrary
				has_trait = callous
				has_trait = paranoid
			}
			NOT = { has_trait = calm }
			NOT = { has_trait = content }
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = lazy
		}
		modifier = {
			add = -0.2
			has_trait = sadistic
		}
		modifier = {
			add = 0.2
			has_trait = shy
		}
		modifier = {
			add = -0.2
			has_trait = gregarious
		}
		modifier = {
			add = 0.2
			has_trait = cynical
		}
		modifier = {
			add = -0.2
			has_trait = zealous
		}
	}

	immediate = {
		every_courtier_or_guest = {
			limit = {
				is_available_ai_adult = yes
				OR = {
					has_trait = arrogant
					has_trait = wrathful
					has_trait = vengeful
					has_trait = stubborn
					has_trait = ambitious
					has_trait = arbitrary
					has_trait = callous
					has_trait = paranoid
				}
				NOT = { has_trait = calm }
				NOT = { has_trait = content }
			}
			add_to_list = horse_courtiers
		}
		ordered_in_list = {
			list = horse_courtiers
			max = 2
			check_range_bounds = no
			if = {
				limit = {
					NOT = { exists = scope:horse_1 }
				}
				save_scope_as = horse_1
				court_event_character_flag_effect = yes
			}
			else = {
				save_scope_as = horse_2
			}
		}
	}

	option = { # Convince them to chill out
		name = north_atlantic.0201.a
		duel = {
			skill = diplomacy
			value = 11
			10 = {
				desc = north_atlantic.0201.a.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -1.2
				}
				send_interface_toast = {
					title = north_atlantic.0201.a.failure
					left_icon = scope:native
					add_prestige = -100
					scope:horse_1 = {
						set_relation_rival = {
							target = scope:horse_2
							reason = RICE_rival_reason_placeholder
						}
					}
				}
			}
			10 = {
				desc = north_atlantic.0201.a.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 1.2
				}
				send_interface_toast = {
					title = north_atlantic.0201.a.success
					left_icon = scope:horse_1
					right_icon = scope:horse_2
					add_prestige = 100
				}
			}
		}
		stress_impact = {
			lazy = minor_stress_impact_gain
			shy = minor_stress_impact_gain
		}
	}

	option = { # don't bother
		name = north_atlantic.0201.b
		scope:horse_1 = {
			set_relation_rival = {
				target = scope:horse_2
				reason = RICE_rival_reason_placeholder
			}
		}
		stress_impact = {
			diligent = minor_stress_impact_gain
			wrathful = miniscule_stress_impact_gain
			just = miniscule_stress_impact_gain
		}
	}
}


# Broches in Scotland
north_atlantic.0202 = {
	type = character_event
	title = north_atlantic.0202.t
	desc = north_atlantic.0202.desc
	theme = faith
	override_background = { reference = RICE_background_north_atlantic_ruins }
	
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greater_scotland
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	immediate = {
		random_held_title = {
			limit = {
				tier = tier_county
				any_county_province = {
					geographical_region = RICE_greater_scotland
				}
			}
			save_scope_as = county
		}
	}

	option = { # ok
		name = north_atlantic.0202.a
		add_character_modifier = {
			modifier = RICE_north_atlantic_broch_encounter
			years = 5
		}
	}
}


# Bullroarer in Scotland
north_atlantic.0203 = {
	type = character_event
	title = north_atlantic.0203.t
	desc = north_atlantic.0203.desc
	theme = unfriendly
	override_background = { reference = RICE_background_north_atlantic_ruins }
	
	left_portrait = {
		character = root
		animation = fear
	}
	
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_greater_scotland
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = paranoid
		}
		modifier = {
			add = -0.2
			has_trait = trusting
		}
		modifier = {
			add = 0.2
			has_trait = craven
		}
		modifier = {
			add = -0.2
			has_trait = brave
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	immediate = {
		random_held_title = {
			limit = {
				tier = tier_county
				any_county_province = {
					geographical_region = RICE_greater_scotland
				}
			}
			save_scope_as = county
		}
	}

	option = { # ok
		name = north_atlantic.0203.a
		add_piety = 25
		stress_impact = {
			cynical = miniscule_stress_impact_gain
			wrathful = miniscule_stress_impact_gain
			callous = miniscule_stress_impact_gain
			arrogant = miniscule_stress_impact_gain
		}
	}

	option = { # ok
		name = north_atlantic.0203.b
		add_prestige = 25
		stress_impact = {
			calm = miniscule_stress_impact_gain
			compassionate = miniscule_stress_impact_gain
			humble = miniscule_stress_impact_gain
		}
	}
}


# Hearing tales about Gaelic monks in the northern isles
north_atlantic.0204 = {
	type = character_event
	title = north_atlantic.0204.t
	desc = north_atlantic.0204.desc
	theme = learning
	override_background = { reference = throne_room }
	
	left_portrait = {
		character = root
		animation = personality_rational
	}
	
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_atlantic_region
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = paranoid
		}
		modifier = {
			add = -0.2
			has_trait = trusting
		}
		modifier = {
			add = 0.2
			has_trait = craven
		}
		modifier = {
			add = -0.2
			has_trait = brave
		}
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
	}

	option = { # ok
		name = north_atlantic.0204.a
		add_character_modifier = {
			modifier = RICE_north_atlantic_inspired_by_gaelic_monks
			years = 10
		}
		stress_impact = {
			cynical = miniscule_stress_impact_gain
			arrogant = miniscule_stress_impact_gain
		}
	}

	option = { # ok
		name = north_atlantic.0204.b
		add_character_modifier = {
			modifier = RICE_north_atlantic_inspired_by_monks_voyages
			years = 10
		}
		stress_impact = {
			cynical = miniscule_stress_impact_gain
			lazy = miniscule_stress_impact_gain
		}
	}

	option = { # ok
		name = north_atlantic.0204.c
		stress_impact = {
			base = miniscule_stress_impact_loss
		}
	}
}


# Seeing a geyser in Iceland
north_atlantic.0205 = {
	type = character_event
	title = north_atlantic.0205.t
	desc = north_atlantic.0205.desc
	theme = hunt_activity
	override_background = { reference = RICE_background_north_atlantic_iceland }
	
	right_portrait = {
		character = root
		animation = admiration
	}
	
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = RICE_atlantic_region
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = brave
		}
		modifier = {
			add = -0.2
			has_trait = craven
		}
		modifier = {
			add = 0.2
			has_trait = trusting
		}
		modifier = {
			add = -0.2
			has_trait = paranoid
		}
	}

	option = { # ok
		name = north_atlantic.0205.a
		stress_impact = {
			base = miniscule_stress_impact_loss
			brave = miniscule_stress_impact_loss
		}
	}
}


# Get some Iceland Moss or not?
north_atlantic.0206 = {
	type = character_event
	title = north_atlantic.0206.t
	desc = north_atlantic.0206.desc
	theme = medicine
	override_background = { reference = RICE_background_north_atlantic_iceland }
	
	right_portrait = {
		character = root
		animation = personality_rational
	}
	
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = custom_iceland
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = humble
		}
		modifier = {
			add = -0.2
			has_trait = arrogant
		}
		modifier = {
			add = 0.2
			has_trait = paranoid
		}
		modifier = {
			add = -0.2
			has_trait = trusting
		}
		modifier = {
			add = 0.2
			has_trait = patient
		}
		modifier = {
			add = -0.2
			has_trait = impatient
		}
	}

	option = { # ok
		name = north_atlantic.0206.a
		stress_impact = {
			humble = miniscule_stress_impact_gain
		}
	}

	option = { # ok
		name = north_atlantic.0206.b
		add_prestige = -100
		add_character_modifier = {
			modifier = RICE_north_atlantic_iceland_moss
			years = 10
		}
		stress_impact = {
			arrogant = minor_stress_impact_gain
		}
	}
}


# Puffin meat
north_atlantic.0207 = {
	type = character_event
	title = north_atlantic.0207.t
	desc = north_atlantic.0207.desc
	theme = feast_activity
	
	right_portrait = {
		character = root
		animation = personality_content
	}
	
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = custom_iceland
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = gluttonous
		}
		modifier = {
			add = -0.2
			has_trait = temperate
		}
		modifier = {
			add = 0.2
			has_trait = lustful
		}
		modifier = {
			add = -0.2
			has_trait = chaste
		}
	}

	option = { # ok
		name = north_atlantic.0207.a
		add_prestige = 50
		add_character_modifier = {
			modifier = RICE_north_atlantic_puffin_meat
			years = 10
		}
	}
}


# Courtier keeps serving people dairy, thus being an inhospitable host (at least according to medieval Icelandic norms), and they only serve you skyr, Icelandic yogurt (which is tasty IRL btw)
north_atlantic.0208 = {
	type = character_event
	title = north_atlantic.0208.t
	desc = north_atlantic.0208.desc
	theme = unfriendly
	override_background = { reference = bp1_kitchen_western }

	
	left_portrait = {
		character = scope:milkdrinker
		animation = eyeroll
	}	
	right_portrait = {
		character = root
		animation = disapproval
	}
	
	trigger = {
		any_held_title = {
			tier = tier_county
			any_county_province = {
				geographical_region = custom_iceland
			}
		}
		OR = {
			any_courtier = {
				is_available_ai_adult = yes
				OR = {
					has_trait = arbitrary
					has_trait = callous
					has_trait = lazy
					has_trait = temperate
					has_trait = lunatic_1
					has_trait = lunatic_genetic
					has_trait = greedy
					has_trait = arrogant
				}
				NOR = {
					has_trait = just
					has_trait = humble
				}
			}
			any_vassal = {
				is_available_ai_adult = yes
				OR = {
					has_trait = arbitrary
					has_trait = callous
					has_trait = lazy
					has_trait = temperate
					has_trait = lunatic_1
					has_trait = lunatic_genetic
					has_trait = greedy
					has_trait = arrogant
				}
				NOR = {
					has_trait = just
					has_trait = humble
				}
			}
		}
	}

	weight_multiplier = {
		base = 1
		modifier = {
			add = 0.2
			has_trait = gregarious
		}
		modifier = {
			add = -0.2
			has_trait = shy
		}
		modifier = {
			add = 0.2
			has_trait = calm
		}
		modifier = {
			add = -0.2
			has_trait = wrathful
		}
		modifier = {
			add = 0.2
			has_trait = diligent
		}
		modifier = {
			add = -0.2
			has_trait = lazy
		}
	}

	immediate = {
		random_list = {
			50 = {
				trigger = {
					any_courtier = {
						is_available_ai_adult = yes
						OR = {
							has_trait = arbitrary
							has_trait = callous
							has_trait = lazy
							has_trait = temperate
							has_trait = lunatic_1
							has_trait = lunatic_genetic
							has_trait = greedy
							has_trait = arrogant
						}
						NOR = {
							has_trait = just
							has_trait = humble
						}
					}
				}
				random_courtier = {					
					limit = {
						is_available_ai_adult = yes
						OR = {
							has_trait = arbitrary
							has_trait = callous
							has_trait = lazy
							has_trait = temperate
							has_trait = lunatic_1
							has_trait = lunatic_genetic
							has_trait = greedy
							has_trait = arrogant
						}
						NOR = {
							has_trait = just
							has_trait = humble
						}
					}
					save_scope_as = milkdrinker
					add_character_modifier = {
						modifier = RICE_north_atlantic_dairy_inhospitality
						years = 10
					}
				}
			}
			50 = {
				trigger = {
					any_vassal = {
						is_available_ai_adult = yes
						OR = {
							has_trait = arbitrary
							has_trait = callous
							has_trait = lazy
							has_trait = temperate
							has_trait = lunatic_1
							has_trait = lunatic_genetic
							has_trait = greedy
							has_trait = arrogant
						}
						NOR = {
							has_trait = just
							has_trait = humble
						}
					}
				}
				random_vassal = {					
					limit = {
						is_available_ai_adult = yes
						OR = {
							has_trait = arbitrary
							has_trait = callous
							has_trait = lazy
							has_trait = temperate
							has_trait = lunatic_1
							has_trait = lunatic_genetic
							has_trait = greedy
							has_trait = arrogant
						}
						NOR = {
							has_trait = just
							has_trait = humble
						}
					}
					save_scope_as = milkdrinker
					add_character_modifier = {
						modifier = RICE_north_atlantic_dairy_inhospitality
						years = 10
					}
				}
			}
		}
	}

	option = { # ok
		name = north_atlantic.0208.a
		add_prestige = -50
		add_character_modifier = {
			modifier = RICE_north_atlantic_tasty_skyr_yogurt
			years = 5
		}
		stress_impact = {
			arrogant = medium_stress_impact_gain
			wrathful = minor_stress_impact_gain
			vengeful = minor_stress_impact_gain
			ambitious = miniscule_stress_impact_gain
			just = miniscule_stress_impact_gain
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_description_no_bullet = {
				text = north_atlantic.0208.info
			}
		}
	}

	option = { # Tell them to screw off
		name = north_atlantic.0208.b
		add_prestige = 50
		progress_towards_rival_effect = {
			CHARACTER = scope:milkdrinker
			OPINION = 0
			REASON = RICE_rival_reason_placeholder
		}
		stress_impact = {
			forgiving = minor_stress_impact_gain
			calm = minor_stress_impact_gain
			patient = miniscule_stress_impact_gain
			lazy = miniscule_stress_impact_gain
			content = miniscule_stress_impact_gain
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_description_no_bullet = {
				text = north_atlantic.0208.info
			}
		}
	}

	option = { # Convince them to chill out and learn some basic etiquette
		name = north_atlantic.0208.c
		duel = {
			skill = diplomacy
			target = scope:milkdrinker
			10 = {
				desc = north_atlantic.0208.c.failure
				compare_modifier = {
					value = scope:duel_value
					multiplier = -0.9
				}
				send_interface_toast = {
					title = north_atlantic.0208.c.failure
					left_icon = scope:milkdrinker
					add_prestige = -50
					progress_towards_rival_effect = {
						CHARACTER = scope:milkdrinker
						OPINION = 0
						REASON = RICE_rival_reason_placeholder
					}
				}
			}
			10 = {
				desc = north_atlantic.0208.c.success
				compare_modifier = {
					value = scope:duel_value
					multiplier = 0.9
				}
				send_interface_toast = {
					title = north_atlantic.0208.c.success
					left_icon = scope:milkdrinker
					add_prestige = 100
					scope:milkdrinker = {
						remove_character_modifier = RICE_north_atlantic_dairy_inhospitality
					}
				}
			}
		}
		stress_impact = {
			arrogant = minor_stress_impact_gain
			wrathful = medium_stress_impact_gain
			vengeful = medium_stress_impact_gain
		}
		if = {
			limit = {
				has_game_rule = RICE_historical_context_on
			}
			custom_description_no_bullet = {
				text = north_atlantic.0208.info
			}
		}
	}
}


######################################################################################
# 
# EXILE/SEND TO GREENLAND/VINLAND
# 
# north_atlantic.0250-north_atlantic.0269
# 
######################################################################################


# Accept the offer
north_atlantic.0250 = {
	type = letter_event
	opening = {
		desc = north_atlantic.0250.opening
	}
	desc = {
		desc = north_atlantic.0250.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:greenland_eastern_settlement = yes
				}
				desc = north_atlantic.0250.desc.greenland_eastern_settlement
			}
			triggered_desc = {
				trigger = {
					scope:greenland_western_settlement = yes
				}
				desc = north_atlantic.0250.desc.greenland_western_settlement
			}
			triggered_desc = {
				trigger = {
					scope:vinland = yes
				}
				desc = north_atlantic.0250.desc.vinland
			}
		}
	}
	sender = scope:recipient
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					scope:greenland_eastern_settlement = yes
				}				
				change_global_variable = {
					name = RICE_greenland_networks
					add = scope:actor.var:RICE_exile_courtier_global_resource_increase
				}
			}
			else_if = {
				limit = {
					scope:greenland_western_settlement = yes
				}				
				change_global_variable = {
					name = RICE_greenland_resilience
					add = scope:actor.var:RICE_exile_courtier_global_resource_increase
				}
			}
			else_if = {
				limit = {
					scope:vinland = yes
				}				
				change_global_variable = {
					name = RICE_vinland_viability
					add = scope:actor.var:RICE_exile_courtier_global_resource_increase
				}
			}
		}
		show_as_tooltip = {
			# Eastern Settlement
			if = {
				limit = {
					scope:greenland_eastern_settlement = yes
				}
				add_prestige = RICE_greenland_exile_prestige_cost
				remove_short_term_gold = RICE_greenland_exile_gold_cost
				custom_tooltip = RICE_north_atlantic_send_americas_death_happened_greenland
				if = {
					limit = {
						exists = struggle:RICE_greenland_struggle
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_exile_to_greenland
							character = scope:actor
						}
					}
				}
			}
			# Western Settlement
			else_if = {
				limit = {
					scope:greenland_western_settlement = yes
				}
				add_prestige = RICE_greenland_exile_prestige_cost
				remove_short_term_gold = RICE_greenland_exile_gold_cost
				custom_tooltip = RICE_north_atlantic_send_americas_death_happened_greenland
				if = {
					limit = {
						exists = struggle:RICE_greenland_struggle
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_exile_to_greenland
							character = scope:actor
						}
					}
				}
			}
			# Vinland
			else_if = {
				limit = {
					scope:vinland = yes
				}
				add_prestige = RICE_vinland_exile_prestige_cost
				remove_short_term_gold = RICE_vinland_exile_gold_cost
				custom_tooltip = RICE_north_atlantic_send_americas_death_happened_vinland
				if = {
					limit = {
						exists = struggle:RICE_greenland_struggle
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_exile_to_vinland
							character = scope:actor
						}
					}
				}
			}				
		}
	}

	option = { # Great
		name = north_atlantic.0250.a
		if = {
			limit = {
				scope:greenland_eastern_settlement = yes
			}
			custom_tooltip = RICE_north_atlantic_exile_americas_networks_change
		}
		else_if = {
			limit = {
				scope:greenland_western_settlement = yes
			}
			custom_tooltip = RICE_north_atlantic_exile_americas_resilience_change
		}
		else_if = {
			limit = {
				scope:vinland = yes
			}
			custom_tooltip = RICE_north_atlantic_exile_americas_viability_change
		}
	}
}


# Refuse exile
north_atlantic.0251 = {
	type = letter_event
	opening = {
		desc = north_atlantic.0251.opening
	}
	desc = {
		desc = north_atlantic.0251.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:greenland_eastern_settlement = yes
				}
				desc = north_atlantic.0251.desc.greenland_eastern_settlement
			}
			triggered_desc = {
				trigger = {
					scope:greenland_western_settlement = yes
				}
				desc = north_atlantic.0251.desc.greenland_western_settlement
			}
			triggered_desc = {
				trigger = {
					scope:vinland = yes
				}
				desc = north_atlantic.0251.desc.vinland
			}
		}
	}
	sender = scope:recipient

	immediate = {
		show_as_tooltip = {
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				if = {
					limit = {
						OR = {
							scope:greenland_eastern_settlement = yes
							scope:greenland_western_settlement = yes
						}
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_failed_exile_to_greenland
							character = scope:actor
						}
					}
				}
				else_if = {
					limit = {
						scope:vinland = yes
					}
					struggle:RICE_greenland_struggle = {
						activate_struggle_catalyst = {
							catalyst = catalyst_RICE_failed_exile_to_vinland
							character = scope:actor
						}
					}
				}
			}
			scope:recipient = {
				add_opinion = {
					target = scope:actor
					modifier = RICE_north_atlantic_tried_exile_west
				}
			}			
		}
	}

	option = { # Oh no
		name = north_atlantic.0251.a
	}
}


# Accept the offer
north_atlantic.0252 = {
	type = letter_event
	opening = {
		desc = north_atlantic.0252.opening
	}
	desc = {
		desc = north_atlantic.0252.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:greenland_eastern_settlement = yes
				}
				desc = north_atlantic.0252.desc.greenland_eastern_settlement
			}
			triggered_desc = {
				trigger = {
					scope:greenland_western_settlement = yes
				}
				desc = north_atlantic.0252.desc.greenland_western_settlement
			}
			triggered_desc = {
				trigger = {
					scope:vinland = yes
				}
				desc = north_atlantic.0252.desc.vinland
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:actor = {
						is_close_or_extended_family_of = scope:recipient
					}
				}
				desc = north_atlantic.0252.desc.family
			}
			desc = north_atlantic.0252.desc.courtier
		}
	}
	sender = scope:recipient
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					scope:greenland_eastern_settlement = yes
				}				
				change_global_variable = {
					name = RICE_greenland_networks
					add = scope:actor.var:RICE_send_courtier_global_resource_increase
				}
			}
			else_if = {
				limit = {
					scope:greenland_western_settlement = yes
				}				
				change_global_variable = {
					name = RICE_greenland_resilience
					add = scope:actor.var:RICE_send_courtier_global_resource_increase
				}
			}
			else_if = {
				limit = {
					scope:vinland = yes
				}				
				change_global_variable = {
					name = RICE_vinland_viability
					add = scope:actor.var:RICE_send_courtier_global_resource_increase
				}
			}
		}
		show_as_tooltip = {
			if = {
				limit = {
					scope:greenland_eastern_settlement = yes
				}
				remove_short_term_gold = RICE_greenland_exile_gold_cost
				if = {
					limit = {
						is_close_or_extended_family_of = scope:recipient
						#dynasty = scope:recipient.dynasty
					}
					add_prestige = RICE_greenland_exile_family_prestige_gain
					if = {
						limit = {
							exists = dynasty
						}
						dynasty = {
							add_dynasty_prestige = 25
						}
					}
				}
				else = {
					add_prestige = RICE_greenland_exile_prestige_gain
				}
				if = {
					limit = {
						exists = struggle:RICE_greenland_struggle
					}
					if = {
						limit = {
							is_close_or_extended_family_of = scope:recipient
							#dynasty = scope:recipient.dynasty
						}
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_send_family_to_greenland
								character = scope:actor
							}
						}
					}
					else = {
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_send_courtier_to_greenland
								character = scope:actor
							}
						}
					}
				}
				custom_tooltip = RICE_north_atlantic_send_americas_death_happened_greenland
				if = {
					limit = {
						is_close_or_extended_family_of = scope:recipient
					}
					custom_tooltip = RICE_north_atlantic_send_greenland_close_family
				}
			}
			# Western Settlement
			else_if = {
				limit = {
					scope:greenland_western_settlement = yes
				}
				remove_short_term_gold = RICE_greenland_exile_gold_cost
				if = {
					limit = {
						is_close_or_extended_family_of = scope:recipient
						#dynasty = scope:recipient.dynasty
					}
					add_prestige = RICE_greenland_exile_family_prestige_gain
					if = {
						limit = {
							exists = dynasty
						}
						dynasty = {
							add_dynasty_prestige = 25
						}
					}
				}
				else = {
					add_prestige = RICE_greenland_exile_prestige_gain
				}
				if = {
					limit = {
						exists = struggle:RICE_greenland_struggle
					}
					if = {
						limit = {
							is_close_or_extended_family_of = scope:recipient
							#dynasty = scope:recipient.dynasty
						}
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_send_family_to_greenland
								character = scope:actor
							}
						}
					}
					else = {
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_send_courtier_to_greenland
								character = scope:actor
							}
						}
					}
				}
				custom_tooltip = RICE_north_atlantic_send_americas_death_happened_greenland
				if = {
					limit = {
						is_close_or_extended_family_of = scope:recipient
					}
					custom_tooltip = RICE_north_atlantic_send_greenland_close_family
				}
			}
			# Vinland
			else_if = {
				limit = {
					scope:vinland = yes
				}
				remove_short_term_gold = RICE_vinland_exile_gold_cost
				if = {
					limit = {
						is_close_or_extended_family_of = scope:recipient
						#dynasty = scope:recipient.dynasty
					}
					add_prestige = RICE_greenland_exile_family_prestige_gain
					if = {
						limit = {
							exists = dynasty
						}
						dynasty = {
							add_dynasty_prestige = 25
						}
					}
				}
				else = {
					add_prestige = RICE_greenland_exile_prestige_gain
				}
				if = {
					limit = {
						exists = struggle:RICE_greenland_struggle
					}
					if = {
						limit = {
							is_close_or_extended_family_of = scope:recipient
							#dynasty = scope:recipient.dynasty
						}
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_send_family_to_vinland
								character = scope:actor
							}
						}
					}
					else = {
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_send_courtier_to_vinland
								character = scope:actor
							}
						}
					}
				}
				custom_tooltip = RICE_north_atlantic_send_americas_death_happened_vinland
				if = {
					limit = {
						is_close_or_extended_family_of = scope:recipient
					}
					custom_tooltip = RICE_north_atlantic_send_greenland_close_family
				}
			}				
		}
	}

	option = { # Great
		name = north_atlantic.0252.a
		if = {
			limit = {
				scope:greenland_eastern_settlement = yes
			}
			custom_tooltip = RICE_north_atlantic_send_americas_networks_change
		}
		else_if = {
			limit = {
				scope:greenland_western_settlement = yes
			}
			custom_tooltip = RICE_north_atlantic_send_americas_resilience_change
		}
		else_if = {
			limit = {
				scope:vinland = yes
			}
			custom_tooltip = RICE_north_atlantic_send_americas_viability_change
		}
	}
}


# Refuse offer
north_atlantic.0253 = {
	type = letter_event
	opening = {
		desc = north_atlantic.0253.opening
	}
	desc = {
		desc = north_atlantic.0253.desc
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:greenland_eastern_settlement = yes
				}
				desc = north_atlantic.0253.desc.greenland_eastern_settlement
			}
			triggered_desc = {
				trigger = {
					scope:greenland_western_settlement = yes
				}
				desc = north_atlantic.0253.desc.greenland_western_settlement
			}
			triggered_desc = {
				trigger = {
					scope:vinland = yes
				}
				desc = north_atlantic.0253.desc.vinland
			}
		}
		first_valid = {
			triggered_desc = {
				trigger = {
					scope:actor = {
						is_close_or_extended_family_of = scope:recipient
					}
				}
				desc = north_atlantic.0253.desc.family
			}
			desc = north_atlantic.0253.desc.courtier
		}
	}
	sender = scope:recipient

	immediate = {
		show_as_tooltip = {
			if = {
				limit = {
					exists = struggle:RICE_greenland_struggle
				}
				if = {
					limit = {
						OR = {
							scope:greenland_eastern_settlement = yes
							scope:greenland_western_settlement = yes
						}
					}
					if = {
						limit = {
							is_close_or_extended_family_of = scope:recipient
							#dynasty = scope:recipient.dynasty
						}
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_failed_send_family_to_greenland
								character = scope:actor
							}
						}
					}
					else = {
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_failed_send_courtier_to_greenland
								character = scope:actor
							}
						}
					}
				}
				else_if = {
					limit = {
						scope:vinland = yes
					}
					if = {
						limit = {
							is_close_or_extended_family_of = scope:recipient
							#dynasty = scope:recipient.dynasty
						}
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_failed_send_family_to_vinland
								character = scope:actor
							}
						}
					}
					else = {
						struggle:RICE_greenland_struggle = {
							activate_struggle_catalyst = {
								catalyst = catalyst_RICE_failed_send_courtier_to_vinland
								character = scope:actor
							}
						}
					}
				}
			}
			scope:recipient = {
				add_opinion = {
					target = scope:actor
					modifier = RICE_north_atlantic_tried_send_west
				}
			}			
		}
	}

	option = { # Oh no
		name = north_atlantic.0253.a
	}
}


